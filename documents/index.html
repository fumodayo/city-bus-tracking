<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.css' rel='stylesheet' />
  <title>Document</title>
</head>

<body>
  <div>Hello</div>
</body>
<script>
  /**
   * Get data in txt file
   * */

  //   let str = `
  // 1. Bến xe buýt Đại học Việt Hàn,
  // 15.974022216394241, 108.25452232447924,
  // 2. Tổ 24 Đông Trà Trần Đại Nghĩa,
  // 15.982128086847377, 108.25601409264209,
  // 3. E144 Trần Đại Nghĩa,
  // 15.982134521508199, 108.25601555517423,
  // 4. Sân tập lái ô tô đường Trần Đại Nghĩa,
  // 15.989020788561273, 108.25755685860983,
  // 6. 527 Lê Văn Hiến,
  // 16.00160530322441, 108.2598358826321,
  // 7. 509 Lê Văn Hiến,
  // 16.002526668270605, 108.25980398561187,
  // 8. 415 Lê Văn Hiến,
  // 16.006366877017168, 108.25929677344821,
  // 9. 307 Lê Văn Hiến,
  // 16.010303979794397, 108.25730216701777,
  // 10. 127 Lê Văn Hiến,
  // 16.022860356737205, 108.25104161718339,
  // 11. Doanh trại quân đội đường Lê Văn Hiến,
  // 16.033630924778116, 108.24558233887281,
  // 12. 61 Lê Văn Hiến,
  // 16.03363255173983, 108.2455846530745,
  // 13. 175 Ngũ Hành Sơn,
  // 16.039267980391422, 108.24269273776413,
  // 14. 133 Ngũ Hành Sơn,
  // 16.042832723761766, 108.24081970838753,
  // 16. Đại học Kinh Tế,
  // 16.047831351519566, 108.23864826341214,
  // 17. 29 Ngũ Hành Sơn,
  // 16.051795385002077, 108.2374687610848,
  // 18. 1093 Ngô Quyền,
  // 16.056546596467292, 108.23596967118698,
  // 19. 1041 Ngô Quyền,
  // 16.059080611091073, 108.23521413301363,
  // 20. Cầu Rồng (số lẽ đường Võ Văn Kiệt),
  // 16.061547643585026, 108.23337367661787,
  // 21. Bến chợ Hàn,
  // 16.068023245407986, 108.22505952774726,
  // 22. Đối diện 59 Hùng Vương,
  // 16.06851859096782, 108.21974747888261,
  // 23. 192 Hùng Vương,
  // 16.068016981544414, 108.21741182319265,
  // 24. Chợ Cồn,
  // 16.06747745758302, 108.21463722946298,
  // 25. 10 Lý Thái Tổ,
  // 16.066550421874894, 108.20997834512136,
  // 26. 130 Lý Thái Tổ,
  // 16.066230361801473, 108.20739171149656,
  // 27. Siêu thị Nguyễn Kim,
  // 16.066440031526586, 108.20344655109668,
  // 28. 130 Điện Biên Phủ,
  // 16.065790588557025, 108.19934642887499,
  // 29. 336 Dien Bien Phu,
  // 16.066008524369792, 108.19298386072211,
  // 30. 416 Điện Biên Phủ,
  // 16.06603870641431, 108.18939272362793,
  // 31. 570 Điện Biên Phủ,
  // 16.06564047162372, 108.18418540896684,
  // 32. 128 Tôn Đức Thắng,
  // 16.059094783578992, 108.17443186308077,
  // 33. 210 Tôn Đức Thắng,
  // 16.056918657023267, 108.17140503578477,
  // 34. 294 Tôn Đức Thắng,
  // 16.056472157983634, 108.16828799015995,
  // 35. 422 Tôn Đức Thắng,
  // 16.0604808300658, 108.16259227747018,
  // 36. 552 Tôn Đức Thắng,
  // 16.06296035431722, 108.1588978340965,
  // 37. 640 Tôn Đức Thắng,
  // 16.064640588035267, 108.15641694044808,
  // 38. 758 Tôn Đức Thắng,
  // 16.06686431208779, 108.15311494705684,
  // 39. 806 Tôn Đức Thắng,
  // 16.06856784996234, 108.15191053145458,
  // 40. 50 Nguyễn Lương Bằng,
  // 16.072703094968304, 108.1502324692913,
  // 41. 138 Nguyễn Lương,
  // 16.076877264440945, 108.14853636339204,
  // 42. 234 Nguyễn Lương Bằng,
  // 16.08073493405139, 108.14693498683692,
  // 43. 290 Nguyễn Lương Bằng,
  // 16.082993153100066, 108.14601475919088,
  // 44. 396 Nguyễn Lương Bằng,
  // 16.087288466292577, 108.14414723834219,
  // 45. 438 Nguyễn Lương Bằng,
  // 16.090352775241932, 108.14296086642372,
  // 46. 546 Nguyễn Lương Bằng,
  // 16.100182516489177, 108.1353780100409,
  // 47. 636 Nguyễn Lương Bằng,
  // 16.105166546800323, 108.13289700411802,
  // 48. 788 Nguyễn Lương Bằng,
  // 16.110726592257993, 108.12971616629946,
  // 49. 922 Nguyễn Lương Bằng,
  // 16.114912963638453, 108.12690586319908,
  // 50. 52 Nguyễn Văn Cừ,
  // 16.125726521072025, 108.11990593830097,
  // 51. 274 Nguyễn Văn Cừ,
  // 16.13537674376428, 108.11980751312127
  //   `
  //   str = str.replace(/(\r\n|\n|\r)/gm, "").trim()
  //   let arr2str = str.split(',');

  //   let b = []
  //   let c = []
  //   const getArr = () => {
  //     return fetch(
  //       `https://api.mapbox.com/directions/v5/mapbox/driving/${arr2str[2]},${arr2str[1]};${arr2str[5]},${arr2str[4]}?steps=true&geometries=geojson&access_token=pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA`,
  //       { method: 'GET' }
  //     ).then(res => res.json())
  //       .then(function (data) {
  //         let route = data.routes[0].geometry.coordinates;
  //         c = route
  //         b = [...b, c]
  //         console.log(b)
  //       })
  //   }

  //   setInterval(() => {
  //     if (arr2str.length > 3) {
  //       // getArr()
  //       arr2str.splice(0, 3)
  //     }
  //   }, 3000)

  let arr = [
    {
      id: 39502269135,
      name: 'Hòa Tiến (Nghĩa trang xã Hòa Tiến)',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.1785849944503',
        lat: '15.953024841906258'
      }
    },
    {
      id: 59183290313,
      name: 'Đối diện nhà thuốc số 1 thôn Lệ Sơn Bac',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.17981572954609',
        lat: '15.959550497127543'
      }
    },
    {
      id: 50821777216,
      name: 'Đối diện khu vực gần kiệt 12 thôn Lệ Sơn Bắc',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.17937971106028',
        lat: '15.96281073928896'
      }
    },
    {
      id: 65235173933,
      name: 'Đối Diện Trường Trung Học Số 2 Hòa Tiến',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.18159780648445',
        lat: '15.968515596310892'
      }
    },
    {
      id: 45182862034,
      name: 'Hòa Tiến (Trụ điện CS 44 238)',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.18649664631646',
        lat: '15.981324255982063'
      }
    },
    {
      id: 23573396196,
      name: 'Café Relax',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.19226468002928',
        lat: '15.99522894515921'
      }
    },
    {
      id: 10442517034,
      name: 'Trung tâm GDTX Số 3-Trường Chỉnh',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.19115160965633',
        lat: '16.00482826753445'
      }
    },
    {
      id: 46631063044,
      name: 'Trụ điện 25-2 Trường Chinh',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.19281791224451',
        lat: '16.009067227563087'
      }
    },
    {
      id: 65740096867,
      name: '417 đường CMT 8',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.19794941445075',
        lat: '16.013771323427193'
      }
    },
    {
      id: 72946597275,
      name: 'Công an Q.Cẩm Lệ/294-296 đường CMT8',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.20370568053289',
        lat: '16.016533502551955'
      }
    },
    {
      id: 30746043510,
      name: 'THPT Hòa Vang-Ông Ích Đường',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.20344151529726',
        lat: '16.019777704709146'
      }
    },
    {
      id: 71805043217,
      name: '117 Lê Đại Hành',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.20414181640025',
        lat: '16.02318930225438'
      }
    },
    {
      id: 76585981816,
      name: 'Đối diện 60 Lê Đại Hành',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.20705440180673',
        lat: '16.023983349301385'
      }
    },
    {
      id: 43959961846,
      name: 'Đối diện Viettronimex-Nguyễn Hữu Thọ',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.20881673369276',
        lat: '16.02975116638614'
      }
    },
    {
      id: 26714586206,
      name: '513-515 Nguyễn Hữu Thọ',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.20918073473719',
        lat: '16.03289697574084'
      }
    },
    {
      id: 25813586770,
      name: 'Bệnh viện Vinmex/325-327 Nguyễn Hữu Thọ',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.21033251457489',
        lat: '16.03779095377293'
      }
    },
    {
      id: 24990088647,
      name: 'Trụ CS20 Đường 30/4',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.21468337710034',
        lat: '16.03983428608088'
      }
    },
    {
      id: 66251272726,
      name: 'Nút giao Lê Thanh Nghị - đường 30/4',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.21830219164812',
        lat: '16.040287936821386'
      }
    },
    {
      id: 13405869733,
      name: '255-257 Núi Thành',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.22146472827737',
        lat: '16.043814069232823'
      }
    },
    {
      id: 31966810005,
      name: 'Nha hang Phi LO-đối diện 200-202 Đường 2/9',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.22263263175323',
        lat: '16.047694302125862'
      }
    },
    {
      id: 44267836766,
      name: 'Đối diện 154 Đường 2/9',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.22265081850765',
        lat: '16.04770255031273'
      }
    },
    {
      id: 68629737419,
      name: 'Công viên Apec-Đối diện 22 Đường 2/9',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.22306927843742',
        lat: '16.058478413344766'
      }
    },
    {
      id: 34148814047,
      name: 'Công viên Nguyễn Văn Linh-Đối diện 31 NVL',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.22117175660793',
        lat: '16.061029768670707'
      }
    },
    {
      id: 43087418776,
      name: 'Chùa Phước Ninh',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.21783788102859',
        lat: '16.06095194321419'
      }
    },
    {
      id: 86368011311,
      name: '415-417 Ông Ích Khiêm',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.21583759948186',
        lat: '16.062898640496833'
      }
    },
    {
      id: 50628616350,
      name: 'Xí nghiệp cấp nước-295-297 Ông Ích Khiêm',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.214410263921',
        lat: '16.066160907311897'
      }
    },
    {
      id: 16717795879,
      name: 'Chợ Cồn',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.21396493740754',
        lat: '16.06802467172978'
      }
    },
    {
      id: 79829950838,
      name: '301 Đống Đa',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.21350074037333',
        lat: '16.072845950841625'
      }
    },
    {
      id: 7791359401,
      name: '251-253 Đống Đa',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.21497894044268',
        lat: '16.075032656747055'
      }
    },
    {
      id: 52872741819,
      name: '163-165 Đống Đa',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.21664201807722',
        lat: '16.077585498881337'
      }
    },
    {
      id: 84047252630,
      name: '75 Đống Đa',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.21839618274556',
        lat: '16.080214328808108'
      }
    },
    {
      id: 66602540268,
      name: 'Đối diện 22 Đống Đa',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.22067333992871',
        lat: '16.082281149450832'
      }
    },
    {
      id: 17287841895,
      name: 'Cảng Sông Hàn',
      nameLocationBusRoute: 'R4A',
      location: {
        lng: '108.22371496489367',
        lat: '16.082605881476137'
      }
    }
  ]


  const arr2 = arr.map(i => {
    let ag = i.location.lng
    let bg = i.location.lat
    return [ag, bg]
  })

  let b = []
  let c = []
  const getArr = () => {
    return fetch(
      `https://api.mapbox.com/directions/v5/mapbox/driving/${arr2[0][0]},${arr2[0][1]};${arr2[1][0]},${arr2[1][1]}?steps=true&geometries=geojson&access_token=pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA`,
      { method: 'GET' }
    ).then(res => res.json())
      .then(function (data) {
        let route = data.routes[0].geometry.coordinates;
        c = route
        b = [...b, c]
        console.log(b.flat(1))
      })
  }

  setInterval(() => {
    if (arr2.length >= 2) {
      // getArr();
      arr2.shift();
    }
  }, 1000)


//   let str = `
//   Hòa Tiến (Nghĩa trang xã Hòa Tiến),15.953024841906258, 108.1785849944503,
// Đối diện nhà thuốc số 1 thôn Lệ Sơn Bac,15.959550497127543, 108.17981572954609,
// Đối diện khu vực gần kiệt 12 thôn Lệ Sơn Bắc,15.96281073928896, 108.17937971106028,
// Đối Diện Trường Trung Học Số 2 Hòa Tiến,15.968515596310892, 108.18159780648445,
// Hòa Tiến (Trụ điện CS 44 238),15.981324255982063, 108.18649664631646,
// Café Relax,15.99522894515921, 108.19226468002928,
// Trung tâm GDTX Số 3-Trường Chỉnh,16.00482826753445, 108.19115160965633,
// Trụ điện 25-2 Trường Chinh,16.009067227563087, 108.19281791224451,
// 417 đường CMT 8,16.013771323427193, 108.19794941445075,
// Công an Q.Cẩm Lệ/294-296 đường CMT8,16.016533502551955, 108.20370568053289,
// THPT Hòa Vang-Ông Ích Đường,16.019777704709146, 108.20344151529726,
// 117 Lê Đại Hành,16.02318930225438, 108.20414181640025,
// Đối diện 60 Lê Đại Hành,16.023983349301385, 108.20705440180673,
// Đối diện Viettronimex-Nguyễn Hữu Thọ,16.02975116638614, 108.20881673369276,
// 513-515 Nguyễn Hữu Thọ,16.03289697574084, 108.20918073473719,
// Bệnh viện Vinmex/325-327 Nguyễn Hữu Thọ,16.03779095377293, 108.21033251457489,
// Trụ CS20 Đường 30/4,16.03983428608088, 108.21468337710034,
// Nút giao Lê Thanh Nghị - đường 30/4,16.040287936821386, 108.21830219164812,
// 255-257 Núi Thành,16.043814069232823, 108.22146472827737,
// Nha hang Phi LO-đối diện 200-202 Đường 2/9,16.047694302125862, 108.22263263175323,
// Đối diện 154 Đường 2/9,16.04770255031273, 108.22265081850765,
// Công viên Apec-Đối diện 22 Đường 2/9,16.058478413344766, 108.22306927843742,
// Công viên Nguyễn Văn Linh-Đối diện 31 NVL,16.061029768670707, 108.22117175660793,
// Chùa Phước Ninh,16.06095194321419, 108.21783788102859,
// 415-417 Ông Ích Khiêm,16.062898640496833, 108.21583759948186,
// Xí nghiệp cấp nước-295-297 Ông Ích Khiêm,16.066160907311897, 108.214410263921,
// Chợ Cồn,16.06802467172978, 108.21396493740754,
// 301 Đống Đa,16.072845950841625, 108.21350074037333,
// 251-253 Đống Đa,16.075032656747055, 108.21497894044268,
// 163-165 Đống Đa,16.077585498881337, 108.21664201807722,
// 75 Đống Đa,16.080214328808108, 108.21839618274556,
// Đối diện 22 Đống Đa,16.082281149450832, 108.22067333992871,
// Cảng Sông Hàn,16.082605881476137, 108.22371496489367,`

//   str = str.replace(/(\r\n|\n|\r)/gm, "").trim()
//   let arr = str.split(',')
//   let arr2 = arr.map(i => i.trim())
//   let b = [];
//   let c = [];

//   const getArr = () => {
//     const a = {
//       id: Math.floor(Math.random() * 100000000000),
//       name: arr2[0],
//       nameLocationBusRoute: 'R4A',
//       location: {
//         lng: arr2[2],
//         lat: arr2[1]
//       }
//     }
//     return a
//   }

//   setInterval(() => {
//     if (arr2.length >= 3) {
//       getArr()
//       c = getArr()
//       b = [...b, c]
//       console.log(b)
//       arr2.splice(0, 3)
//     }
//   })

  // const str = `336 Điện Biên Phủ,thanh pho Đà Nẵng, Vietnam`
  // let b = []
  // let c = []
  // const getArr = () => {
  //   return fetch(
  //     `https://api.mapbox.com/geocoding/v5/mapbox.places/${str}.json?worldview=cn&access_token=pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDc4OTMzNzkwN2ZzM3ZueXE0NWdyNHB0In0.G_TZ_zbzQ8T7512A44nK9g`
  //   )
  //     .then(res =>{
  //       console.log(res)
  //       return res.json()
  //     }
  //     )
  //     .then(results => {
  //       b.push({
  //         ...b,
  //         longitude: results.features[0].center[0],
  //         latitude: results.features[0].center[1]
  //       })
  //     })
  // }
  // console.log('1', b)

  // getArr()

</script>

</html>