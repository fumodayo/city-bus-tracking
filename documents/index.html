<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v2.9.2/mapbox-gl.css' rel='stylesheet' />
  <title>Document</title>
</head>

<body>
  <div>Hello</div>
</body>
<script>
  /**
   * Get data in txt file
   * */

  //   let str = `
  // 1. Bến xe buýt Đại học Việt Hàn,
  // 15.974022216394241, 108.25452232447924,
  // 2. Tổ 24 Đông Trà Trần Đại Nghĩa,
  // 15.982128086847377, 108.25601409264209,
  // 3. E144 Trần Đại Nghĩa,
  // 15.982134521508199, 108.25601555517423,
  // 4. Sân tập lái ô tô đường Trần Đại Nghĩa,
  // 15.989020788561273, 108.25755685860983,
  // 6. 527 Lê Văn Hiến,
  // 16.00160530322441, 108.2598358826321,
  // 7. 509 Lê Văn Hiến,
  // 16.002526668270605, 108.25980398561187,
  // 8. 415 Lê Văn Hiến,
  // 16.006366877017168, 108.25929677344821,
  // 9. 307 Lê Văn Hiến,
  // 16.010303979794397, 108.25730216701777,
  // 10. 127 Lê Văn Hiến,
  // 16.022860356737205, 108.25104161718339,
  // 11. Doanh trại quân đội đường Lê Văn Hiến,
  // 16.033630924778116, 108.24558233887281,
  // 12. 61 Lê Văn Hiến,
  // 16.03363255173983, 108.2455846530745,
  // 13. 175 Ngũ Hành Sơn,
  // 16.039267980391422, 108.24269273776413,
  // 14. 133 Ngũ Hành Sơn,
  // 16.042832723761766, 108.24081970838753,
  // 16. Đại học Kinh Tế,
  // 16.047831351519566, 108.23864826341214,
  // 17. 29 Ngũ Hành Sơn,
  // 16.051795385002077, 108.2374687610848,
  // 18. 1093 Ngô Quyền,
  // 16.056546596467292, 108.23596967118698,
  // 19. 1041 Ngô Quyền,
  // 16.059080611091073, 108.23521413301363,
  // 20. Cầu Rồng (số lẽ đường Võ Văn Kiệt),
  // 16.061547643585026, 108.23337367661787,
  // 21. Bến chợ Hàn,
  // 16.068023245407986, 108.22505952774726,
  // 22. Đối diện 59 Hùng Vương,
  // 16.06851859096782, 108.21974747888261,
  // 23. 192 Hùng Vương,
  // 16.068016981544414, 108.21741182319265,
  // 24. Chợ Cồn,
  // 16.06747745758302, 108.21463722946298,
  // 25. 10 Lý Thái Tổ,
  // 16.066550421874894, 108.20997834512136,
  // 26. 130 Lý Thái Tổ,
  // 16.066230361801473, 108.20739171149656,
  // 27. Siêu thị Nguyễn Kim,
  // 16.066440031526586, 108.20344655109668,
  // 28. 130 Điện Biên Phủ,
  // 16.065790588557025, 108.19934642887499,
  // 29. 336 Dien Bien Phu,
  // 16.066008524369792, 108.19298386072211,
  // 30. 416 Điện Biên Phủ,
  // 16.06603870641431, 108.18939272362793,
  // 31. 570 Điện Biên Phủ,
  // 16.06564047162372, 108.18418540896684,
  // 32. 128 Tôn Đức Thắng,
  // 16.059094783578992, 108.17443186308077,
  // 33. 210 Tôn Đức Thắng,
  // 16.056918657023267, 108.17140503578477,
  // 34. 294 Tôn Đức Thắng,
  // 16.056472157983634, 108.16828799015995,
  // 35. 422 Tôn Đức Thắng,
  // 16.0604808300658, 108.16259227747018,
  // 36. 552 Tôn Đức Thắng,
  // 16.06296035431722, 108.1588978340965,
  // 37. 640 Tôn Đức Thắng,
  // 16.064640588035267, 108.15641694044808,
  // 38. 758 Tôn Đức Thắng,
  // 16.06686431208779, 108.15311494705684,
  // 39. 806 Tôn Đức Thắng,
  // 16.06856784996234, 108.15191053145458,
  // 40. 50 Nguyễn Lương Bằng,
  // 16.072703094968304, 108.1502324692913,
  // 41. 138 Nguyễn Lương,
  // 16.076877264440945, 108.14853636339204,
  // 42. 234 Nguyễn Lương Bằng,
  // 16.08073493405139, 108.14693498683692,
  // 43. 290 Nguyễn Lương Bằng,
  // 16.082993153100066, 108.14601475919088,
  // 44. 396 Nguyễn Lương Bằng,
  // 16.087288466292577, 108.14414723834219,
  // 45. 438 Nguyễn Lương Bằng,
  // 16.090352775241932, 108.14296086642372,
  // 46. 546 Nguyễn Lương Bằng,
  // 16.100182516489177, 108.1353780100409,
  // 47. 636 Nguyễn Lương Bằng,
  // 16.105166546800323, 108.13289700411802,
  // 48. 788 Nguyễn Lương Bằng,
  // 16.110726592257993, 108.12971616629946,
  // 49. 922 Nguyễn Lương Bằng,
  // 16.114912963638453, 108.12690586319908,
  // 50. 52 Nguyễn Văn Cừ,
  // 16.125726521072025, 108.11990593830097,
  // 51. 274 Nguyễn Văn Cừ,
  // 16.13537674376428, 108.11980751312127
  //   `
  //   str = str.replace(/(\r\n|\n|\r)/gm, "").trim()
  //   let arr2str = str.split(',');

  //   let b = []
  //   let c = []
  //   const getArr = () => {
  //     return fetch(
  //       `https://api.mapbox.com/directions/v5/mapbox/driving/${arr2str[2]},${arr2str[1]};${arr2str[5]},${arr2str[4]}?steps=true&geometries=geojson&access_token=pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA`,
  //       { method: 'GET' }
  //     ).then(res => res.json())
  //       .then(function (data) {
  //         let route = data.routes[0].geometry.coordinates;
  //         c = route
  //         b = [...b, c]
  //         console.log(b)
  //       })
  //   }

  //   setInterval(() => {
  //     if (arr2str.length > 3) {
  //       // getArr()
  //       arr2str.splice(0, 3)
  //     }
  //   }, 3000)

    let arr = [
        {
          id: 12302050934,
          name: 'Thọ Quang',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.25580184257181',
            lat: '16.102846282608617'
          }
        },
        {
          id: 22906703510,
          name: 'Đối diện bãi tắm Mân Thái',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.24940638109608',
            lat: '16.091128805759496'
          }
        },
        {
          id: 52358201690,
          name: 'Đối diện 75 Nguyễn Sáng',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.24643337007961',
            lat: '16.08689070710179'
          }
        },
        {
          id: 28080390250,
          name: 'Đối diện với Motel Hương Việt',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '109.24187887931073',
            lat: '13.77195379428213'
          }
        },
        {
          id: 58153209857,
          name: 'Trường Chính trị',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.24303110175947',
            lat: '16.079512573234176'
          }
        },
        {
          id: 73004104654,
          name: '148-150 Hồ Nghinh',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.24306801425864',
            lat: '16.07299896295162'
          }
        },
        {
          id: 57828676579,
          name: 'Đối diện Golden Light Hotel',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.24304008172129',
            lat: '16.068554634046123'
          }
        },
        {
          id: 35607638666,
          name: 'Trụ điện CS49T1 đường Võ Văn Kiệt',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.23852651055692',
            lat: '16.062454898784427'
          }
        },
        {
          id: 55318060007,
          name: 'Quán nhậu Bé Hằng',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.24672009895822',
            lat: '16.065269777097893'
          }
        },
        {
          id: 75443160026,
          name: 'Đầu cầu Rồng đường Võ Văn Kiệt',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.23329346894832',
            lat: '16.062219061261505'
          }
        },
        {
          id: 9805423952,
          name: 'Công viên Nguyễn Văn Linh + Lê Đình Dương',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.22121699990872',
            lat: '16.061271666210708'
          }
        },
        {
          id: 49031956067,
          name: 'Chùa Phước Ninh',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.21828815334159',
            lat: '16.061085195929504'
          }
        },
        {
          id: 11411501923,
          name: '102-104 Nguyễn Văn Linh',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.21396275288534',
            lat: '16.060839400543106'
          }
        },
        {
          id: 23874569540,
          name: '153-155 Nguyễn Hoàng',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.21389493244605',
            lat: '16.06114218582193'
          }
        },
        {
          id: 96307260788,
          name: '293 Ông Ích Khiêm',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.21396153330342',
            lat: '16.06904272401065'
          }
        },
        {
          id: 59545139789,
          name: '239-241 Ông Ích Khiêm',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.21400160816907',
            lat: '16.069537252543135'
          }
        },
        {
          id: 37915889333,
          name: '196 Hải Phòng',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.21124889521379',
            lat: '16.07150732222067'
          }
        },
        {
          id: 38495511168,
          name: 'Ga Đà Nẵng',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.20959924964009',
            lat: '16.0717048023125'
          }
        },
        {
          id: 60943340003,
          name: '354 Hải Phòng',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.20533860816906',
            lat: '16.068100944104046'
          }
        },
        {
          id: 91858796144,
          name: '78-80 Võ Văn Tân',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.2025320351541',
            lat: '16.067122032741878'
          }
        },
        {
          id: 74504109497,
          name: '96-98 Thái Thị Bôi',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.19904278727353',
            lat: '16.068644188869797'
          }
        },
        {
          id: 32486759065,
          name: '304 -306 Thái Thi Bôi',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.1925678817213',
            lat: '16.068374782645325'
          }
        },
        {
          id: 21921815530,
          name: 'Trường Tiểu học Huỳnh Ngọc Huệ',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.19251388772965',
            lat: '16.06387596082208'
          }
        },
        {
          id: 61067471996,
          name: '238-240 Hà Huy Tập',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.1906497272138',
            lat: '16.060920570217267'
          }
        },
        {
          id: 99406080068,
          name: '145-145b Huỳnh Ngọc Huệ',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.18544909467644',
            lat: '16.06131942961838'
          }
        },
        {
          id: 8716625312,
          name: '37-39 Huỳnh Ngọc Huệ',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.1844460909749',
            lat: '16.06396744753392'
          }
        },
        {
          id: 47347092055,
          name: '128 Tôn Đức Thắng',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.176540736519',
            lat: '16.060062648905962'
          }
        },
        {
          id: 76833318550,
          name: 'Bến xe Trung Tâm Đà Nẵng',
          nameLocationBusRoute: 'R15',
          location: {
            lng: '108.17281361795985',
            lat: '16.056814766688944'
          }
        }
      ]
    
    
        const arr2 = arr.map(i=> {
           let ag = i.location.lng
           let bg = i.location.lat
           return [ag,bg]
        })

  let b = []
  let c = []
  const getArr = () => {
    return fetch(
      `https://api.mapbox.com/directions/v5/mapbox/driving/${arr2[0][0]},${arr2[0][1]};${arr2[1][0]},${arr2[1][1]}?steps=true&geometries=geojson&access_token=pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA`,
      { method: 'GET' }
    ).then(res => res.json())
      .then(function (data) {
        let route = data.routes[0].geometry.coordinates;
        c = route
        b = [...b, c]
        console.log(b.flat(1))
      })
  }

  setInterval(() => {
    if (arr2.length >= 2) {
      // getArr();
      arr2.shift();
    }
  }, 1000)
  

//   let str = `
  
//   Trường Cao Đẳng Việt Hàn Nam Kỳ Khởi Nghĩa,
// 15.977785017951515, 108.2523825106433,

//  Kế Cửa Hàng Thành Tín Hợp Trần Đại Nghĩa,
// 15.978946535249877, 108.25528311453743,
//  Đối Diện Cửa Hàng Thiên Đại Phúc Trần Đại Nghĩa,
// 15.982135221646194, 108.25601582421558,
// Vườn ươm cây xanh,
// 15.988818316410084, 108.25750440762585,
//  Sân tập lái ô tô đường Trần Đại Nghĩa,
// 15.989020788561273, 108.25755685860983,
// Chùa non nước,
// 16.003205163671204, 108.25982201584416,
// 527 Lê Văn Hiến,
// 16.00160530322441, 108.2598358826321,
// 415 Lê Văn Hiến,
// 16.006366877017168, 108.25929677344821,
// Đối Diện 384 Lê Văn Hiến,
// 16.025205351468152, 108.2499148626708,
//  307 Lê Văn Hiến,
// 16.010303979794397, 108.25730216701777,
// Đối Diện TTHC Quận Ngũ Hành Sơn Lê Văn Hiến,
// 16.01673949816027, 108.25427254912104,

//  127 Lê Văn Hiến,
// 16.022860356737205, 108.25104161718339,
// Kế 81B Lê Văn Hiến ,
// 16.029195778765065, 108.2479137141275,
//  Doanh trại quân đội đường Lê Văn Hiến,
// 16.033630924778116, 108.24558233887281,
// Số 63 Lê Văn Hiến,
// 16.033630062204228, 108.24559120365242,
//  61 Lê Văn Hiến,
// 16.03363255173983, 108.2455846530745,
// Đối Diện 48 Lê Văn Hiến ,
// 16.03639766629436, 108.24417161092119,
//  175 Ngũ Hành Sơn,
// 16.039267980391422, 108.24269273776413,
// 133 Ngũ Hành Sơn,
// 16.042832723761766, 108.24081970838753,
// Trường trung cấp nghề số 5,
// 16.046407527589263, 108.23914304654016,
// Đại học Kinh Tế,
// 16.047831351519566, 108.23864826341214,
// Đài DRT,
// 16.062225998670506, 108.22418154571895,
// Đối Diện Chợ Hàn,
// 16.068044699825915, 108.22505282365555,
//  29 Ngũ Hành Sơn,
// 16.051795385002077, 108.2374687610848,
//  1093 Ngô Quyền,
// 16.056546596467292, 108.23596967118698,
//  1041 Ngô Quyền,
// 16.059080611091073, 108.23521413301363,
//  Cầu Rồng (số lẽ đường Võ Văn Kiệt),
// 16.061547643585026, 108.23337367661787,
//  Bến chợ Hàn,
// 16.068023245407986, 108.22505952774726,
//  Đối diện 59 Hùng Vương,
// 16.06851859096782, 108.21974747888261,
//  192 Hùng Vương,
// 16.068016981544414, 108.21741182319265,
//  Chợ Cồn,
// 16.06747745758302, 108.21463722946298,
//  10 Lý Thái Tổ,
// 16.066550421874894, 108.20997834512136,
// Số 14-16 Lý Thái Tổ,
// 16.066553111656326, 108.20997698081376,
// 26. 130 Lý Thái Tổ,
// 16.066230361801473, 108.20739171149656,
//  Siêu thị Nguyễn Kim,
// 16.066440031526586, 108.20344655109668,
//  130 Điện Biên Phủ,
// 16.065790588557025, 108.19934642887499,
//  336 Dien Bien Phu,
// 16.066008524369792, 108.19298386072211,
// Số 412 Điện Biên Phủ,
// 16.066026819887053, 108.18938647677336,
//  416 Điện Biên Phủ,
// 16.06603870641431, 108.18939272362793,
//  570 Điện Biên Phủ,
// 16.06564047162372, 108.18418540896684,
//  128 Tôn Đức Thắng,
// 16.059094783578992, 108.17443186308077,
//  210 Tôn Đức Thắng,
// 16.056918657023267, 108.17140503578477,
//  294 Tôn Đức Thắng,
// 16.056472157983634, 108.16828799015995,
//  422 Tôn Đức Thắng,
// 16.0604808300658, 108.16259227747018,
//  552 Tôn Đức Thắng,
//  16.06296035431722, 108.1588978340965,
//  640 Tôn Đức Thắng,
// 16.064640588035267, 108.15641694044808,
// 758 Tôn Đức Thắng,
// 16.06686431208779, 108.15311494705684,
//  806 Tôn Đức Thắng,
// 16.06856784996234, 108.15191053145458,
// 900 Tôn Đức Thắng ,
// 16.07122222081146, 108.15080992942696,
//  50 Nguyễn Lương Bằng,
// 16.072703094968304, 108.1502324692913,
//  138 Nguyễn Lương,
// 16.076877264440945, 108.14853636339204,
//  234 Nguyễn Lương Bằng,
// 16.08073493405139, 108.14693498683692,
//  290 Nguyễn Lương Bằng,
// 16.082993153100066, 108.14601475919088,
//  396 Nguyễn Lương Bằng,
// 16.087288466292577, 108.14414723834219,
//  438 Nguyễn Lương Bằng,
// 16.090352775241932, 108.14296086642372,
//  546 Nguyễn Lương Bằng,
// 16.100182516489177, 108.1353780100409,
//  636 Nguyễn Lương Bằng,
// 16.105166546800323, 108.13289700411802,
//  788 Nguyễn Lương Bằng,
// 16.110726592257993, 108.12971616629946,
//  922 Nguyễn Lương Bằng,
// 16.114912963638453, 108.12690586319908,
//  52 Nguyễn Văn Cừ,
// 16.125726521072025, 108.11990593830097,
// Số 126 Nguyễn Văn Cừ ,
// 16.12933410894816, 108.1195137338104,
// Số 230 Nguyễn Văn Cừ ,
// 16.133090917661086, 108.1196697291987,
//  274 Nguyễn Văn Cừ,
// 16.13537674376428, 108.11980751312127,`

//   str = str.replace(/(\r\n|\n|\r)/gm, "").trim()
//   let arr = str.split(',')
//   let arr2 = arr.map(i => i.trim())
//   let b = [];
//   let c = [];

//   const getArr = () => {
//     const a = {
//       id: Math.floor(Math.random() * 100000000000),
//       name: arr2[0],
//       nameLocationBusRoute: 'R16',
//       location: {
//         lng: arr2[2],
//         lat: arr2[1]
//       }
//     }
//     return a
//   }

//   setInterval(() => {
//     if (arr2.length >= 3) {
//       getArr()
//       c = getArr()
//       b = [...b, c]
//       console.log(b)
//       arr2.splice(0, 3)
//     }
//   })

  // const str = `336 Điện Biên Phủ,thanh pho Đà Nẵng, Vietnam`
  // let b = []
  // let c = []
  // const getArr = () => {
  //   return fetch(
  //     `https://api.mapbox.com/geocoding/v5/mapbox.places/${str}.json?worldview=cn&access_token=pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDc4OTMzNzkwN2ZzM3ZueXE0NWdyNHB0In0.G_TZ_zbzQ8T7512A44nK9g`
  //   )
  //     .then(res =>{
  //       console.log(res)
  //       return res.json()
  //     }
  //     )
  //     .then(results => {
  //       b.push({
  //         ...b,
  //         longitude: results.features[0].center[0],
  //         latitude: results.features[0].center[1]
  //       })
  //     })
  // }
  // console.log('1', b)

  // getArr()

</script>

</html>