/*! For license information please see main.56f9ec34.js.LICENSE.txt */
!function(){var e={76:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,a=String.fromCharCode,o=Object.assign;function s(e){return e.trim()}function l(e,t,n){return e.replace(t,n)}function u(e,t){return e.indexOf(t)}function c(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function d(e){return e.length}function f(e){return e.length}function p(e,t){return t.push(e),e}var m=1,v=1,g=0,y=0,_=0,x="";function b(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:m,column:v,length:o,return:""}}function w(e,t){return o(b("",null,null,"",null,null,0),e,{length:-e.length},t)}function k(){return _=y>0?c(x,--y):0,v--,10===_&&(v=1,m--),_}function T(){return _=y<g?c(x,y++):0,v++,10===_&&(v=1,m++),_}function S(){return c(x,y)}function E(){return y}function C(e,t){return h(x,e,t)}function A(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(e){return m=v=1,g=d(x=e),y=0,[]}function M(e){return x="",e}function B(e){return s(C(y-1,z(91===e?e+2:40===e?e+1:e)))}function P(e){for(;(_=S())&&_<33;)T();return A(e)>2||A(_)>3?"":" "}function I(e,t){for(;--t&&T()&&!(_<48||_>102||_>57&&_<65||_>70&&_<97););return C(e,E()+(t<6&&32==S()&&32==T()))}function z(e){for(;T();)switch(_){case e:return y;case 34:case 39:34!==e&&39!==e&&z(_);break;case 40:41===e&&z(e);break;case 92:T()}return y}function L(e,t){for(;T()&&e+_!==57&&(e+_!==84||47!==S()););return"/*"+C(t,y-1)+"*"+a(47===e?e:T())}function D(e){for(;!A(S());)T();return C(e,y)}var O="-ms-",N="-moz-",F="-webkit-",j="comm",V="rule",Z="decl",U="@keyframes";function G(e,t){for(var n="",r=f(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function H(e,t,n,r){switch(e.type){case"@import":case Z:return e.return=e.return||e.value;case j:return"";case U:return e.return=e.value+"{"+G(e.children,r)+"}";case V:e.value=e.props.join(",")}return d(n=G(e.children,r))?e.return=e.value+"{"+n+"}":""}function q(e,t){switch(function(e,t){return(((t<<2^c(e,0))<<2^c(e,1))<<2^c(e,2))<<2^c(e,3)}(e,t)){case 5103:return F+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return F+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return F+e+N+e+O+e+e;case 6828:case 4268:return F+e+O+e+e;case 6165:return F+e+O+"flex-"+e+e;case 5187:return F+e+l(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return F+e+O+"flex-item-"+l(e,/flex-|-self/,"")+e;case 4675:return F+e+O+"flex-line-pack"+l(e,/align-content|flex-|-self/,"")+e;case 5548:return F+e+O+l(e,"shrink","negative")+e;case 5292:return F+e+O+l(e,"basis","preferred-size")+e;case 6060:return F+"box-"+l(e,"-grow","")+F+e+O+l(e,"grow","positive")+e;case 4554:return F+l(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return l(l(l(e,/(zoom-|grab)/,F+"$1"),/(image-set)/,F+"$1"),e,"")+e;case 5495:case 3959:return l(e,/(image-set\([^]*)/,F+"$1$`$1");case 4968:return l(l(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+F+e+e;case 4095:case 3583:case 4068:case 2532:return l(e,/(.+)-inline(.+)/,F+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(e)-1-t>6)switch(c(e,t+1)){case 109:if(45!==c(e,t+4))break;case 102:return l(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+N+(108==c(e,t+3)?"$3":"$2-$3"))+e;case 115:return~u(e,"stretch")?q(l(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==c(e,t+1))break;case 6444:switch(c(e,d(e)-3-(~u(e,"!important")&&10))){case 107:return l(e,":",":"+F)+e;case 101:return l(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+F+(45===c(e,14)?"inline-":"")+"box$3$1"+F+"$2$3$1"+O+"$2box$3")+e}break;case 5936:switch(c(e,t+11)){case 114:return F+e+O+l(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return F+e+O+l(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return F+e+O+l(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return F+e+O+e+e}return e}function W(e){return M(X("",null,null,null,[""],e=R(e),0,[0],e))}function X(e,t,n,r,i,o,s,c,h){for(var f=0,m=0,v=s,g=0,y=0,_=0,x=1,b=1,w=1,C=0,A="",R=i,M=o,z=r,O=A;b;)switch(_=C,C=T()){case 40:if(108!=_&&58==O.charCodeAt(v-1)){-1!=u(O+=l(B(C),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:O+=B(C);break;case 9:case 10:case 13:case 32:O+=P(_);break;case 92:O+=I(E()-1,7);continue;case 47:switch(S()){case 42:case 47:p(Y(L(T(),E()),t,n),h);break;default:O+="/"}break;case 123*x:c[f++]=d(O)*w;case 125*x:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+m:y>0&&d(O)-v&&p(y>32?J(O+";",r,n,v-1):J(l(O," ","")+";",r,n,v-2),h);break;case 59:O+=";";default:if(p(z=K(O,t,n,f,m,i,c,A,R=[],M=[],v),o),123===C)if(0===m)X(O,t,z,z,R,o,v,c,M);else switch(g){case 100:case 109:case 115:X(e,z,z,r&&p(K(e,z,z,0,0,i,c,A,i,R=[],v),M),i,M,v,c,r?R:M);break;default:X(O,z,z,z,[""],M,0,c,M)}}f=m=y=0,x=w=1,A=O="",v=s;break;case 58:v=1+d(O),y=_;default:if(x<1)if(123==C)--x;else if(125==C&&0==x++&&125==k())continue;switch(O+=a(C),C*x){case 38:w=m>0?1:(O+="\f",-1);break;case 44:c[f++]=(d(O)-1)*w,w=1;break;case 64:45===S()&&(O+=B(T())),g=S(),m=v=d(A=O+=D(E())),C++;break;case 45:45===_&&2==d(O)&&(x=0)}}return o}function K(e,t,n,r,a,o,u,c,d,p,m){for(var v=a-1,g=0===a?o:[""],y=f(g),_=0,x=0,w=0;_<r;++_)for(var k=0,T=h(e,v+1,v=i(x=u[_])),S=e;k<y;++k)(S=s(x>0?g[k]+" "+T:l(T,/&\f/g,g[k])))&&(d[w++]=S);return b(e,t,n,0===a?V:c,d,p,m)}function Y(e,t,n){return b(e,t,n,j,a(_),h(e,2,-2),0)}function J(e,t,n,r){return b(e,t,n,Z,h(e,0,r),h(e,r+1,-1),r)}var Q=function(e,t,n){for(var r=0,i=0;r=i,i=S(),38===r&&12===i&&(t[n]=1),!A(i);)T();return C(e,y)},$=function(e,t){return M(function(e,t){var n=-1,r=44;do{switch(A(r)){case 0:38===r&&12===S()&&(t[n]=1),e[n]+=Q(y-1,t,n);break;case 2:e[n]+=B(r);break;case 4:if(44===r){e[++n]=58===S()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=a(r)}}while(r=T());return e}(R(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var i=[],a=$(t,i),o=n.props,s=0,l=0;s<a.length;s++)for(var u=0;u<o.length;u++,l++)e.props[l]=i[s]?a[s].replace(/&\f/g,o[u]):o[u]+" "+a[s]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case Z:e.return=q(e.value,e.length);break;case U:return G([w(e,{value:l(e.value,"@","@"+F)})],r);case V:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return G([w(e,{props:[l(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return G([w(e,{props:[l(t,/:(plac\w+)/,":-webkit-input-$1")]}),w(e,{props:[l(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[l(t,/:(plac\w+)/,O+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var a,o,s={},l=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;l.push(e)}));var u,c,h=[H,(c=function(e){u.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=f(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}([te,ne].concat(i,h));o=function(e,t,n,r){u=n,G(W(e?e+"{"+t.styles+"}":t.styles),d),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return p.sheet.hydrate(l),p}},9791:function(e,t,n){"use strict";var r=n(9797),i=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,r.Z)((function(e){return i.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));t.Z=a},9797:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},9886:function(e,t,n){"use strict";n.d(t,{T:function(){return s},w:function(){return o}});var r=n(2791),i=n(76),a=(n(9140),n(2561),(0,r.createContext)("undefined"!==typeof HTMLElement?(0,i.Z)({key:"css"}):null));a.Provider;var o=function(e){return(0,r.forwardRef)((function(t,n){var i=(0,r.useContext)(a);return e(t,i,n)}))},s=(0,r.createContext)({})},9140:function(e,t,n){"use strict";n.d(t,{O:function(){return m}});var r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},a=n(9797),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,l=function(e){return 45===e.charCodeAt(1)},u=function(e){return null!=e&&"boolean"!==typeof e},c=(0,a.Z)((function(e){return l(e)?e:e.replace(o,"-$&").toLowerCase()})),h=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return f={name:t,styles:n,next:f},t}))}return 1===i[e]||l(e)||"number"!==typeof t||0===t?t:t+"px"};function d(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return f={name:n.name,styles:n.styles,next:f},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)f={name:r.name,styles:r.styles,next:f},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=d(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":u(o)&&(r+=c(a)+":"+h(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=d(e,t,o);switch(a){case"animation":case"animationName":r+=c(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var l=0;l<o.length;l++)u(o[l])&&(r+=c(a)+":"+h(a,o[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=f,a=n(e);return f=i,d(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var f,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var m=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,a="";f=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,a+=d(n,t,o)):a+=o[0];for(var s=1;s<e.length;s++)a+=d(n,t,e[s]),i&&(a+=o[s]);p.lastIndex=0;for(var l,u="";null!==(l=p.exec(a));)u+="-"+l[1];return{name:r(a)+u,styles:a,next:f}}},2561:function(e,t,n){"use strict";var r;n.d(t,{L:function(){return o},j:function(){return s}});var i=n(2791),a=!!(r||(r=n.t(i,2))).useInsertionEffect&&(r||(r=n.t(i,2))).useInsertionEffect,o=a||function(e){return e()},s=a||i.useLayoutEffect},5438:function(e,t,n){"use strict";n.d(t,{My:function(){return a},fp:function(){return r},hC:function(){return i}});function r(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var i=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},a=function(e,t,n){i(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0);a=a.next}while(void 0!==a)}}},4829:function(e){function t(e){if(e=Object.assign({},e),!(this instanceof t))throw new Error("MapboxLanguage needs to be called with the new keyword");this.setLanguage=this.setLanguage.bind(this),this._initialStyleUpdate=this._initialStyleUpdate.bind(this),this._defaultLanguage=e.defaultLanguage,this._isLanguageField=e.languageField||/^name_/,this._getLanguageField=e.getLanguageField||function(e){return"mul"===e?"name":"name_".concat(e)},this._languageSource=e.languageSource||null,this._languageTransform=e.languageTransform,this._excludedLayerIds=e.excludedLayerIds||[],this.supportedLanguages=e.supportedLanguages||["ar","de","en","es","fr","it","ja","ko","mul","pt","ru","vi","zh-Hans","zh-Hant"]}var n=/^\{name/;function r(e,t){var r=Array.isArray(t)&&"get"===t[0];return r&&n.test(t[1])&&console.warn("This plugin no longer supports the use of token syntax (e.g. {name}). Please use a get expression. See https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/ for more details."),r&&e.test(t[1])}function i(e,t,n){if(Array.isArray(t))for(var a=1;a<t.length;a++)Array.isArray(t[a])&&(r(e,t[a])&&(t[a][1]=n),i(e,t[a],n))}function a(e,t,n){if(r(e,t)&&(t[1]=n),i(e,t,n),"get"===t[0]&&"name"===t[1]){var a=t.slice();t=["coalesce",["get",n],a]}return t}t.prototype.setLanguage=function(e,t){if(this.supportedLanguages.indexOf(t)<0)throw new Error("Language ".concat(t," is not supported"));var n=this._languageSource||function(e){var t=Object.keys(e.sources).filter((function(t){var n=e.sources[t].url;return n&&n.indexOf("mapbox.mapbox-streets-v8")>-1||/mapbox-streets-v[1-9][1-9]/.test(n)}));if(!t.length)throw new Error('If using MapboxLanguage with a Mapbox style, the style must be based on vector tile version 8, e.g. "streets-v11"');return t[0]}(e);if(!n)return e;var r=this._getLanguageField(t),i=this._isLanguageField,o=this._excludedLayerIds,s=e.layers.map((function(e){return e.source===n?function(e,t,n,r){return t.layout&&t.layout["text-field"]&&-1===r.indexOf(t.id)?Object.assign({},t,{layout:Object.assign({},t.layout,{"text-field":a(e,t.layout["text-field"],n)})}):t}(i,e,r,o):e})),l=Object.assign({},e,{layers:s});return this._languageTransform?this._languageTransform(l,t):l},t.prototype._initialStyleUpdate=function(){var e=this._map.getStyle(),t=this._defaultLanguage||function(e){var t=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage,n=t&&t.split("-"),r=t;n.length>1&&(r=n[0]);if(e.indexOf(r)>-1)return r;return null}(this.supportedLanguages);this._map.setStyle(this.setLanguage(e,t))},t.prototype.onAdd=function(e){return this._map=e,this._map.on("style.load",this._initialStyleUpdate),this._container=document.createElement("div"),this._container},t.prototype.onRemove=function(){this._map.off("style.load",this._initialStyleUpdate),this._map=void 0},"undefined"!==typeof e.exports?e.exports=t:window.MapboxLanguage=t},1283:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M17 5H3c-1.1 0-2 .89-2 2v9h2c0 1.65 1.34 3 3 3s3-1.35 3-3h5.5c0 1.65 1.34 3 3 3s3-1.35 3-3H23v-5l-6-6zM3 11V7h4v4H3zm3 6.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm7-6.5H9V7h4v4zm4.5 6.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM15 11V7h1l4 4h-5z"}),"AirportShuttle");t.Z=o},4823:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"m14 7-5 5 5 5V7z"}),"ArrowLeftOutlined");t.Z=o},6049:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"m10 17 5-5-5-5v10z"}),"ArrowRightOutlined");t.Z=o},7670:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M4 16c0 .88.39 1.67 1 2.22V20c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h8v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1.78c.61-.55 1-1.34 1-2.22V6c0-3.5-3.58-4-8-4s-8 .5-8 4v10zm3.5 1c-.83 0-1.5-.67-1.5-1.5S6.67 14 7.5 14s1.5.67 1.5 1.5S8.33 17 7.5 17zm9 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm1.5-6H6V6h12v5z"}),"DirectionsBus");t.Z=o},5146:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline");t.Z=o},79:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10 10-4.49 10-10S17.51 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3-8c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3z"}),"ModeStandby");t.Z=o},8078:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm.88 15.76V19h-1.75v-1.29c-.74-.18-2.39-.77-3.02-2.96l1.65-.67c.06.22.58 2.09 2.4 2.09.93 0 1.98-.48 1.98-1.61 0-.96-.7-1.46-2.28-2.03-1.1-.39-3.35-1.03-3.35-3.31 0-.1.01-2.4 2.62-2.96V5h1.75v1.24c1.84.32 2.51 1.79 2.66 2.23l-1.58.67c-.11-.35-.59-1.34-1.9-1.34-.7 0-1.81.37-1.81 1.39 0 .95.86 1.31 2.64 1.9 2.4.83 3.01 2.05 3.01 3.45 0 2.63-2.5 3.13-3.02 3.22z"}),"Paid");t.Z=o},6822:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M11 6.83 9.41 8.41 8 7l4-4 4 4-1.41 1.41L13 6.83V21h-2z"}),"Straight");t.Z=o},8096:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"m6.83 11 1.59 1.59L7 14l-4-4 4-4 1.41 1.41L6.83 9H15c1.1 0 2 .9 2 2v9h-2v-9H6.83z"}),"TurnLeft");t.Z=o},1990:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"m17.17 11-1.59 1.59L17 14l4-4-4-4-1.41 1.41L17.17 9H9c-1.1 0-2 .9-2 2v9h2v-9h8.17z"}),"TurnRight");t.Z=o},5649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(3311)},4360:function(e,t,n){"use strict";n.d(t,{Z:function(){return F}});var r=n(7462),i=n(3366),a=n(6189),o=n(2466),s=n(5080),l=n(4942);function u(e,t){var n;return(0,r.Z)({toolbar:(n={minHeight:56},(0,l.Z)(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,l.Z)(n,e.up("sm"),{minHeight:64}),n)},t)}var c=n(2065),h={black:"#000",white:"#fff"},d={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},f={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},m={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},v={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},g={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},y={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},_=["mode","contrastThreshold","tonalOffset"],x={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h.white,default:h.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},b={text:{primary:h.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:h.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,c.$n)(e.main,i):"dark"===t&&(e.dark=(0,c._j)(e.main,a)))}function k(e){var t=e.mode,n=void 0===t?"light":t,s=e.contrastThreshold,l=void 0===s?3:s,u=e.tonalOffset,k=void 0===u?.2:u,T=(0,i.Z)(e,_),S=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[200],light:v[50],dark:v[400]}:{main:v[700],light:v[400],dark:v[800]}}(n),E=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:f[200],light:f[50],dark:f[400]}:{main:f[500],light:f[300],dark:f[700]}}(n),C=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[500],light:p[300],dark:p[700]}:{main:p[700],light:p[400],dark:p[800]}}(n),A=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:g[700],light:g[500],dark:g[900]}}(n),R=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[400],light:y[300],dark:y[700]}:{main:y[800],light:y[500],dark:y[900]}}(n),M=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:"#ed6c02",light:m[500],dark:m[900]}}(n);function B(e){return(0,c.mi)(e,b.text.primary)>=l?b.text.primary:x.text.primary}var P=function(e){var t=e.color,n=e.name,i=e.mainShade,o=void 0===i?500:i,s=e.lightShade,l=void 0===s?300:s,u=e.darkShade,c=void 0===u?700:u;if(!(t=(0,r.Z)({},t)).main&&t[o]&&(t.main=t[o]),!t.hasOwnProperty("main"))throw new Error((0,a.Z)(11,n?" (".concat(n,")"):"",o));if("string"!==typeof t.main)throw new Error((0,a.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return w(t,"light",l,k),w(t,"dark",c,k),t.contrastText||(t.contrastText=B(t.main)),t},I={dark:b,light:x};return(0,o.Z)((0,r.Z)({common:(0,r.Z)({},h),mode:n,primary:P({color:S,name:"primary"}),secondary:P({color:E,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:C,name:"error"}),warning:P({color:M,name:"warning"}),info:P({color:A,name:"info"}),success:P({color:R,name:"success"}),grey:d,contrastThreshold:l,getContrastText:B,augmentColor:P,tonalOffset:k},I[n]),T)}var T=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var S={textTransform:"uppercase"},E='"Roboto", "Helvetica", "Arial", sans-serif';function C(e,t){var n="function"===typeof t?t(e):t,a=n.fontFamily,s=void 0===a?E:a,l=n.fontSize,u=void 0===l?14:l,c=n.fontWeightLight,h=void 0===c?300:c,d=n.fontWeightRegular,f=void 0===d?400:d,p=n.fontWeightMedium,m=void 0===p?500:p,v=n.fontWeightBold,g=void 0===v?700:v,y=n.htmlFontSize,_=void 0===y?16:y,x=n.allVariants,b=n.pxToRem,w=(0,i.Z)(n,T);var k=u/14,C=b||function(e){return"".concat(e/_*k,"rem")},A=function(e,t,n,i,a){return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:C(t),lineHeight:n},s===E?{letterSpacing:"".concat((o=i/t,Math.round(1e5*o)/1e5),"em")}:{},a,x);var o},R={h1:A(h,96,1.167,-1.5),h2:A(h,60,1.2,-.5),h3:A(f,48,1.167,0),h4:A(f,34,1.235,.25),h5:A(f,24,1.334,0),h6:A(m,20,1.6,.15),subtitle1:A(f,16,1.75,.15),subtitle2:A(m,14,1.57,.1),body1:A(f,16,1.5,.15),body2:A(f,14,1.43,.15),button:A(m,14,1.75,.4,S),caption:A(f,12,1.66,.4),overline:A(f,12,2.66,1,S)};return(0,o.Z)((0,r.Z)({htmlFontSize:_,pxToRem:C,fontFamily:s,fontSize:u,fontWeightLight:h,fontWeightRegular:f,fontWeightMedium:m,fontWeightBold:g},R),w,{clone:!1})}function A(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var R=["none",A(0,2,1,-1,0,1,1,0,0,1,3,0),A(0,3,1,-2,0,2,2,0,0,1,5,0),A(0,3,3,-2,0,3,4,0,0,1,8,0),A(0,2,4,-1,0,4,5,0,0,1,10,0),A(0,3,5,-1,0,5,8,0,0,1,14,0),A(0,3,5,-1,0,6,10,0,0,1,18,0),A(0,4,5,-2,0,7,10,1,0,2,16,1),A(0,5,5,-3,0,8,10,1,0,3,14,2),A(0,5,6,-3,0,9,12,1,0,3,16,2),A(0,6,6,-3,0,10,14,1,0,4,18,3),A(0,6,7,-4,0,11,15,1,0,4,20,3),A(0,7,8,-4,0,12,17,2,0,5,22,4),A(0,7,8,-4,0,13,19,2,0,5,24,4),A(0,7,9,-4,0,14,21,2,0,5,26,4),A(0,8,9,-5,0,15,22,2,0,6,28,5),A(0,8,10,-5,0,16,24,2,0,6,30,5),A(0,8,11,-5,0,17,26,2,0,6,32,5),A(0,9,11,-5,0,18,28,2,0,7,34,6),A(0,9,12,-6,0,19,29,2,0,7,36,6),A(0,10,13,-6,0,20,31,3,0,8,38,7),A(0,10,13,-6,0,21,33,3,0,8,40,7),A(0,10,14,-6,0,22,35,3,0,8,42,7),A(0,11,14,-7,0,23,36,3,0,9,44,8),A(0,11,15,-7,0,24,38,3,0,9,46,8)],M=["duration","easing","delay"],B={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},P={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function I(e){return"".concat(Math.round(e),"ms")}function z(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function L(e){var t=(0,r.Z)({},B,e.easing),n=(0,r.Z)({},P,e.duration);return(0,r.Z)({getAutoHeightDuration:z,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.duration,o=void 0===a?n.standard:a,s=r.easing,l=void 0===s?t.easeInOut:s,u=r.delay,c=void 0===u?0:u;(0,i.Z)(r,M);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof o?o:I(o)," ").concat(l," ").concat("string"===typeof c?c:I(c))})).join(",")}},e,{easing:t,duration:n})}var D={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},O=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,l=e.palette,c=void 0===l?{}:l,h=e.transitions,d=void 0===h?{}:h,f=e.typography,p=void 0===f?{}:f,m=(0,i.Z)(e,O);if(e.vars)throw new Error((0,a.Z)(18));var v=k(c),g=(0,s.Z)(e),y=(0,o.Z)(g,{mixins:u(g.breakpoints,n),palette:v,shadows:R.slice(),typography:C(v,p),transitions:L(d),zIndex:(0,r.Z)({},D)});y=(0,o.Z)(y,m);for(var _=arguments.length,x=new Array(_>1?_-1:0),b=1;b<_;b++)x[b-1]=arguments[b];return y=x.reduce((function(e,t){return(0,o.Z)(e,t)}),y)}var F=N},4205:function(e,t,n){"use strict";var r=(0,n(4360).Z)();t.Z=r},6863:function(e,t,n){"use strict";n.d(t,{ZP:function(){return C},FO:function(){return S}});var r=n(2982),i=n(885),a=n(3366),o=n(7462),s=n(3842),l=n(5080),u=n(7312),c=["variant"];function h(e){return 0===e.length}function d(e){var t=e.variant,n=(0,a.Z)(e,c),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?h(r)?e[t]:(0,u.Z)(e[t]):"".concat(h(r)?t:(0,u.Z)(t)).concat((0,u.Z)(e[t].toString()))})),r}var f=n(104),p=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],m=["theme"],v=["theme"];function g(e){return 0===Object.keys(e).length}function y(e){return"string"===typeof e&&e.charCodeAt(0)>96}var _=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},x=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=d(e.props);r[t]=e.style})),r},b=function(e,t,n,r){var i,a,o=e.ownerState,s=void 0===o?{}:o,l=[],u=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return u&&u.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&l.push(t[d(n.props)])})),l};function w(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var k=(0,l.Z)();var T=n(4205),S=function(e){return w(e)&&"classes"!==e},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?k:t,l=e.rootShouldForwardProp,u=void 0===l?w:l,c=e.slotShouldForwardProp,h=void 0===c?w:c,d=e.styleFunctionSx,T=void 0===d?f.Z:d,S=function(e){var t=g(e.theme)?n:e.theme;return T((0,o.Z)({},e,{theme:t}))};return S.__mui_systemSx=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s.Co)(e,(function(e){return e.filter((function(e){return!(null!=e&&e.__mui_systemSx)}))}));var l,c=t.name,d=t.slot,f=t.skipVariantsResolver,k=t.skipSx,T=t.overridesResolver,E=(0,a.Z)(t,p),C=void 0!==f?f:d&&"Root"!==d||!1,A=k||!1;var R=w;"Root"===d?R=u:d?R=h:y(e)&&(R=void 0);var M=(0,s.ZP)(e,(0,o.Z)({shouldForwardProp:R,label:l},E)),B=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),l=1;l<t;l++)s[l-1]=arguments[l];var u=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=(0,a.Z)(t,m);return e((0,o.Z)({theme:g(r)?n:r},i))}:e})):[],h=e;c&&T&&u.push((function(e){var t=g(e.theme)?n:e.theme,r=_(c,t);if(r){var a={};return Object.entries(r).forEach((function(n){var r=(0,i.Z)(n,2),s=r[0],l=r[1];a[s]="function"===typeof l?l((0,o.Z)({},e,{theme:t})):l})),T(e,a)}return null})),c&&!C&&u.push((function(e){var t=g(e.theme)?n:e.theme;return b(e,x(c,t),t,c)})),A||u.push(S);var d=u.length-s.length;if(Array.isArray(e)&&d>0){var f=new Array(d).fill("");(h=[].concat((0,r.Z)(e),(0,r.Z)(f))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(f))}else"function"===typeof e&&e.__emotion_real!==e&&(h=function(t){var r=t.theme,i=(0,a.Z)(t,v);return e((0,o.Z)({theme:g(r)?n:r},i))});var p=M.apply(void 0,[h].concat((0,r.Z)(u)));return p};return M.withConfig&&(B.withConfig=M.withConfig),B}}({defaultTheme:T.Z,rootShouldForwardProp:S}),C=E},8929:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(7462);function i(e){var t=e.theme,n=e.name,i=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?function(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}(t.components[n].defaultProps,i):i}var a=n(886);var o=n(4205);function s(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme;return i({theme:(0,a.Z)(r),name:n,props:t})}({props:e.props,name:e.name,defaultTheme:o.Z})}},9853:function(e,t,n){"use strict";var r=n(7312);t.Z=r.Z},1245:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(7462),i=n(2791),a=n(3366),o=n(8182),s=n(4419),l=n(9853),u=n(8929),c=n(6863),h=n(1217);function d(e){return(0,h.Z)("MuiSvgIcon",e)}(0,n(5878).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var f=n(184),p=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],m=(0,c.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,l.Z)(n.color))],t["fontSize".concat((0,l.Z)(n.fontSize))]]}})((function(e){var t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v,g,y=e.theme,_=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=y.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(s=y.typography)||null==(l=s.pxToRem)?void 0:l.call(s,24))||"1.5rem",large:(null==(u=y.typography)||null==(c=u.pxToRem)?void 0:c.call(u,35))||"2.1875"}[_.fontSize],color:null!=(h=null==(d=(y.vars||y).palette)||null==(f=d[_.color])?void 0:f.main)?h:{action:null==(p=(y.vars||y).palette)||null==(m=p.action)?void 0:m.active,disabled:null==(v=(y.vars||y).palette)||null==(g=v.action)?void 0:g.disabled,inherit:void 0}[_.color]}})),v=i.forwardRef((function(e,t){var n=(0,u.Z)({props:e,name:"MuiSvgIcon"}),i=n.children,c=n.className,h=n.color,v=void 0===h?"inherit":h,g=n.component,y=void 0===g?"svg":g,_=n.fontSize,x=void 0===_?"medium":_,b=n.htmlColor,w=n.inheritViewBox,k=void 0!==w&&w,T=n.titleAccess,S=n.viewBox,E=void 0===S?"0 0 24 24":S,C=(0,a.Z)(n,p),A=(0,r.Z)({},n,{color:v,component:y,fontSize:x,instanceFontSize:e.fontSize,inheritViewBox:k,viewBox:E}),R={};k||(R.viewBox=E);var M=function(e){var t=e.color,n=e.fontSize,r=e.classes,i={root:["root","inherit"!==t&&"color".concat((0,l.Z)(t)),"fontSize".concat((0,l.Z)(n))]};return(0,s.Z)(i,d,r)}(A);return(0,f.jsxs)(m,(0,r.Z)({as:y,className:(0,o.Z)(M.root,c),ownerState:A,focusable:"false",color:b,"aria-hidden":!T||void 0,role:T?"img":void 0,ref:t},R,C,{children:[i,T?(0,f.jsx)("title",{children:T}):null]}))}));v.muiName="SvgIcon";var g=v;function y(e,t){var n=function(n,i){return(0,f.jsx)(g,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))};return n.muiName=g.muiName,i.memo(i.forwardRef(n))}},2977:function(e,t,n){"use strict";var r=n(3981);t.Z=r.Z},3311:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return i.Z},createChainedFunction:function(){return a},createSvgIcon:function(){return o.Z},debounce:function(){return s.Z},deprecatedPropType:function(){return l},isMuiElement:function(){return u.Z},ownerDocument:function(){return c.Z},ownerWindow:function(){return h.Z},requirePropFactory:function(){return d},setRef:function(){return f},unstable_ClassNameGenerator:function(){return S},unstable_useEnhancedEffect:function(){return p.Z},unstable_useId:function(){return _},unsupportedProp:function(){return x},useControlled:function(){return b.Z},useEventCallback:function(){return w.Z},useForkRef:function(){return k.Z},useIsFocusVisible:function(){return T.Z}});var r=n(5902),i=n(9853),a=n(8949).Z,o=n(1245),s=n(2977);var l=function(e,t){return function(){return null}},u=n(6258),c=n(5783),h=n(8195);n(7462);var d=function(e,t){return function(){return null}},f=n(2971).Z,p=n(3026),m=n(885),v=n(2791),g=0;var y=n.t(v,2).useId;var _=function(e){if(void 0!==y){var t=y();return null!=e?e:t}return function(e){var t=v.useState(e),n=(0,m.Z)(t,2),r=n[0],i=n[1],a=e||r;return v.useEffect((function(){null==r&&i("mui-".concat(g+=1))}),[r]),a}(e)};var x=function(e,t,n,r,i){return null},b=n(4938),w=n(9511),k=n(7933),T=n(2763),S={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(e)}}},6258:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2791);var i=function(e,t){return r.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}},5783:function(e,t,n){"use strict";var r=n(9723);t.Z=r.Z},8195:function(e,t,n){"use strict";var r=n(7979);t.Z=r.Z},4938:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(885),i=n(2791);var a=function(e){var t=e.controlled,n=e.default,a=(e.name,e.state,i.useRef(void 0!==t).current),o=i.useState(n),s=(0,r.Z)(o,2),l=s[0],u=s[1];return[a?t:l,i.useCallback((function(e){a||u(e)}),[])]}},3026:function(e,t,n){"use strict";var r=n(5721);t.Z=r.Z},9511:function(e,t,n){"use strict";var r=n(8956);t.Z=r.Z},7933:function(e,t,n){"use strict";var r=n(7563);t.Z=r.Z},2763:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r,i=n(2791),a=!0,o=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function l(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function u(){a=!1}function c(){"hidden"===this.visibilityState&&o&&(a=!0)}function h(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return a||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var d=function(){var e=i.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",l,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("touchstart",u,!0),t.addEventListener("visibilitychange",c,!0))}),[]),t=i.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,window.clearTimeout(r),r=window.setTimeout((function(){o=!1}),100),t.current=!1,!0)},ref:e}}},6532:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case d:case f:return e;default:switch(e=e&&e.$$typeof){case c:case u:case h:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},8457:function(e,t,n){"use strict";n(6532)},3842:function(e,t,n){"use strict";n.d(t,{ZP:function(){return y},Co:function(){return _}});var r=n(2791),i=n(7462),a=n(9791),o=n(9886),s=n(5438),l=n(9140),u=n(2561),c=a.Z,h=function(e){return"theme"!==e},d=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?c:h},f=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},p=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;(0,s.hC)(t,n,r);(0,u.L)((function(){return(0,s.My)(t,n,r)}));return null},m=function e(t,n){var a,u,c=t.__emotion_real===t,h=c&&t.__emotion_base||t;void 0!==n&&(a=n.label,u=n.target);var m=f(t,n,c),v=m||d(h),g=!v("as");return function(){var y=arguments,_=c&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==a&&_.push("label:"+a+";"),null==y[0]||void 0===y[0].raw)_.push.apply(_,y);else{0,_.push(y[0][0]);for(var x=y.length,b=1;b<x;b++)_.push(y[b],y[0][b])}var w=(0,o.w)((function(e,t,n){var i=g&&e.as||h,a="",c=[],f=e;if(null==e.theme){for(var y in f={},e)f[y]=e[y];f.theme=(0,r.useContext)(o.T)}"string"===typeof e.className?a=(0,s.fp)(t.registered,c,e.className):null!=e.className&&(a=e.className+" ");var x=(0,l.O)(_.concat(c),t.registered,f);a+=t.key+"-"+x.name,void 0!==u&&(a+=" "+u);var b=g&&void 0===m?d(i):v,w={};for(var k in e)g&&"as"===k||b(k)&&(w[k]=e[k]);return w.className=a,w.ref=n,(0,r.createElement)(r.Fragment,null,(0,r.createElement)(p,{cache:t,serialized:x,isStringTag:"string"===typeof i}),(0,r.createElement)(i,w))}));return w.displayName=void 0!==a?a:"Styled("+("string"===typeof h?h:h.displayName||h.name||"Component")+")",w.defaultProps=t.defaultProps,w.__emotion_real=w,w.__emotion_base=h,w.__emotion_styles=_,w.__emotion_forwardProp=m,Object.defineProperty(w,"toString",{value:function(){return"."+u}}),w.withComponent=function(t,r){return e(t,(0,i.Z)({},n,r,{shouldForwardProp:f(w,r,!0)})).apply(void 0,_)},w}},v=m.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){v[e]=v(e)}));var g=v;function y(e,t){return g(e,t)}var _=function(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}},1184:function(e,t,n){"use strict";n.d(t,{L7:function(){return s},VO:function(){return r},W8:function(){return o},k9:function(){return a}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function a(e,t,n){var a=e.theme||{};if(Array.isArray(t)){var o=a.breakpoints||i;return t.reduce((function(e,r,i){return e[o.up(o.keys[i])]=n(t[i]),e}),{})}if("object"===typeof t){var s=a.breakpoints||i;return Object.keys(t).reduce((function(e,i){if(-1!==Object.keys(s.values||r).indexOf(i)){e[s.up(i)]=n(t[i],i)}else{var a=i;e[a]=t[a]}return e}),{})}return n(t)}function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function s(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},2065:function(e,t,n){"use strict";n.d(t,{$n:function(){return h},Fq:function(){return u},_j:function(){return c},mi:function(){return l}});var r=n(6189);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var i,o=e.substring(t+1,e.length-1);if("color"===n){if(i=(o=o.split(" ")).shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else o=o.split(",");return{type:n,values:o=o.map((function(e){return parseFloat(e)})),colorSpace:i}}function o(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function s(e){var t="hsl"===(e=a(e)).type?a(function(e){var t=(e=a(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",c=[Math.round(255*l(0)),Math.round(255*l(8)),Math.round(255*l(4))];return"hsla"===e.type&&(u+="a",c.push(t[3])),o({type:u,values:c})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function l(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function u(e,t){return e=a(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,o(e)}function c(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function h(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return o(e)}},5080:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(7462),i=n(3366),a=n(2466),o=n(4942),s=["values","unit","step"];function l(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,a=e.unit,l=void 0===a?"px":a,u=e.step,c=void 0===u?5:u,h=(0,i.Z)(e,s),d=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,o.Z)({},t.key,t.val))}),{})}(n),f=Object.keys(d);function p(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(l,")")}function m(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-c/100).concat(l,")")}function v(e,t){var r=f.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(l,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[f[r]]?n[f[r]]:t)-c/100).concat(l,")")}return(0,r.Z)({keys:f,values:d,up:p,down:m,between:v,only:function(e){return f.indexOf(e)+1<f.length?v(e,f[f.indexOf(e)+1]):p(e)},not:function(e){var t=f.indexOf(e);return 0===t?p(f[1]):t===f.length-1?m(f[t]):v(e,f[f.indexOf(e)+1]).replace("@media","@media not all and")},unit:l},h)}var u={borderRadius:4},c=n(5682);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,c.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var d=["breakpoints","palette","spacing","shape"];var f=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,o=e.palette,s=void 0===o?{}:o,c=e.spacing,f=e.shape,p=void 0===f?{}:f,m=(0,i.Z)(e,d),v=l(n),g=h(c),y=(0,a.Z)({breakpoints:v,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},s),spacing:g,shape:(0,r.Z)({},u,p)},m),_=arguments.length,x=new Array(_>1?_-1:0),b=1;b<_;b++)x[b-1]=arguments[b];return y=x.reduce((function(e,t){return(0,a.Z)(e,t)}),y)}},114:function(e,t,n){"use strict";n.d(t,{Gc:function(){return K},G$:function(){return X}});var r=n(8529),i=n(8247);var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),a=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,i.Z)(t,r[n](e)):t}),{})};return a.propTypes={},a.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),a},o=n(5682),s=n(1184);function l(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var u=(0,r.Z)({prop:"border",themeKey:"borders",transform:l}),c=(0,r.Z)({prop:"borderTop",themeKey:"borders",transform:l}),h=(0,r.Z)({prop:"borderRight",themeKey:"borders",transform:l}),d=(0,r.Z)({prop:"borderBottom",themeKey:"borders",transform:l}),f=(0,r.Z)({prop:"borderLeft",themeKey:"borders",transform:l}),p=(0,r.Z)({prop:"borderColor",themeKey:"palette"}),m=(0,r.Z)({prop:"borderTopColor",themeKey:"palette"}),v=(0,r.Z)({prop:"borderRightColor",themeKey:"palette"}),g=(0,r.Z)({prop:"borderBottomColor",themeKey:"palette"}),y=(0,r.Z)({prop:"borderLeftColor",themeKey:"palette"}),_=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,o.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,s.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,o.NA)(t,e)}}))}return null};_.propTypes={},_.filterProps=["borderRadius"];var x=a(u,c,h,d,f,p,m,v,g,y,_),b=a((0,r.Z)({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),(0,r.Z)({prop:"display"}),(0,r.Z)({prop:"overflow"}),(0,r.Z)({prop:"textOverflow"}),(0,r.Z)({prop:"visibility"}),(0,r.Z)({prop:"whiteSpace"})),w=a((0,r.Z)({prop:"flexBasis"}),(0,r.Z)({prop:"flexDirection"}),(0,r.Z)({prop:"flexWrap"}),(0,r.Z)({prop:"justifyContent"}),(0,r.Z)({prop:"alignItems"}),(0,r.Z)({prop:"alignContent"}),(0,r.Z)({prop:"order"}),(0,r.Z)({prop:"flex"}),(0,r.Z)({prop:"flexGrow"}),(0,r.Z)({prop:"flexShrink"}),(0,r.Z)({prop:"alignSelf"}),(0,r.Z)({prop:"justifyItems"}),(0,r.Z)({prop:"justifySelf"})),k=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,o.eI)(e.theme,"spacing",8,"gap");return(0,s.k9)(e,e.gap,(function(e){return{gap:(0,o.NA)(t,e)}}))}return null};k.propTypes={},k.filterProps=["gap"];var T=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,o.eI)(e.theme,"spacing",8,"columnGap");return(0,s.k9)(e,e.columnGap,(function(e){return{columnGap:(0,o.NA)(t,e)}}))}return null};T.propTypes={},T.filterProps=["columnGap"];var S=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,o.eI)(e.theme,"spacing",8,"rowGap");return(0,s.k9)(e,e.rowGap,(function(e){return{rowGap:(0,o.NA)(t,e)}}))}return null};S.propTypes={},S.filterProps=["rowGap"];var E=a(k,T,S,(0,r.Z)({prop:"gridColumn"}),(0,r.Z)({prop:"gridRow"}),(0,r.Z)({prop:"gridAutoFlow"}),(0,r.Z)({prop:"gridAutoColumns"}),(0,r.Z)({prop:"gridAutoRows"}),(0,r.Z)({prop:"gridTemplateColumns"}),(0,r.Z)({prop:"gridTemplateRows"}),(0,r.Z)({prop:"gridTemplateAreas"}),(0,r.Z)({prop:"gridArea"})),C=a((0,r.Z)({prop:"position"}),(0,r.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,r.Z)({prop:"top"}),(0,r.Z)({prop:"right"}),(0,r.Z)({prop:"bottom"}),(0,r.Z)({prop:"left"})),A=a((0,r.Z)({prop:"color",themeKey:"palette"}),(0,r.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,r.Z)({prop:"backgroundColor",themeKey:"palette"})),R=(0,r.Z)({prop:"boxShadow",themeKey:"shadows"});function M(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var B=(0,r.Z)({prop:"width",transform:M}),P=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,s.k9)(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||s.VO[t]||M(t)}}))}return null};P.filterProps=["maxWidth"];var I=(0,r.Z)({prop:"minWidth",transform:M}),z=(0,r.Z)({prop:"height",transform:M}),L=(0,r.Z)({prop:"maxHeight",transform:M}),D=(0,r.Z)({prop:"minHeight",transform:M}),O=((0,r.Z)({prop:"size",cssProperty:"width",transform:M}),(0,r.Z)({prop:"size",cssProperty:"height",transform:M}),a(B,P,I,z,L,D,(0,r.Z)({prop:"boxSizing"}))),N=(0,r.Z)({prop:"fontFamily",themeKey:"typography"}),F=(0,r.Z)({prop:"fontSize",themeKey:"typography"}),j=(0,r.Z)({prop:"fontStyle",themeKey:"typography"}),V=(0,r.Z)({prop:"fontWeight",themeKey:"typography"}),Z=(0,r.Z)({prop:"letterSpacing"}),U=(0,r.Z)({prop:"textTransform"}),G=(0,r.Z)({prop:"lineHeight"}),H=(0,r.Z)({prop:"textAlign"}),q=a((0,r.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),N,F,j,V,Z,G,H,U),W={borders:x.filterProps,display:b.filterProps,flexbox:w.filterProps,grid:E.filterProps,positions:C.filterProps,palette:A.filterProps,shadows:R.filterProps,sizing:O.filterProps,spacing:o.ZP.filterProps,typography:q.filterProps},X={borders:x,display:b,flexbox:w,grid:E,positions:C,palette:A,shadows:R,sizing:O,spacing:o.ZP,typography:q},K=Object.keys(W).reduce((function(e,t){return W[t].forEach((function(n){e[n]=X[t]})),e}),{})},8247:function(e,t,n){"use strict";var r=n(2466);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},5682:function(e,t,n){"use strict";n.d(t,{hB:function(){return m},eI:function(){return p},ZP:function(){return w},NA:function(){return v}});var r=n(885),i=n(1184),a=n(8529),o=n(8247);var s={m:"margin",p:"padding"},l={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},u={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},c=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!u[e])return[e];e=u[e]}var t=e.split(""),n=(0,r.Z)(t,2),i=n[0],a=n[1],o=s[i],c=l[a]||"";return Array.isArray(c)?c.map((function(e){return o+e})):[o+c]})),h=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],d=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],f=[].concat(h,d);function p(e,t,n,r){var i,o=null!=(i=(0,a.D)(e,t,!1))?i:n;return"number"===typeof o?function(e){return"string"===typeof e?e:o*e}:Array.isArray(o)?function(e){return"string"===typeof e?e:o[e]}:"function"===typeof o?o:function(){}}function m(e){return p(e,"spacing",8)}function v(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function g(e,t,n,r){if(-1===t.indexOf(n))return null;var a=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=v(t,n),e}),{})}}(c(n),r),o=e[n];return(0,i.k9)(e,o,a)}function y(e,t){var n=m(e.theme);return Object.keys(e).map((function(r){return g(e,t,r,n)})).reduce(o.Z,{})}function _(e){return y(e,h)}function x(e){return y(e,d)}function b(e){return y(e,f)}_.propTypes={},_.filterProps=h,x.propTypes={},x.filterProps=d,b.propTypes={},b.filterProps=f;var w=b},8529:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(4942),i=n(7312),a=n(1184);function o(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function s(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r)),r}t.Z=function(e){var t=e.prop,n=e.cssProperty,l=void 0===n?e.prop:n,u=e.themeKey,c=e.transform,h=function(e){if(null==e[t])return null;var n=e[t],h=o(e.theme,u)||{};return(0,a.k9)(e,n,(function(e){var n=s(h,c,e);return e===n&&"string"===typeof e&&(n=s(h,c,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===l?n:(0,r.Z)({},l,n)}))};return h.propTypes={},h.filterProps=[t],h}},104:function(e,t,n){"use strict";var r=n(4942),i=n(8247),a=n(114),o=n(1184);function s(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}function l(e,t){return"function"===typeof e?e(t):e}var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.G$,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,i){var a,o=(a={},(0,r.Z)(a,e,n),(0,r.Z)(a,"theme",i),a),s=t[e];return s?s(o):(0,r.Z)({},e,n)}function u(e){var a=e||{},c=a.sx,h=a.theme,d=void 0===h?{}:h;if(!c)return null;function f(e){var a=e;if("function"===typeof e)a=e(d);else if("object"!==typeof e)return e;if(!a)return null;var c=(0,o.W8)(d.breakpoints),h=Object.keys(c),f=c;return Object.keys(a).forEach((function(e){var c=l(a[e],d);if(null!==c&&void 0!==c)if("object"===typeof c)if(t[e])f=(0,i.Z)(f,n(e,c,d));else{var h=(0,o.k9)({theme:d},c,(function(t){return(0,r.Z)({},e,t)}));s(h,c)?f[e]=u({sx:c,theme:d}):f=(0,i.Z)(f,h)}else f=(0,i.Z)(f,n(e,c,d))})),(0,o.L7)(h,f)}return Array.isArray(c)?c.map(f):f(c)}return u}();u.filterProps=["sx"],t.Z=u},886:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(5080),i=n(2791);var a=i.createContext(null);function o(){return i.useContext(a)}function s(e){return 0===Object.keys(e).length}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=o();return!t||s(t)?e:t},u=(0,r.Z)();var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;return l(e)}},5902:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},7312:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(6189);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4419:function(e,t,n){"use strict";function r(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(e.push(t(r)),n&&n[r]&&e.push(n[r])),e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},8949:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}n.d(t,{Z:function(){return r}})},3981:function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=function(){e.apply(r,a)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r}n.d(t,{Z:function(){return r}})},2466:function(e,t,n){"use strict";n.d(t,{P:function(){return i},Z:function(){return a}});var r=n(7462);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},o=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?o[r]=a(e[r],t[r],n):o[r]=t[r])})),o}},6189:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},1217:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5902),i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",a=i[t];return a?"".concat(n,"-").concat(a):"".concat(r.Z.generate(e),"-").concat(t)}},5878:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1217);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i={};return t.forEach((function(t){i[t]=(0,r.Z)(e,t,n)})),i}},9723:function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{Z:function(){return r}})},7979:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9723);function i(e){return(0,r.Z)(e).defaultView||window}},2971:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},5721:function(e,t,n){"use strict";var r=n(2791),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=i},8956:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791),i=n(5721);function a(e){var t=r.useRef(e);return(0,i.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},7563:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791),i=n(2971);function a(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){(0,i.Z)(e,n),(0,i.Z)(t,n)}}),[e,t])}},4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),i=n(7297),a=n(9301),o=n(9774),s=n(1804),l=n(9145),u=n(5411),c=n(6467);e.exports=function(e){return new Promise((function(t,n){var h=e.data,d=e.headers;r.isFormData(h)&&delete d["Content-Type"];var f=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",m=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.Authorization="Basic "+btoa(p+":"+m)}var v=s(e.baseURL,e.url);if(f.open(e.method.toUpperCase(),o(v,e.params,e.paramsSerializer),!0),f.timeout=e.timeout,f.onreadystatechange=function(){if(f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in f?l(f.getAllResponseHeaders()):null,a={data:e.responseType&&"text"!==e.responseType?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f};i(t,n,a),f=null}},f.onabort=function(){f&&(n(c("Request aborted",e,"ECONNABORTED",f)),f=null)},f.onerror=function(){n(c("Network Error",e,null,f)),f=null},f.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(c(t,e,"ECONNABORTED",f)),f=null},r.isStandardBrowserEnv()){var g=(e.withCredentials||u(v))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in f&&r.forEach(d,(function(e,t){"undefined"===typeof h&&"content-type"===t.toLowerCase()?delete d[t]:f.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),e.responseType)try{f.responseType=e.responseType}catch(y){if("json"!==e.responseType)throw y}"function"===typeof e.onDownloadProgress&&f.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&f.upload&&f.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){f&&(f.abort(),n(e),f=null)})),h||(h=null),f.send(h)}))}},8036:function(e,t,n){"use strict";var r=n(3589),i=n(4049),a=n(3773),o=n(777);function s(e){var t=new a(e),n=i(a.prototype.request,t);return r.extend(n,a.prototype,t),r.extend(n,t),n}var l=s(n(221));l.Axios=a,l.create=function(e){return s(o(l.defaults,e))},l.Cancel=n(9346),l.CancelToken=n(6857),l.isCancel=n(5517),l.all=function(e){return Promise.all(e)},l.spread=n(8089),l.isAxiosError=n(9580),e.exports=l,e.exports.default=l},9346:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},6857:function(e,t,n){"use strict";var r=n(9346);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),i=n(9774),a=n(7470),o=n(2733),s=n(777);function l(e){this.defaults=e,this.interceptors={request:new a,response:new a}}l.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[o,void 0],n=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)n=n.then(t.shift(),t.shift());return n},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},7470:function(e,t,n){"use strict";var r=n(3589);function i(){this.handlers=[]}i.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},1804:function(e,t,n){"use strict";var r=n(4044),i=n(9549);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},6467:function(e,t,n){"use strict";var r=n(6460);e.exports=function(e,t,n,i,a){var o=new Error(e);return r(o,t,n,i,a)}},2733:function(e,t,n){"use strict";var r=n(3589),i=n(2693),a=n(5517),o=n(221);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=i(t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(s(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},6460:function(e){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],a=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function u(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=l(void 0,e[i])):n[i]=l(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=l(void 0,t[e]))})),r.forEach(a,u),r.forEach(o,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=l(void 0,e[i])):n[i]=l(void 0,t[i])})),r.forEach(s,(function(r){r in t?n[r]=l(e[r],t[r]):r in e&&(n[r]=l(void 0,e[r]))}));var c=i.concat(a).concat(o).concat(s),h=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return r.forEach(h,u),n}},7297:function(e,t,n){"use strict";var r=n(6467);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t,n){return r.forEach(n,(function(n){e=n(e,t)})),e}},221:function(e,t,n){"use strict";var r=n(3589),i=n(4341),a={"Content-Type":"application/x-www-form-urlencoded"};function o(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s={adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){return i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(o(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(t){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){s.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){s.headers[e]=r.merge(a)})),e.exports=s},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),a=o.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},9580:function(e){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},9145:function(e,t,n){"use strict";var r=n(3589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,o={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},3589:function(e,t,n){"use strict";var r=n(4049),i=Object.prototype.toString;function a(e){return"[object Array]"===i.call(e)}function o(e){return"undefined"===typeof e}function s(e){return null!==e&&"object"===typeof e}function l(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function u(e){return"[object Function]"===i.call(e)}function c(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),a(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:a,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:s,isPlainObject:l,isUndefined:o,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:u,isStream:function(e){return s(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:c,merge:function e(){var t={};function n(n,r){l(t[r])&&l(n)?t[r]=e(t[r],n):l(n)?t[r]=e({},n):a(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)c(arguments[r],n);return t},extend:function(e,t,n){return c(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},1694:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},8182:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.Z=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},4776:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(n=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===n.Tag||e.type===n.Script||e.type===n.Style},t.Root=n.Root,t.Text=n.Text,t.Directive=n.Directive,t.Comment=n.Comment,t.Script=n.Script,t.Style=n.Style,t.Tag=n.Tag,t.CDATA=n.CDATA,t.Doctype=n.Doctype},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=c(n);h&&(o=o.concat(h(n)));for(var s=l(t),m=l(n),v=0;v<o.length;++v){var g=o[v];if(!a[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=d(n,g);try{u(t,g,y)}catch(_){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case a:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case v:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return b(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=a,t.Lazy=v,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return w(e)||b(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===u},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===d},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===v},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===y||e.$$typeof===_||e.$$typeof===x||e.$$typeof===g)},t.typeOf=b},8309:function(e,t,n){"use strict";e.exports=n(746)},9127:function(e,t){t.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussainBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"]},9409:function(e){var t="html",n="head",r="body",i=/<([a-zA-Z]+[0-9]?)/,a=/<head[^]*>/i,o=/<body[^]*>/i,s=function(){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},l=function(){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},u="object"===typeof window&&window.DOMParser;if("function"===typeof u){var c=new u;s=l=function(e,t){return t&&(e="<"+t+">"+e+"</"+t+">"),c.parseFromString(e,"text/html")}}if("object"===typeof document&&document.implementation){var h=document.implementation.createHTMLDocument();s=function(e,t){return t?(h.documentElement.querySelector(t).innerHTML=e,h):(h.documentElement.innerHTML=e,h)}}var d,f="object"===typeof document?document.createElement("template"):{};f.content&&(d=function(e){return f.innerHTML=e,f.content.childNodes}),e.exports=function(e){var u,c,h,f,p=e.match(i);switch(p&&p[1]&&(u=p[1].toLowerCase()),u){case t:return c=l(e),a.test(e)||(h=c.querySelector(n))&&h.parentNode.removeChild(h),o.test(e)||(h=c.querySelector(r))&&h.parentNode.removeChild(h),c.querySelectorAll(t);case n:case r:return f=(c=s(e)).querySelectorAll(u),o.test(e)&&a.test(e)?f[0].parentNode.childNodes:f;default:return d?d(e):(h=s(e,r).querySelector(r)).childNodes}}},159:function(e,t,n){var r=n(9409),i=n(1716).formatDOM,a=/<(![a-zA-Z\s]+)>/;e.exports=function(e){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(""===e)return[];var t,n=e.match(a);return n&&n[1]&&(t=n[1]),i(r(e),null,t)}},1716:function(e,t,n){for(var r,i=n(538),a=n(9127).CASE_SENSITIVE_TAG_NAMES,o=i.Comment,s=i.Element,l=i.ProcessingInstruction,u=i.Text,c={},h=0,d=a.length;h<d;h++)r=a[h],c[r.toLowerCase()]=r;function f(e){for(var t,n={},r=0,i=e.length;r<i;r++)n[(t=e[r]).name]=t.value;return n}function p(e){var t=function(e){return c[e]}(e=e.toLowerCase());return t||e}t.formatAttributes=f,t.formatDOM=function e(t,n,r){n=n||null;for(var i=[],a=0,c=t.length;a<c;a++){var h,d=t[a];switch(d.nodeType){case 1:(h=new s(p(d.nodeName),f(d.attributes))).children=e(d.childNodes,h);break;case 3:h=new u(d.nodeValue);break;case 8:h=new o(d.nodeValue);break;default:continue}var m=i[a-1]||null;m&&(m.next=h),h.parent=n,h.prev=m,h.next=null,i.push(h)}return r&&((h=new l(r.substring(0,r.indexOf(" ")).toLowerCase(),r)).next=i[0]||null,h.parent=n,i.unshift(h),i[1]&&(i[1].prev=i[0])),i}},538:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var a=n(4776),o=n(4362);i(n(4362),t);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function e(e,t,n){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"===typeof t&&(n=t,t=s),"object"===typeof e&&(t=e,e=void 0),this.callback=null!==e&&void 0!==e?e:null,this.options=null!==t&&void 0!==t?t:s,this.elementCB=null!==n&&void 0!==n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?a.ElementType.Tag:void 0,r=new o.Element(e,t,void 0,n);this.addNode(r),this.tagStack.push(r)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===a.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new o.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment)this.lastNode.data+=e;else{var t=new o.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new o.Text(""),t=new o.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new o.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"===typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=l,t.default=l},4362:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.CDATA=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var a=n(4776),o=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),b(this,e)},e}();t.Node=o;var s=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return r(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(o);t.DataNode=s;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.Text,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(s);t.Text=l;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.Comment,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(s);t.Comment=u;var c=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name=t,r.type=a.ElementType.Directive,r}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(s);t.ProcessingInstruction=c;var h=function(e){function t(t){var n=e.call(this)||this;return n.children=t,n}return r(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(o);t.NodeWithChildren=h;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.CDATA,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(h);t.CDATA=d;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.Root,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(h);t.Document=f;var p=function(e){function t(t,n,r,i){void 0===r&&(r=[]),void 0===i&&(i="script"===t?a.ElementType.Script:"style"===t?a.ElementType.Style:a.ElementType.Tag);var o=e.call(this,r)||this;return o.name=t,o.attribs=n,o.type=i,o}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}}))},enumerable:!1,configurable:!0}),t}(h);function m(e){return(0,a.isTag)(e)}function v(e){return e.type===a.ElementType.CDATA}function g(e){return e.type===a.ElementType.Text}function y(e){return e.type===a.ElementType.Comment}function _(e){return e.type===a.ElementType.Directive}function x(e){return e.type===a.ElementType.Root}function b(e,t){var n;if(void 0===t&&(t=!1),g(e))n=new l(e.data);else if(y(e))n=new u(e.data);else if(m(e)){var r=t?w(e.children):[],a=new p(e.name,i({},e.attribs),r);r.forEach((function(e){return e.parent=a})),null!=e.namespace&&(a.namespace=e.namespace),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=i({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=i({},e["x-attribsPrefix"])),n=a}else if(v(e)){r=t?w(e.children):[];var o=new d(r);r.forEach((function(e){return e.parent=o})),n=o}else if(x(e)){r=t?w(e.children):[];var s=new f(r);r.forEach((function(e){return e.parent=s})),e["x-mode"]&&(s["x-mode"]=e["x-mode"]),n=s}else{if(!_(e))throw new Error("Not implemented yet: ".concat(e.type));var h=new c(e.name,e.data);null!=e["x-name"]&&(h["x-name"]=e["x-name"],h["x-publicId"]=e["x-publicId"],h["x-systemId"]=e["x-systemId"]),n=h}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function w(e){for(var t=e.map((function(e){return b(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}t.Element=p,t.isTag=m,t.isCDATA=v,t.isText=g,t.isComment=y,t.isDirective=_,t.isDocument=x,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=b},6854:function(e,t,n){var r=n(4595),i=n(8131),a=n(159);a="function"===typeof a.default?a.default:a;var o={lowerCaseAttributeNames:!1};function s(e,t){if("string"!==typeof e)throw new TypeError("First argument must be a string");return""===e?[]:r(a(e,(t=t||{}).htmlparser2||o),t)}s.domToReact=r,s.htmlToDOM=a,s.attributesToProps=i,s.Element=n(9936).Element,e.exports=s,e.exports.default=s},8131:function(e,t,n){var r=n(6195),i=n(4141);function a(e){return r.possibleStandardNames[e]}e.exports=function(e){var t,n,o,s,l,u={},c=(e=e||{}).type&&{reset:!0,submit:!0}[e.type];for(t in e)if(o=e[t],r.isCustomAttribute(t))u[t]=o;else if(s=a(n=t.toLowerCase()))switch(l=r.getPropertyInfo(s),"checked"!==s&&"value"!==s||c||(s=a("default"+n)),u[s]=o,l&&l.type){case r.BOOLEAN:u[s]=!0;break;case r.OVERLOADED_BOOLEAN:""===o&&(u[s]=!0)}else i.PRESERVE_CUSTOM_ATTRIBUTES&&(u[t]=o);return i.setStyleProp(e.style,u),u}},4595:function(e,t,n){var r=n(2791),i=n(8131),a=n(4141),o=a.setStyleProp,s=a.canTextBeChildOfNode;function l(e){return a.PRESERVE_CUSTOM_ATTRIBUTES&&"tag"===e.type&&a.isCustomComponent(e.name,e.attribs)}e.exports=function e(t,n){for(var a,u,c,h,d,f=(n=n||{}).library||r,p=f.cloneElement,m=f.createElement,v=f.isValidElement,g=[],y="function"===typeof n.replace,_=n.trim,x=0,b=t.length;x<b;x++)if(a=t[x],y&&v(c=n.replace(a)))b>1&&(c=p(c,{key:c.key||x})),g.push(c);else if("text"!==a.type){switch(h=a.attribs,l(a)?o(h.style,h):h&&(h=i(h)),d=null,a.type){case"script":case"style":a.children[0]&&(h.dangerouslySetInnerHTML={__html:a.children[0].data});break;case"tag":"textarea"===a.name&&a.children[0]?h.defaultValue=a.children[0].data:a.children&&a.children.length&&(d=e(a.children,n));break;default:continue}b>1&&(h.key=x),g.push(m(a.name,h,d))}else{if((u=!a.data.trim().length)&&a.parent&&!s(a.parent))continue;if(_&&u)continue;g.push(a.data)}return 1===g.length?g[0]:g}},4141:function(e,t,n){var r=n(2791),i=n(5792).default;var a={reactCompat:!0};var o=r.version.split(".")[0]>=16,s=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);e.exports={PRESERVE_CUSTOM_ATTRIBUTES:o,invertObject:function(e,t){if(!e||"object"!==typeof e)throw new TypeError("First argument must be an object");var n,r,i="function"===typeof t,a={},o={};for(n in e)r=e[n],i&&(a=t(n,r))&&2===a.length?o[a[0]]=a[1]:"string"===typeof r&&(o[r]=n);return o},isCustomComponent:function(e,t){if(-1===e.indexOf("-"))return t&&"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}},setStyleProp:function(e,t){if(null!==e&&void 0!==e)try{t.style=i(e,a)}catch(n){t.style={}}},canTextBeChildOfNode:function(e){return!s.has(e.name)},elementsWithNoTextChildren:s}},9936:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var a=n(4776),o=n(1262);i(n(1262),t);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function e(e,t,n){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"===typeof t&&(n=t,t=s),"object"===typeof e&&(t=e,e=void 0),this.callback=null!==e&&void 0!==e?e:null,this.options=null!==t&&void 0!==t?t:s,this.elementCB=null!==n&&void 0!==n?n:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var n=this.options.xmlMode?a.ElementType.Tag:void 0,r=new o.Element(e,t,void 0,n);this.addNode(r),this.tagStack.push(r)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===a.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var n=new o.Text(e);this.addNode(n),this.lastNode=n}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment)this.lastNode.data+=e;else{var t=new o.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new o.Text(""),t=new o.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var n=new o.ProcessingInstruction(e,t);this.addNode(n)},e.prototype.handleCallback=function(e){if("function"===typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],n=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),n&&(e.prev=n,n.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=l,t.default=l},1262:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.CDATA=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var a=n(4776),o=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),b(this,e)},e}();t.Node=o;var s=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n}return r(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(o);t.DataNode=s;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.Text,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(s);t.Text=l;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.Comment,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(s);t.Comment=u;var c=function(e){function t(t,n){var r=e.call(this,n)||this;return r.name=t,r.type=a.ElementType.Directive,r}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(s);t.ProcessingInstruction=c;var h=function(e){function t(t){var n=e.call(this)||this;return n.children=t,n}return r(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(o);t.NodeWithChildren=h;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.CDATA,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(h);t.CDATA=d;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=a.ElementType.Root,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(h);t.Document=f;var p=function(e){function t(t,n,r,i){void 0===r&&(r=[]),void 0===i&&(i="script"===t?a.ElementType.Script:"style"===t?a.ElementType.Style:a.ElementType.Tag);var o=e.call(this,r)||this;return o.name=t,o.attribs=n,o.type=i,o}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var n,r;return{name:t,value:e.attribs[t],namespace:null===(n=e["x-attribsNamespace"])||void 0===n?void 0:n[t],prefix:null===(r=e["x-attribsPrefix"])||void 0===r?void 0:r[t]}}))},enumerable:!1,configurable:!0}),t}(h);function m(e){return(0,a.isTag)(e)}function v(e){return e.type===a.ElementType.CDATA}function g(e){return e.type===a.ElementType.Text}function y(e){return e.type===a.ElementType.Comment}function _(e){return e.type===a.ElementType.Directive}function x(e){return e.type===a.ElementType.Root}function b(e,t){var n;if(void 0===t&&(t=!1),g(e))n=new l(e.data);else if(y(e))n=new u(e.data);else if(m(e)){var r=t?w(e.children):[],a=new p(e.name,i({},e.attribs),r);r.forEach((function(e){return e.parent=a})),null!=e.namespace&&(a.namespace=e.namespace),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=i({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=i({},e["x-attribsPrefix"])),n=a}else if(v(e)){r=t?w(e.children):[];var o=new d(r);r.forEach((function(e){return e.parent=o})),n=o}else if(x(e)){r=t?w(e.children):[];var s=new f(r);r.forEach((function(e){return e.parent=s})),e["x-mode"]&&(s["x-mode"]=e["x-mode"]),n=s}else{if(!_(e))throw new Error("Not implemented yet: ".concat(e.type));var h=new c(e.name,e.data);null!=e["x-name"]&&(h["x-name"]=e["x-name"],h["x-publicId"]=e["x-publicId"],h["x-systemId"]=e["x-systemId"]),n=h}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function w(e){for(var t=e.map((function(e){return b(e,!0)})),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}t.Element=p,t.isTag=m,t.isCDATA=v,t.isText=g,t.isComment=y,t.isDirective=_,t.isDocument=x,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=b},1065:function(e){var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,r=/^\s*/,i=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,a=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,s=/^[;\s]*/,l=/^\s+|\s+$/g,u="";function c(e){return e?e.replace(l,u):u}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var h=1,d=1;function f(e){var t=e.match(n);t&&(h+=t.length);var r=e.lastIndexOf("\n");d=~r?e.length-r:d+e.length}function p(){var e={line:h,column:d};return function(t){return t.position=new m(e),_(),t}}function m(e){this.start=e,this.end={line:h,column:d},this.source=l.source}m.prototype.content=e;var v=[];function g(t){var n=new Error(l.source+":"+h+":"+d+": "+t);if(n.reason=t,n.filename=l.source,n.line=h,n.column=d,n.source=e,!l.silent)throw n;v.push(n)}function y(t){var n=t.exec(e);if(n){var r=n[0];return f(r),e=e.slice(r.length),n}}function _(){y(r)}function x(e){var t;for(e=e||[];t=b();)!1!==t&&e.push(t);return e}function b(){var t=p();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;u!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,u===e.charAt(n-1))return g("End of comment missing");var r=e.slice(2,n-2);return d+=2,f(r),e=e.slice(n),d+=2,t({type:"comment",comment:r})}}function w(){var e=p(),n=y(i);if(n){if(b(),!y(a))return g("property missing ':'");var r=y(o),l=e({type:"declaration",property:c(n[0].replace(t,u)),value:r?c(r[0].replace(t,u)):u});return y(s),l}}return _(),function(){var e,t=[];for(x(t);e=w();)!1!==e&&(t.push(e),x(t));return t}()}},5483:function(e,t,n){var r=n(8416).default,i=n(6115).default,a=n(3515).default,o=n(1588).default,s=n(3808).default,l=n(4993).default,u=n(1589).default,c=n(861).default,h=n(7424).default,d=n(4704).default,f=n(3496).default,p=n(1655).default,m=n(6389).default,v=n(6690).default,g=n(9728).default;e.exports=function(){"use strict";var e,t,n;function y(r,i){if(e)if(t){var a="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",o={};e(o),n=i(o),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=i;else e=i}return y(["exports"],(function(e){var t="undefined"!=typeof self?self:{},n=r;function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var n,r,i,a,o;for(void 0===t&&(t=1e-6),i=e,o=0;o<8;o++){if(a=this.sampleCurveX(i)-e,Math.abs(a)<t)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=a/s}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(a=this.sampleCurveX(i),Math.abs(a-e)<t)return i;e>a?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var y=_;function _(e,t){this.x=e,this.y=t}_.prototype={clone:function(){return new _(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},_.convert=function(e){return e instanceof _?e:Array.isArray(e)?new _(e[0],e[1]):e};var x=Math.PI/180,b=180/Math.PI;function w(e){return e*x}function k(e){return e*b}var T=[[0,0],[1,0],[1,1],[0,1]];function S(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function E(e,t,r,i){var a=new n(e,t,r,i);return function(e){return a.solve(e)}}var C=E(.25,.1,.25,1);function A(e,t,n){return Math.min(n,Math.max(t,e))}function R(e,t,n){return(n=A((n-e)/(t-e),0,1))*n*(3-2*n)}function M(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function B(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),a=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(a=e),i[o]=t,0==--r&&n(a,i)}))}))}function P(e){var t=[];for(var n in e)t.push(e[n]);return t}function I(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)e[s]=o[s]}return e}var z=1;function L(){return z++}function D(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function O(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function N(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function F(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function j(e,t){return-1!==e.indexOf(t,e.length-t.length)}function V(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function Z(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function U(e){return Array.isArray(e)?e.map(U):"object"==typeof e&&e?V(e,U):e}var G={};function H(e){G[e]||("undefined"!=typeof console&&console.warn(e),G[e]=!0)}function q(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function W(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)t=e[i],r+=((n=e[o]).x-t.x)*(t.y+n.y);return r}function X(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function K(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,r,i){var a=r||i;return t[n]=!a||a.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var Y=null;function J(e){if(null==Y){var t=e.navigator?e.navigator.userAgent:null;Y=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Y}function Q(e){try{var n=t[e];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function $(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}var ee=t.performance;function te(e){var t=e?e.url.toString():void 0;return ee.getEntriesByName(t)}var ne,re,ie,ae,oe,se,le,ue="2.10.0",ce={now:function(){return void 0!==ie?ie:t.performance.now()},setNow:function(e){ie=e},restoreNow:function(){ie=void 0},frame:function(e){var n=t.requestAnimationFrame(e);return{cancel:function(){return t.cancelAnimationFrame(n)}}},getImageData:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.width,i=e.height;ae||(ae=t.document.createElement("canvas"));var a=ae.getContext("2d");if(!a)throw new Error("failed to create canvas 2d context");return(r>ae.width||i>ae.height)&&(ae.width=r,ae.height=i),a.clearRect(-n,-n,r+2*n,i+2*n),a.drawImage(e,0,0,r,i),a.getImageData(-n,-n,r+2*n,i+2*n)},resolveURL:function(e){return ne||(ne=t.document.createElement("a")),ne.href=e,ne.href},get devicePixelRatio(){return t.devicePixelRatio},get prefersReducedMotion(){return!!t.matchMedia&&(null==re&&(re=t.matchMedia("(prefers-reduced-motion: reduce)")),re.matches)}},he={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==oe){var e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{oe=null!={NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.API_URL_REGEX):e}catch(t){oe=e}}return oe},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},de={supported:!1,testSupport:function(e){!fe&&le&&(pe?me(e):se=e)}},fe=!1,pe=!1;function me(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,le),e.isContextLost())return;de.supported=!0}catch(e){}e.deleteTexture(t),fe=!0}t.document&&((le=t.document.createElement("img")).onload=function(){se&&me(se),se=null,pe=!0},le.onerror=function(){fe=!0,se=null},le.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var ve="01",ge="NO_ACCESS_TOKEN";function ye(e){return 0===e.indexOf("mapbox:")}function _e(e){return he.API_URL_REGEX.test(e)}var xe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function be(e){var t=e.match(xe);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function we(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}function ke(e){if(!e)return null;var n=e.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(t.atob(n[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var Te,Se=function(){function e(t){v(this,e),this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return g(e,[{key:"getStorageKey",value:function(e){var n=ke(he.ACCESS_TOKEN),r="";return r=n&&n.u?t.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):he.ACCESS_TOKEN||"",e?"mapbox.eventData.".concat(e,":").concat(r):"mapbox.eventData:".concat(r)}},{key:"fetchEventData",value:function(){var e=Q("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{var i=t.localStorage.getItem(n);i&&(this.eventData=JSON.parse(i));var a=t.localStorage.getItem(r);a&&(this.anonId=a)}catch(e){H("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var e=Q("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{t.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&t.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(e){H("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(e){}},{key:"postEvent",value:function(e,t,n,r){var i=this;if(he.EVENTS_URL){var a=be(he.EVENTS_URL);a.params.push("access_token=".concat(r||he.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:ue,skuId:ve,userId:this.anonId},s=t?I(o,t):o,l={url:we(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=We(l,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"queueRequest",value:function(e,t){this.queue.push(e),this.processRequests(t)}}]),e}(),Ee=new(function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,"appUserTurnstile"))._customAccessToken=e,r}return g(n,[{key:"postTurnstileEvent",value:function(e,t){he.EVENTS_URL&&he.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return ye(e)||_e(e)}))&&this.queueRequest(Date.now(),t)}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=ke(he.ACCESS_TOKEN),r=n?n.u:he.ACCESS_TOKEN,i=r!==this.eventData.tokenU;N(this.anonId)||(this.anonId=D(),i=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),l=(a-this.eventData.lastSuccess)/864e5;i=i||l>=1||l<-1||o.getDate()!==s.getDate()}else i=!0;i?this.postEvent(a,{"enabled.telemetry":!1},(function(e){e||(t.eventData.lastSuccess=a,t.eventData.tokenU=r)}),e):this.processRequests()}}}]),n}(Se)),Ce=Ee.postTurnstileEvent.bind(Ee),Ae=new(function(e){p(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.call(this,"map.load")).success={},e.skuToken="",e}return g(n,[{key:"postMapLoadEvent",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,he.EVENTS_URL&&(n||he.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ge)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),N(this.anonId)||(this.anonId=D()),this.postEvent(i,{skuToken:this.skuToken},(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e))}}}]),n}(Se)),Re=Ae.postMapLoadEvent.bind(Ae),Me=new(function(e){p(n,e);var t=m(n);function n(){var e;return v(this,n),(e=t.call(this,"map.auth")).success={},e.skuToken="",e}return g(n,[{key:"getSession",value:function(e,t,n,r){var i=this;if(he.API_URL&&he.SESSION_PATH){var a=be(he.API_URL+he.SESSION_PATH);a.params.push("sku=".concat(t||"")),a.params.push("access_token=".concat(r||he.ACCESS_TOKEN||""));var o={url:we(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Xe(o,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"getSessionAPI",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,he.SESSION_PATH&&he.API_URL&&(n||he.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ge)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||this.getSession(i,this.skuToken,(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e)}}}]),n}(Se)),Be=Me.getSessionAPI.bind(Me),Pe=new Set,Ie=500,ze=50,Le={};function De(e){var t,n,r=Fe(e);r&&r.forEach((function(e){var r=e.split("=");"language"===r[0]?t=r[1]:"worldview"===r[0]&&(n=r[1])}));var i="mapbox-tiles";return t&&(i+="-".concat(t)),n&&(i+="-".concat(n)),i}function Oe(){try{return t.caches}catch(e){}}function Ne(e){var t=Oe();t&&!Le[e]&&(Le[e]=t.open(e))}function Fe(e){var t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}function je(e){var t=e.indexOf("?");if(t<0)return e;var n=Fe(e).filter((function(e){var t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return n.length?"".concat(e.slice(0,t),"?").concat(n.join("&")):e.slice(0,t)}var Ve=1/0,Ze={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ze);var Ue=function(e){p(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),401===r&&_e(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),(a=t.call(this,e)).status=r,a.url=i,a}return g(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}(f(Error)),Ge=X()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===t.location.protocol?t.parent:t).location.href},He=function(e,n){if(!(/^file:/.test(r=e.url)||/^file:/.test(Ge())&&!/^\w+:/.test(r))){if(t.fetch&&t.Request&&t.AbortController&&t.Request.prototype.hasOwnProperty("signal"))return function(e,n){var r,i=new t.AbortController,a=new t.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Ge(),signal:i.signal}),o=!1,s=!1,l=(r=a.url).indexOf("sku=")>0&&_e(r);"json"===e.type&&a.headers.set("Accept","application/json");var u=function(r,i,o){if(!s){if(r&&"SecurityError"!==r.message&&H(r),i&&o)return c(i);var u=Date.now();t.fetch(a).then((function(t){if(t.ok){var r=l?t.clone():null;return c(t,r,u)}return n(new Ue(t.statusText,t.status,e.url))})).catch((function(e){20!==e.code&&n(new Error(e.message))}))}},c=function(r,i,l){("arrayBuffer"===e.type?r.arrayBuffer():"json"===e.type?r.json():r.text()).then((function(e){s||(i&&l&&function(e,n,r){var i=De(e.url);if(Ne(i),Le[i]){var a={status:n.status,statusText:n.statusText,headers:new t.Headers};n.headers.forEach((function(e,t){return a.headers.set(t,e)}));var o=K(n.headers.get("Cache-Control")||"");if(!o["no-store"]){o["max-age"]&&a.headers.set("Expires",new Date(r+1e3*o["max-age"]).toUTCString());var s=a.headers.get("Expires");s&&(new Date(s).getTime()-r<42e4||function(e,t){if(void 0===Te)try{new Response(new ReadableStream),Te=!0}catch(e){Te=!1}Te?t(e.body):e.blob().then(t)}(n,(function(n){var r=new t.Response(n,a);Ne(i),Le[i]&&Le[i].then((function(t){return t.put(je(e.url),r)})).catch((function(e){return H(e.message)}))})))}}}(a,i,l),o=!0,n(null,e,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((function(e){s||n(new Error(e.message))}))};return l?function(e,t){var n=De(e.url);if(Ne(n),!Le[n])return t(null);var r=je(e.url);Le[n].then((function(e){e.match(r).then((function(n){var i=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=K(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(n);e.delete(r),i&&e.put(r,n.clone()),t(null,n,i)})).catch(t)})).catch(t)}(a,u):u(null,null),{cancel:function(){s=!0,o||i.abort()}}}(e,n);if(X()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,n,void 0,!0)}var r;return function(e,n){var r=new t.XMLHttpRequest;for(var i in r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer"),e.headers)r.setRequestHeader(i,e.headers[i]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=function(){n(new Error(r.statusText))},r.onload=function(){if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){var t=r.response;if("json"===e.type)try{t=JSON.parse(r.response)}catch(e){return n(e)}n(null,t,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else n(new Ue(r.statusText,r.status,e.url))},r.send(e.body),{cancel:function(){return r.abort()}}}(e,n)},qe=function(e,t){return He(I(e,{type:"arrayBuffer"}),t)},We=function(e,t){return He(I(e,{method:"POST"}),t)},Xe=function(e,t){return He(I(e,{method:"GET"}),t)};function Ke(e){var n=t.document.createElement("a");return n.href=e,n.protocol===t.document.location.protocol&&n.host===t.document.location.host}var Ye,Je,Qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Ye=[],Je=0;var $e=function e(n,r){if(de.supported&&(n.headers||(n.headers={}),n.headers.accept="image/webp,*/*"),Je>=he.MAX_PARALLEL_IMAGE_REQUESTS){var i={requestParameters:n,callback:r,cancelled:!1,cancel:function(){this.cancelled=!0}};return Ye.push(i),i}Je++;var a=!1,o=function(){if(!a)for(a=!0,Je--;Ye.length&&Je<he.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Ye.shift(),n=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=e(n,r).cancel)}},s=qe(n,(function(e,n,i,a){o(),e?r(e):n&&(t.createImageBitmap?function(e,n){var r=new t.Blob([new Uint8Array(e)],{type:"image/png"});t.createImageBitmap(r).then((function(e){n(null,e)})).catch((function(e){n(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(n,(function(e,t){return r(e,t,i,a)})):function(e,n){var r=new t.Image,i=t.URL;r.onload=function(){n(null,r),i.revokeObjectURL(r.src),r.onload=null,t.requestAnimationFrame((function(){r.src=Qe}))},r.onerror=function(){return n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new t.Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?i.createObjectURL(a):Qe}(n,(function(e,t){return r(e,t,i,a)})))}));return{cancel:function(){s.cancel(),o()}}};function et(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function tt(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var nt=g((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,e),I(this,n),this.type=t})),rt=function(e){p(n,e);var t=m(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v(this,n),t.call(this,"error",I({error:e},r))}return g(n)}(nt),it=function(){function e(){v(this,e)}return g(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},et(e,t,this._listeners),this}},{key:"off",value:function(e,t){return tt(e,t,this._listeners),tt(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){var n=this;return t?(this._oneTimeListeners=this._oneTimeListeners||{},et(e,t,this._oneTimeListeners),this):new Promise((function(t){return n.once(e,t)}))}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new nt(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;var r,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],a=d(i);try{for(a.s();!(r=a.n()).done;)r.value.call(this,e)}catch(h){a.e(h)}finally{a.f()}var o,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],l=d(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;tt(n,u,this._oneTimeListeners),u.call(this,e)}}catch(h){l.e(h)}finally{l.f()}var c=this._eventedParent;c&&(I(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(e))}else e instanceof rt&&console.error(e.error);return this}},{key:"listens",value:function(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),at=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":true,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"cross-faded"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"cross-faded":{"type":"property-type"},"cross-faded-data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ot(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)e[s]=o[s]}return e}function st(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function lt(e){if(Array.isArray(e))return e.map(lt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=lt(e[n]);return t}return st(e)}var ut=function(e){p(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,r)).message=r,i.key=e,i}return g(n)}(f(Error)),ct=ut,ht=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];v(this,e),this.parent=t,this.bindings={};var r,i=d(n);try{for(i.s();!(r=i.n()).done;){var a=h(r.value,2),o=a[0],s=a[1];this.bindings[o]=s}}catch(l){i.e(l)}finally{i.f()}}return g(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),dt=ht,ft={kind:"null"},pt={kind:"number"},mt={kind:"string"},vt={kind:"boolean"},gt={kind:"color"},yt={kind:"object"},_t={kind:"value"},xt={kind:"collator"},bt={kind:"formatted"},wt={kind:"resolvedImage"};function kt(e,t){return{kind:"array",itemType:e,N:t}}function Tt(e){if("array"===e.kind){var t=Tt(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var St=[ft,pt,mt,vt,gt,bt,yt,kt(_t),wt];function Et(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Et(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind){var n,r=d(St);try{for(r.s();!(n=r.n()).done;)if(!Et(n.value,t))return null}catch(i){r.e(i)}finally{r.f()}}}return"Expected ".concat(Tt(e)," but found ").concat(Tt(t)," instead.")}function Ct(e,t){return t.some((function(t){return t.kind===e.kind}))}function At(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}function Rt(e){var t={exports:{}};return e(t,t.exports),t.exports}var Mt=Rt((function(e,t){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function o(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{t.parseCSSColor=function(e){var t,s=e.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(t=parseInt(s.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===s.length&&(t=parseInt(s.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=s.indexOf("("),u=s.indexOf(")");if(-1!==l&&u+1===s.length){var c=s.substr(0,l),h=s.substr(l+1,u-(l+1)).split(","),d=1;switch(c){case"rgba":if(4!==h.length)return null;d=a(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),d];case"hsla":if(4!==h.length)return null;d=a(h.pop());case"hsl":if(3!==h.length)return null;var f=(parseFloat(h[0])%360+360)%360/360,p=a(h[1]),m=a(h[2]),v=m<=.5?m*(p+1):m+p-m*p,g=2*m-v;return[r(255*o(g,v,f+1/3)),r(255*o(g,v,f)),r(255*o(g,v,f-1/3)),d];default:return null}}return null}}catch(e){}})),Bt=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;v(this,e),this.r=t,this.g=n,this.b=r,this.a=i}return g(e,[{key:"toString",value:function(){var e=this.toArray(),t=h(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return"rgba(".concat(Math.round(n),",").concat(Math.round(r),",").concat(Math.round(i),",").concat(a,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}},{key:"toArray01",value:function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[e/r,t/r,n/r,r]}},{key:"toArray01PremultipliedAlpha",value:function(){return[this.r,this.g,this.b,this.a]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var n=Mt.parseCSSColor(t);return n?new e(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}}}}]),e}();Bt.black=new Bt(0,0,0,1),Bt.white=new Bt(1,1,1,1),Bt.transparent=new Bt(0,0,0,0),Bt.red=new Bt(1,0,0,1),Bt.blue=new Bt(0,0,1,1);var Pt=Bt,It=function(){function e(t,n,r){v(this,e),this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return g(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),zt=g((function e(t,n,r,i,a){v(this,e),this.text=t.normalize?t.normalize():t,this.image=n,this.scale=r,this.fontStack=i,this.textColor=a})),Lt=function(){function e(t){v(this,e),this.sections=t}return g(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}},{key:"serialize",value:function(){var e,t=["format"],n=d(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"fromString",value:function(t){return new e([new zt(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),Dt=function(){function e(t){v(this,e),this.name=t.name,this.available=t.available}return g(e,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function Ot(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([e,t,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Nt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Pt)return!0;if(e instanceof It)return!0;if(e instanceof Lt)return!0;if(e instanceof Dt)return!0;if(Array.isArray(e)){var t,n=d(e);try{for(n.s();!(t=n.n()).done;)if(!Nt(t.value))return!1}catch(i){n.e(i)}finally{n.f()}return!0}if("object"==typeof e){for(var r in e)if(!Nt(e[r]))return!1;return!0}return!1}function Ft(e){if(null===e)return ft;if("string"==typeof e)return mt;if("boolean"==typeof e)return vt;if("number"==typeof e)return pt;if(e instanceof Pt)return gt;if(e instanceof It)return xt;if(e instanceof Lt)return bt;if(e instanceof Dt)return wt;if(Array.isArray(e)){var t,n,r=e.length,i=d(e);try{for(i.s();!(n=i.n()).done;){var a=Ft(n.value);if(t){if(t===a)continue;t=_t;break}t=a}}catch(o){i.e(o)}finally{i.f()}return kt(t||_t,r)}return yt}function jt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Pt||e instanceof Lt||e instanceof Dt?e.toString():JSON.stringify(e)}var Vt=function(){function e(t,n){v(this,e),this.type=t,this.value=n}return g(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Pt?["rgba"].concat(this.value.toArray()):this.value instanceof Lt?this.value.serialize():this.value}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!Nt(t[1]))return n.error("invalid value");var r=t[1],i=Ft(r),a=n.expectedType;return"array"!==i.kind||0!==i.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(i=a),new e(i,r)}}]),e}(),Zt=Vt,Ut=function(){function e(t){v(this,e),this.name="ExpressionEvaluationError",this.message=t}return g(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),Gt={string:mt,number:pt,boolean:vt,object:yt},Ht=function(){function e(t,n){v(this,e),this.type=t,this.args=n}return g(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!Et(this.type,Ft(n)))return n;if(t===this.args.length-1)throw new Ut("Expected value to be of type ".concat(Tt(this.type),", but found ").concat(Tt(Ft(n))," instead."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r,i=1,a=t[0];if("array"===a){var o,s;if(t.length>2){var l=t[1];if("string"!=typeof l||!(l in Gt)||"object"===l)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=Gt[l],i++}else o=_t;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=t[2],i++}r=kt(o,s)}else r=Gt[a];for(var u=[];i<t.length;i++){var c=n.parse(t[i],i,_t);if(!c)return null;u.push(c)}return new e(r,u)}}]),e}(),qt=Ht,Wt=function(){function e(t){v(this,e),this.type=bt,this.sections=t}return g(e,[{key:"evaluate",value:function(e){return new Lt(this.sections.map((function(t){var n=t.content.evaluate(e);return Ft(n)===wt?new zt("",n,null,null,null):new zt(jt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,n=d(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],n=d(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return n.error("First argument must be an image or text section.");for(var i=[],a=!1,o=1;o<=t.length-1;++o){var s=t[o];if(a&&"object"==typeof s&&!Array.isArray(s)){a=!1;var l=null;if(s["font-scale"]&&!(l=n.parse(s["font-scale"],1,pt)))return null;var u=null;if(s["text-font"]&&!(u=n.parse(s["text-font"],1,kt(mt))))return null;var c=null;if(s["text-color"]&&!(c=n.parse(s["text-color"],1,gt)))return null;var h=i[i.length-1];h.scale=l,h.font=u,h.textColor=c}else{var d=n.parse(t[o],1,_t);if(!d)return null;var f=d.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,i.push({content:d,scale:null,font:null,textColor:null})}}return new e(i)}}]),e}(),Xt=function(){function e(t){v(this,e),this.type=wt,this.input=t}return g(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=Dt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,mt);return r?new e(r):n.error("No image name provided.")}}]),e}(),Kt={"to-boolean":vt,"to-color":gt,"to-number":pt,"to-string":mt},Yt=function(){function e(t,n){v(this,e),this.type=t,this.args=n}return g(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,n,r,i=d(this.args);try{for(i.s();!(r=i.n()).done;){if(t=r.value.evaluate(e),n=null,t instanceof Pt)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Ot(t[0],t[1],t[2],t[3])))return new Pt(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(c){i.e(c)}finally{i.f()}throw new Ut(n||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var o,s=null,l=d(this.args);try{for(l.s();!(o=l.n()).done;){if(null===(s=o.value.evaluate(e)))return 0;var u=Number(s);if(!isNaN(u))return u}}catch(c){l.e(c)}finally{l.f()}throw new Ut("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?Lt.fromString(jt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Dt.fromString(jt(this.args[0].evaluate(e))):jt(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new Wt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Xt(this.args[0]).serialize();var e=["to-".concat(this.type.kind)];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return n.error("Expected one argument.");for(var i=Kt[r],a=[],o=1;o<t.length;o++){var s=n.parse(t[o],o,_t);if(!s)return null;a.push(s)}return new e(i,a)}}]),e}(),Jt=Yt,Qt=["Unknown","Point","LineString","Polygon"],$t=function(){function e(){v(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}return g(e,[{key:"id",value:function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?Qt[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,t=this.featureDistanceData.scale,n=this.featureTileCoord,r=n.x,i=n.y;return this.featureDistanceData.bearing[0]*(r*t-e[0])+this.featureDistanceData.bearing[1]*(i*t-e[1])}return 0}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Pt.parse(e)),t}}]),e}(),en=function(){function e(t,n,r,i){v(this,e),this.name=t,this.type=n,this._evaluate=r,this.args=i}return g(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){var r,i=t[0],a=e.definitions[i];if(!a)return n.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,s=Array.isArray(a)?a[0]:a.type,l=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,u=l.filter((function(e){var n=h(e,1)[0];return!Array.isArray(n)||n.length===t.length-1})),f=null,p=d(u);try{for(p.s();!(o=p.n()).done;){var m=h(o.value,2),v=m[0],g=m[1];f=new An(n.registry,n.path,null,n.scope);for(var y=[],_=!1,x=1;x<t.length;x++){var b=t[x],w=Array.isArray(v)?v[x-1]:v.type,k=f.parse(b,1+y.length,w);if(!k){_=!0;break}y.push(k)}if(!_)if(Array.isArray(v)&&v.length!==y.length)f.error("Expected ".concat(v.length," arguments, but found ").concat(y.length," instead."));else{for(var T=0;T<y.length;T++){var S=Array.isArray(v)?v[T]:v.type,E=y[T];f.concat(T+1).checkSubtype(S,E.type)}if(0===f.errors.length)return new e(i,s,g,y)}}}catch(B){p.e(B)}finally{p.f()}if(1===u.length)(r=n.errors).push.apply(r,c(f.errors));else{for(var C=(u.length?u:l).map((function(e){var t;return t=h(e,1)[0],Array.isArray(t)?"(".concat(t.map(Tt).join(", "),")"):"(".concat(Tt(t.type),"...)")})).join(" | "),A=[],R=1;R<t.length;R++){var M=n.parse(t[R],1+A.length);if(!M)return null;A.push(Tt(M.type))}n.error("Expected arguments of type ".concat(C,", but found (").concat(A.join(", "),") instead."))}return null}},{key:"register",value:function(t,n){for(var r in e.definitions=n,n)t[r]=e}}]),e}(),tn=en,nn=function(){function e(t,n,r){v(this,e),this.type=xt,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=n}return g(e,[{key:"evaluate",value:function(e){return new It(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,vt);if(!i)return null;var a=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,vt);if(!a)return null;var o=null;return r.locale&&!(o=n.parse(r.locale,1,mt))?null:new e(i,a,o)}}]),e}(),rn=8192;function an(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function on(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function sn(e,t){var n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*rn),Math.round(r*i*rn)]}function ln(e,t,n){var r=e[0]-t[0],i=e[1]-t[1],a=e[0]-n[0],o=e[1]-n[1];return r*o-a*i==0&&r*a<=0&&i*o<=0}function un(e,t){for(var n,r,i,a=!1,o=0,s=t.length;o<s;o++)for(var l=t[o],u=0,c=l.length;u<c-1;u++){if(ln(e,l[u],l[u+1]))return!1;(r=l[u])[1]>(n=e)[1]!=(i=l[u+1])[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(a=!a)}return a}function cn(e,t){for(var n=0;n<t.length;n++)if(un(e,t[n]))return!0;return!1}function hn(e,t,n,r){var i=r[0]-n[0],a=r[1]-n[1],o=(e[0]-n[0])*a-i*(e[1]-n[1]),s=(t[0]-n[0])*a-i*(t[1]-n[1]);return o>0&&s<0||o<0&&s>0}function dn(e,t,n){var r,i,a,o,s,l,u,c=d(n);try{for(c.s();!(r=c.n()).done;)for(var h=r.value,f=0;f<h.length-1;++f)if(0!=(l=[(s=h[f+1])[0]-(o=h[f])[0],s[1]-o[1]])[0]*(u=[(a=t)[0]-(i=e)[0],a[1]-i[1]])[1]-l[1]*u[0]&&hn(i,a,o,s)&&hn(o,s,i,a))return!0}catch(p){c.e(p)}finally{c.f()}return!1}function fn(e,t){for(var n=0;n<e.length;++n)if(!un(e[n],t))return!1;for(var r=0;r<e.length-1;++r)if(dn(e[r],e[r+1],t))return!1;return!0}function pn(e,t){for(var n=0;n<t.length;n++)if(fn(e,t[n]))return!0;return!1}function mn(e,t,n){for(var r=[],i=0;i<e.length;i++){for(var a=[],o=0;o<e[i].length;o++){var s=sn(e[i][o],n);an(t,s),a.push(s)}r.push(a)}return r}function vn(e,t,n){for(var r=[],i=0;i<e.length;i++){var a=mn(e[i],t,n);r.push(a)}return r}function gn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){var i=.5*r,a=e[0]-n[0]>i?-r:n[0]-e[0]>i?r:0;0===a&&(a=e[0]-n[2]>i?-r:n[2]-e[0]>i?r:0),e[0]+=a}an(t,e)}function yn(e,t,n,r){var i=Math.pow(2,r.z)*rn,a=[r.x*rn,r.y*rn],o=[];if(!e)return o;var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var u,c=s.value,h=d(c);try{for(h.s();!(u=h.n()).done;){var f=u.value,p=[f.x+a[0],f.y+a[1]];gn(p,t,n,i),o.push(p)}}catch(m){h.e(m)}finally{h.f()}}}catch(m){l.e(m)}finally{l.f()}return o}function _n(e,t,n,r){var i=Math.pow(2,r.z)*rn,a=[r.x*rn,r.y*rn],o=[];if(!e)return o;var s,l,u=d(e);try{for(u.s();!(s=u.n()).done;){var c,h=s.value,f=[],p=d(h);try{for(p.s();!(c=p.n()).done;){var m=c.value,v=[m.x+a[0],m.y+a[1]];an(t,v),f.push(v)}}catch(w){p.e(w)}finally{p.f()}o.push(f)}}catch(w){u.e(w)}finally{u.f()}if(t[2]-t[0]<=i/2){(l=t)[0]=l[1]=1/0,l[2]=l[3]=-1/0;var g,y=d(o);try{for(y.s();!(g=y.n()).done;){var _,x=g.value,b=d(x);try{for(b.s();!(_=b.n()).done;)gn(_.value,t,n,i)}catch(w){b.e(w)}finally{b.f()}}}catch(w){y.e(w)}finally{y.f()}}return o}var xn=function(){function e(t,n){v(this,e),this.type=vt,this.geojson=t,this.geometries=n}return g(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){var a=mn(t.coordinates,r,i),o=yn(e.geometry(),n,r,i);if(!on(n,r))return!1;var s,l=d(o);try{for(l.s();!(s=l.n()).done;)if(!un(s.value,a))return!1}catch(p){l.e(p)}finally{l.f()}}if("MultiPolygon"===t.type){var u=vn(t.coordinates,r,i),c=yn(e.geometry(),n,r,i);if(!on(n,r))return!1;var h,f=d(c);try{for(f.s();!(h=f.n()).done;)if(!cn(h.value,u))return!1}catch(p){f.e(p)}finally{f.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){var a=mn(t.coordinates,r,i),o=_n(e.geometry(),n,r,i);if(!on(n,r))return!1;var s,l=d(o);try{for(l.s();!(s=l.n()).done;)if(!fn(s.value,a))return!1}catch(p){l.e(p)}finally{l.f()}}if("MultiPolygon"===t.type){var u=vn(t.coordinates,r,i),c=_n(e.geometry(),n,r,i);if(!on(n,r))return!1;var h,f=d(c);try{for(f.s();!(h=f.n()).done;)if(!pn(h.value,u))return!1}catch(p){f.e(p)}finally{f.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(Nt(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var a=r.features[i].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(r,r.features[i].geometry)}else if("Feature"===r.type){var o=r.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new e(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new e(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}(),bn=xn;function wn(e){if(e instanceof tn){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof bn)return!1;var t=!0;return e.eachChild((function(e){t&&!wn(e)&&(t=!1)})),t}function kn(e){if(e instanceof tn&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!kn(e)&&(t=!1)})),t}function Tn(e,t){if(e instanceof tn&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!Tn(e,t)&&(n=!1)})),n}var Sn=function(){function e(t,n){v(this,e),this.type=n.type,this.name=t,this.boundExpression=n}return g(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var r=t[1];return n.scope.has(r)?new e(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),En=Sn,Cn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new dt,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];v(this,e),this.registry=t,this.path=n,this.key=n.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=i,this.errors=a,this.expectedType=r}return g(e,[{key:"parse",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}},{key:"_parse",value:function(e,t){function n(e,t,n){return"assert"===n?new qt(t,[e]):"coerce"===n?new Jt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var a=i.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=n(a,o,t.typeAnnotation||"coerce");else a=n(a,o,t.typeAnnotation||"assert")}if(!(a instanceof Zt)&&"resolvedImage"!==a.type.kind&&Rn(a)){var l=new $t;try{a=new Zt(a.type,a.evaluate(l))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,n,r){var i="number"==typeof t?this.path.concat(t):this.path,a=r?this.scope.concat(r):this.scope;return new e(this.registry,i,n||null,a,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new ct(i,e))}},{key:"checkSubtype",value:function(e,t){var n=Et(e,t);return n&&this.error(n),n}}]),e}(),An=Cn;function Rn(e){if(e instanceof En)return Rn(e.boundExpression);if(e instanceof tn&&"error"===e.name)return!1;if(e instanceof nn)return!1;if(e instanceof bn)return!1;var t=e instanceof Jt||e instanceof qt,n=!0;return e.eachChild((function(e){n=t?n&&Rn(e):n&&e instanceof Zt})),!!n&&wn(e)&&Tn(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Mn(e,t){for(var n,r,i=e.length-1,a=0,o=i,s=0;a<=o;)if(n=e[s=Math.floor((a+o)/2)],r=e[s+1],n<=t){if(s===i||t<r)return s;a=s+1}else{if(!(n>t))throw new Ut("Input is not a number.");o=s-1}return 0}var Bn=function(){function e(t,n,r){v(this,e),this.type=t,this.input=n,this.labels=[],this.outputs=[];var i,a=d(r);try{for(a.s();!(i=a.n()).done;){var o=h(i.value,2),s=o[0],l=o[1];this.labels.push(s),this.outputs.push(l)}}catch(u){a.e(u)}finally{a.f()}}return g(e,[{key:"evaluate",value:function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[Mn(t,r)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,n=d(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(t[1],1,pt);if(!r)return null;var i=[],a=null;n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],l=t[o+1],u=o,c=o+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=n.parse(l,c,a);if(!h)return null;a=a||h.type,i.push([s,h])}return new e(a,r,i)}}]),e}(),Pn=Bn;function In(e,t,n){return e*(1-n)+t*n}function zn(e,t,n){return e.map((function(e,r){return In(e,t[r],n)}))}var Ln=Object.freeze({__proto__:null,number:In,color:function(e,t,n){return new Pt(In(e.r,t.r,n),In(e.g,t.g,n),In(e.b,t.b,n),In(e.a,t.a,n))},array:zn}),Dn=.95047,On=1.08883,Nn=4/29,Fn=6/29,jn=3*Fn*Fn,Vn=Math.PI/180,Zn=180/Math.PI;function Un(e){return e>.008856451679035631?Math.pow(e,1/3):e/jn+Nn}function Gn(e){return e>Fn?e*e*e:jn*(e-Nn)}function Hn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function qn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Wn(e){var t=qn(e.r),n=qn(e.g),r=qn(e.b),i=Un((.4124564*t+.3575761*n+.1804375*r)/Dn),a=Un((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-Un((.0193339*t+.119192*n+.9503041*r)/On)),alpha:e.a}}function Xn(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Gn(t),n=Dn*Gn(n),r=On*Gn(r),new Pt(Hn(3.2404542*n-1.5371385*t-.4985314*r),Hn(-.969266*n+1.8760108*t+.041556*r),Hn(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function Kn(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var Yn={forward:Wn,reverse:Xn,interpolate:function(e,t,n){return{l:In(e.l,t.l,n),a:In(e.a,t.a,n),b:In(e.b,t.b,n),alpha:In(e.alpha,t.alpha,n)}}},Jn={forward:function(e){var t=Wn(e),n=t.l,r=t.a,i=t.b,a=Math.atan2(i,r)*Zn;return{h:a<0?a+360:a,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*Vn,n=e.c;return Xn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Kn(e.h,t.h,n),c:In(e.c,t.c,n),l:In(e.l,t.l,n),alpha:In(e.alpha,t.alpha,n)}}},Qn=Object.freeze({__proto__:null,lab:Yn,hcl:Jn}),$n=function(){function e(t,n,r,i,a){v(this,e),this.type=t,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var o,s=d(a);try{for(s.s();!(o=s.n()).done;){var l=h(o.value,2),u=l[0],c=l[1];this.labels.push(u),this.outputs.push(c)}}catch(f){s.e(f)}finally{s.f()}}return g(e,[{key:"evaluate",value:function(t){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=n[0])return r[0].evaluate(t);var a=n.length;if(i>=n[a-1])return r[a-1].evaluate(t);var o=Mn(n,i),s=e.interpolationFactor(this.interpolation,i,n[o],n[o+1]),l=r[o].evaluate(t),u=r[o+1].evaluate(t);return"interpolate"===this.operator?Ln[this.type.kind.toLowerCase()](l,u,s):"interpolate-hcl"===this.operator?Jn.reverse(Jn.interpolate(Jn.forward(l),Jn.forward(u),s)):Yn.reverse(Yn.interpolate(Yn.forward(l),Yn.forward(u),s))}},{key:"eachChild",value:function(e){e(this.input);var t,n=d(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,r,i){var a=0;if("exponential"===e.name)a=er(t,e.base,r,i);else if("linear"===e.name)a=er(t,1,r,i);else if("cubic-bezier"===e.name){var o=e.controlPoints;a=new n(o[0],o[1],o[2],o[3]).solve(er(t,1,r,i))}return a}},{key:"parse",value:function(t,n){var r=u(t),i=r[0],a=r[1],o=r[2],s=r.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(e){return"number"!=typeof e||e<0||e>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(o=n.parse(o,2,pt)))return null;var h=[],d=null;"interpolate-hcl"===i||"interpolate-lab"===i?d=gt:n.expectedType&&"value"!==n.expectedType.kind&&(d=n.expectedType);for(var f=0;f<s.length;f+=2){var p=s[f],m=s[f+1],v=f+3,g=f+4;if("number"!=typeof p)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(h.length&&h[h.length-1][0]>=p)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var y=n.parse(m,g,d);if(!y)return null;d=d||y.type,h.push([p,y])}return"number"===d.kind||"color"===d.kind||"array"===d.kind&&"number"===d.itemType.kind&&"number"==typeof d.N?new e(d,i,a,o,h):n.error("Type ".concat(Tt(d)," is not interpolatable."))}}]),e}();function er(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}var tr=$n,nr=function(){function e(t,n){v(this,e),this.type=t,this.args=n}return g(e,[{key:"evaluate",value:function(e){var t,n,r=null,i=0,a=d(this.args);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(i++,(r=o.evaluate(e))&&r instanceof Dt&&!r.available&&(t||(t=r),r=null,i===this.args.length))return t;if(null!==r)break}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var a,o=[],s=d(t.slice(1));try{for(s.s();!(a=s.n()).done;){var l=a.value,u=n.parse(l,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,o.push(u)}}catch(h){s.e(h)}finally{s.f()}var c=i&&o.some((function(e){return Et(i,e.type)}));return new e(c?_t:r,o)}}]),e}(),rr=nr,ir=function(){function e(t,n){v(this,e),this.type=n.type,this.bindings=[].concat(t),this.result=n}return g(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=d(this.bindings);try{for(n.s();!(t=n.n()).done;)e(t.value[1])}catch(r){n.e(r)}finally{n.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],n=d(this.bindings);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,2),i=r[0],a=r[1];t.push(i,a.serialize())}}catch(o){n.e(o)}finally{n.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var r=[],i=1;i<t.length-1;i+=2){var a=t[i];if("string"!=typeof a)return n.error("Expected string, but found ".concat(typeof a," instead."),i);if(/[^a-zA-Z0-9_]/.test(a))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=n.parse(t[i+1],i+1);if(!o)return null;r.push([a,o])}var s=n.parse(t[t.length-1],t.length-1,n.expectedType,r);return s?new e(r,s):null}}]),e}(),ar=ir,or=function(){function e(t,n,r){v(this,e),this.type=t,this.index=n,this.input=r}return g(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Ut("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new Ut("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new Ut("Array index must be an integer, but found ".concat(t," instead."));return n[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,pt),i=n.parse(t[2],2,kt(n.expectedType||_t));return r&&i?new e(i.type.itemType,r,i):null}}]),e}(),sr=or,lr=function(){function e(t,n){v(this,e),this.type=vt,this.needle=t,this.haystack=n}return g(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!At(t,["boolean","string","number","null"]))throw new Ut("Expected first argument to be of type boolean, string, number or null, but found ".concat(Tt(Ft(t))," instead."));if(!At(n,["string","array"]))throw new Ut("Expected second argument to be of type array or string, but found ".concat(Tt(Ft(n))," instead."));return n.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,_t),i=n.parse(t[2],2,_t);return r&&i?Ct(r.type,[vt,mt,pt,ft,_t])?new e(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Tt(r.type)," instead")):null}}]),e}(),ur=lr,cr=function(){function e(t,n,r){v(this,e),this.type=pt,this.needle=t,this.haystack=n,this.fromIndex=r}return g(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!At(t,["boolean","string","number","null"]))throw new Ut("Expected first argument to be of type boolean, string, number or null, but found ".concat(Tt(Ft(t))," instead."));if(!At(n,["string","array"]))throw new Ut("Expected second argument to be of type array or string, but found ".concat(Tt(Ft(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,_t),i=n.parse(t[2],2,_t);if(!r||!i)return null;if(!Ct(r.type,[vt,mt,pt,ft,_t]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Tt(r.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,pt);return a?new e(r,i,a):null}return new e(r,i)}}]),e}(),hr=cr,dr=function(){function e(t,n,r,i,a,o){v(this,e),this.inputType=t,this.type=n,this.input=r,this.cases=i,this.outputs=a,this.otherwise=o}return g(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(Ft(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,n=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],a={},o=d(r);try{for(o.s();!(e=o.n()).done;){var s=e.value,l=a[this.cases[s]];void 0===l?(a[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[l][1].push(s)}}catch(g){o.e(g)}finally{o.f()}for(var u=function(e){return"number"===t.inputType.kind?Number(e):e},c=0,f=i;c<f.length;c++){var p=h(f[c],2),m=p[0],v=p[1];n.push(1===v.length?u(v[0]):v.map(u)),n.push(this.outputs[m].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var a={},o=[],s=2;s<t.length-1;s+=2){var l=t[s],u=t[s+1];Array.isArray(l)||(l=[l]);var c=n.concat(s);if(0===l.length)return c.error("Expected at least one branch label.");var h,f=d(l);try{for(f.s();!(h=f.n()).done;){var p=h.value;if("number"!=typeof p&&"string"!=typeof p)return c.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof p&&Math.floor(p)!==p)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,Ft(p)))return null}else r=Ft(p);if(void 0!==a[String(p)])return c.error("Branch labels must be unique.");a[String(p)]=o.length}}catch(y){f.e(y)}finally{f.f()}var m=n.parse(u,s,i);if(!m)return null;i=i||m.type,o.push(m)}var v=n.parse(t[1],1,_t);if(!v)return null;var g=n.parse(t[t.length-1],t.length-1,i);return g?"value"!==v.type.kind&&n.concat(1).checkSubtype(r,v.type)?null:new e(r,i,v,a,o,g):null}}]),e}(),fr=dr,pr=function(){function e(t,n,r){v(this,e),this.type=t,this.branches=n,this.otherwise=r}return g(e,[{key:"evaluate",value:function(e){var t,n=d(this.branches);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],a=r[1];if(i.evaluate(e))return a.evaluate(e)}}catch(o){n.e(o)}finally{n.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=d(this.branches);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],a=r[1];e(i),e(a)}}catch(o){n.e(o)}finally{n.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=h(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],a=1;a<t.length-1;a+=2){var o=n.parse(t[a],a,vt);if(!o)return null;var s=n.parse(t[a+1],a+1,r);if(!s)return null;i.push([o,s]),r=r||s.type}var l=n.parse(t[t.length-1],t.length-1,r);return l?new e(r,i,l):null}}]),e}(),mr=pr,vr=function(){function e(t,n,r,i){v(this,e),this.type=t,this.input=n,this.beginIndex=r,this.endIndex=i}return g(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!At(t,["string","array"]))throw new Ut("Expected first argument to be of type array or string, but found ".concat(Tt(Ft(t))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,_t),i=n.parse(t[2],2,pt);if(!r||!i)return null;if(!Ct(r.type,[kt(_t),mt,_t]))return n.error("Expected first argument to be of type array or string, but found ".concat(Tt(r.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,pt);return a?new e(r.type,r,i,a):null}return new e(r.type,r,i)}}]),e}(),gr=vr;function yr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function _r(e,t,n,r){return 0===r.compare(t,n)}function xr(e,t,n){var r="=="!==e&&"!="!==e;return function(){function i(e,t,n){v(this,i),this.type=vt,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return g(i,[{key:"evaluate",value:function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=Ft(a),l=Ft(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new Ut('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(l.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var u=Ft(a),c=Ft(o);if("string"!==u.kind||"string"!==c.kind)return t(i,a,o)}return this.collator?n(i,a,o,this.collator.evaluate(i)):t(i,a,o)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],a=t.parse(e[1],1,_t);if(!a)return null;if(!yr(n,a.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Tt(a.type),"'."));var o=t.parse(e[2],2,_t);if(!o)return null;if(!yr(n,o.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Tt(o.type),"'."));if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '".concat(Tt(a.type),"' and '").concat(Tt(o.type),"'."));r&&("value"===a.type.kind&&"value"!==o.type.kind?a=new qt(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new qt(a.type,[o])));var s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,xt)))return null}return new i(a,o,s)}}]),i}()}var br=xr("==",(function(e,t,n){return t===n}),_r),wr=xr("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!_r(0,t,n,r)})),kr=xr("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),Tr=xr(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),Sr=xr("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),Er=xr(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0})),Cr=function(){function e(t,n,r,i,a,o){v(this,e),this.type=mt,this.number=t,this.locale=n,this.currency=r,this.unit=i,this.minFractionDigits=a,this.maxFractionDigits=o}return g(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,pt);if(!r)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var a=null;if(i.locale&&!(a=n.parse(i.locale,1,mt)))return null;var o=null;if(i.currency&&!(o=n.parse(i.currency,1,mt)))return null;var s=null;if(i.unit&&!(s=n.parse(i.unit,1,mt)))return null;var l=null;if(i["min-fraction-digits"]&&!(l=n.parse(i["min-fraction-digits"],1,pt)))return null;var u=null;return i["max-fraction-digits"]&&!(u=n.parse(i["max-fraction-digits"],1,pt))?null:new e(r,a,o,s,l,u)}}]),e}(),Ar=function(){function e(t){v(this,e),this.type=pt,this.input=t}return g(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Ut("Expected value to be of type string or array, but found ".concat(Tt(Ft(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(Tt(r.type)," instead.")):new e(r):null}}]),e}(),Rr={"==":br,"!=":wr,">":Tr,"<":kr,">=":Er,"<=":Sr,array:qt,at:sr,boolean:qt,case:mr,coalesce:rr,collator:nn,format:Wt,image:Xt,in:ur,"index-of":hr,interpolate:tr,"interpolate-hcl":tr,"interpolate-lab":tr,length:Ar,let:ar,literal:Zt,match:fr,number:qt,"number-format":Cr,object:qt,slice:gr,step:Pn,string:qt,"to-boolean":Jt,"to-color":Jt,"to-number":Jt,"to-string":Jt,var:En,within:bn};function Mr(e,t){var n=h(t,4),r=n[0],i=n[1],a=n[2],o=n[3];r=r.evaluate(e),i=i.evaluate(e),a=a.evaluate(e);var s=o?o.evaluate(e):1,l=Ot(r,i,a,s);if(l)throw new Ut(l);return new Pt(r/255*s,i/255*s,a/255*s,s)}function Br(e,t){return e in t}function Pr(e,t){var n=t[e];return void 0===n?null:n}function Ir(e){return{type:e}}tn.register(Rr,{error:[{kind:"error"},[mt],function(e,t){var n=h(t,1)[0];throw new Ut(n.evaluate(e))}],typeof:[mt,[_t],function(e,t){return Tt(Ft(h(t,1)[0].evaluate(e)))}],"to-rgba":[kt(pt,4),[gt],function(e,t){return h(t,1)[0].evaluate(e).toArray()}],rgb:[gt,[pt,pt,pt],Mr],rgba:[gt,[pt,pt,pt,pt],Mr],has:{type:vt,overloads:[[[mt],function(e,t){return Br(h(t,1)[0].evaluate(e),e.properties())}],[[mt,yt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Br(r.evaluate(e),i.evaluate(e))}]]},get:{type:_t,overloads:[[[mt],function(e,t){return Pr(h(t,1)[0].evaluate(e),e.properties())}],[[mt,yt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Pr(r.evaluate(e),i.evaluate(e))}]]},"feature-state":[_t,[mt],function(e,t){return Pr(h(t,1)[0].evaluate(e),e.featureState||{})}],properties:[yt,[],function(e){return e.properties()}],"geometry-type":[mt,[],function(e){return e.geometryType()}],id:[_t,[],function(e){return e.id()}],zoom:[pt,[],function(e){return e.globals.zoom}],pitch:[pt,[],function(e){return e.globals.pitch||0}],"distance-from-center":[pt,[],function(e){return e.distanceFromCenter()}],"heatmap-density":[pt,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[pt,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[pt,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[_t,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[pt,Ir(pt),function(e,t){var n,r=0,i=d(t);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return r}],"*":[pt,Ir(pt),function(e,t){var n,r=1,i=d(t);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return r}],"-":{type:pt,overloads:[[[pt,pt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)-i.evaluate(e)}],[[pt],function(e,t){return-h(t,1)[0].evaluate(e)}]]},"/":[pt,[pt,pt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)/i.evaluate(e)}],"%":[pt,[pt,pt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)%i.evaluate(e)}],ln2:[pt,[],function(){return Math.LN2}],pi:[pt,[],function(){return Math.PI}],e:[pt,[],function(){return Math.E}],"^":[pt,[pt,pt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Math.pow(r.evaluate(e),i.evaluate(e))}],sqrt:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.sqrt(n.evaluate(e))}],log10:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))}],log2:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.sin(n.evaluate(e))}],cos:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.cos(n.evaluate(e))}],tan:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.tan(n.evaluate(e))}],asin:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.asin(n.evaluate(e))}],acos:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.acos(n.evaluate(e))}],atan:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.atan(n.evaluate(e))}],min:[pt,Ir(pt),function(e,t){return Math.min.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],max:[pt,Ir(pt),function(e,t){return Math.max.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],abs:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.abs(n.evaluate(e))}],round:[pt,[pt],function(e,t){var n=h(t,1)[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.floor(n.evaluate(e))}],ceil:[pt,[pt],function(e,t){var n=h(t,1)[0];return Math.ceil(n.evaluate(e))}],"filter-==":[vt,[mt,_t],function(e,t){var n=h(t,2),r=n[0],i=n[1];return e.properties()[r.value]===i.value}],"filter-id-==":[vt,[_t],function(e,t){var n=h(t,1)[0];return e.id()===n.value}],"filter-type-==":[vt,[mt],function(e,t){var n=h(t,1)[0];return e.geometryType()===n.value}],"filter-<":[vt,[mt,_t],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a<o}],"filter-id-<":[vt,[_t],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[vt,[mt,_t],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a>o}],"filter-id->":[vt,[_t],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[vt,[mt,_t],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a<=o}],"filter-id-<=":[vt,[_t],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[vt,[mt,_t],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a>=o}],"filter-id->=":[vt,[_t],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[vt,[_t],function(e,t){return h(t,1)[0].value in e.properties()}],"filter-has-id":[vt,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[vt,[kt(mt)],function(e,t){return h(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[vt,[kt(_t)],function(e,t){return h(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[vt,[mt,kt(_t)],function(e,t){var n=h(t,2),r=n[0];return n[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[vt,[mt,kt(_t)],function(e,t){var n=h(t,2),r=n[0],i=n[1];return function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:vt,overloads:[[[vt,vt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)&&i.evaluate(e)}],[Ir(vt),function(e,t){var n,r=d(t);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(e))return!1}catch(i){r.e(i)}finally{r.f()}return!0}]]},any:{type:vt,overloads:[[[vt,vt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)||i.evaluate(e)}],[Ir(vt),function(e,t){var n,r=d(t);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(e))return!0}catch(i){r.e(i)}finally{r.f()}return!1}]]},"!":[vt,[vt],function(e,t){return!h(t,1)[0].evaluate(e)}],"is-supported-script":[vt,[mt],function(e,t){var n=h(t,1)[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[mt,[mt],function(e,t){return h(t,1)[0].evaluate(e).toUpperCase()}],downcase:[mt,[mt],function(e,t){return h(t,1)[0].evaluate(e).toLowerCase()}],concat:[mt,Ir(_t),function(e,t){return t.map((function(t){return jt(t.evaluate(e))})).join("")}],"resolved-locale":[mt,[xt],function(e,t){return h(t,1)[0].evaluate(e).resolvedLocale()}]});var zr=Rr;function Lr(e){return{result:"success",value:e}}function Dr(e){return{result:"error",value:e}}function Or(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function Nr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Fr(e){return!!e.expression&&e.expression.interpolated}function jr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Vr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Zr(e){return e}function Ur(e,t){var n,r,i,a="color"===t.type,o=e.stops&&"object"==typeof e.stops[0][0],s=o||!(o||void 0!==e.property),l=e.type||(Fr(t)?"exponential":"interval");if(a&&((e=ot({},e)).stops&&(e.stops=e.stops.map((function(e){return[e[0],Pt.parse(e[1])]}))),e.default=Pt.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Qn[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));if("exponential"===l)n=Wr;else if("interval"===l)n=qr;else if("categorical"===l){n=Hr,r=Object.create(null);var u,c=d(e.stops);try{for(c.s();!(u=c.n()).done;){var h=u.value;r[h[0]]=h[1]}}catch(T){c.e(T)}finally{c.f()}i=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'.concat(l,'"'));n=Xr}if(o){for(var f={},p=[],m=0;m<e.stops.length;m++){var v=e.stops[m],g=v[0].zoom;void 0===f[g]&&(f[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},p.push(g)),f[g].stops.push([v[0].value,v[1]])}for(var y=[],_=0,x=p;_<x.length;_++){var b=x[_];y.push([f[b].zoom,Ur(f[b],t)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:tr.interpolationFactor.bind(void 0,w),zoomStops:y.map((function(e){return e[0]})),evaluate:function(n,r){var i=n.zoom;return Wr({stops:y,base:e.base},t,i).evaluate(i,r)}}}if(s){var k="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:tr.interpolationFactor.bind(void 0,k),zoomStops:e.stops.map((function(e){return e[0]})),evaluate:function(a){var o=a.zoom;return n(e,t,o,r,i)}}}return{kind:"source",evaluate:function(a,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?Gr(e.default,t.default):n(e,t,s,r,i)}}}function Gr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Hr(e,t,n,r,i){return Gr(typeof n===i?r[n]:void 0,e.default,t.default)}function qr(e,t,n){if("number"!==jr(n))return Gr(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=Mn(e.stops.map((function(e){return e[0]})),n);return e.stops[i][1]}function Wr(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==jr(n))return Gr(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var a=Mn(e.stops.map((function(e){return e[0]})),n),o=function(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],l=e.stops[a+1][1],u=Ln[t.type]||Zr;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=Qn[e.colorSpace];u=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return u(r,i,o)}}:u(s,l,o)}function Xr(e,t,n){return"color"===t.type?n=Pt.parse(n):"formatted"===t.type?n=Lt.fromString(n.toString()):"resolvedImage"===t.type?n=Dt.fromString(n.toString()):jr(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Gr(n,e.default,t.default)}var Kr=function(){function e(t,n){v(this,e),this.expression=t,this._warningHistory={},this._evaluator=new $t,this._defaultValue=n?function(e){return"color"===e.type&&(Vr(e.default)||Array.isArray(e.default))?new Pt(0,0,0,0):"color"===e.type?Pt.parse(e.default)||null:void 0===e.default?null:e.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null}return g(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,n,r,i,a,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new Ut("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(l)," instead."));return l}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function Yr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in zr}function Jr(e,t){var n=new An(zr,[],t?function(e){var t={color:gt,string:mt,number:pt,enum:mt,boolean:vt,formatted:bt,resolvedImage:wt};return"array"===e.type?kt(t[e.value]||_t,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Lr(new Kr(r,t)):Dr(n.errors)}var Qr=function(){function e(t,n){v(this,e),this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!kn(n.expression)}return g(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}},{key:"evaluate",value:function(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}}]),e}(),$r=function(){function e(t,n,r,i){v(this,e),this.kind=t,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==t&&!kn(n.expression),this.interpolationType=i}return g(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}},{key:"evaluate",value:function(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}},{key:"interpolationFactor",value:function(e,t,n){return this.interpolationType?tr.interpolationFactor(this.interpolationType,e,t,n):0}}]),e}();function ei(e,t){if("error"===(e=Jr(e,t)).result)return e;var n=e.value.expression,r=wn(n);if(!r&&!Or(t))return Dr([new ct("","data expressions not supported")]);var i=Tn(n,["zoom","pitch","distance-from-center"]);if(!i&&!Nr(t))return Dr([new ct("","zoom expressions not supported")]);var a=ni(n);return a||i?a instanceof ct?Dr([a]):a instanceof tr&&!Fr(t)?Dr([new ct("",'"interpolate" expressions cannot be used with this property')]):Lr(a?new $r(r?"camera":"composite",e.value,a.labels,a instanceof tr?a.interpolation:void 0):new Qr(r?"constant":"source",e.value)):Dr([new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var ti=function(){function e(t,n){v(this,e),this._parameters=t,this._specification=n,ot(this,Ur(this._parameters,this._specification))}return g(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function ni(e){var t=null;if(e instanceof ar)t=ni(e.result);else if(e instanceof rr){var n,r=d(e.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t=ni(i))break}}catch(a){r.e(a)}finally{r.f()}}else(e instanceof Pn||e instanceof tr)&&e.input instanceof tn&&"zoom"===e.input.name&&(t=e);return t instanceof ct||e.eachChild((function(e){var n=ni(e);n instanceof ct?t=n:!t&&n?t=new ct("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new ct("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}var ri=g((function e(t,n,r,i){v(this,e),this.message=(t?"".concat(t,": "):"")+r,i&&(this.identifier=i),null!=n&&n.__line__&&(this.line=n.__line__)}));function ii(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],l=jr(n);if("object"!==l)return[new ri(t,n,"object expected, ".concat(l," found"))];for(var u in n){var c=u.split(".")[0],h=r[c]||r["*"],d=void 0;i[c]?d=i[c]:r[c]?d=Oi:i["*"]?d=i["*"]:r["*"]&&(d=Oi),d?s=s.concat(d({key:(t?"".concat(t,"."):t)+u,value:n[u],valueSpec:h,style:a,styleSpec:o,object:n,objectKey:u},n)):s.push(new ri(t,n[u],'unknown property "'.concat(u,'"')))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new ri(t,n,'missing required property "'.concat(f,'"')));return s}function ai(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,a=e.key,o=e.arrayElementValidator||Oi;if("array"!==jr(t))return[new ri(a,t,"array expected, ".concat(jr(t)," found"))];if(n.length&&t.length!==n.length)return[new ri(a,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new ri(a,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];var s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===jr(n.value)&&(s=n.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(o({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:r,styleSpec:i,key:"".concat(a,"[").concat(u,"]")}));return l}function oi(e){var t=e.key,n=e.value,r=e.valueSpec,i=jr(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new ri(t,n,"number expected, ".concat(i," found"))];if("minimum"in r){var a=r.minimum;if("array"===jr(r.minimum)&&(a=r.minimum[e.arrayIndex]),n<a)return[new ri(t,n,"".concat(n," is less than the minimum value ").concat(a))]}if("maximum"in r){var o=r.maximum;if("array"===jr(r.maximum)&&(o=r.maximum[e.arrayIndex]),n>o)return[new ri(t,n,"".concat(n," is greater than the maximum value ").concat(o))]}return[]}function si(e){var t,n,r,i=e.valueSpec,a=st(e.value.type),o={},s="categorical"!==a&&void 0===e.value.property,l=!s,u="array"===jr(e.value.stops)&&"array"===jr(e.value.stops[0])&&"object"===jr(e.value.stops[0][0]),c=ii({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new ri(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(ai({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===jr(n)&&0===n.length&&t.push(new ri(e.key,n,"array must have at least one stop")),t},default:function(e){return Oi({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&s&&c.push(new ri(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||c.push(new ri(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!Fr(e.valueSpec)&&c.push(new ri(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Or(e.valueSpec)?c.push(new ri(e.key,e.value,"property functions not supported")):s&&!Nr(e.valueSpec)&&c.push(new ri(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!u||void 0!==e.value.property||c.push(new ri(e.key,e.value,'"property" property is required')),c;function h(e){var t=[],a=e.value,s=e.key;if("array"!==jr(a))return[new ri(s,a,"array expected, ".concat(jr(a)," found"))];if(2!==a.length)return[new ri(s,a,"array length 2 expected, length ".concat(a.length," found"))];if(u){if("object"!==jr(a[0]))return[new ri(s,a,"object expected, ".concat(jr(a[0])," found"))];if(void 0===a[0].zoom)return[new ri(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new ri(s,a,"object stop key must have value")];var l=st(a[0].zoom);if("number"!=typeof l)return[new ri(s,a[0].zoom,"stop zoom values must be numbers")];if(r&&r>l)return[new ri(s,a[0].zoom,"stop zoom values must appear in ascending order")];l!==r&&(r=l,n=void 0,o={}),t=t.concat(ii({key:"".concat(s,"[0]"),value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:oi,value:d}}))}else t=t.concat(d({key:"".concat(s,"[0]"),value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return Yr(lt(a[1]))?t.concat([new ri("".concat(s,"[1]"),a[1],"expressions are not allowed in function stops.")]):t.concat(Oi({key:"".concat(s,"[1]"),value:a[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function d(e,r){var s=jr(e.value),l=st(e.value),u=null!==e.value?e.value:r;if(t){if(s!==t)return[new ri(e.key,u,"".concat(s," stop domain type must match previous stop domain type ").concat(t))]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new ri(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var c="number expected, ".concat(s," found");return Or(i)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ri(e.key,u,c)]}return"categorical"!==a||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==a&&"number"===s&&"number"==typeof l&&"number"==typeof n&&void 0!==n&&l<n?[new ri(e.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===a&&l in o?[new ri(e.key,u,"stop domain values must be unique")]:(o[l]=!0,[])):[new ri(e.key,u,"integer expected, found ".concat(String(l)))]}}function li(e){var t=("property"===e.expressionContext?ei:Jr)(lt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new ri("".concat(e.key).concat(t.key),e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new ri(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!kn(n))return[new ri(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return ui(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Tn(n,["zoom","feature-state"]))return[new ri(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!wn(n))return[new ri(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ui(e,t){var n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression){var r,i=d(t.valueSpec.expression.parameters);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.delete(a)}}catch(s){i.e(s)}finally{i.f()}}if(0===n.size)return[];var o=[];return e instanceof tn&&n.has(e.name)?[new ri(t.key,t.value,'["'.concat(e.name,'"] expression is not supported in a filter for a ').concat(t.object.type," layer with id: ").concat(t.object.id))]:(e.eachChild((function(e){o.push.apply(o,c(ui(e,t)))})),o)}function ci(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(st(n))&&i.push(new ri(t,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(st(n))&&i.push(new ri(t,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function hi(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,n=d(e.slice(1));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!hi(r)&&"boolean"!=typeof r)return!1}}catch(i){n.e(i)}finally{n.f()}return!0;default:return!0}}function di(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==e)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};hi(e)||(e=_i(e));var n=e,r=!0;try{r=function(e){if(!mi(e))return e;var t=lt(e);return pi(t),t=fi(t)}(n)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}var i=at["filter_".concat(t)],a=Jr(r,i),o=null;if("error"===a.result)throw new Error(a.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));o=function(e,t,n){return a.value.evaluate(e,t,{},n)};var s=null,l=null;if(r!==n){var u=Jr(n,i);if("error"===u.result)throw new Error(u.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));s=function(e,t,n,r,i){return u.value.evaluate(e,t,{},n,void 0,void 0,r,i)},l=!wn(u.value.expression)}return{filter:o,dynamicFilter:s||void 0,needGeometry:yi(r),needFeature:!!l}}function fi(e){if(!Array.isArray(e))return e;var t=function(e){if(vi.has(e[0]))for(var t=1;t<e.length;t++)if(mi(e[t]))return!0;return e}(e);return!0===t?t:t.map((function(e){return fi(e)}))}function pi(e){var t=!1,n=[];if("case"===e[0]){for(var r=1;r<e.length-1;r+=2)t=t||mi(e[r]),n.push(e[r+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||mi(e[1]);for(var i=2;i<e.length-1;i+=2)n.push(e[i+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||mi(e[1]);for(var a=1;a<e.length-1;a+=2)n.push(e[a+1])}t&&(e.length=0,e.push.apply(e,["any"].concat(n)));for(var o=1;o<e.length;o++)pi(e[o])}function mi(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;for(var t,n=1;n<e.length;n++)if(mi(e[n]))return!0;return!1}var vi=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function gi(e,t){return e<t?-1:e>t?1:0}function yi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(yi(e[t]))return!0;return!1}function _i(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?xi(e[1],e[2],"=="):"!="===n?ki(xi(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?xi(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(_i))):"all"===n?["all"].concat(e.slice(1).map(_i)):"none"===n?["all"].concat(e.slice(1).map(_i).map(ki)):"in"===n?bi(e[1],e.slice(2)):"!in"===n?ki(bi(e[1],e.slice(2))):"has"===n?wi(e[1]):"!has"===n?ki(wi(e[1])):"within"!==n||e}function xi(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function bi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(gi)]]:["filter-in-small",e,["literal",t]]}}function wi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function ki(e){return["!",e]}function Ti(e){return hi(lt(e.value))?li(ot({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_".concat(e.layerType||"fill")]})):Si(e)}function Si(e){var t=e.value,n=e.key;if("array"!==jr(t))return[new ri(n,t,"array expected, ".concat(jr(t)," found"))];var r,i=e.styleSpec,a=[];if(t.length<1)return[new ri(n,t,"filter array must have at least 1 element")];switch(a=a.concat(ci({key:"".concat(n,"[0]"),value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),st(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===st(t[1])&&a.push(new ri(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&a.push(new ri(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&"string"!==(r=jr(t[1]))&&a.push(new ri("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")));for(var o=2;o<t.length;o++)r=jr(t[o]),"$type"===st(t[1])?a=a.concat(ci({key:"".concat(n,"[").concat(o,"]"),value:t[o],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new ri("".concat(n,"[").concat(o,"]"),t[o],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)a=a.concat(Si({key:"".concat(n,"[").concat(s,"]"),value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=jr(t[1]),2!==t.length?a.push(new ri(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==r&&a.push(new ri("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")));break;case"within":r=jr(t[1]),2!==t.length?a.push(new ri(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==r&&a.push(new ri("".concat(n,"[1]"),t[1],"object expected, ".concat(r," found")))}return a}function Ei(e,t){var n=e.key,r=e.style,i=e.styleSpec,a=e.value,o=e.objectKey,s=i["".concat(t,"_").concat(e.layerType)];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Oi({key:n,value:a,valueSpec:i.transition,style:r,styleSpec:i});var u,c=e.valueSpec||s[o];if(!c)return[new ri(n,a,'unknown property "'.concat(o,'"'))];if("string"===jr(a)&&Or(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new ri(n,a,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": ').concat(JSON.stringify(u[1])," }`."))];var h=[];return"symbol"===e.layerType&&("text-field"===o&&r&&!r.glyphs&&h.push(new ri(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Vr(lt(a))&&"identity"===st(a.type)&&h.push(new ri(n,a,'"text-font" does not support identity functions'))),h.concat(Oi({key:e.key,value:a,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:o}))}function Ci(e){return Ei(e,"paint")}function Ai(e){return Ei(e,"layout")}function Ri(e){var t=[],n=e.value,r=e.key,i=e.style,a=e.styleSpec;n.type||n.ref||t.push(new ri(r,n,'either "type" or "ref" is required'));var o,s=st(n.type),l=st(n.ref);if(n.id)for(var u=st(n.id),c=0;c<e.arrayIndex;c++){var h=i.layers[c];st(h.id)===u&&t.push(new ri(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new ri(r,n[e],'"'.concat(e,'" is prohibited for ref layers')))})),i.layers.forEach((function(e){st(e.id)===l&&(o=e)})),o?o.ref?t.push(new ri(r,n.ref,"ref cannot reference another ref layer")):s=st(o.type):"string"==typeof l&&t.push(new ri(r,n.ref,'ref layer "'.concat(l,'" not found')));else if("background"!==s&&"sky"!==s)if(n.source){var d=i.sources&&i.sources[n.source],f=d&&st(d.type);d?"vector"===f&&"raster"===s?t.push(new ri(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===f&&"raster"!==s?t.push(new ri(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?t.push(new ri(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===f&&d.lineMetrics||t.push(new ri(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new ri(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new ri(r,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new ri(r,n,'missing required property "source"'));return t=t.concat(ii({key:r,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Oi({key:"".concat(r,".type"),value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:function(e){return Ti(ot({layerType:s},e))},layout:function(e){return ii({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Ai(ot({layerType:s},e))}}})},paint:function(e){return ii({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Ci(ot({layerType:s},e))}}})}}})),t}function Mi(e){var t=e.value,n=e.key,r=jr(t);return"string"!==r?[new ri(n,t,"string expected, ".concat(r," found"))]:[]}var Bi={promoteId:function(e){var t=e.key,n=e.value;if("string"===jr(n))return Mi({key:t,value:n});var r=[];for(var i in n)r.push.apply(r,c(Mi({key:"".concat(t,".").concat(i),value:n[i]})));return r}};function Pi(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new ri(n,t,'"type" is required')];var a,o=st(t.type);switch(o){case"vector":case"raster":case"raster-dem":return a=ii({key:n,value:t,valueSpec:r["source_".concat(o.replace("-","_"))],style:e.style,styleSpec:r,objectElementValidators:Bi});case"geojson":if(a=ii({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Bi}),t.cluster)for(var s in t.clusterProperties){var l,u,d=h(t.clusterProperties[s],2),f=d[0],p=d[1],m="string"==typeof f?[f,["accumulated"],["get",s]]:f;(l=a).push.apply(l,c(li({key:"".concat(n,".").concat(s,".map"),value:p,expressionContext:"cluster-map"}))),(u=a).push.apply(u,c(li({key:"".concat(n,".").concat(s,".reduce"),value:m,expressionContext:"cluster-reduce"})))}return a;case"video":return ii({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return ii({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new ri(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ci({key:"".concat(n,".type"),value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Ii(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,a=[],o=jr(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new ri("light",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&r[l[1]]&&r[l[1]].transition?Oi({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Oi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new ri(s,t[s],'unknown property "'.concat(s,'"'))])}return a}function zi(e){var t=e.value,n=e.key,r=e.style,i=e.styleSpec,a=i.terrain,o=[],s=jr(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new ri("terrain",t,"object expected, ".concat(s," found"))]);for(var l in t){var u=l.match(/^(.*)-transition$/);o=o.concat(u&&a[u[1]]&&a[u[1]].transition?Oi({key:l,value:t[l],valueSpec:i.transition,style:r,styleSpec:i}):a[l]?Oi({key:l,value:t[l],valueSpec:a[l],style:r,styleSpec:i}):[new ri(l,t[l],'unknown property "'.concat(l,'"'))])}if(t.source){var c=r.sources&&r.sources[t.source],h=c&&st(c.type);c?"raster-dem"!==h&&o.push(new ri(n,t.source,"terrain cannot be used with a source of type ".concat(String(h),', it only be used with a "raster-dem" source type'))):o.push(new ri(n,t.source,'source "'.concat(t.source,'" not found')))}else o.push(new ri(n,t,'terrain is missing required property "source"'));return o}function Li(e){var t=e.value,n=e.style,r=e.styleSpec,i=r.fog,a=[],o=jr(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new ri("fog",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&i[l[1]]&&i[l[1]].transition?Oi({key:s,value:t[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?Oi({key:s,value:t[s],valueSpec:i[s],style:n,styleSpec:r}):[new ri(s,t[s],'unknown property "'.concat(s,'"'))])}return a}var Di={"*":function(){return[]},array:ai,boolean:function(e){var t=e.value,n=e.key,r=jr(t);return"boolean"!==r?[new ri(n,t,"boolean expected, ".concat(r," found"))]:[]},number:oi,color:function(e){var t=e.key,n=e.value,r=jr(n);return"string"!==r?[new ri(t,n,"color expected, ".concat(r," found"))]:null===Mt.parseCSSColor(n)?[new ri(t,n,'color expected, "'.concat(n,'" found'))]:[]},enum:ci,filter:Ti,function:si,layer:Ri,object:ii,source:Pi,light:Ii,terrain:zi,fog:Li,string:Mi,formatted:function(e){return 0===Mi(e).length?[]:li(e)},resolvedImage:function(e){return 0===Mi(e).length?[]:li(e)},projection:function(e){var t=e.value,n=e.styleSpec,r=n.projection,i=e.style,a=[],o=jr(t);if("object"===o)for(var s in t)a=a.concat(Oi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}));else"string"!==o&&(a=a.concat([new ri("projection",t,"object or string expected, ".concat(o," found"))]));return a}};function Oi(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Vr(st(t))?si(e):n.expression&&Yr(lt(t))?li(e):n.type&&Di[n.type]?Di[n.type](e):ii(ot({},e,{valueSpec:n.type?r[n.type]:n}))}function Ni(e){var t=e.value,n=e.key,r=Mi(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new ri(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new ri(n,t,'"glyphs" url must include a "{range}" token'))),r}function Fi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:at;return Zi(Oi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Ni,"*":function(){return[]}}}))}var ji=function(e){return Zi(Ci(e))},Vi=function(e){return Zi(Ai(e))};function Zi(e){return e.slice().sort((function(e,t){return e.line&&t.line?e.line-t.line:0}))}function Ui(e,t){var n=!1;if(t&&t.length){var r,i=d(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.fire(new rt(new Error(a.message))),n=!0}}catch(o){i.e(o)}finally{i.f()}}return n}var Gi=Hi;function Hi(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var a=0;a<this.d*this.d;a++){var o=i[3+a],s=i[3+a+1];r.push(o===s?null:i.subarray(o,s))}var l=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var u=0;u<this.d*this.d;u++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var c=n/t*e;this.min=-c,this.max=e+c}Hi.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Hi.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Hi.prototype._insertCell=function(e,t,n,r,i,a){this.cells[i].push(a)},Hi.prototype.query=function(e,t,n,r,i){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=n&&o<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},Hi.prototype._queryCell=function(e,t,n,r,i,a,o,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===o[d]){var f=4*d;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):e<=c[f+2]&&t<=c[f+3]&&n>=c[f+0]&&r>=c[f+1])?(o[d]=!0,a.push(u[d])):o[d]=!1}}},Hi.prototype._forEachCell=function(e,t,n,r,i,a,o,s){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),d=l;d<=c;d++)for(var f=u;f<=h;f++){var p=this.d*f+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(f),this._convertFromCellCoord(d+1),this._convertFromCellCoord(f+1)))&&i.call(this,e,t,n,r,p,a,o,s))return}},Hi.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Hi.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Hi.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];i[3+o]=a,i.set(s,a),a+=s.length}return i[3+e.length]=a,i.set(this.keys,a),i[3+e.length+1]=a+=this.keys.length,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var qi={};function Wi(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),qi[t]={klass:e,omit:n.omit||[]}}for(var Xi in Wi(Object,"Object"),Gi.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Gi.deserialize=function(e){return new Gi(e.buffer)},Object.defineProperty(Gi,"name",{value:"Grid"}),Wi(Gi,"Grid"),Wi(Pt,"Color"),Wi(Error,"Error"),Wi(Ue,"AJAXError"),Wi(Dt,"ResolvedImage"),Wi(ti,"StylePropertyFunction"),Wi(Kr,"StyleExpression",{omit:["_evaluator"]}),Wi($r,"ZoomDependentExpression"),Wi(Qr,"ZoomConstantExpression"),Wi(tn,"CompoundExpression",{omit:["_evaluate"]}),zr)qi[zr[Xi]._classRegistryKey]||Wi(zr[Xi],"Expression".concat(Xi));function Ki(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Yi(e){return t.ImageBitmap&&e instanceof t.ImageBitmap}function Ji(e,n){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Ki(e)||Yi(e))return n&&n.push(e),e;if(ArrayBuffer.isView(e)){var r=e;return n&&n.push(r.buffer),r}if(e instanceof t.ImageData)return n&&n.push(e.data.buffer),e;if(Array.isArray(e)){var i,a=[],o=d(e);try{for(o.s();!(i=o.n()).done;){var s=i.value;a.push(Ji(s,n))}}catch(f){o.e(f)}finally{o.f()}return a}if("object"==typeof e){var l=e.constructor,u=l._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class ".concat(u));var c=l.serialize?l.serialize(e,n):{};if(!l.serialize){for(var h in e)e.hasOwnProperty(h)&&(qi[u].omit.indexOf(h)>=0||(c[h]=Ji(e[h],n)));e instanceof Error&&(c.message=e.message)}if(c.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==u&&(c.$name=u),c}throw new Error("can't serialize object of type "+typeof e)}function Qi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Ki(e)||Yi(e)||ArrayBuffer.isView(e)||e instanceof t.ImageData)return e;if(Array.isArray(e))return e.map(Qi);if("object"==typeof e){var n=e.$name||"Object",r=qi[n].klass;if(!r)throw new Error("can't deserialize unregistered class ".concat(n));if(r.deserialize)return r.deserialize(e);for(var i=Object.create(r.prototype),a=0,o=Object.keys(e);a<o.length;a++){var s=o[a];"$name"!==s&&(i[s]=Qi(e[s]))}return i}throw new Error("can't deserialize object of type "+typeof e)}var $i=function(){function e(){v(this,e),this.first=!0}return g(e,[{key:"update",value:function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))}}]),e}(),ea=function(e){return e>=1536&&e<=1791},ta=function(e){return e>=1872&&e<=1919},na=function(e){return e>=2208&&e<=2303},ra=function(e){return e>=11904&&e<=12031},ia=function(e){return e>=12032&&e<=12255},aa=function(e){return e>=12272&&e<=12287},oa=function(e){return e>=12288&&e<=12351},sa=function(e){return e>=12352&&e<=12447},la=function(e){return e>=12448&&e<=12543},ua=function(e){return e>=12544&&e<=12591},ca=function(e){return e>=12704&&e<=12735},ha=function(e){return e>=12736&&e<=12783},da=function(e){return e>=12784&&e<=12799},fa=function(e){return e>=12800&&e<=13055},pa=function(e){return e>=13056&&e<=13311},ma=function(e){return e>=13312&&e<=19903},va=function(e){return e>=19968&&e<=40959},ga=function(e){return e>=40960&&e<=42127},ya=function(e){return e>=42128&&e<=42191},_a=function(e){return e>=44032&&e<=55215},xa=function(e){return e>=63744&&e<=64255},ba=function(e){return e>=64336&&e<=65023},wa=function(e){return e>=65040&&e<=65055},ka=function(e){return e>=65072&&e<=65103},Ta=function(e){return e>=65104&&e<=65135},Sa=function(e){return e>=65136&&e<=65279},Ea=function(e){return e>=65280&&e<=65519};function Ca(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;)if(Ma(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}function Aa(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;)if(!Ra(t.value.charCodeAt(0)))return!1}catch(r){n.e(r)}finally{n.f()}return!0}function Ra(e){return!(ea(e)||ta(e)||na(e)||ba(e)||Sa(e))}function Ma(e){return!(746!==e&&747!==e&&(e<4352||!(ca(e)||ua(e)||ka(e)&&!(e>=65097&&e<=65103)||xa(e)||pa(e)||ra(e)||ha(e)||!(!oa(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||ma(e)||va(e)||fa(e)||function(e){return e>=12592&&e<=12687}(e)||function(e){return e>=43360&&e<=43391}(e)||function(e){return e>=55216&&e<=55295}(e)||function(e){return e>=4352&&e<=4607}(e)||_a(e)||sa(e)||aa(e)||function(e){return e>=12688&&e<=12703}(e)||ia(e)||da(e)||la(e)&&12540!==e||!(!Ea(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Ta(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||function(e){return e>=5120&&e<=5759}(e)||function(e){return e>=6320&&e<=6399}(e)||wa(e)||function(e){return e>=19904&&e<=19967}(e)||ga(e)||ya(e))))}function Ba(e){return!(Ma(e)||function(e){return!!(function(e){return e>=128&&e<=255}(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||function(e){return e>=8192&&e<=8303}(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||function(e){return e>=8448&&e<=8527}(e)||function(e){return e>=8528&&e<=8591}(e)||function(e){return e>=8960&&e<=9215}(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||function(e){return e>=9216&&e<=9279}(e)&&9251!==e||function(e){return e>=9280&&e<=9311}(e)||function(e){return e>=9312&&e<=9471}(e)||function(e){return e>=9632&&e<=9727}(e)||function(e){return e>=9728&&e<=9983}(e)&&!(e>=9754&&e<=9759)||function(e){return e>=11008&&e<=11263}(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||oa(e)||la(e)||function(e){return e>=57344&&e<=63743}(e)||ka(e)||Ta(e)||Ea(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Pa(e){return e>=1424&&e<=2303||ba(e)||Sa(e)}function Ia(e,t){return!(!t&&Pa(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||function(e){return e>=6016&&e<=6143}(e))}function za(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;)if(Pa(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var La="deferred",Da="loading",Oa="loaded",Na=null,Fa="unavailable",ja=null,Va=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Fa="error"),Na&&Na(e)};function Za(){Ua.fire(new nt("pluginStateChange",{pluginStatus:Fa,pluginURL:ja}))}var Ua=new it,Ga=function(){return Fa},Ha=function(){if(Fa!==La||!ja)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Fa=Da,Za(),ja&&qe({url:ja},(function(e){e?Va(e):(Fa=Oa,Za())}))},qa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Fa===Oa||null!=qa.applyArabicShaping},isLoading:function(){return Fa===Da},setState:function(e){Fa=e.pluginStatus,ja=e.pluginURL},isParsed:function(){return null!=qa.applyArabicShaping&&null!=qa.processBidirectionalText&&null!=qa.processStyledBidirectionalText},getPluginURL:function(){return ja}},Wa=function(){function e(t,n){v(this,e),this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.zoomHistory=n.zoomHistory,this.transition=n.transition,this.pitch=n.pitch):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $i,this.transition={},this.pitch=0)}return g(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var n,r=d(e);try{for(r.s();!(n=r.n()).done;)if(!Ia(n.value.charCodeAt(0),t))return!1}catch(i){r.e(i)}finally{r.f()}return!0}(e,qa.isLoaded())}},{key:"crossFadingFactor",value:function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}},{key:"getCrossfadeParameters",value:function(){var e=this.zoom,t=e-Math.floor(e),n=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*t}}}]),e}(),Xa=function(){function e(t,n){v(this,e),this.property=t,this.value=n,this.expression=function(e,t){if(Vr(e))return new ti(e,t);if(Yr(e)){var n=ei(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=Pt.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===n?t.specification.default:n,t.specification)}return g(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}]),e}(),Ka=function(){function e(t){v(this,e),this.property=t,this.value=new Xa(t,void 0)}return g(e,[{key:"transitioned",value:function(e,t){return new Ja(this.property,this.value,t,I({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new Ja(this.property,this.value,null,{},0)}}]),e}(),Ya=function(){function e(t){v(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return g(e,[{key:"getValue",value:function(e){return U(this._values[e].value.value)}},{key:"setValue",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ka(this._values[e].property)),this._values[e].value=new Xa(this._values[e].property,null===t?void 0:U(t))}},{key:"getTransition",value:function(e){return U(this._values[e].transition)}},{key:"setTransition",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Ka(this._values[e].property)),this._values[e].transition=U(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i);var a=this.getTransition(r);void 0!==a&&(e["".concat(r,"-transition")]=a)}return e}},{key:"transitioned",value:function(e,t){for(var n=new Qa(this._properties),r=0,i=Object.keys(this._values);r<i.length;r++){var a=i[r];n._values[a]=this._values[a].transitioned(e,t._values[a])}return n}},{key:"untransitioned",value:function(){for(var e=new Qa(this._properties),t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e}}]),e}(),Ja=function(){function e(t,n,r,i,a){v(this,e);var o=i.delay||0,s=i.duration||0;a=a||0,this.property=t,this.value=n,this.begin=a+o,this.end=this.begin+s,t.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}return g(e,[{key:"possiblyEvaluate",value:function(e,t,n){var r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),a=this.prior;if(a){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return a.possiblyEvaluate(e,t,n);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,n),i,S(o))}return i}}]),e}(),Qa=function(){function e(t){v(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return g(e,[{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new to(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];r._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return r}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var n=t[e];if(this._values[n].prior)return!0}return!1}}]),e}(),$a=function(){function e(t){v(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return g(e,[{key:"getValue",value:function(e){return U(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new Xa(this._values[e].property,null===t?void 0:U(t))}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e}},{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new to(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];r._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return r}}]),e}(),eo=function(){function e(t,n,r){v(this,e),this.property=t,this.value=n,this.parameters=r}return g(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}]),e}(),to=function(){function e(t){v(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return g(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),no=function(){function e(t){v(this,e),this.specification=t}return g(e,[{key:"possiblyEvaluate",value:function(e,t){return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,n){var r=Ln[this.specification.type];return r?r(e,t,n):e}}]),e}(),ro=function(){function e(t,n){v(this,e),this.specification=t,this.overrides=n}return g(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return new eo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}},{key:"interpolate",value:function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new eo(this,{kind:"constant",value:void 0},e.parameters);var r=Ln[this.specification.type];return r?new eo(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}},{key:"evaluate",value:function(e,t,n,r,i,a){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,a)}}]),e}(),io=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"possiblyEvaluate",value:function(e,t,n,r){if(void 0===e.value)return new eo(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){var i=e.expression.evaluate(t,null,{},n,r),a="resolvedImage"===e.property.specification.type&&"string"!=typeof i?i.name:i,o=this._calculate(a,a,a,t);return new eo(this,{kind:"constant",value:o},t)}if("camera"===e.expression.kind){var s=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new eo(this,{kind:"constant",value:s},t)}return new eo(this,e.expression,t)}},{key:"evaluate",value:function(e,t,n,r,i,a){if("source"===e.kind){var o=e.evaluate(t,n,r,i,a);return this._calculate(o,o,o,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},n,r),e.evaluate({zoom:Math.floor(t.zoom)},n,r),e.evaluate({zoom:Math.floor(t.zoom)+1},n,r),t):e.value}},{key:"_calculate",value:function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t,other:n}:{from:n,to:t,other:e}}},{key:"interpolate",value:function(e){return e}}]),n}(ro),ao=function(){function e(t){v(this,e),this.specification=t}return g(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){if(void 0!==e.value){if("constant"===e.expression.kind){var i=e.expression.evaluate(t,null,{},n,r);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate(new Wa(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Wa(Math.floor(t.zoom),t)),e.expression.evaluate(new Wa(Math.floor(t.zoom+1),t)),t)}}},{key:"_calculate",value:function(e,t,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:n,to:t}}},{key:"interpolate",value:function(e){return e}}]),e}(),oo=function(){function e(t){v(this,e),this.specification=t}return g(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}},{key:"interpolate",value:function(){return!1}}]),e}(),so=g((function e(t){v(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];var n=new Wa(0,{});for(var r in t){var i=t[r];i.specification.overridable&&this.overridableProperties.push(r);var a=this.defaultPropertyValues[r]=new Xa(i,void 0),o=this.defaultTransitionablePropertyValues[r]=new Ka(i);this.defaultTransitioningPropertyValues[r]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=a.possiblyEvaluate(n)}}));function lo(e,t){return 256*(e=A(Math.floor(e),0,255))+A(Math.floor(t),0,255)}Wi(ro,"DataDrivenProperty"),Wi(no,"DataConstantProperty"),Wi(io,"CrossFadedDataDrivenProperty"),Wi(ao,"CrossFadedProperty"),Wi(oo,"ColorRampProperty");var uo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},co=g((function e(t,n){v(this,e),this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),ho=function(){function e(){v(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return g(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}},{key:"destroy",value:function(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function fo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:e.map((function(e){var i=uo[e.type].BYTES_PER_ELEMENT,a=n=po(n,Math.max(t,i)),o=e.components||1;return r=Math.max(r,i),n+=i*o,{name:e.name,type:e.type,components:o,offset:a}})),size:po(n,Math.max(r,t)),alignment:t}}function po(e,t){return Math.ceil(e/t)*t}var mo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}]),n}(ho);mo.prototype.bytesPerElement=4,Wi(mo,"StructArrayLayout2i4");var vo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}]),n}(ho);vo.prototype.bytesPerElement=6,Wi(vo,"StructArrayLayout3i6");var go=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,e}}]),n}(ho);go.prototype.bytesPerElement=8,Wi(go,"StructArrayLayout4i8");var yo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,a,o)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s){var l=6*e,u=12*e,c=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=i,this.uint8[u+6]=a,this.uint8[u+7]=o,this.float32[c+2]=s,e}}]),n}(ho);yo.prototype.bytesPerElement=12,Wi(yo,"StructArrayLayout2i4ub1f12");var _o=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,e}}]),n}(ho);_o.prototype.bytesPerElement=16,Wi(_o,"StructArrayLayout4f16");var xo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,l,u){var c=this.length;return this.resize(c+1),this.emplace(c,e,t,n,r,i,a,o,s,l,u)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,l,u,c){var h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=n,this.uint16[h+2]=r,this.uint16[h+3]=i,this.uint16[h+4]=a,this.uint16[h+5]=o,this.uint16[h+6]=s,this.uint16[h+7]=l,this.uint16[h+8]=u,this.uint16[h+9]=c,e}}]),n}(ho);xo.prototype.bytesPerElement=20,Wi(xo,"StructArrayLayout10ui20");var bo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s){var l=this.length;return this.resize(l+1),this.emplace(l,e,t,n,r,i,a,o,s)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,l){var u=8*e;return this.uint16[u+0]=t,this.uint16[u+1]=n,this.uint16[u+2]=r,this.uint16[u+3]=i,this.uint16[u+4]=a,this.uint16[u+5]=o,this.uint16[u+6]=s,this.uint16[u+7]=l,e}}]),n}(ho);bo.prototype.bytesPerElement=16,Wi(bo,"StructArrayLayout8ui16");var wo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)}},{key:"emplace",value:function(e,t,n,r,i,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e}}]),n}(ho);wo.prototype.bytesPerElement=12,Wi(wo,"StructArrayLayout6i12");var ko=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,l,u,c,h){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,a,o,s,l,u,c,h)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d){var f=12*e;return this.int16[f+0]=t,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.uint16[f+4]=a,this.uint16[f+5]=o,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=u,this.int16[f+9]=c,this.int16[f+10]=h,this.int16[f+11]=d,e}}]),n}(ho);ko.prototype.bytesPerElement=24,Wi(ko,"StructArrayLayout4i4ui4i24");var To=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)}},{key:"emplace",value:function(e,t,n,r,i,a,o){var s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.float32[l+2]=i,this.float32[l+3]=a,this.float32[l+4]=o,e}}]),n}(ho);To.prototype.bytesPerElement=20,Wi(To,"StructArrayLayout3i3f20");var So=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),n}(ho);So.prototype.bytesPerElement=4,Wi(So,"StructArrayLayout1ul4");var Eo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d){var f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,r,i,a,o,s,l,u,c,h,d)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f){var p=20*e,m=10*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=a,this.float32[m+3]=o,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=u,this.int16[p+14]=c,this.uint32[m+8]=h,this.uint16[p+18]=d,this.uint16[p+19]=f,e}}]),n}(ho);Eo.prototype.bytesPerElement=40,Wi(Eo,"StructArrayLayout5i4f1i1ul2ui40");var Co=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,a,o)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s){var l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=a,this.int16[l+6]=o,this.int16[l+7]=s,e}}]),n}(ho);Co.prototype.bytesPerElement=16,Wi(Co,"StructArrayLayout3i2i2i16");var Ao=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.int16[s+6]=i,this.int16[s+7]=a,e}}]),n}(ho);Ao.prototype.bytesPerElement=16,Wi(Ao,"StructArrayLayout2f1f2i16");var Ro=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[o+1]=r,this.float32[o+2]=i,e}}]),n}(ho);Ro.prototype.bytesPerElement=12,Wi(Ro,"StructArrayLayout2ub2f12");var Mo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}]),n}(ho);Mo.prototype.bytesPerElement=12,Wi(Mo,"StructArrayLayout3f12");var Bo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}]),n}(ho);Bo.prototype.bytesPerElement=6,Wi(Bo,"StructArrayLayout3ui6");var Po=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v,g,y,_,x){var b=this.length;return this.resize(b+1),this.emplace(b,e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v,g,y,_,x)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v,g,y,_,x,b){var w=30*e,k=15*e,T=60*e;return this.int16[w+0]=t,this.int16[w+1]=n,this.int16[w+2]=r,this.float32[k+2]=i,this.float32[k+3]=a,this.uint16[w+8]=o,this.uint16[w+9]=s,this.uint32[k+5]=l,this.uint32[k+6]=u,this.uint32[k+7]=c,this.uint16[w+16]=h,this.uint16[w+17]=d,this.uint16[w+18]=f,this.float32[k+10]=p,this.float32[k+11]=m,this.uint8[T+48]=v,this.uint8[T+49]=g,this.uint8[T+50]=y,this.uint32[k+13]=_,this.int16[w+28]=x,this.uint8[T+58]=b,e}}]),n}(ho);Po.prototype.bytesPerElement=60,Wi(Po,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");var Io=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v,g,y,_,x,b,w,k,T,S,E,C,A,R){var M=this.length;return this.resize(M+1),this.emplace(M,e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v,g,y,_,x,b,w,k,T,S,E,C,A,R)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v,g,y,_,x,b,w,k,T,S,E,C,A,R,M){var B=38*e,P=19*e;return this.int16[B+0]=t,this.int16[B+1]=n,this.int16[B+2]=r,this.float32[P+2]=i,this.float32[P+3]=a,this.int16[B+8]=o,this.int16[B+9]=s,this.int16[B+10]=l,this.int16[B+11]=u,this.int16[B+12]=c,this.int16[B+13]=h,this.uint16[B+14]=d,this.uint16[B+15]=f,this.uint16[B+16]=p,this.uint16[B+17]=m,this.uint16[B+18]=v,this.uint16[B+19]=g,this.uint16[B+20]=y,this.uint16[B+21]=_,this.uint16[B+22]=x,this.uint16[B+23]=b,this.uint16[B+24]=w,this.uint16[B+25]=k,this.uint16[B+26]=T,this.uint16[B+27]=S,this.uint16[B+28]=E,this.uint32[P+15]=C,this.float32[P+16]=A,this.float32[P+17]=R,this.float32[P+18]=M,e}}]),n}(ho);Io.prototype.bytesPerElement=76,Wi(Io,"StructArrayLayout3i2f6i15ui1ul3f76");var zo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),n}(ho);zo.prototype.bytesPerElement=4,Wi(zo,"StructArrayLayout1f4");var Lo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var o=5*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,this.float32[o+4]=a,e}}]),n}(ho);Lo.prototype.bytesPerElement=20,Wi(Lo,"StructArrayLayout5f20");var Do=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=n,this.uint16[a+3]=r,this.uint16[a+4]=i,e}}]),n}(ho);Do.prototype.bytesPerElement=12,Wi(Do,"StructArrayLayout1ul3ui12");var Oo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}]),n}(ho);Oo.prototype.bytesPerElement=4,Wi(Oo,"StructArrayLayout2ui4");var No=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),n}(ho);No.prototype.bytesPerElement=2,Wi(No,"StructArrayLayout1ui2");var Fo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}]),n}(ho);Fo.prototype.bytesPerElement=8,Wi(Fo,"StructArrayLayout2f8");var jo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"a_pos_30",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"a_pos_31",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"a_pos_32",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"a_pos_normal_30",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"a_pos_normal_31",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"a_pos_normal_32",get:function(){return this._structArray.int16[this._pos2+5]}}]),n}(co);jo.prototype.size=12;var Vo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"get",value:function(e){return new jo(this,e)}}]),n}(wo);Wi(Vo,"FillExtrusionExtArray");var Zo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"tileAnchorY",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+5]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+6]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+14]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+8]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+19]}}]),n}(co);Zo.prototype.size=40;var Uo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"get",value:function(e){return new Zo(this,e)}}]),n}(Eo);Wi(Uo,"CollisionBoxArray");var Go=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+5]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+7]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+10]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+11]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+48]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+49]},set:function(e){this._structArray.uint8[this._pos1+49]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+50]},set:function(e){this._structArray.uint8[this._pos1+50]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+13]},set:function(e){this._structArray.uint32[this._pos4+13]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+28]}},{key:"flipState",get:function(){return this._structArray.uint8[this._pos1+58]},set:function(e){this._structArray.uint8[this._pos1+58]=e}}]),n}(co);Go.prototype.size=60;var Ho=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"get",value:function(e){return new Go(this,e)}}]),n}(Po);Wi(Ho,"PlacedSymbolArray");var qo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+8]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+9]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+11]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+12]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+13]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+23]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+24]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+25]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+26]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+27]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+28]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+15]},set:function(e){this._structArray.uint32[this._pos4+15]=e}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+16]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+17]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+18]}}]),n}(co);qo.prototype.size=76;var Wo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"get",value:function(e){return new qo(this,e)}}]),n}(Io);Wi(Wo,"SymbolInstanceArray");var Xo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),n}(zo);Wi(Xo,"GlyphOffsetArray");var Ko=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getx",value:function(e){return this.int16[3*e+0]}},{key:"gety",value:function(e){return this.int16[3*e+1]}},{key:"gettileUnitDistanceFromAnchor",value:function(e){return this.int16[3*e+2]}}]),n}(vo);Wi(Ko,"SymbolLineVertexArray");var Yo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"layoutVertexArrayOffset",get:function(){return this._structArray.uint16[this._pos2+4]}}]),n}(co);Yo.prototype.size=12;var Jo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"get",value:function(e){return new Yo(this,e)}}]),n}(Do);Wi(Jo,"FeatureIndexArray");var Qo=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"a_centroid_pos0",get:function(){return this._structArray.uint16[this._pos2+0]}},{key:"a_centroid_pos1",get:function(){return this._structArray.uint16[this._pos2+1]}}]),n}(co);Qo.prototype.size=4;var $o=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"get",value:function(e){return new Qo(this,e)}}]),n}(Oo);Wi($o,"FillExtrusionCentroidArray");var es=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"a_pos_30",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"a_pos_31",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"a_pos_32",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"a_pos_normal_30",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"a_pos_normal_31",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"a_pos_normal_32",get:function(){return this._structArray.int16[this._pos2+5]}}]),n}(co);es.prototype.size=12;var ts=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"get",value:function(e){return new es(this,e)}}]),n}(wo);Wi(ts,"CircleGlobeExtArray");var ns=fo([{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"}]),rs=fo([{name:"a_dash_to",components:4,type:"Uint16"},{name:"a_dash_from",components:4,type:"Uint16"}]),is=Rt((function(e){e.exports=function(e,t){var n,r,i,a,o,s,l,u;for(r=e.length-(n=3&e.length),i=t,o=3432918353,s=461845907,u=0;u<r;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,i=27492+(65535&(a=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),as=Rt((function(e){e.exports=function(e,t){for(var n,r=e.length,i=t^r,a=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),os=is,ss=as;os.murmur3=is,os.murmur2=ss;var ls=function(){function e(){v(this,e),this.ids=[],this.positions=[],this.indexed=!1}return g(e,[{key:"add",value:function(e,t,n,r){this.ids.push(us(e)),this.positions.push(t,n,r)}},{key:"getPositions",value:function(e){for(var t=us(e),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=t?r=i:n=i+1}for(var a=[];this.ids[n]===t;)a.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return a}}],[{key:"serialize",value:function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return cs(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}},{key:"deserialize",value:function(t){var n=new e;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}]),e}();function us(e){var t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:os(String(e))}function cs(e,t,n,r){for(;n<r;){for(var i=e[n+r>>1],a=n-1,o=r+1;;){do{a++}while(e[a]<i);do{o--}while(e[o]>i);if(a>=o)break;hs(e,a,o),hs(t,3*a,3*o),hs(t,3*a+1,3*o+1),hs(t,3*a+2,3*o+2)}o-n<r-o?(cs(e,t,n,o),n=o+1):(cs(e,t,o+1,r),r=o)}}function hs(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}Wi(ls,"FeaturePositionMap");var ds=function(){function e(t){v(this,e),this.gl=t.gl,this.initialized=!1}return g(e,[{key:"fetchUniformLocation",value:function(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}]),e}(),fs=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).current=0,r}return g(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}]),n}(ds),ps=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).current=[0,0,0,0],r}return g(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}]),n}(ds),ms=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).current=Pt.transparent,r}return g(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}]),n}(ds),vs=new Float32Array(16),gs=new Float32Array(9),ys=new Float32Array(4);function _s(e){return[lo(255*e.r,255*e.g),lo(255*e.b,255*e.a)]}var xs=function(){function e(t,n,r){v(this,e),this.value=t,this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.type=r}return g(e,[{key:"setUniform",value:function(e,t,n,r,i){t.set(e,i,r.constantOr(this.value))}},{key:"getBinding",value:function(e,t){return"color"===this.type?new ms(e):new fs(e)}}]),e}(),bs=function(){function e(t,n){v(this,e),this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}return g(e,[{key:"setConstantPatternPositions",value:function(e,t){this.pixelRatioFrom=t.pixelRatio||1,this.pixelRatioTo=e.pixelRatio||1,this.patternFrom=t.tl.concat(t.br),this.patternTo=e.tl.concat(e.br)}},{key:"setUniform",value:function(e,t,n,r,i){var a="u_pattern_to"===i||"u_dash_to"===i?this.patternTo:"u_pattern_from"===i||"u_dash_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;a&&t.set(e,i,a)}},{key:"getBinding",value:function(e,t){return"u_pattern_from"===t||"u_pattern_to"===t||"u_dash_from"===t||"u_dash_to"===t?new ps(e):new fs(e)}}]),e}(),ws=function(){function e(t,n,r,i){v(this,e),this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i}return g(e,[{key:"populatePaintArray",value:function(e,t,n,r,i,a){var o=this.paintVertexArray.length,s=this.expression.evaluate(new Wa(0),t,{},i,r,a);this.paintVertexArray.resize(e),this._setPaintValue(o,e,s)}},{key:"updatePaintArray",value:function(e,t,n,r,i){var a=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(e,t,a)}},{key:"_setPaintValue",value:function(e,t,n){if("color"===this.type)for(var r=_s(n),i=e;i<t;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var a=e;a<t;a++)this.paintVertexArray.emplace(a,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),ks=function(){function e(t,n,r,i,a,o){v(this,e),this.expression=t,this.uniformNames=n.map((function(e){return"u_".concat(e,"_t")})),this.type=r,this.useIntegerZoom=i,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new o}return g(e,[{key:"populatePaintArray",value:function(e,t,n,r,i,a){var o=this.expression.evaluate(new Wa(this.zoom),t,{},i,r,a),s=this.expression.evaluate(new Wa(this.zoom+1),t,{},i,r,a),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,o,s)}},{key:"updatePaintArray",value:function(e,t,n,r,i){var a=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),o=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(e,t,a,o)}},{key:"_setPaintValue",value:function(e,t,n,r){if("color"===this.type)for(var i=_s(n),a=_s(r),o=e;o<t;o++)this.paintVertexArray.emplace(o,i[0],i[1],a[0],a[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t,n,r,i){var a=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,o=A(this.expression.interpolationFactor(a,this.zoom,this.zoom+1),0,1);t.set(e,i,o)}},{key:"getBinding",value:function(e,t){return new fs(e)}}]),e}(),Ts=function(){function e(t,n,r,i,a,o,s){v(this,e),this.expression=t,this.type=r,this.useIntegerZoom=i,this.zoom=a,this.layerId=s,this.paintVertexAttributes=("array"===r?rs:ns).members;for(var l=0;l<n.length;++l);this.zoomInPaintVertexArray=new o,this.zoomOutPaintVertexArray=new o}return g(e,[{key:"populatePaintArray",value:function(e,t,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(e,t,n,r,i,a){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],a)}},{key:"_setPaintValues",value:function(e,t,n,r){if(r&&n){var i=n.min,a=n.mid,o=n.max,s=r[i],l=r[a],u=r[o];if(s&&l&&u)for(var c=e;c<t;c++)this._setPaintValue(this.zoomInPaintVertexArray,c,l,s),this._setPaintValue(this.zoomOutPaintVertexArray,c,l,u)}}},{key:"_setPaintValue",value:function(e,t,n,r){e.emplace(t,n.tl[0],n.tl[1],n.br[0],n.br[1],r.tl[0],r.tl[1],r.br[0],r.br[1],n.pixelRatio,r.pixelRatio)}},{key:"upload",value:function(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}]),e}(),Ss=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};v(this,e),this.binders={},this._buffers=[];var i=[];for(var a in t.paint._values)if(r(a)){var o=t.paint.get(a);if(o instanceof eo&&Or(o.property.specification)){var s=As(a,t.type),l=o.value,u=o.property.specification.type,c=o.property.useIntegerZoom,h=o.property.specification["property-type"],d="cross-faded"===h||"cross-faded-data-driven"===h,f="line-dasharray"===String(a)&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==l.kind||f)if("source"===l.kind||f||d){var p=Bs(a,u,"source");this.binders[a]=d?new Ts(l,s,u,c,n,p,t.id):new ws(l,s,u,p),i.push("/a_".concat(a))}else{var m=Bs(a,u,"composite");this.binders[a]=new ks(l,s,u,c,n,m),i.push("/z_".concat(a))}else this.binders[a]=d?new bs(l.value,s):new xs(l.value,s,u),i.push("/u_".concat(a))}}this.cacheKey=i.sort().join("")}return g(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof ws||t instanceof ks?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,n,r,i,a){for(var o in this.binders){var s=this.binders[o];(s instanceof ws||s instanceof ks||s instanceof Ts)&&s.populatePaintArray(e,t,n,r,i,a)}}},{key:"setConstantPatternPositions",value:function(e,t){for(var n in this.binders){var r=this.binders[n];r instanceof bs&&r.setConstantPatternPositions(e,t)}}},{key:"updatePaintArrays",value:function(e,t,n,r,i,a){var o=!1;for(var s in e){var l,u=t.getPositions(s),c=d(u);try{for(c.s();!(l=c.n()).done;){var h=l.value,f=n.feature(h.index);for(var p in this.binders){var m=this.binders[p];if((m instanceof ws||m instanceof ks||m instanceof Ts)&&!0===m.expression.isStateDependent){var v=r.paint.get(p);m.expression=v.value,m.updatePaintArray(h.start,h.end,f,e[s],i,a),o=!0}}}}catch(g){c.e(g)}finally{c.f()}}return o}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof xs||n instanceof bs)&&e.push.apply(e,c(n.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof ws||n instanceof ks||n instanceof Ts)for(var r=0;r<n.paintVertexAttributes.length;r++)e.push(n.paintVertexAttributes[r].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof xs||n instanceof bs||n instanceof ks){var r,i=d(n.uniformNames);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.push(a)}}catch(o){i.e(o)}finally{i.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e){var t=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof xs||r instanceof bs||r instanceof ks){var i,a=d(r.uniformNames);try{for(a.s();!(i=a.n()).done;){var o=i.value;t.push({name:o,property:n,binding:r.getBinding(e,o)})}}catch(s){a.e(s)}finally{a.f()}}}return t}},{key:"setUniforms",value:function(e,t,n,r,i){var a,o=d(n);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.name,u=s.property,c=s.binding;this.binders[u].setUniform(e,c,i,r.get(u),l)}}catch(h){o.e(h)}finally{o.f()}}},{key:"updatePaintBuffers",value:function(e){for(var t in this._buffers=[],this.binders){var n=this.binders[t];if(e&&n instanceof Ts){var r=2===e.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof ws||n instanceof ks)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof ws||n instanceof ks||n instanceof Ts)&&n.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof ws||t instanceof ks||t instanceof Ts)&&t.destroy()}}}]),e}(),Es=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};v(this,e),this.programConfigurations={};var i,a=d(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.programConfigurations[o.id]=new Ss(o,n,r)}}catch(s){a.e(s)}finally{a.f()}this.needsUpload=!1,this._featureMap=new ls,this._bufferOffset=0}return g(e,[{key:"populatePaintArrays",value:function(e,t,n,r,i,a,o){for(var s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,r,i,a,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,n,r,i){var a,o=d(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(e,this._featureMap,t,s,r,i)||this.needsUpload}}catch(l){o.e(l)}finally{o.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}(),Cs={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"line-dasharray":["dash_to","dash_from"]};function As(e,t){return Cs[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}var Rs={"line-pattern":{source:xo,composite:xo},"fill-pattern":{source:xo,composite:xo},"fill-extrusion-pattern":{source:xo,composite:xo},"line-dasharray":{source:bo,composite:bo}},Ms={color:{source:Fo,composite:_o},number:{source:zo,composite:Fo}};function Bs(e,t,n){var r=Rs[e];return r&&r[n]||Ms[t][n]}Wi(xs,"ConstantBinder"),Wi(bs,"CrossFadedConstantBinder"),Wi(ws,"SourceExpressionBinder"),Wi(Ts,"CrossFadedCompositeBinder"),Wi(ks,"CompositeExpressionBinder"),Wi(Ss,"ProgramConfiguration",{omit:["_buffers"]}),Wi(Es,"ProgramConfigurationSet");var Ps="-transition",Is=function(e){p(n,e);var t=m(n);function n(e,r){var i;if(v(this,n),(i=t.call(this)).id=e.id,i.type=e.type,i._featureFilter={filter:function(){return!0},needGeometry:!1,needFeature:!1},i._filterCompiled=!1,"custom"!==e.type&&(i.metadata=e.metadata,i.minzoom=e.minzoom,i.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(i.source=e.source,i.sourceLayer=e["source-layer"],i.filter=e.filter),r.layout&&(i._unevaluatedLayout=new $a(r.layout)),r.paint)){for(var a in i._transitionablePaint=new Ya(r.paint),e.paint)i.setPaintProperty(a,e.paint[a],{validate:!1});for(var o in e.layout)i.setLayoutProperty(o,e.layout[o],{validate:!1});i._transitioningPaint=i._transitionablePaint.untransitioned(),i.paint=new to(r.paint)}return l(i)}return g(n,[{key:"getCrossfadeParameters",value:function(){return this._crossfadeParameters}},{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(Vi,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return j(e,Ps)?this._transitionablePaint.getTransition(e.slice(0,-Ps.length)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(ji,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(j(e,Ps))return this._transitionablePaint.setTransition(e.slice(0,-Ps.length),t||void 0),!1;var r=this._transitionablePaint._values[e],i="cross-faded-data-driven"===r.property.specification["property-type"],a=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var s=this._transitionablePaint._values[e].value;return s.isDataDriven()||a||i||this._handleOverridablePaintPropertyUpdate(e,o,s)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(e){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,n){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Z(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&Ui(this,e.call(Fi,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:at,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof eo&&Or(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}},{key:"compileFilter",value:function(){this._filterCompiled||(this._featureFilter=di(this.filter),this._filterCompiled=!0)}},{key:"invalidateCompiledFilter",value:function(){this._filterCompiled=!1}},{key:"dynamicFilter",value:function(){return this._featureFilter.dynamicFilter}},{key:"dynamicFilterNeedsFeature",value:function(){return this._featureFilter.needFeature}}]),n}(it),zs=fo([{name:"a_pos",components:2,type:"Int16"}],4),Ls=fo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),Ds=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];v(this,e),this.segments=t}return g(e,[{key:"prepareSegment",value:function(t,n,r,i){var a=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&H("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!a||a.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==i)&&(a={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(a.sortKey=i),this.segments.push(a)),a}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=d(this.segments);try{for(t.s();!(e=t.n()).done;){var n=e.value;for(var r in n.vaos)n.vaos[r].destroy()}}catch(i){t.e(i)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,n,r,i){return new e([{vertexOffset:t,primitiveOffset:n,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}]),e}();Ds.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wi(Ds,"SegmentVector");var Os=8192,Ns=function(){function e(t,n){v(this,e),t&&(n?this.setSouthWest(t).setNorthEast(n):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return g(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof js?new js(e.lng,e.lat):js.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof js?new js(e.lng,e.lat):js.convert(e),this}},{key:"extend",value:function(t){var n,r,i=this._sw,a=this._ne;if(t instanceof js)n=t,r=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(js.convert(t)):this;if(n=t._sw,r=t._ne,!n||!r)return this}return i||a?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),a.lng=Math.max(r.lng,a.lng),a.lat=Math.max(r.lat,a.lat)):(this._sw=new js(n.lng,n.lat),this._ne=new js(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new js((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new js(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new js(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=js.convert(e),n=t.lng,r=t.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}}],[{key:"convert",value:function(t){return!t||t instanceof e?t:new e(t)}}]),e}(),Fs=6371008.8,js=function(){function e(t,n){if(v(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(n,")"));if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return g(e,[{key:"wrap",value:function(){return new e(M(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return Fs*Math.acos(Math.min(i,1))}},{key:"toBounds",value:function(){var t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Ns(new e(this.lng-n,this.lat-t),new e(this.lng+n,this.lat+t))}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),Vs=2*Math.PI*Fs;function Zs(e){return Vs*Math.cos(e*Math.PI/180)}function Us(e){return(180+e)/360}function Gs(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Hs(e,t){return e/Zs(t)}function qs(e){return 360*e-180}function Ws(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Xs(e,t){return e*Zs(Ws(t))}var Ks=85.051129;function Ys(e){return 1/Math.cos(e*Math.PI/180)}var Js=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v(this,e),this.x=+t,this.y=+n,this.z=+r}return g(e,[{key:"toLngLat",value:function(){return new js(qs(this.x),Ws(this.y))}},{key:"toAltitude",value:function(){return Xs(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/Vs*Ys(Ws(this.y))}}],[{key:"fromLngLat",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=js.convert(t);return new e(Us(r.lng),Gs(r.lat),Hs(n,r.lat))}}]),e}();function Qs(e,t,n,r,i,a,o,s,l){var u=(t+r)/2,c=(n+i)/2,h=new y(u,c);s(h),function(e,t,n,r,i,a){var o=n-i,s=r-a;return Math.abs((r-t)*o-(n-e)*s)/Math.hypot(o,s)}(h.x,h.y,a.x,a.y,o.x,o.y)>=l?(Qs(e,t,n,u,c,a,h,s,l),Qs(e,u,c,r,i,h,o,s,l)):e.push(o)}function $s(e,t,n){var r=e[0],i=r.x,a=r.y;t(r);for(var o=[r],s=1;s<e.length;s++){var l=e[s],u=l.x,c=l.y;t(l),Qs(o,i,a,u,c,r,l,t,n),i=u,a=c,r=l}return o}function el(e,t,n,r,i){if(i(t,n)){var a=t.add(n).mult(.5);r(a),el(e,t,a,r,i),el(e,a,n,r,i)}else e.push(n)}function tl(e,t,n){var r=e[0];t(r);for(var i=[r],a=1;a<e.length;a++){var o=e[a];t(o),el(i,r,o,t,n),r=o}return i}var nl=Math.pow(2,14)-1,rl=-nl-1;function il(e,t){var n=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=A(n,rl,nl),e.y=A(r,rl,nl),(n<e.x||n>e.x+1||r<e.y||r>e.y+1)&&H("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function al(e,t,n){var r=e.loadGeometry(),i=e.extent,a=Os/i;if(t&&n&&n.projection.isReprojectedInTileSpace)for(var o=1<<t.z,s=n.scale,l=n.x,u=n.y,c=n.projection,h=function(e){var n=qs((t.x+e.x/i)/o),r=Ws((t.y+e.y/i)/o),a=c.project(n,r);e.x=(a.x*s-l)*i,e.y=(a.y*s-u)*i},f=0;f<r.length;f++)if(1!==e.type)r[f]=$s(r[f],h,1);else{var p,m=[],v=d(r[f]);try{for(v.s();!(p=v.n()).done;){var g=p.value;g.x<0||g.x>=i||g.y<0||g.y>=i||(h(g),m.push(g))}}catch(k){v.e(k)}finally{v.f()}r[f]=m}var y,_=d(r);try{for(_.s();!(y=_.n()).done;){var x,b=y.value,w=d(b);try{for(w.s();!(x=w.n()).done;)il(x.value,a)}catch(k){w.e(k)}finally{w.f()}}}catch(k){_.e(k)}finally{_.f()}return r}function ol(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?al(e):[]}}function sl(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function ll(e,t,n){var r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}var ul=function(){function e(t){v(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new mo,this.indexArray=new Bo,this.segments=new Ds,this.programConfigurations=new Es(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return g(e,[{key:"populate",value:function(e,t,n,r){var i=this.layers[0],a=[],o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.feature,h=u.id,f=u.index,p=u.sourceLayerIndex,m=this.layers[0]._featureFilter.needGeometry,v=ol(c,m);if(this.layers[0]._featureFilter.filter(new Wa(this.zoom),v,n)){var g=o?o.evaluate(v,{},n):void 0,y={id:h,properties:c.properties,type:c.type,sourceLayerIndex:p,index:f,geometry:m?v.geometry:al(c,n,r),patterns:{},sortKey:g};a.push(y)}}}catch(C){l.e(C)}finally{l.f()}o&&a.sort((function(e,t){return e.sortKey-t.sortKey}));var _=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new ts,_=r.projection);for(var x=0,b=a;x<b.length;x++){var w=b[x],k=w.geometry,T=w.index,S=w.sourceLayerIndex,E=e[T].feature;this.addFeature(w,k,T,t.availableImages,n,_),t.featureIndex.insert(E,k,T,S,this.index)}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,zs.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Ls.members))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}},{key:"addFeature",value:function(e,t,n,r,i,a){var o,s=d(t);try{for(s.s();!(o=s.n()).done;){var l,u=o.value,c=d(u);try{for(c.s();!(l=c.n()).done;){var h=l.value,f=h.x,p=h.y;if(!(f<0||f>=Os||p<0||p>=Os)){if(a){var m=a.projectTilePoint(f,p,i),v=a.upVector(i,f,p),g=this.globeExtVertexArray;ll(g,m,v),ll(g,m,v),ll(g,m,v),ll(g,m,v)}var y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),_=y.vertexLength;sl(this.layoutVertexArray,f,p,-1,-1),sl(this.layoutVertexArray,f,p,1,-1),sl(this.layoutVertexArray,f,p,1,1),sl(this.layoutVertexArray,f,p,-1,1),this.indexArray.emplaceBack(_,_+1,_+2),this.indexArray.emplaceBack(_,_+2,_+3),y.vertexLength+=4,y.primitiveLength+=2}}}catch(x){c.e(x)}finally{c.f()}}}catch(x){s.e(x)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r,i)}}]),e}();function cl(e,t){for(var n=0;n<e.length;n++)if(_l(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(_l(e,t[r]))return!0;return!!pl(e,t)}function hl(e,t,n){return!!_l(e,t)||!!vl(t,e,n)}function dl(e,t){if(1===e.length)return yl(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(_l(e,r[i]))return!0;for(var a=0;a<e.length;a++)if(yl(t,e[a]))return!0;for(var o=0;o<t.length;o++)if(pl(e,t[o]))return!0;return!1}function fl(e,t,n){if(e.length>1){if(pl(e,t))return!0;for(var r=0;r<t.length;r++)if(vl(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(vl(e[i],t,n))return!0;return!1}function pl(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],a=0;a<t.length-1;a++)if(ml(r,i,t[a],t[a+1]))return!0;return!1}function ml(e,t,n,r){return q(e,n,r)!==q(t,n,r)&&q(e,t,n)!==q(e,t,r)}function vl(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(gl(e,t[i-1],t[i])<r)return!0;return!1}function gl(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function yl(e,t){for(var n,r,i,a=!1,o=0;o<e.length;o++)for(var s=0,l=(n=e[o]).length-1;s<n.length;l=s++)r=n[s],i=n[l],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(a=!a);return a}function _l(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var a=e[r],o=e[i];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function xl(e,t,n,r,i){var a,o=d(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}}catch(f){o.e(f)}finally{o.f()}var l=[new y(t,n),new y(t,i),new y(r,i),new y(r,n)];if(e.length>2){var u,c=d(l);try{for(c.s();!(u=c.n()).done;)if(_l(e,u.value))return!0}catch(f){c.e(f)}finally{c.f()}}for(var h=0;h<e.length-1;h++)if(bl(e[h],e[h+1],l))return!0;return!1}function bl(e,t,n){var r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;var a=q(e,t,n[0]);return a!==q(e,t,n[1])||a!==q(e,t,n[2])||a!==q(e,t,n[3])}function wl(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function kl(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Tl(e,t,n,r,i){if(!t[0]&&!t[1])return e;var a=y.convert(t)._mult(i);"viewport"===n&&a._rotate(-r);for(var o=[],s=0;s<e.length;s++)o.push(e[s].sub(a));return o}function Sl(e,t,n,r){var i=y.convert(e)._mult(r);return"viewport"===t&&i._rotate(-n),i}Wi(ul,"CircleBucket",{omit:["layers"]});var El=new so({"circle-sort-key":new ro(at.layout_circle["circle-sort-key"])}),Cl={paint:new so({"circle-radius":new ro(at.paint_circle["circle-radius"]),"circle-color":new ro(at.paint_circle["circle-color"]),"circle-blur":new ro(at.paint_circle["circle-blur"]),"circle-opacity":new ro(at.paint_circle["circle-opacity"]),"circle-translate":new no(at.paint_circle["circle-translate"]),"circle-translate-anchor":new no(at.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new no(at.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new no(at.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ro(at.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ro(at.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ro(at.paint_circle["circle-stroke-opacity"])}),layout:El},Al=1e-6,Rl="undefined"!=typeof Float32Array?Float32Array:Array;function Ml(){var e=new Rl(9);return Rl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Bl(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Pl(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],v=t[14],g=t[15],y=n*s-r*o,_=n*l-i*o,x=n*u-a*o,b=r*l-i*s,w=r*u-a*s,k=i*u-a*l,T=c*m-h*p,S=c*v-d*p,E=c*g-f*p,C=h*v-d*m,A=h*g-f*m,R=d*g-f*v,M=y*R-_*A+x*C+b*E-w*S+k*T;return M?(e[0]=(s*R-l*A+u*C)*(M=1/M),e[1]=(i*A-r*R-a*C)*M,e[2]=(m*k-v*w+g*b)*M,e[3]=(d*w-h*k-f*b)*M,e[4]=(l*E-o*R-u*S)*M,e[5]=(n*R-i*E+a*S)*M,e[6]=(v*x-p*k-g*_)*M,e[7]=(c*k-d*x+f*_)*M,e[8]=(o*A-s*E+u*T)*M,e[9]=(r*E-n*A-a*T)*M,e[10]=(p*w-m*x+g*y)*M,e[11]=(h*x-c*w-f*y)*M,e[12]=(s*S-o*C-l*T)*M,e[13]=(n*C-r*S+i*T)*M,e[14]=(m*_-p*b-v*y)*M,e[15]=(c*b-h*_+d*y)*M,e):null}function Il(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],v=t[13],g=t[14],y=t[15],_=n[0],x=n[1],b=n[2],w=n[3];return e[0]=_*r+x*s+b*h+w*m,e[1]=_*i+x*l+b*d+w*v,e[2]=_*a+x*u+b*f+w*g,e[3]=_*o+x*c+b*p+w*y,e[4]=(_=n[4])*r+(x=n[5])*s+(b=n[6])*h+(w=n[7])*m,e[5]=_*i+x*l+b*d+w*v,e[6]=_*a+x*u+b*f+w*g,e[7]=_*o+x*c+b*p+w*y,e[8]=(_=n[8])*r+(x=n[9])*s+(b=n[10])*h+(w=n[11])*m,e[9]=_*i+x*l+b*d+w*v,e[10]=_*a+x*u+b*f+w*g,e[11]=_*o+x*c+b*p+w*y,e[12]=(_=n[12])*r+(x=n[13])*s+(b=n[14])*h+(w=n[15])*m,e[13]=_*i+x*l+b*d+w*v,e[14]=_*a+x*u+b*f+w*g,e[15]=_*o+x*c+b*p+w*y,e}function zl(e,t,n){var r,i,a,o,s,l,u,c,h,d,f,p,m=n[0],v=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*g+t[12],e[13]=t[1]*m+t[5]*v+t[9]*g+t[13],e[14]=t[2]*m+t[6]*v+t[10]*g+t[14],e[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=r=t[0],e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=r*m+s*v+h*g+t[12],e[13]=i*m+l*v+d*g+t[13],e[14]=a*m+u*v+f*g+t[14],e[15]=o*m+c*v+p*g+t[15]),e}function Ll(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Dl(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+c*r,e[6]=s*i+h*r,e[7]=l*i+d*r,e[8]=u*i-a*r,e[9]=c*i-o*r,e[10]=h*i-s*r,e[11]=d*i-l*r,e}function Ol(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*r,e[1]=o*i-c*r,e[2]=s*i-h*r,e[3]=l*i-d*r,e[8]=a*r+u*i,e[9]=o*r+c*i,e[10]=s*r+h*i,e[11]=l*r+d*i,e}function Nl(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Fl(e,t,n){var r,i,a,o=n[0],s=n[1],l=n[2],u=Math.hypot(o,s,l);return u<Al?null:(o*=u=1/u,s*=u,l*=u,r=Math.sin(t),i=Math.cos(t),e[0]=o*o*(a=1-i)+i,e[1]=s*o*a+l*r,e[2]=l*o*a-s*r,e[3]=0,e[4]=o*s*a-l*r,e[5]=s*s*a+i,e[6]=l*s*a+o*r,e[7]=0,e[8]=o*l*a+s*r,e[9]=s*l*a-o*r,e[10]=l*l*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var jl=Il;function Vl(){var e=new Rl(3);return Rl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Zl(e){var t=new Rl(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ul(e){return Math.hypot(e[0],e[1],e[2])}function Gl(e,t,n){var r=new Rl(3);return r[0]=e,r[1]=t,r[2]=n,r}function Hl(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function ql(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Wl(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Xl(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Kl(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Yl(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Jl(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Ql(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function $l(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function eu(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=i*l-a*s,e[1]=a*o-r*l,e[2]=r*s-i*o,e}function tu(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/(o=o||1),e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function nu(e,t,n){var r=n[0],i=n[1],a=n[2],o=t[0],s=t[1],l=t[2],u=i*l-a*s,c=a*o-r*l,h=r*s-i*o,d=i*h-a*c,f=a*u-r*h,p=r*c-i*u,m=2*n[3];return c*=m,h*=m,f*=2,p*=2,e[0]=o+(u*=m)+(d*=2),e[1]=s+c+f,e[2]=l+h+p,e}var ru,iu=ql,au=Wl,ou=Ul;function su(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function lu(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function uu(){var e=new Rl(4);return Rl!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function cu(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function hu(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=a*l-i*s,e[3]=o*l-r*s,e}function du(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-a*s,e[1]=i*l+o*s,e[2]=a*l+r*s,e[3]=o*l-i*s,e}Vl(),ru=new Rl(4),Rl!=Float32Array&&(ru[0]=0,ru[1]=0,ru[2]=0,ru[3]=0),Vl(),Gl(1,0,0),Gl(0,1,0),uu(),uu(),Ml();var fu=function(){function e(t,n){v(this,e),this.pos=t,this.dir=n}return g(e,[{key:"intersectsPlane",value:function(e,t,n){var r=$l(t,this.dir);if(Math.abs(r)<1e-6)return!1;var i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}},{key:"closestPointOnSphere",value:function(e,t,n){if(function(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(n-a)<=Al*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=Al*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=Al*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;var r=h(this.dir,3),i=r[0],a=r[1],o=r[2],s=this.pos[0]-e[0],l=this.pos[1]-e[1],u=this.pos[2]-e[2],c=i*i+a*a+o*o,d=2*(s*i+l*a+u*o),f=d*d-4*c*(s*s+l*l+u*u-t*t);if(f<0){var p=Math.max(-d/2,0),m=s+i*p,v=l+a*p,g=u+o*p,y=Math.hypot(m,v,g);return n[0]=m*t/y,n[1]=v*t/y,n[2]=g*t/y,!1}var _=(-d-Math.sqrt(f))/(2*c);if(_<0){var x=Math.hypot(s,l,u);return n[0]=s*t/x,n[1]=l*t/x,n[2]=u*t/x,!1}return n[0]=s+i*_,n[1]=l+a*_,n[2]=u+o*_,!0}}]),e}(),pu=function(){function e(t,n,r,i,a){v(this,e),this.TL=t,this.TR=n,this.BR=r,this.BL=i,this.horizon=a}return g(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,r){var i=[-1,1,1],a=[1,1,1],o=[1,-1,1],s=[-1,-1,1];return new e(tu(i,i,t),tu(a,a,t),tu(o,o,t),tu(s,s,t),n/r)}}]),e}(),mu=function(){function e(t,n){v(this,e),this.points=t,this.planes=n}return g(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,r,i){var a=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var r=lu([],e,t),o=1/r[3]/n*a;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(r,r,[o,o,i?1/r[3]:o,o])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var t=Ql([],eu([],iu([],o[e[0]],o[e[1]]),iu([],o[e[2]],o[e[1]]))),n=-$l(t,o[e[1]]);return t.concat(n)}));return new e(o,s)}}]),e}(),vu=function(){function e(t,n){v(this,e),this.min=t,this.max=n,this.center=Yl([],Hl([],this.min,this.max),.5)}return g(e,[{key:"quadrant",value:function(t){for(var n=[t%2==0,t<2],r=Zl(this.min),i=Zl(this.max),a=0;a<n.length;a++)r[a]=n[a]?this.min[a]:this.center[a],i[a]=n[a]?this.center[a]:this.max[a];return i[2]=this.max[2],new e(r,i)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"distanceZ",value:function(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}},{key:"getCorners",value:function(){var e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}},{key:"intersects",value:function(e){for(var t=this.getCorners(),n=!0,r=0;r<e.planes.length;r++){for(var i=e.planes[r],a=0,o=0;o<t.length;o++)a+=$l(i,t[o])+i[3]>=0;if(0===a)return 0;a!==t.length&&(n=!1)}if(n)return 2;for(var s=0;s<3;s++){for(var l=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=0;c<e.points.length;c++){var h=e.points[c][s]-this.min[s];l=Math.min(l,h),u=Math.max(u,h)}if(u<0||l>this.max[s]-this.min[s])return 0}return 1}}],[{key:"fromPoints",value:function(t){var n,r=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],i=[Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE],a=d(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;r[0]=Math.min(r[0],o[0]),r[1]=Math.min(r[1],o[1]),r[2]=Math.min(r[2],o[2]),i[0]=Math.max(i[0],o[0]),i[1]=Math.max(i[1],o[1]),i[2]=Math.max(i[2],o[2])}}catch(s){a.e(s)}finally{a.f()}return new e(r,i)}}]),e}();function gu(e,t,n,r,i,a,o,s,l){if(a&&e.queryGeometry.isAboveHorizon)return!1;a&&(l*=e.pixelToTileUnitsFactor);var u,c=e.tileID.canonical,h=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile,f=d(t);try{for(f.s();!(u=f.n()).done;){var p,m=u.value,v=d(m);try{var g=function(){var t=p.value,u=t.add(s),d=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(u.x,u.y,!0):0,f=n.projection.projectTilePoint(u.x,u.y,c);if(d>0){var m=n.projection.upVector(c,u.x,u.y);f.x+=m[0]*h*d,f.y+=m[1]*h*d,f.z+=m[2]*h*d}var v=a?u:yu(f.x,f.y,f.z,r),g=a?e.tilespaceRays.map((function(e){return bu(e,d)})):e.queryGeometry.screenGeometry,y=lu([],[f.x,f.y,f.z,1],r);if(!o&&a?l*=y[3]/n.cameraToCenterDistance:o&&!a&&(l*=n.cameraToCenterDistance/y[3]),a){var _=Ws((t.y/Os+c.y)/(1<<c.z));l/=n.projection.pixelsPerMeter(_,1)/Hs(1,_)}if(hl(g,v,l))return{v:!0}};for(v.s();!(p=v.n()).done;){var y=g();if("object"===typeof y)return y.v}}catch(_){v.e(_)}finally{v.f()}}}catch(_){f.e(_)}finally{f.f()}return!1}function yu(e,t,n,r){var i=lu([],[e,t,n,1],r);return new y(i[0]/i[3],i[1]/i[3])}var _u=Gl(0,0,0),xu=Gl(0,0,1);function bu(e,t){var n=Vl();return _u[2]=t,e.intersectsPlane(_u,xu,n),new y(n[0],n[1])}var wu=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n)}(ul);function ku(e,t,n,r){var i=t.width,a=t.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*a*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*a*n);return e.width=i,e.height=a,e.data=r,e}function Tu(e,t,n){var r=t.width,i=t.height;r===e.width&&i===e.height||(Su(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=t.data)}function Su(e,t,n,r,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,l=0;l<i.height;l++)for(var u=((n.y+l)*e.width+n.x)*a,c=((r.y+l)*t.width+r.x)*a,h=0;h<i.width*a;h++)s[c+h]=o[u+h];return t}Wi(wu,"HeatmapBucket",{omit:["layers"]});var Eu=function(){function e(t,n){v(this,e),ku(this,t,1,n)}return g(e,[{key:"resize",value:function(t){Tu(this,new e(t),1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){Su(e,t,n,r,i,1)}}]),e}(),Cu=function(){function e(t,n){v(this,e),ku(this,t,4,n)}return g(e,[{key:"resize",value:function(t){Tu(this,new e(t),4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){Su(e,t,n,r,i,4)}}]),e}();Wi(Eu,"AlphaImage"),Wi(Cu,"RGBAImage");var Au={paint:new so({"heatmap-radius":new ro(at.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ro(at.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new no(at.paint_heatmap["heatmap-intensity"]),"heatmap-color":new oo(at.paint_heatmap["heatmap-color"]),"heatmap-opacity":new no(at.paint_heatmap["heatmap-opacity"])})};function Ru(e){var t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new Cu({width:n,height:r}),a=function(n,r,a){t[e.evaluationKey]=a;var o=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*o.r/o.a),i.data[n+r+1]=Math.floor(255*o.g/o.a),i.data[n+r+2]=Math.floor(255*o.b/o.a),i.data[n+r+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<r;++o,s+=4*n)for(var l=0,u=0;l<n;l++,u+=4){var c=l/(n-1),h=e.clips[o];a(s,u,h.start*(1-c)+h.end*c)}else for(var d=0,f=0;d<n;d++,f+=4)a(0,f,d/(n-1));return i}var Mu={paint:new so({"hillshade-illumination-direction":new no(at.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new no(at.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new no(at.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new no(at.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new no(at.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new no(at.paint_hillshade["hillshade-accent-color"])})},Bu=fo([{name:"a_pos",components:2,type:"Int16"}],4).members,Pu=zu,Iu=zu;function zu(e,t,n){n=n||2;var r,i,a,o,s,l,u,c=t&&t.length,h=c?t[0]*n:e.length,d=Lu(e,0,h,n,!0),f=[];if(!d||d.next===d.prev)return f;if(c&&(d=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Lu(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(qu(o));for(s.sort(Zu),i=0;i<s.length;i++)n=Uu(s[i],n);return n}(e,t,d,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var p=n;p<h;p+=n)(s=e[p])<r&&(r=s),(l=e[p+1])<i&&(i=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-r,o-i))?32767/u:0}return Ou(d,f,n,r,i,u,0),f}function Lu(e,t,n,r,i){var a,o;if(i===ac(e,t,n,r)>0)for(a=t;a<n;a+=r)o=nc(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=nc(a,e[a],e[a+1],o);return o&&Yu(o,o.next)&&(rc(o),o=o.next),o}function Du(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Yu(r,r.next)&&0!==Ku(r.prev,r,r.next))r=r.next;else{if(rc(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Ou(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=Hu(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(e,r,i,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?Fu(e,r,i,a):Nu(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),rc(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?Ou(e=ju(Du(e),t,n),t,n,r,i,a,2):2===o&&Vu(e,t,n,r,i,a):Ou(Du(e),t,n,r,i,a,1);break}}}function Nu(e){var t=e.prev,n=e,r=e.next;if(Ku(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,l=n.y,u=r.y,c=i<a?i<o?i:o:a<o?a:o,h=s<l?s<u?s:u:l<u?l:u,d=i>a?i>o?i:o:a>o?a:o,f=s>l?s>u?s:u:l>u?l:u,p=r.next;p!==t;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&Wu(i,s,a,l,o,u,p.x,p.y)&&Ku(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Fu(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Ku(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,u=o.x,c=i.y,h=a.y,d=o.y,f=s<l?s<u?s:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,m=s>l?s>u?s:u:l>u?l:u,v=c>h?c>d?c:d:h>d?h:d,g=Hu(f,p,t,n,r),y=Hu(m,v,t,n,r),_=e.prevZ,x=e.nextZ;_&&_.z>=g&&x&&x.z<=y;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=v&&_!==i&&_!==o&&Wu(s,c,l,h,u,d,_.x,_.y)&&Ku(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,x.x>=f&&x.x<=m&&x.y>=p&&x.y<=v&&x!==i&&x!==o&&Wu(s,c,l,h,u,d,x.x,x.y)&&Ku(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;_&&_.z>=g;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=v&&_!==i&&_!==o&&Wu(s,c,l,h,u,d,_.x,_.y)&&Ku(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=v&&x!==i&&x!==o&&Wu(s,c,l,h,u,d,x.x,x.y)&&Ku(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function ju(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Yu(i,a)&&Ju(i,r,r.next,a)&&ec(i,a)&&ec(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),rc(r),rc(r.next),r=e=a),r=r.next}while(r!==e);return Du(r)}function Vu(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Xu(o,s)){var l=tc(o,s);return o=Du(o,o.next),l=Du(l,l.next),Ou(o,t,n,r,i,a,0),void Ou(l,t,n,r,i,a,0)}s=s.next}o=o.next}while(o!==e)}function Zu(e,t){return e.x-t.x}function Uu(e,t){var n=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o&&(o=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,u=n,c=n.x,h=n.y,d=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Wu(a<h?i:o,a,c,h,a<h?o:i,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(i-r.x),ec(r,e)&&(l<d||l===d&&(r.x>n.x||r.x===n.x&&Gu(n,r)))&&(n=r,d=l)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var r=tc(n,e);return Du(r,r.next),Du(n,n.next)}function Gu(e,t){return Ku(e.prev,e,t.prev)<0&&Ku(t.next,e,e.next)<0}function Hu(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function qu(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Wu(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function Xu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ju(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(ec(e,t)&&ec(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Ku(e.prev,e,t.prev)||Ku(e,t.prev,t))||Yu(e,t)&&Ku(e.prev,e,e.next)>0&&Ku(t.prev,t,t.next)>0)}function Ku(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Yu(e,t){return e.x===t.x&&e.y===t.y}function Ju(e,t,n,r){var i=$u(Ku(e,t,n)),a=$u(Ku(e,t,r)),o=$u(Ku(n,r,e)),s=$u(Ku(n,r,t));return i!==a&&o!==s||!(0!==i||!Qu(e,n,t))||!(0!==a||!Qu(e,r,t))||!(0!==o||!Qu(n,e,r))||!(0!==s||!Qu(n,t,r))}function Qu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function $u(e){return e>0?1:e<0?-1:0}function ec(e,t){return Ku(e.prev,e,e.next)<0?Ku(e,t,e.next)>=0&&Ku(e,e.prev,t)>=0:Ku(e,t,e.prev)<0||Ku(e,e.next,t)<0}function tc(e,t){var n=new ic(e.i,e.x,e.y),r=new ic(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function nc(e,t,n,r){var i=new ic(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function rc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ic(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ac(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}function oc(e,t,n,r,i){sc(e,t,n||0,r||e.length-1,i||uc)}function sc(e,t,n,r,i){for(;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,s=Math.log(a),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);sc(e,t,Math.max(n,Math.floor(t-o*l/a+u)),Math.min(r,Math.floor(t+(a-o)*l/a+u)),i)}var c=e[t],h=n,d=r;for(lc(e,n,t),i(e[r],c)>0&&lc(e,n,r);h<d;){for(lc(e,h,d),h++,d--;i(e[h],c)<0;)h++;for(;i(e[d],c)>0;)d--}0===i(e[n],c)?lc(e,n,d):lc(e,++d,r),d<=t&&(n=d+1),t<=d&&(r=d-1)}}function lc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function uc(e,t){return e<t?-1:e>t?1:0}function cc(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,a=[],o=0;o<n;o++){var s=W(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&a.push(r),r=[e[o]]):r.push(e[o]))}if(r&&a.push(r),t>1)for(var l=0;l<a.length;l++)a[l].length<=t||(oc(a[l],t,1,a[l].length-1,hc),a[l]=a[l].slice(0,t));return a}function hc(e,t){return t.area-e.area}function dc(e,t,n){var r,i=n.patternDependencies,a=!1,o=d(t);try{for(o.s();!(r=o.n()).done;){var s=r.value.paint.get("".concat(e,"-pattern"));s.isConstant()||(a=!0);var l=s.constantOr(null);l&&(a=!0,i[l.to]=!0,i[l.from]=!0)}}catch(u){o.e(u)}finally{o.f()}return a}function fc(e,t,n,r,i){var a,o=i.patternDependencies,s=d(t);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.paint.get("".concat(e,"-pattern")).value;if("constant"!==u.kind){var c=u.evaluate({zoom:r-1},n,{},i.availableImages),h=u.evaluate({zoom:r},n,{},i.availableImages),f=u.evaluate({zoom:r+1},n,{},i.availableImages);c=c&&c.name?c.name:c,h=h&&h.name?h.name:h,f=f&&f.name?f.name:f,o[c]=!0,o[h]=!0,o[f]=!0,n.patterns[l.id]={min:c,mid:h,max:f}}}}catch(p){s.e(p)}finally{s.f()}return n}zu.deviation=function(e,t,n,r){var i=t&&t.length,a=Math.abs(ac(e,0,i?t[0]*n:e.length,n));if(i)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(ac(e,t[o]*n,o<s-1?t[o+1]*n:e.length,n));var l=0;for(o=0;o<r.length;o+=3){var u=r[o]*n,c=r[o+1]*n,h=r[o+2]*n;l+=Math.abs((e[u]-e[h])*(e[c+1]-e[u+1])-(e[u]-e[c])*(e[h+1]-e[u+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},zu.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&n.holes.push(r+=e[i-1].length)}return n},Pu.default=Iu;var pc=function(){function e(t){v(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new mo,this.indexArray=new Bo,this.indexArray2=new Oo,this.programConfigurations=new Es(t.layers,t.zoom),this.segments=new Ds,this.segments2=new Ds,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.projection=t.projection}return g(e,[{key:"populate",value:function(e,t,n,r){this.hasPattern=dc("fill",this.layers,t);var i,a=this.layers[0].layout.get("fill-sort-key"),o=[],s=d(e);try{for(s.s();!(i=s.n()).done;){var l=i.value,u=l.feature,c=l.id,h=l.index,f=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,m=ol(u,p);if(this.layers[0]._featureFilter.filter(new Wa(this.zoom),m,n)){var v=a?a.evaluate(m,{},n,t.availableImages):void 0,g={id:c,properties:u.properties,type:u.type,sourceLayerIndex:f,index:h,geometry:p?m.geometry:al(u,n,r),patterns:{},sortKey:v};o.push(g)}}}catch(S){s.e(S)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,_=o;y<_.length;y++){var x=_[y],b=x.geometry,w=x.index,k=x.sourceLayerIndex;if(this.hasPattern){var T=fc("fill",this.layers,x,this.zoom,t);this.patternFeatures.push(T)}else this.addFeature(x,b,w,n,{},t.availableImages);t.featureIndex.insert(e[w].feature,b,w,k,this.index)}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"addFeatures",value:function(e,t,n,r,i){var a,o=d(this.patternFeatures);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.addFeature(s,s.geometry,s.index,t,n,r)}}catch(l){o.e(l)}finally{o.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Bu),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,n,r,i){var a,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=d(cc(t,500));try{for(s.s();!(a=s.n()).done;){var l,u=a.value,c=0,h=d(u);try{for(h.s();!(l=h.n()).done;)c+=l.value.length}catch(S){h.e(S)}finally{h.f()}var f,p=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),m=p.vertexLength,v=[],g=[],y=d(u);try{for(y.s();!(f=y.n()).done;){var _=f.value;if(0!==_.length){_!==u[0]&&g.push(v.length/2);var x=this.segments2.prepareSegment(_.length,this.layoutVertexArray,this.indexArray2),b=x.vertexLength;this.layoutVertexArray.emplaceBack(_[0].x,_[0].y),this.indexArray2.emplaceBack(b+_.length-1,b),v.push(_[0].x),v.push(_[0].y);for(var w=1;w<_.length;w++)this.layoutVertexArray.emplaceBack(_[w].x,_[w].y),this.indexArray2.emplaceBack(b+w-1,b+w),v.push(_[w].x),v.push(_[w].y);x.vertexLength+=_.length,x.primitiveLength+=_.length}}}catch(S){y.e(S)}finally{y.f()}for(var k=Pu(v,g),T=0;T<k.length;T+=3)this.indexArray.emplaceBack(m+k[T],m+k[T+1],m+k[T+2]);p.vertexLength+=c,p.primitiveLength+=k.length/3}}catch(S){s.e(S)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}}]),e}();Wi(pc,"FillBucket",{omit:["layers","patternFeatures"]});var mc=new so({"fill-sort-key":new ro(at.layout_fill["fill-sort-key"])}),vc={paint:new so({"fill-antialias":new no(at.paint_fill["fill-antialias"]),"fill-opacity":new ro(at.paint_fill["fill-opacity"]),"fill-color":new ro(at.paint_fill["fill-color"]),"fill-outline-color":new ro(at.paint_fill["fill-outline-color"]),"fill-translate":new no(at.paint_fill["fill-translate"]),"fill-translate-anchor":new no(at.paint_fill["fill-translate-anchor"]),"fill-pattern":new io(at.paint_fill["fill-pattern"])}),layout:mc},gc=fo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),yc=fo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),_c=fo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),xc=gc.members,bc=wc;function wc(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(kc,this,t)}function kc(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Tc(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)r+=((n=e[o]).x-(t=e[i]).x)*(t.y+n.y);return r}wc.types=["Unknown","Point","LineString","Polygon"],wc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,a=0,o=0,s=[];e.pos<n;){if(i<=0){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)a+=e.readSVarint(),o+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new y(a,o));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},wc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,a=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=e.readSVarint())<l&&(l=a),a>u&&(u=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,s,u]},wc.prototype.toGeoJSON=function(e,t,n){var r,i,a=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=wc.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];c(l=h);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],a=0;a<t;a++){var o=Tc(e[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[e[a]]):n.push(e[a]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)c(l[r][i])}1===l.length?l=l[0]:u="Multi"+u;var d={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(d.id=this.id),d};var Sc=Ec;function Ec(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Cc,this,t),this.length=this._features.length}function Cc(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}function Ac(e,t,n){if(3===e){var r=new Sc(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}Ec.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new bc(this._pbf,t,this.extent,this._keys,this._values)};var Rc={VectorTile:function(e,t){this.layers=e.readFields(Ac,{},t)},VectorTileFeature:bc,VectorTileLayer:Sc};function Mc(e,t,n,r){var i,a=[],o=0===r?function(e,t,n,r,i,a){e.push(new y(a,n+(a-t)/(r-t)*(i-n)))}:function(e,t,n,r,i,a){e.push(new y(t+(a-n)/(i-n)*(r-t),a))},s=d(e);try{for(s.s();!(i=s.n()).done;){var l,u=i.value,c=[],h=d(u);try{for(h.s();!(l=h.n()).done;){var f=l.value;if(!(f.length<=2)){for(var p=[],m=0;m<f.length-1;m++){var v=f[m].x,g=f[m].y,_=f[m+1].x,x=f[m+1].y,b=0===r?v:g,w=0===r?_:x;b<t?w>t&&o(p,v,g,_,x,t):b>n?w<n&&o(p,v,g,_,x,n):p.push(f[m]),w<t&&b>=t&&o(p,v,g,_,x,t),w>n&&b<=n&&o(p,v,g,_,x,n)}var k=f[f.length-1],T=0===r?k.x:k.y;T>=t&&T<=n&&p.push(k),p.length&&(k=p[p.length-1],p[0].x===k.x&&p[0].y===k.y||p.push(p[0]),c.push(p))}}}catch(S){h.e(S)}finally{h.f()}c.length&&a.push(c)}}catch(S){s.e(S)}finally{s.f()}return a}var Bc=Rc.VectorTileFeature.types,Pc=Math.pow(2,13);function Ic(e,t,n,r,i,a,o,s){e.emplaceBack((t<<1)+o,(n<<1)+a,(Math.floor(r*Pc)<<1)+i,Math.round(s))}function zc(e,t,n){var r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}var Lc=function(){function e(){v(this,e),this.acc=new y(0,0),this.polyCount=[]}return g(e,[{key:"startRing",value:function(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new y(e.x,e.y),this.max=new y(e.x,e.y))}},{key:"append",value:function(e,t){this.currentPolyCount.edges++,this.acc._add(e);var n=this.min,r=this.max;e.x<n.x?n.x=e.x:e.x>r.x&&(r.x=e.x),e.y<n.y?n.y=e.y:e.y>r.y&&(r.y=e.y),((0===e.x||e.x===Os)&&e.x===t.x)!=((0===e.y||e.y===Os)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,In(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Os!=e.x>Os&&this.addBorderIntersection(1,In(t.y,e.y,(Os-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,In(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Os!=e.y>Os&&this.addBorderIntersection(3,In(t.x,e.x,(Os-t.y)/(e.y-t.y)))}},{key:"addBorderIntersection",value:function(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}},{key:"processBorderOverlap",value:function(e,t){if(e.x===t.x){if(e.y===t.y)return;var n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{var r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}},{key:"centroid",value:function(){var e=this.polyCount.reduce((function(e,t){return e+t.edges}),0);return 0!==e?this.acc.div(e)._round():new y(0,0)}},{key:"span",value:function(){return new y(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(e,t){return e+ +(t[0]!==Number.MAX_VALUE)}),0)}}]),e}(),Dc=function(){function e(t){v(this,e),this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new go,this.centroidVertexArray=new $o,this.indexArray=new Bo,this.programConfigurations=new Es(t.layers,t.zoom),this.segments=new Ds,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.enableTerrain=t.enableTerrain}return g(e,[{key:"populate",value:function(e,t,n,r){this.features=[],this.hasPattern=dc("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){var t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Os/(1<<e.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;var i,a=d(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.feature,l=o.id,u=o.index,c=o.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f=ol(s,h);if(this.layers[0]._featureFilter.filter(new Wa(this.zoom),f,n)){var p={id:l,sourceLayerIndex:c,index:u,geometry:h?f.geometry:al(s,n,r),properties:s.properties,type:s.type,patterns:{}},m=this.layoutVertexArray.length;this.hasPattern?this.features.push(fc("fill-extrusion",this.layers,p,this.zoom,t)):this.addFeature(p,p.geometry,u,n,{},t.availableImages,r),t.featureIndex.insert(s,p.geometry,u,c,this.index,m)}}}catch(v){a.e(v)}finally{a.f()}this.sortBorders()}},{key:"addFeatures",value:function(e,t,n,r,i){var a,o=d(this.features);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.geometry;this.addFeature(s,l,s.index,t,n,r,i)}}catch(u){o.e(u)}finally{o.f()}this.sortBorders()}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,xc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,_c.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"uploadCentroid",value:function(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,yc.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,r,i,a,o){var s=[new y(0,0),new y(Os,Os)],l=o.projection,u="globe"===l.name,c=this.enableTerrain&&!u?new Lc:null,h="Polygon"===Bc[e.type];u&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Vo);for(var f,p,m=cc(t,500),v=m.length-1;v>=0;v--){var g=m[v];(0===g.length||(f=g[0]).every((function(e){return e.x<=0}))||f.every((function(e){return e.x>=Os}))||f.every((function(e){return e.y<=0}))||f.every((function(e){return e.y>=Os})))&&m.splice(v,1)}if(u)p=Gc(m,s,r);else{p=[];var _,x=d(m);try{for(x.s();!(_=x.n()).done;){var b=_.value;p.push({polygon:b,bounds:s})}}catch(Re){x.e(Re)}finally{x.f()}}var w,k=h?this.edgeRadius:0,T=d(p);try{for(T.s();!(w=T.n()).done;){var S,E=w.value,C=E.polygon,A=E.bounds,R=0,M=0,B=d(C);try{for(B.s();!(S=B.n()).done;){var P=S.value;h&&!P[0].equals(P[P.length-1])&&P.push(P[0]),M+=h?P.length-1:P.length}}catch(Re){B.e(Re)}finally{B.f()}var I=this.segments.prepareSegment((h?5:4)*M,this.layoutVertexArray,this.indexArray);if(h){var z=[],L=[];R=I.vertexLength;var D,O=d(C);try{for(O.s();!(D=O.n()).done;){var N=D.value,F=void 0,j=void 0;N.length&&N!==C[0]&&L.push(z.length/2),F=N[1].sub(N[0])._perp()._unit();for(var V=1;V<N.length;V++){var Z=N[V],U=N[V===N.length-1?1:V+1],G=Z.x,H=Z.y;if(k){j=U.sub(Z)._perp()._unit();var q=F.add(j)._unit(),W=k*Math.min(4,1/(F.x*q.x+F.y*q.y));G+=W*q.x,H+=W*q.y,F=j}Ic(this.layoutVertexArray,G,H,0,0,1,1,0),I.vertexLength++,z.push(Z.x,Z.y),u&&zc(this.layoutVertexExtArray,l.projectTilePoint(G,H,r),l.upVector(r,G,H))}}}catch(Re){O.e(Re)}finally{O.f()}for(var X=Pu(z,L),K=0;K<X.length;K+=3)this.indexArray.emplaceBack(R+X[K],R+X[K+2],R+X[K+1]),I.primitiveLength++}var Y,J=d(C);try{for(J.s();!(Y=J.n()).done;){var Q=Y.value;c&&Q.length&&c.startRing(Q[0]);var $=void 0,ee=void 0,te=void 0,ne=Q.length>4&&Vc(Q[Q.length-2],Q[0],Q[1]),re=k?Nc(Q[Q.length-2],Q[0],Q[1],k):0;ee=Q[1].sub(Q[0])._perp()._unit();for(var ie=1,ae=0;ie<Q.length;ie++){var oe=Q[ie-1],se=Q[ie],le=Q[ie===Q.length-1?1:ie+1];if(c&&h&&c.currentPolyCount.top++,jc(se,oe,A))k&&(ee=le.sub(se)._perp()._unit());else{c&&c.append(se,oe);var ue=se.sub(oe)._perp(),ce=ue.x/(Math.abs(ue.x)+Math.abs(ue.y)),he=ue.y>0?1:0,de=oe.dist(se);if(ae+de>32768&&(ae=0),k){te=le.sub(se)._perp()._unit();var fe=Fc(oe,se,le,Oc(ee,te),k);isNaN(fe)&&(fe=0);var pe=se.sub(oe)._unit();oe=oe.add(pe.mult(re))._round(),se=se.add(pe.mult(-fe))._round(),re=fe,ee=te}var me=I.vertexLength,ve=Q.length>4&&Vc(oe,se,le),ge=Zc(ae,ne,!0);if(Ic(this.layoutVertexArray,oe.x,oe.y,ce,he,0,0,ge),Ic(this.layoutVertexArray,oe.x,oe.y,ce,he,0,1,ge),ge=Zc(ae+=de,ve,!1),ne=ve,Ic(this.layoutVertexArray,se.x,se.y,ce,he,0,0,ge),Ic(this.layoutVertexArray,se.x,se.y,ce,he,0,1,ge),I.vertexLength+=4,this.indexArray.emplaceBack(me+0,me+1,me+2),this.indexArray.emplaceBack(me+1,me+3,me+2),I.primitiveLength+=2,k){var ye=R+(1===ie?Q.length-2:ie-2),_e=1===ie?R:ye+1;if(this.indexArray.emplaceBack(me+1,ye,me+3),this.indexArray.emplaceBack(ye,_e,me+3),I.primitiveLength+=2,void 0===$&&($=me),!jc(le,Q[ie],A)){var xe=ie===Q.length-1?$:I.vertexLength;this.indexArray.emplaceBack(me+2,me+3,xe),this.indexArray.emplaceBack(me+3,xe+1,xe),this.indexArray.emplaceBack(me+3,_e,xe+1),I.primitiveLength+=3}}if(u){var be=this.layoutVertexExtArray,we=l.projectTilePoint(oe.x,oe.y,r),ke=l.projectTilePoint(se.x,se.y,r),Te=l.upVector(r,oe.x,oe.y),Se=l.upVector(r,se.x,se.y);zc(be,we,Te),zc(be,we,Te),zc(be,ke,Se),zc(be,ke,Se)}}}h&&(R+=Q.length-1)}}catch(Re){J.e(Re)}finally{J.f()}}}catch(Re){T.e(Re)}finally{T.f()}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;for(var Ee=c.borders,Ce=this.featuresOnBorder.push(c)-1,Ae=0;Ae<4;Ae++)Ee[Ae][0]!==Number.MAX_VALUE&&this.borders[Ae].push(Ce)}this.encodeCentroid(c.borders?void 0:c.centroid(),c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,a,r)}},{key:"sortBorders",value:function(){for(var e=this,t=function(t){e.borders[t].sort((function(n,r){return e.featuresOnBorder[n].borders[t][0]-e.featuresOnBorder[r].borders[t][0]}))},n=0;n<4;n++)t(n)}},{key:"encodeCentroid",value:function(e,t){var n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){var a=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(a.x/10)),r=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(a.y/10))}else n=Math.ceil(7*(e.x+450)),r=0;else n=0,r=+i;var o,s=i?this.centroidVertexArray.length:t.vertexArrayOffset,l=d(t.polyCount);try{for(l.s();!(o=l.n()).done;){var u=o.value;i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*u.edges+u.top);for(var c=0;c<u.top;c++)this.centroidVertexArray.emplace(s++,n,r);for(var h=0;h<2*u.edges;h++)this.centroidVertexArray.emplace(s++,0,r),this.centroidVertexArray.emplace(s++,n,r)}}catch(f){l.e(f)}finally{l.f()}}}]),e}();function Oc(e,t){var n=e.add(t)._unit();return e.x*n.x+e.y*n.y}function Nc(e,t,n,r){var i=t.sub(e)._perp()._unit(),a=n.sub(t)._perp()._unit();return Fc(e,t,n,Oc(i,a),r)}function Fc(e,t,n,r,i){var a=Math.sqrt(1-r*r);return Math.min(e.dist(t)/3,t.dist(n)/3,i*a/r)}function jc(e,t,n){return e.x<n[0].x&&t.x<n[0].x||e.x>n[1].x&&t.x>n[1].x||e.y<n[0].y&&t.y<n[0].y||e.y>n[1].y&&t.y>n[1].y}function Vc(e,t,n){if(e.x<0||e.x>=Os||t.x<0||t.x>=Os||n.x<0||n.x>=Os)return!1;var r=n.sub(t),i=r.perp(),a=e.sub(t);return(r.x*a.x+r.y*a.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(a.x*a.x+a.y*a.y))>-.866&&i.x*a.x+i.y*a.y<0}function Zc(e,t,n){var r=t?2|e:-3&e;return n?1|r:-2&r}function Uc(){var e=Math.PI/32,t=Math.tan(e),n=Fs;return n*Math.sqrt(1+2*t*t)-n}function Gc(e,t,n){var r=1<<n.z,i=qs(n.x/r),a=qs((n.x+1)/r),o=Ws(n.y/r),s=Ws((n.y+1)/r);return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,o=[];if(!e.length||!n||!r)return o;for(var s=function(e,t){var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;o.push({polygon:i,bounds:t})}}catch(a){r.e(a)}finally{r.f()}},l=Math.ceil(Math.log2(n)),u=Math.ceil(Math.log2(r)),c=l-u,h=[],f=0;f<Math.abs(c);f++)h.push(c>0?0:1);for(var p=0;p<Math.min(l,u);p++)h.push(0),h.push(1);var m=e;if(m=Mc(m,t[0].y-i,t[1].y+i,1),!(m=Mc(m,t[0].x-i,t[1].x+i,0)).length)return o;var v=[];for(h.length?v.push({polygons:m,bounds:t,depth:0}):s(m,t);v.length;){var g=v.pop(),_=g.depth,x=h[_],b=g.bounds[0],w=g.bounds[1],k=0===x?b.x:b.y,T=0===x?w.x:w.y,S=a?a(x,k,T):.5*(k+T),E=Mc(g.polygons,k-i,S+i,x),C=Mc(g.polygons,S-i,T+i,x);if(E.length){var A=[b,new y(0===x?S:w.x,1===x?S:w.y)];h.length>_+1?v.push({polygons:E,bounds:A,depth:_+1}):s(E,A)}if(C.length){var R=[new y(0===x?S:b.x,1===x?S:b.y),w];h.length>_+1?v.push({polygons:C,bounds:R,depth:_+1}):s(C,R)}}return o}(e,t,Math.ceil((a-i)/11.25),Math.ceil((o-s)/11.25),1,(function(e,t,i){if(0===e)return.5*(t+i);var a=Ws((n.y+t/Os)/r);return(Gs(.5*(Ws((n.y+i/Os)/r)+a))*r-n.y)*Os}))}Wi(Dc,"FillExtrusionBucket",{omit:["layers","features"]}),Wi(Lc,"PartMetadata");var Hc=new so({"fill-extrusion-edge-radius":new no(at["layout_fill-extrusion"]["fill-extrusion-edge-radius"])}),qc={paint:new so({"fill-extrusion-opacity":new no(at["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ro(at["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new no(at["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new no(at["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new io(at["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ro(at["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ro(at["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new no(at["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new no(at["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new no(at["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:Hc};function Wc(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}var Xc=function(){function e(t,n,r){v(this,e),this.z=t,this.x=n,this.y=r,this.key=Jc(0,t,t,n,r)}return g(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t){var n=function(e,t,n){var r=Wc(256*e,256*(t=Math.pow(2,n)-t-1),n),i=Wc(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(e,t,n){for(var r,i="",a=e;a>0;a--)i+=(t&(r=1<<a-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),Kc=g((function e(t,n){v(this,e),this.wrap=t,this.canonical=n,this.key=Jc(t,n.z,n.z,n.x,n.y)})),Yc=function(){function e(t,n,r,i,a){v(this,e),this.overscaledZ=t,this.wrap=n,this.canonical=new Xc(r,+i,+a),this.key=0===n&&t===r?this.canonical.key:Jc(n,t,r,i,a)}return g(e,[{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){var n=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Jc(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);var n=this.canonical.z-e;return Jc(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new e(n,this.wrap,n,r,i),new e(n,this.wrap,n,r+1,i),new e(n,this.wrap,n,r,i+1),new e(n,this.wrap,n,r+1,i+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new Kc(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}]),e}();function Jc(e,t,n,r,i){var a=1<<Math.min(n,22),o=a*(i%a)+r%a;return e&&n<22&&(o+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*o+n)+(t-n)}function Qc(e,t){return e.x*t.x+e.y*t.y}function $c(e,t){if(1===e.length){for(var n,r=0,i=t[r++];!n||i.equals(n);)if(!(n=t[r++]))return 1/0;for(;r<t.length;r++){var a=t[r],o=e[0],s=n.sub(i),l=a.sub(i),u=o.sub(i),c=Qc(s,s),h=Qc(s,l),f=Qc(l,l),p=Qc(u,s),m=Qc(u,l),v=c*f-h*h,g=(f*p-h*m)/v,y=(c*m-h*p)/v,_=i.z*(1-g-y)+n.z*g+a.z*y;if(isFinite(_))return _}return 1/0}var x,b=1/0,w=d(t);try{for(w.s();!(x=w.n()).done;){var k=x.value;b=Math.min(b,k.z)}}catch(T){w.e(T)}finally{w.f()}return b}function eh(e){var t=new y(e[0],e[1]);return t.z=e[2],t}function th(e,t,n,r,i,a,o,s){var l=o*i.getElevationAt(e,t,!0,!0),u=0!==a[0],c=u?0===a[1]?o*(a[0]/7-450):o*function(e,t,n){var r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),a=10*(t[0]-8*r),o=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),l=e.getMeterToDEM(n),u=Math.floor(.5*(a*l-1)),c=Math.floor(.5*(o*l-1)),h=e.tileCoordToPixel(r,i),d=2*u+1,f=2*c+1,p=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,h.x-u,h.y-c,d,f),m=Math.abs(p[0]-p[1]),v=Math.abs(p[2]-p[3]),g=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),y=Math.min(.25,.5*l*(m+v)/d),_=Math.min(.25,.5*l*g/f);return s+Math.max(y*a,_*o)}(i,a,s):l;return{base:l+(0===n)?-1:n,top:u?Math.max(c+r,l+n+2):l+r}}Wi(Xc,"CanonicalTileID"),Wi(Yc,"OverscaledTileID",{omit:["projMatrix"]});var nh=fo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,rh=fo([{name:"a_packed",components:4,type:"Float32"}]).members,ih=Rc.VectorTileFeature.types,ah=Math.cos(Math.PI/180*37.5),oh=function(){function e(t){var n=this;v(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){n.gradients[e.id]={}})),this.layoutVertexArray=new yo,this.layoutVertexArray2=new _o,this.indexArray=new Bo,this.programConfigurations=new Es(t.layers,t.zoom),this.segments=new Ds,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return g(e,[{key:"populate",value:function(e,t,n,r){this.hasPattern=dc("line",this.layers,t);var i,a=this.layers[0].layout.get("line-sort-key"),o=[],s=d(e);try{for(s.s();!(i=s.n()).done;){var l=i.value,u=l.feature,c=l.id,h=l.index,f=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,m=ol(u,p);if(this.layers[0]._featureFilter.filter(new Wa(this.zoom),m,n)){var v=a?a.evaluate(m,{},n):void 0,g={id:c,properties:u.properties,type:u.type,sourceLayerIndex:f,index:h,geometry:p?m.geometry:al(u,n,r),patterns:{},sortKey:v};o.push(g)}}}catch(A){s.e(A)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=t.lineAtlas,_=t.featureIndex,x=this.addConstantDashes(y),b=0,w=o;b<w.length;b++){var k=w[b],T=k.geometry,S=k.index,E=k.sourceLayerIndex;if(x&&this.addFeatureDashes(k,y),this.hasPattern){var C=fc("line",this.layers,k,this.zoom,t);this.patternFeatures.push(C)}else this.addFeature(k,T,S,n,y.positions,t.availableImages);_.insert(e[S].feature,T,S,E,this.index)}}},{key:"addConstantDashes",value:function(e){var t,n=!1,r=d(this.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.paint.get("line-dasharray").value,o=i.layout.get("line-cap").value;if("constant"!==a.kind||"constant"!==o.kind)n=!0;else{var s=o.value,l=a.value;if(!l)continue;e.addDash(l.from,s),e.addDash(l.to,s),l.other&&e.addDash(l.other,s)}}}catch(u){r.e(u)}finally{r.f()}return n}},{key:"addFeatureDashes",value:function(e,t){var n,r=this.zoom,i=d(this.layers);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.paint.get("line-dasharray").value,s=a.layout.get("line-cap").value;if("constant"!==o.kind||"constant"!==s.kind){var l=void 0,u=void 0,c=void 0,h=void 0,f=void 0,p=void 0;if("constant"===o.kind){var m=o.value;if(!m)continue;l=m.other||m.to,u=m.to,c=m.from}else l=o.evaluate({zoom:r-1},e),u=o.evaluate({zoom:r},e),c=o.evaluate({zoom:r+1},e);"constant"===s.kind?h=f=p=s.value:(h=s.evaluate({zoom:r-1},e),f=s.evaluate({zoom:r},e),p=s.evaluate({zoom:r+1},e)),t.addDash(l,h),t.addDash(u,f),t.addDash(c,p);var v=t.getKey(l,h),g=t.getKey(u,f),y=t.getKey(c,p);e.patterns[a.id]={min:v,mid:g,max:y}}}}catch(_){i.e(_)}finally{i.f()}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"addFeatures",value:function(e,t,n,r,i){var a,o=d(this.patternFeatures);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.addFeature(s,s.geometry,s.index,t,n,r)}}catch(l){o.e(l)}finally{o.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,rh)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,nh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,n,r,i,a){var o=this.layers[0].layout,s=o.get("line-join").evaluate(e,{}),l=o.get("line-cap").evaluate(e,{}),u=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var h,f=d(t);try{for(f.s();!(h=f.n()).done;){var p=h.value;this.addLine(p,e,s,l,u,c)}}catch(m){f.e(m)}finally{f.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,a,r)}},{key:"addLine",value:function(e,t,n,r,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===ih[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var u=0;u<l-1&&e[u].equals(e[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===n&&(i=1.05);var c,h,d,f,p,m=this.overscaling<=16?122880/(512*this.overscaling):0,v=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(c=e[l-2],p=e[u].sub(c)._unit()._perp());for(var g=u;g<l;g++)if(!(d=g===l-1?s?e[u+1]:void 0:e[g+1])||!e[g].equals(d)){p&&(f=p),c&&(h=c),c=e[g],p=d?d.sub(c)._unit()._perp():f;var y=(f=f||p).add(p);0===y.x&&0===y.y||y._unit();var _=f.x*p.x+f.y*p.y,x=y.x*p.x+y.y*p.y,b=0!==x?1/x:1/0,w=2*Math.sqrt(2-2*x),k=x<ah&&h&&d,T=f.x*p.y-f.y*p.x>0;if(k&&g>u){var S=c.dist(h);if(S>2*m){var E=c.sub(c.sub(h)._mult(m/S)._round());this.updateDistance(h,E),this.addCurrentVertex(E,f,0,0,v),h=E}}var C=h&&d,A=C?n:s?"butt":r;if(C&&"round"===A&&(b<a?A="miter":b<=2&&(A="fakeround")),"miter"===A&&b>i&&(A="bevel"),"bevel"===A&&(b>2&&(A="flipbevel"),b<i&&(A="miter")),h&&this.updateDistance(h,c),"miter"===A)y._mult(b),this.addCurrentVertex(c,y,0,0,v);else if("flipbevel"===A){if(b>100)y=p.mult(-1);else{var R=b*f.add(p).mag()/f.sub(p).mag();y._perp()._mult(R*(T?-1:1))}this.addCurrentVertex(c,y,0,0,v),this.addCurrentVertex(c,y.mult(-1),0,0,v)}else if("bevel"===A||"fakeround"===A){var M=-Math.sqrt(b*b-1),B=T?M:0,P=T?0:M;if(h&&this.addCurrentVertex(c,f,B,P,v),"fakeround"===A)for(var I=Math.round(180*w/Math.PI/20),z=1;z<I;z++){var L=z/I;if(.5!==L){var D=L-.5;L+=L*D*(L-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*D*D+(.848013+_*(.215638*_-1.06021)))}var O=p.sub(f)._mult(L)._add(f)._unit()._mult(T?-1:1);this.addHalfVertex(c,O.x,O.y,!1,T,0,v)}d&&this.addCurrentVertex(c,p,-B,-P,v)}else if("butt"===A)this.addCurrentVertex(c,y,0,0,v);else if("square"===A){var N=h?1:-1;h||this.addCurrentVertex(c,y,N,N,v),this.addCurrentVertex(c,y,0,0,v),h&&this.addCurrentVertex(c,y,N,N,v)}else"round"===A&&(h&&(this.addCurrentVertex(c,f,0,0,v),this.addCurrentVertex(c,f,1,1,v,!0)),d&&(this.addCurrentVertex(c,p,-1,-1,v,!0),this.addCurrentVertex(c,p,0,0,v)));if(k&&g<l-1){var F=c.dist(d);if(F>2*m){var j=c.add(d.sub(c)._mult(m/F)._round());this.updateDistance(c,j),this.addCurrentVertex(j,p,0,0,v),c=j}}}}}},{key:"addCurrentVertex",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,a,!1,n,i),this.addHalfVertex(e,o,s,a,!0,-r,i)}},{key:"addHalfVertex",value:function(e,t,n,r,i,a,o){var s=e.x,l=e.y;this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);var u=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),o.primitiveLength++),i?this.e2=u:this.e1=u}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();Wi(oh,"LineBucket",{omit:["layers","patternFeatures"]});var sh=new so({"line-cap":new ro(at.layout_line["line-cap"]),"line-join":new ro(at.layout_line["line-join"]),"line-miter-limit":new no(at.layout_line["line-miter-limit"]),"line-round-limit":new no(at.layout_line["line-round-limit"]),"line-sort-key":new ro(at.layout_line["line-sort-key"])}),lh={paint:new so({"line-opacity":new ro(at.paint_line["line-opacity"]),"line-color":new ro(at.paint_line["line-color"]),"line-translate":new no(at.paint_line["line-translate"]),"line-translate-anchor":new no(at.paint_line["line-translate-anchor"]),"line-width":new ro(at.paint_line["line-width"]),"line-gap-width":new ro(at.paint_line["line-gap-width"]),"line-offset":new ro(at.paint_line["line-offset"]),"line-blur":new ro(at.paint_line["line-blur"]),"line-dasharray":new io(at.paint_line["line-dasharray"]),"line-pattern":new io(at.paint_line["line-pattern"]),"line-gradient":new oo(at.paint_line["line-gradient"]),"line-trim-offset":new no(at.paint_line["line-trim-offset"])}),layout:sh},uh=new(function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"possiblyEvaluate",value:function(e,t){return t=new Wa(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),o(s(n.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,r,i){return t=I({},t,{zoom:Math.floor(t.zoom)}),o(s(n.prototype),"evaluate",this).call(this,e,t,r,i)}}]),n}(ro))(lh.paint.properties["line-width"].specification);function ch(e,t){return t>0?t+2*e:e}uh.useIntegerZoom=!0;var hh=fo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),dh=fo([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),fh=fo([{name:"a_projected_pos",components:4,type:"Float32"}],4);fo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var ph=fo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),mh=fo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);fo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var vh=fo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),gh=fo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);fo([{name:"triangle",components:3,type:"Uint16"}]),fo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),fo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),fo([{type:"Float32",name:"offsetX"}]),fo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var yh=24,_h=128;function xh(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Wa(e+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,a=0;a<r.length&&r[a]<=e;)a++;for(var o=a=Math.max(0,a-1);o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var s=r[a],l=r[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:l,minSize:n.evaluate(new Wa(s)),maxSize:n.evaluate(new Wa(l)),interpolationType:i}}function bh(e,t,n){var r=t.uSize,i=t.uSizeT,a=n.lowerSize,o=n.upperSize;return"source"===e.kind?a/_h:"composite"===e.kind?In(a/_h,o/_h,i):r}function wh(e,t){var n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){var i=e.interpolationType,a=e.minZoom,o=e.maxZoom,s=i?A(tr.interpolationFactor(i,t,a,o),0,1):0;"camera"===e.kind?r=In(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var kh=Object.freeze({__proto__:null,getSizeData:xh,evaluateSizeForFeature:bh,evaluateSizeForZoom:wh,SIZE_PACK_FACTOR:_h});function Th(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),qa.applyArabicShaping&&(e=qa.applyArabicShaping(e)),e}(e.text,t,n)})),e}var Sh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function Eh(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function Ch(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var Ah=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,a=f&(1<<-c)-1,f>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+h],h+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=u}return(f?-1:1)*o*Math.pow(2,a-r)},Rh=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*l-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+f]=255&o,f+=p,o/=256,u-=8);e[n+f-p]|=128*m},Mh=Bh;function Bh(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Bh.Varint=0,Bh.Fixed64=1,Bh.Bytes=2,Bh.Fixed32=5;var Ph=4294967296,Ih=1/Ph,zh="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Lh(e){return e.type===Bh.Bytes?e.readVarint()+e.pos:e.pos+1}function Dh(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Oh(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function Nh(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function Fh(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function jh(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Vh(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Zh(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Uh(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Gh(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Hh(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function qh(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Wh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Xh(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Kh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Yh(e,t,n){t.glyphs=[],1===e&&n.readMessage(Jh,t)}function Jh(e,t,n){if(3===e){var r=n.readMessage(Qh,{}),i=r.id,a=r.bitmap,o=r.width,s=r.height,l=r.left,u=r.top,c=r.advance;t.glyphs.push({id:i,bitmap:new Eu({width:o+6,height:s+6},a),metrics:{width:o,height:s,left:l,top:u,advance:c}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function Qh(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function $h(e){var t,n=0,r=0,i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n+=a.w*a.h,r=Math.max(r,a.w)}}catch(v){i.e(v)}finally{i.f()}e.sort((function(e,t){return t.h-e.h}));var o,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),r),h:1/0}],l=0,u=0,c=d(e);try{for(c.s();!(o=c.n()).done;)for(var h=o.value,f=s.length-1;f>=0;f--){var p=s[f];if(!(h.w>p.w||h.h>p.h)){if(h.x=p.x,h.y=p.y,u=Math.max(u,h.y+h.h),l=Math.max(l,h.x+h.w),h.w===p.w&&h.h===p.h){var m=s.pop();f<s.length&&(s[f]=m)}else h.h===p.h?(p.x+=h.w,p.w-=h.w):h.w===p.w?(p.y+=h.h,p.h-=h.h):(s.push({x:p.x+h.w,y:p.y,w:p.w-h.w,h:h.h}),p.y+=h.h,p.h-=h.h);break}}}catch(v){c.e(v)}finally{c.f()}return{w:l,h:u,fill:n/(l*u)||0}}Bh.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,a=this.pos;this.type=7&r,e(i,t,this),this.pos===a&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Wh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Kh(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Wh(this.buf,this.pos)+Wh(this.buf,this.pos+4)*Ph;return this.pos+=8,e},readSFixed64:function(){var e=Wh(this.buf,this.pos)+Kh(this.buf,this.pos+4)*Ph;return this.pos+=8,e},readFloat:function(){var e=Ah(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ah(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,a=n.buf;if(r=(112&(i=a[n.pos++]))>>4,i<128)return Dh(e,r,t);if(r|=(127&(i=a[n.pos++]))<<3,i<128)return Dh(e,r,t);if(r|=(127&(i=a[n.pos++]))<<10,i<128)return Dh(e,r,t);if(r|=(127&(i=a[n.pos++]))<<17,i<128)return Dh(e,r,t);if(r|=(127&(i=a[n.pos++]))<<24,i<128)return Dh(e,r,t);if(r|=(1&(i=a[n.pos++]))<<31,i<128)return Dh(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&zh?function(e,t,n){return zh.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var a,o,s,l=e[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(o=e[i+2],128==(192&(a=e[i+1]))&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[i+2],s=e[i+3],128==(192&(a=e[i+1]))&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Bh.Bytes)return e.push(this.readVarint(t));var n=Lh(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Bh.Bytes)return e.push(this.readSVarint());var t=Lh(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Bh.Bytes)return e.push(this.readBoolean());var t=Lh(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Bh.Bytes)return e.push(this.readFloat());var t=Lh(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Bh.Bytes)return e.push(this.readDouble());var t=Lh(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Bh.Bytes)return e.push(this.readFixed32());var t=Lh(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Bh.Bytes)return e.push(this.readSFixed32());var t=Lh(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Bh.Bytes)return e.push(this.readFixed64());var t=Lh(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Bh.Bytes)return e.push(this.readSFixed64());var t=Lh(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Bh.Varint)for(;this.buf[this.pos++]>127;);else if(t===Bh.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Bh.Fixed32)this.pos+=4;else{if(t!==Bh.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Xh(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Xh(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Xh(this.buf,-1&e,this.pos),Xh(this.buf,Math.floor(e*Ih),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Xh(this.buf,-1&e,this.pos),Xh(this.buf,Math.floor(e*Ih),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,a=0;a<t.length;a++){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){r>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Oh(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Rh(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Rh(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&Oh(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,Bh.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Nh,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Fh,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Zh,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,jh,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Vh,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Uh,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Gh,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Hh,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,qh,t)},writeBytesField:function(e,t){this.writeTag(e,Bh.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Bh.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Bh.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Bh.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Bh.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Bh.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Bh.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Bh.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Bh.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Bh.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var ed=function(){function e(t,n){var r=n.pixelRatio,i=n.version,a=n.stretchX,o=n.stretchY,s=n.content;v(this,e),this.paddedRect=t,this.pixelRatio=r,this.stretchX=a,this.stretchY=o,this.content=s,this.version=i}return g(e,[{key:"tl",get:function(){return[this.paddedRect.x+1,this.paddedRect.y+1]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}]),e}(),td=function(){function e(t,n){v(this,e);var r={},i={};this.haveRenderCallbacks=[];var a=[];this.addImages(t,r,a),this.addImages(n,i,a);var o=$h(a),s=o.w,l=o.h,u=new Cu({width:s||1,height:l||1});for(var c in t){var h=t[c],d=r[c].paddedRect;Cu.copy(h.data,u,{x:0,y:0},{x:d.x+1,y:d.y+1},h.data)}for(var f in n){var p=n[f],m=i[f].paddedRect,g=m.x+1,y=m.y+1,_=p.data.width,x=p.data.height;Cu.copy(p.data,u,{x:0,y:0},{x:g,y:y},p.data),Cu.copy(p.data,u,{x:0,y:x-1},{x:g,y:y-1},{width:_,height:1}),Cu.copy(p.data,u,{x:0,y:0},{x:g,y:y+x},{width:_,height:1}),Cu.copy(p.data,u,{x:_-1,y:0},{x:g-1,y:y},{width:1,height:x}),Cu.copy(p.data,u,{x:0,y:0},{x:g+_,y:y},{width:1,height:x})}this.image=u,this.iconPositions=r,this.patternPositions=i}return g(e,[{key:"addImages",value:function(e,t,n){for(var r in e){var i=e[r],a={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(a),t[r]=new ed(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}},{key:"patchUpdatedImages",value:function(e,t){for(var n in this.haveRenderCallbacks=this.haveRenderCallbacks.filter((function(t){return e.hasImage(t)})),e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}},{key:"patchUpdatedImage",value:function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var r=h(e.tl,2),i=r[0],a=r[1];n.update(t.data,void 0,{x:i,y:a})}}}]),e}();Wi(ed,"ImagePosition"),Wi(td,"ImageAtlas");var nd={horizontal:1,vertical:2,horizontalOnly:3},rd=function(){function e(){v(this,e),this.scale=1,this.fontStack="",this.imageName=null}return g(e,null,[{key:"forText",value:function(t,n){var r=new e;return r.scale=t||1,r.fontStack=n,r}},{key:"forImage",value:function(t){var n=new e;return n.imageName=t,n}}]),e}(),id=function(){function e(){v(this,e),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return g(e,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(e){return this.sections[this.sectionIndex[e]]}},{key:"getSections",value:function(){return this.sections}},{key:"getSectionIndex",value:function(e){return this.sectionIndex[e]}},{key:"getCharCode",value:function(e){return this.text.charCodeAt(e)}},{key:"verticalizePunctuation",value:function(e){this.text=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e.charCodeAt(r+1)||null,a=e.charCodeAt(r-1)||null;n+=!t&&(i&&Ba(i)&&!Sh[e[r+1]]||a&&Ba(a)&&!Sh[e[r-1]])||!Sh[e[r]]?e[r]:Sh[e[r]]}return n}(this.text,e)}},{key:"trim",value:function(){for(var e=0,t=0;t<this.text.length&&od[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=e&&od[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}},{key:"substring",value:function(t,n){var r=new e;return r.text=this.text.substring(t,n),r.sectionIndex=this.sectionIndex.slice(t,n),r.sections=this.sections,r}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var e=this;return this.sectionIndex.reduce((function(t,n){return Math.max(t,e.sections[n].scale)}),0)}},{key:"addTextSection",value:function(e,t){this.text+=e.text,this.sections.push(rd.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,r=0;r<e.text.length;++r)this.sectionIndex.push(n)}},{key:"addImageSection",value:function(e){var t=e.image?e.image.name:"";if(0!==t.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(rd.forImage(t)),this.sectionIndex.push(this.sections.length-1)):H("Reached maximum number of images 6401")}else H("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(t,n){for(var r=new e,i=0;i<t.sections.length;i++){var a=t.sections[i];a.image?r.addImageSection(a):r.addTextSection(a,n)}return r}}]),e}();function ad(e,t,n,r,i,a,o,s,l,u,c,h,f,p,m,v){var g,y=id.fromFeature(e,i);h===nd.vertical&&y.verticalizePunctuation(f);var _=qa.processBidirectionalText,x=qa.processStyledBidirectionalText;if(_&&1===y.sections.length){g=[];var b,w=_(y.toString(),fd(y,u,a,t,r,p,m)),k=d(w);try{for(k.s();!(b=k.n()).done;){var T=b.value,S=new id;S.text=T,S.sections=y.sections;for(var E=0;E<T.length;E++)S.sectionIndex.push(0);g.push(S)}}catch(z){k.e(z)}finally{k.f()}}else if(x){g=[];var C,A=x(y.text,y.sectionIndex,fd(y,u,a,t,r,p,m)),R=d(A);try{for(R.s();!(C=R.n()).done;){var M=C.value,B=new id;B.text=M[0],B.sectionIndex=M[1],B.sections=y.sections,g.push(B)}}catch(z){R.e(z)}finally{R.f()}}else g=function(e,t){var n,r=[],i=e.text,a=0,o=d(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;r.push(e.substring(a,s)),a=s}}catch(z){o.e(z)}finally{o.f()}return a<i.length&&r.push(e.substring(a,i.length)),r}(y,fd(y,u,a,t,r,p,m));var P=[],I={positionedLines:P,text:y.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,r,i,a,o,s,l,u,c,h){var f,p=0,m=0,v=0,g="right"===s?1:"left"===s?0:.5,y=!1,_=d(i);try{for(_.s();!(f=_.n()).done;){var x,b=f.value.getSections(),w=d(b);try{for(w.s();!(x=w.n()).done;){var k=x.value;if(!k.imageName){var T=t[k.fontStack];if(T&&!(y=void 0!==T.ascender&&void 0!==T.descender))break}}}catch(z){w.e(z)}finally{w.f()}if(!y)break}}catch(z){_.e(z)}finally{_.f()}var S,E,C=0,A=d(i);try{for(A.s();!(S=A.n()).done;){var R=S.value;R.trim();var M=R.getMaxScale(),B=(M-1)*yh,P={positionedGlyphs:[],lineOffset:0};e.positionedLines[C]=P;var I=P.positionedGlyphs,L=0;if(R.length()){for(var D=0,O=0,N=0;N<R.length();N++){var F=R.getSection(N),j=R.getSectionIndex(N),V=R.getCharCode(N),Z=F.scale,U=null,G=null,H=null,q=yh,W=0,X=!(l===nd.horizontal||!c&&!Ma(V)||c&&(od[V]||(E=V,ea(E)||ta(E)||na(E)||ba(E)||Sa(E))));if(F.imageName){var K=r[F.imageName];if(!K)continue;H=F.imageName,e.iconsInText=e.iconsInText||!0,G=K.paddedRect;var Y=K.displaySize;Z=Z*yh/h,U={width:Y[0],height:Y[1],left:1,top:-3,advance:X?Y[1]:Y[0],localGlyph:!1},W=y?-U.height*Z:M*yh-17-Y[1]*Z,q=U.advance;var J=(X?Y[0]:Y[1])*Z-yh*M;J>0&&J>L&&(L=J)}else{var Q=n[F.fontStack];if(!Q)continue;Q[V]&&(G=Q[V]);var $=t[F.fontStack];if(!$)continue;var ee=$.glyphs[V];if(!ee)continue;if(U=ee.metrics,q=8203!==V?yh:0,y){var te=void 0!==$.ascender?Math.abs($.ascender):0,ne=void 0!==$.descender?Math.abs($.descender):0,re=(te+ne)*Z;D<re&&(D=re,O=(te-ne)/2*Z),W=-te*Z}else W=(M-Z)*yh-17}X?(e.verticalizable=!0,I.push({glyph:V,imageName:H,x:p,y:m+W,vertical:X,scale:Z,localGlyph:U.localGlyph,fontStack:F.fontStack,sectionIndex:j,metrics:U,rect:G}),p+=q*Z+u):(I.push({glyph:V,imageName:H,x:p,y:m+W,vertical:X,scale:Z,localGlyph:U.localGlyph,fontStack:F.fontStack,sectionIndex:j,metrics:U,rect:G}),p+=U.advance*Z+u)}0!==I.length&&(v=Math.max(p-u,v),y?md(I,g,L,O,a*M/2):md(I,g,L,0,a/2)),p=0;var ie=a*M+L;P.lineOffset=Math.max(L,B),m+=ie,++C}else m+=a,++C}}catch(z){A.e(z)}finally{A.f()}var ae=m,oe=pd(o),se=oe.horizontalAlign,le=oe.verticalAlign;(function(e,t,n,r,i,a){var o,s=(t-n)*i,l=-a*r,u=d(e);try{for(u.s();!(o=u.n()).done;){var c,h=o.value,f=d(h.positionedGlyphs);try{for(f.s();!(c=f.n()).done;){var p=c.value;p.x+=s,p.y+=l}}catch(z){f.e(z)}finally{f.f()}}}catch(z){u.e(z)}finally{u.f()}})(e.positionedLines,g,se,le,v,ae),e.top+=-le*ae,e.bottom=e.top+ae,e.left+=-se*v,e.right=e.left+v,e.hasBaseline=y}(I,t,n,r,g,o,s,l,h,u,f,v),!function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;)if(0!==t.value.positionedGlyphs.length)return!1}catch(z){n.e(z)}finally{n.f()}return!0}(P)&&I}var od={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},sd={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function ld(e,t,n,r,i,a){if(t.imageName){var o=r[t.imageName];return o?o.displaySize[0]*t.scale*yh/a+i:0}var s=n[t.fontStack],l=s&&s.glyphs[e];return l?l.metrics.advance*t.scale+i:0}function ud(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function cd(e,t,n){var r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function hd(e,t,n,r,i,a){var o,s=null,l=ud(t,n,i,a),u=d(r);try{for(u.s();!(o=u.n()).done;){var c=o.value,h=ud(t-c.x,n,i,a)+c.badness;h<=l&&(s=c,l=h)}}catch(f){u.e(f)}finally{u.f()}return{index:e,x:t,priorBreak:s,badness:l}}function dd(e){return e?dd(e.priorBreak).concat(e.index):[]}function fd(e,t,n,r,i,a,o){if("point"!==a)return[];if(!e)return[];for(var s,l=[],u=function(e,t,n,r,i,a){for(var o=0,s=0;s<e.length();s++){var l=e.getSection(s);o+=ld(e.getCharCode(s),l,r,i,t,a)}return o/Math.max(1,Math.ceil(o/n))}(e,t,n,r,i,o),c=e.text.indexOf("\u200b")>=0,h=0,d=0;d<e.length();d++){var f=e.getSection(d),p=e.getCharCode(d);if(od[p]||(h+=ld(p,f,r,i,t,o)),d<e.length()-1){var m=!((s=p)<11904||!(ca(s)||ua(s)||ka(s)||xa(s)||pa(s)||ra(s)||ha(s)||oa(s)||ma(s)||va(s)||fa(s)||Ea(s)||sa(s)||aa(s)||ia(s)||da(s)||la(s)||wa(s)||ya(s)||ga(s)));(sd[p]||m||f.imageName)&&l.push(hd(d+1,h,u,l,cd(p,e.getCharCode(d+1),m&&c),!1))}}return dd(hd(e.length(),h,u,l,0,!0))}function pd(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function md(e,t,n,r,i){if(t||n||r||i)for(var a=e.length-1,o=e[a],s=(o.x+o.metrics.advance*o.scale)*t,l=0;l<=a;l++)e[l].x-=s,e[l].y+=n+r+i}function vd(e,t,n){var r=pd(n),i=r.horizontalAlign,a=r.verticalAlign,o=t[0]-e.displaySize[0]*i,s=t[1]-e.displaySize[1]*a;return{image:e,top:s,bottom:s+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function gd(e,t,n,r,i,a){var o,s=e.image;if(s.content){var l=s.content,u=s.pixelRatio||1;o=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,h,d,f,p=t.left*a,m=t.right*a;"width"===n||"both"===n?(f=i[0]+p-r[3],h=i[0]+m+r[1]):h=(f=i[0]+(p+m-s.displaySize[0])/2)+s.displaySize[0];var v=t.top*a,g=t.bottom*a;return"height"===n||"both"===n?(c=i[1]+v-r[0],d=i[1]+g+r[2]):d=(c=i[1]+(v+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:d,left:f,collisionPadding:o}}var yd=function(e){p(n,e);var t=m(n);function n(e,r,i,a,o){var s;return v(this,n),(s=t.call(this,e,r)).angle=a,s.z=i,void 0!==o&&(s.segment=o),s}return g(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.z,this.angle,this.segment)}}]),n}(y);function _d(e,t,n,r,i){if(void 0===t.segment)return!0;for(var a=t,o=t.segment+1,s=0;s>-n/2;){if(--o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],u=0;s<n/2;){var c=e[o],h=e[o+1];if(!h)return!1;var d=e[o-1].angleTo(c)-c.angleTo(h);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),u+=d;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>i)return!1;o++,s+=c.dist(h)}return!0}function xd(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function bd(e,t,n){return e?.6*t*n:0}function wd(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function kd(e,t,n,r,i,a){for(var o=bd(n,i,a),s=wd(n,r)*a,l=0,u=xd(e)/2,c=0;c<e.length-1;c++){var h=e[c],d=e[c+1],f=h.dist(d);if(l+f>u){var p=(u-l)/f,m=In(h.x,d.x,p),v=In(h.y,d.y,p),g=new yd(m,v,0,d.angleTo(h),c);return!o||_d(e,g,s,o,t)?g:void 0}l+=f}}function Td(e,t,n,r,i,a,o,s,l){var u=bd(r,a,o),c=wd(r,i),h=c*o,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),Sd(e,d?t/2*s%t:(c/2+2*a)*o*s%t,t,u,n,h,d,!1,l)}function Sd(e,t,n,r,i,a,o,s,l){for(var u=a/2,c=xd(e),h=0,d=t-n,f=[],p=0;p<e.length-1;p++){for(var m=e[p],v=e[p+1],g=m.dist(v),y=v.angleTo(m);d+n<h+g;){var _=((d+=n)-h)/g,x=In(m.x,v.x,_),b=In(m.y,v.y,_);if(x>=0&&x<l&&b>=0&&b<l&&d-u>=0&&d+u<=c){var w=new yd(x,b,0,y,p);w._round(),r&&!_d(e,w,a,r,i)||f.push(w)}}h+=g}return s||f.length||o||(f=Sd(e,h/2,n,r,i,a,o,!0,l)),f}function Ed(e,t,n,r,i){for(var a=[],o=0;o<e.length;o++)for(var s=e[o],l=void 0,u=0;u<s.length-1;u++){var c=s[u],h=s[u+1];c.x<t&&h.x<t||(c.x<t?c=new y(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<t&&(h=new y(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<n&&h.y<n||(c.y<n?c=new y(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round():h.y<n&&(h=new y(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round()),c.x>=r&&h.x>=r||(c.x>=r?c=new y(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=r&&(h=new y(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=i&&h.y>=i||(c.y>=i?c=new y(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round():h.y>=i&&(h=new y(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round()),l&&c.equals(l[l.length-1])||(l=[c],a.push(l)),l.push(h)))))}return a}Wi(yd,"Anchor");var Cd=1e20;function Ad(e,t,n,r,i,a,o,s,l){for(var u=t;u<t+r;u++)Rd(e,n*a+u,a,i,o,s,l);for(var c=n;c<n+i;c++)Rd(e,c*a+t,1,r,o,s,l)}function Rd(e,t,n,r,i,a,o){a[0]=0,o[0]=-Cd,o[1]=Cd,i[0]=e[t];for(var s=1,l=0,u=0;s<r;s++){i[s]=e[t+s*n];var c=s*s;do{var h=a[l];u=(i[s]-i[h]+c-h*h)/(s-h)/2}while(u<=o[l]&&--l>-1);a[++l]=s,o[l]=u,o[l+1]=Cd}for(var d=0,f=0;d<r;d++){for(;o[f+1]<d;)f++;var p=a[f],m=d-p;e[t+d*n]=i[p]+m*m}}var Md={none:0,ideographs:1,all:2},Bd=function(){function e(t,n,r){v(this,e),this.requestManager=t,this.localGlyphMode=n,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}return g(e,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(t,n){var r=this,i=[];for(var a in t){var o,s=d(t[a]);try{for(s.s();!(o=s.n()).done;){var l=o.value;i.push({stack:a,id:l})}}catch(u){s.e(u)}finally{s.f()}}B(i,(function(t,n){var i=t.stack,a=t.id,o=r.entries[i];o||(o=r.entries[i]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});var s=o.glyphs[a];if(void 0===s){if(s=r._tinySDF(o,i,a))return o.glyphs[a]=s,void n(null,{stack:i,id:a,glyph:s});var l=Math.floor(a/256);if(256*l>65535)n(new Error("glyphs > 65535 not supported"));else if(o.ranges[l])n(null,{stack:i,id:a,glyph:s});else{var c=o.requests[l];c||(c=o.requests[l]=[],e.loadGlyphRange(i,l,r.url,r.requestManager,(function(e,t){if(t){for(var n in o.ascender=t.ascender,o.descender=t.descender,t.glyphs)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=t.glyphs[+n]);o.ranges[l]=!0}var i,a=d(c);try{for(a.s();!(i=a.n()).done;)(0,i.value)(e,t)}catch(u){a.e(u)}finally{a.f()}delete o.requests[l]}))),c.push((function(e,t){e?n(e):t&&n(null,{stack:i,id:a,glyph:t.glyphs[a]||null})}))}}else n(null,{stack:i,id:a,glyph:s})}),(function(e,t){if(e)n(e);else if(t){var i,a={},o=d(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.stack,c=s.id,h=s.glyph;void 0===a[l]&&(a[l]={}),void 0===a[l].glyphs&&(a[l].glyphs={}),a[l].glyphs[c]=h&&{id:h.id,bitmap:h.bitmap.clone(),metrics:h.metrics},a[l].ascender=r.entries[l].ascender,a[l].descender=r.entries[l].descender}}catch(u){o.e(u)}finally{o.f()}n(null,a)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return this.localGlyphMode!==Md.none&&(this.localGlyphMode===Md.all?!!this.localFontFamily:!!this.localFontFamily&&(va(e)||_a(e)||sa(e)||la(e)||oa(e)))}},{key:"_tinySDF",value:function(t,n,r){var i=this.localFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var a=t.tinySDF;if(!a){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),(a=t.tinySDF=new e.TinySDF({fontFamily:i,fontWeight:o,fontSize:48,buffer:6,radius:16})).fontWeight=o}if(this.localGlyphs[a.fontWeight][r])return this.localGlyphs[a.fontWeight][r];var s=String.fromCharCode(r),l=a.draw(s),u=l.data,c=l.width,h=l.height,d=l.glyphWidth,f=l.glyphHeight,p=l.glyphLeft,m=l.glyphTop,v=l.glyphAdvance;return this.localGlyphs[a.fontWeight][r]={id:r,bitmap:new Eu({width:c,height:h},u),metrics:{width:d/2,height:f/2,left:p/2,top:m/2-27,advance:v/2,localGlyph:!0}}}}}]),e}();function Pd(e,t,n,r){var i=[],a=e.image,o=a.pixelRatio,s=a.paddedRect.w-2,l=a.paddedRect.h-2,u=e.right-e.left,c=e.bottom-e.top,h=a.stretchX||[[0,s]],d=a.stretchY||[[0,l]],f=function(e,t){return e+t[1]-t[0]},p=h.reduce(f,0),m=d.reduce(f,0),v=s-p,g=l-m,_=0,x=p,b=0,w=m,k=0,T=v,S=0,E=g;if(a.content&&r){var C=a.content;_=Id(h,0,C[0]),b=Id(d,0,C[1]),x=Id(h,C[0],C[2]),w=Id(d,C[1],C[3]),k=C[0]-_,S=C[1]-b,T=C[2]-C[0]-x,E=C[3]-C[1]-w}var A=function(r,i,s,l){var h=Ld(r.stretch-_,x,u,e.left),d=Dd(r.fixed-k,T,r.stretch,p),f=Ld(i.stretch-b,w,c,e.top),v=Dd(i.fixed-S,E,i.stretch,m),g=Ld(s.stretch-_,x,u,e.left),C=Dd(s.fixed-k,T,s.stretch,p),A=Ld(l.stretch-b,w,c,e.top),R=Dd(l.fixed-S,E,l.stretch,m),M=new y(h,f),B=new y(g,f),P=new y(g,A),I=new y(h,A),z=new y(d/o,v/o),L=new y(C/o,R/o),D=t*Math.PI/180;if(D){var O=Math.sin(D),N=Math.cos(D),F=[N,-O,O,N];M._matMult(F),B._matMult(F),I._matMult(F),P._matMult(F)}var j=r.stretch+r.fixed,V=i.stretch+i.fixed;return{tl:M,tr:B,bl:I,br:P,tex:{x:a.paddedRect.x+1+j,y:a.paddedRect.y+1+V,w:s.stretch+s.fixed-j,h:l.stretch+l.fixed-V},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:z,pixelOffsetBR:L,minFontScaleX:T/o/u,minFontScaleY:E/o/c,isSDF:n}};if(r&&(a.stretchX||a.stretchY))for(var R=zd(h,v,p),M=zd(d,g,m),B=0;B<R.length-1;B++)for(var P=R[B],I=R[B+1],z=0;z<M.length-1;z++)i.push(A(P,M[z],I,M[z+1]));else i.push(A({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function Id(e,t,n){var r,i=0,a=d(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;i+=Math.max(t,Math.min(n,o[1]))-Math.max(t,Math.min(n,o[0]))}}catch(s){a.e(s)}finally{a.f()}return i}function zd(e,t,n){var r,i=[{fixed:-1,stretch:0}],a=d(e);try{for(a.s();!(r=a.n()).done;){var o=h(r.value,2),s=o[0],l=o[1],u=i[i.length-1];i.push({fixed:s-u.stretch,stretch:u.stretch}),i.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}}catch(c){a.e(c)}finally{a.f()}return i.push({fixed:t+1,stretch:n}),i}function Ld(e,t,n,r){return e/t*n+r}function Dd(e,t,n,r){return e-t*n/r}function Od(e,t,n,r){var i=t+e.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(t+e.positionedLines[r-1].lineOffset))/2}Bd.loadGlyphRange=function(e,t,n,r,i){var a=256*t,o=a+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}","".concat(a,"-").concat(o)),Ze.Glyphs);qe(s,(function(e,t){if(e)i(e);else if(t){var n,r={},a=function(e){return new Mh(e).readFields(Yh,{})}(t),o=d(a.glyphs);try{for(o.s();!(n=o.n()).done;){var s=n.value;r[s.id]=s}}catch(l){o.e(l)}finally{o.f()}i(null,{glyphs:r,ascender:a.ascender,descender:a.descender})}}))},Bd.TinySDF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fontSize,r=void 0===n?24:n,i=t.buffer,a=void 0===i?3:i,o=t.radius,s=void 0===o?8:o,l=t.cutoff,u=void 0===l?.25:l,c=t.fontFamily,h=void 0===c?"sans-serif":c,d=t.fontWeight,f=void 0===d?"normal":d,p=t.fontStyle,m=void 0===p?"normal":p;v(this,e),this.buffer=a,this.cutoff=u,this.radius=s;var g=this.size=r+4*a,y=this._createCanvas(g),_=this.ctx=y.getContext("2d",{willReadFrequently:!0});_.font="".concat(m," ").concat(f," ").concat(r,"px ").concat(h),_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(g*g),this.gridInner=new Float64Array(g*g),this.f=new Float64Array(g),this.z=new Float64Array(g+1),this.v=new Uint16Array(g)}return g(e,[{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return t.width=t.height=e,t}},{key:"draw",value:function(e){var t=this.ctx.measureText(e),n=t.width,r=t.actualBoundingBoxAscent,i=t.actualBoundingBoxDescent,a=t.actualBoundingBoxLeft,o=t.actualBoundingBoxRight,s=Math.ceil(r),l=Math.min(this.size-this.buffer,Math.ceil(o-a)),u=Math.min(this.size-this.buffer,s+Math.ceil(i)),c=l+2*this.buffer,h=u+2*this.buffer,d=Math.max(c*h,0),f=new Uint8ClampedArray(d),p={data:f,width:c,height:h,glyphWidth:l,glyphHeight:u,glyphTop:s,glyphLeft:0,glyphAdvance:n};if(0===l||0===u)return p;var m=this.ctx,v=this.buffer,g=this.gridInner,y=this.gridOuter;m.clearRect(v,v,l,u),m.fillText(e,v,v+s);var _=m.getImageData(v,v,l,u);y.fill(Cd,0,d),g.fill(0,0,d);for(var x=0;x<u;x++)for(var b=0;b<l;b++){var w=_.data[4*(x*l+b)+3]/255;if(0!==w){var k=(x+v)*c+b+v;if(1===w)y[k]=0,g[k]=Cd;else{var T=.5-w;y[k]=T>0?T*T:0,g[k]=T<0?T*T:0}}}Ad(y,0,0,c,h,c,this.f,this.v,this.z),Ad(g,v,v,l,u,c,this.f,this.v,this.z);for(var S=0;S<d;S++){var E=Math.sqrt(y[S])-Math.sqrt(g[S]);f[S]=Math.round(255-255*(E/this.radius+this.cutoff))}return p}}]),e}();var Nd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fd;if(v(this,e),this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}return g(e,[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,a=t[i];if(n(r,a)>=0)break;t[e]=a,e=i}t[e]=r}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var a=1+(e<<1),o=t[a],s=a+1;if(s<this.length&&n(t[s],o)<0&&(a=s,o=t[s]),n(o,i)>=0)break;t[e]=o,e=a}t[e]=i}}]),e}();function Fd(e,t){return e<t?-1:e>t?1:0}function jd(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,a=-1/0,o=-1/0,s=e[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<r)&&(r=u.x),(!l||u.y<i)&&(i=u.y),(!l||u.x>a)&&(a=u.x),(!l||u.y>o)&&(o=u.y)}var c=Math.min(a-r,o-i),h=c/2,d=new Nd([],Vd);if(0===c)return new y(r,i);for(var f=r;f<a;f+=c)for(var p=i;p<o;p+=c)d.push(new Zd(f+h,p+h,h,e));for(var m=function(e){for(var t=0,n=0,r=0,i=e[0],a=0,o=i.length,s=o-1;a<o;s=a++){var l=i[a],u=i[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,r+=(l.y+u.y)*c,t+=3*c}return new Zd(n/t,r/t,0,e)}(e),v=d.length;d.length;){var g=d.pop();(g.d>m.d||!m.d)&&(m=g,n&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,v)),g.max-m.d<=t||(h=g.h/2,d.push(new Zd(g.p.x-h,g.p.y-h,h,e)),d.push(new Zd(g.p.x+h,g.p.y-h,h,e)),d.push(new Zd(g.p.x-h,g.p.y+h,h,e)),d.push(new Zd(g.p.x+h,g.p.y+h,h,e)),v+=4)}return n&&(console.log("num probes: ".concat(v)),console.log("best distance: ".concat(m.d))),m.p}function Vd(e,t){return t.max-e.max}function Zd(e,t,n,r){this.p=new y(e,t),this.h=n,this.d=function(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var a=t[i],o=0,s=a.length,l=s-1;o<s;l=o++){var u=a[o],c=a[l];u.y>e.y!=c.y>e.y&&e.x<(c.x-u.x)*(e.y-u.y)/(c.y-u.y)+u.x&&(n=!n),r=Math.min(r,gl(e,u,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}var Ud=Number.POSITIVE_INFINITY,Gd=Math.sqrt(2);function Hd(e,t){return t[1]!==Ud?function(e,t,n){var r=0,i=0;switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}return[r,i]}(e,t[0],t[1]):function(e,t){var n=0,r=0;t<0&&(t=0);var i=t/Gd;switch(e){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=t;break;case"right":n=-t}return[n,r]}(e,t[0])}function qd(e,t,n,r,i,a,o,s,l,u){e.createArrays(),e.tilePixelRatio=Os/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var c=e.layers[0].layout,h=e.layers[0]._unevaluatedLayout._values,f={};if("composite"===e.textSizeData.kind){var p=e.textSizeData,m=p.minZoom,v=p.maxZoom;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Wa(m),s),h["text-size"].possiblyEvaluate(new Wa(v),s)]}if("composite"===e.iconSizeData.kind){var g=e.iconSizeData,y=g.minZoom,_=g.maxZoom;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Wa(y),s),h["icon-size"].possiblyEvaluate(new Wa(_),s)]}f.layoutTextSize=h["text-size"].possiblyEvaluate(new Wa(l+1),s),f.layoutIconSize=h["icon-size"].possiblyEvaluate(new Wa(l+1),s),f.textMaxSize=h["text-size"].possiblyEvaluate(new Wa(18),s);var x,b="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),w=c.get("text-size"),k=d(e.features);try{var T=function(){var a=x.value,l=c.get("text-font").evaluate(a,{},s).join(","),h=w.evaluate(a,{},s),d=f.layoutTextSize.evaluate(a,{},s),p=(f.layoutIconSize.evaluate(a,{},s),{horizontal:{},vertical:void 0}),m=a.text,v=void 0,g=[0,0];if(m){var y=m.toString(),_=c.get("text-letter-spacing").evaluate(a,{},s)*yh,k=c.get("text-line-height").evaluate(a,{},s)*yh,T=Aa(y)?_:0,S=c.get("text-anchor").evaluate(a,{},s),E=c.get("text-variable-anchor");if(!E){var C=c.get("text-radial-offset").evaluate(a,{},s);g=C?Hd(S,[C*yh,Ud]):c.get("text-offset").evaluate(a,{},s).map((function(e){return e*yh}))}var A=b?"center":c.get("text-justify").evaluate(a,{},s),R=c.get("symbol-placement"),M="point"===R,B="point"===R?c.get("text-max-width").evaluate(a,{},s)*yh:0,P=function(r){e.allowVerticalPlacement&&Ca(y)&&(p.vertical=ad(m,t,n,i,l,B,k,S,r,T,g,nd.vertical,!0,R,d,h))};if(!b&&E){for(var I="auto"===A?E.map((function(e){return Wd(e)})):[A],z=!1,L=0;L<I.length;L++){var D=I[L];if(!p.horizontal[D])if(z)p.horizontal[D]=p.horizontal[0];else{var O=ad(m,t,n,i,l,B,k,"center",D,T,g,nd.horizontal,!1,R,d,h);O&&(p.horizontal[D]=O,z=1===O.positionedLines.length)}}P("left")}else{if("auto"===A&&(A=Wd(S)),M||c.get("text-writing-mode").indexOf("horizontal")>=0||!Ca(y)){var N=ad(m,t,n,i,l,B,k,S,A,T,g,nd.horizontal,!1,R,d,h);N&&(p.horizontal[A]=N)}P("point"===R?"left":A)}}var F=!1;if(a.icon&&a.icon.name){var j=r[a.icon.name];j&&(v=vd(i[a.icon.name],c.get("icon-offset").evaluate(a,{},s),c.get("icon-anchor").evaluate(a,{},s)),F=j.sdf,void 0===e.sdfIcons?e.sdfIcons=j.sdf:e.sdfIcons!==j.sdf&&H("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(j.pixelRatio!==e.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var V=Jd(p.horizontal)||p.vertical;e.iconsInText||(e.iconsInText=!!V&&V.iconsInText),(V||v)&&Xd(e,a,p,v,r,f,d,0,g,F,o,s,u)};for(k.s();!(x=k.n()).done;)T()}catch(S){k.e(S)}finally{k.f()}a&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function Wd(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Xd(e,t,n,r,i,a,o,s,l,u,c,f,p){var m=a.textMaxSize.evaluate(t,{},f);void 0===m&&(m=o);var v,g,y=e.layers[0].layout,_=y.get("icon-offset").evaluate(t,{},f),x=Jd(n.horizontal)||n.vertical,b="globe"===p.name,k=o/24,T=e.tilePixelRatio*m/24,S=(v=e.overscaling,e.zoom>18&&v>2&&(v>>=1),Math.max(Os/(512*v),1)*y.get("symbol-spacing")),E=y.get("text-padding")*e.tilePixelRatio,C=y.get("icon-padding")*e.tilePixelRatio,A=w(y.get("text-max-angle")),R="map"===y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement"),M="map"===y.get("icon-rotation-alignment")&&"point"!==y.get("symbol-placement"),B=y.get("symbol-placement"),P=S/2,I=y.get("icon-text-fit");r&&"none"!==I&&(e.allowVerticalPlacement&&n.vertical&&(g=gd(r,n.vertical,I,y.get("icon-text-fit-padding"),_,k)),x&&(r=gd(r,x,I,y.get("icon-text-fit-padding"),_,k)));var z=function(o,s,d){if(!(s.x<0||s.x>=Os||s.y<0||s.y>=Os)){var m=null;if(b){var v=p.projectTilePoint(s.x,s.y,d),y=v.x,x=v.y,w=v.z;m={anchor:new yd(y,x,w,0,void 0),up:p.upVector(d,s.x,s.y)}}!function(e,t,n,r,i,a,o,s,l,u,c,d,f,p,m,v,g,y,_,x,b,w,k,T,S){var E,C,A,R,M,B,P,I,z,L=e.addToLineVertexArray(t,r),D=0,O=0,N=0,F=0,j=-1,V=-1,Z={},U=os(""),G=n?n.anchor:t,q=0,W=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?(E=l.layout.get("text-offset").evaluate(b,{},S).map((function(e){return e*yh})),q=(C=h(E,2))[0],W=C[1]):(q=l.layout.get("text-radial-offset").evaluate(b,{},S)*yh,W=Ud),e.allowVerticalPlacement&&i.vertical){var X=i.vertical;if(m)I=$d(X),s&&(z=$d(s));else{var K=l.layout.get("text-rotate").evaluate(b,{},S)+90;M=Qd(u,G,t,c,d,f,X,p,K,v),s&&(B=Qd(u,G,t,c,d,f,s,y,K))}}if(a){var Y=l.layout.get("icon-rotate").evaluate(b,{},S),J="none"!==l.layout.get("icon-text-fit"),Q=Pd(a,Y,k,J),$=s?Pd(s,Y,k,J):void 0;R=Qd(u,G,t,c,d,f,a,y,Y),D=4*Q.length;var ee=e.iconSizeData,te=null;"source"===ee.kind?(te=[_h*l.layout.get("icon-size").evaluate(b,{},S)])[0]>Kd&&H("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===ee.kind&&((te=[_h*w.compositeIconSizes[0].evaluate(b,{},S),_h*w.compositeIconSizes[1].evaluate(b,{},S)])[0]>Kd||te[1]>Kd)&&H("".concat(e.layerIds[0],': Value for "icon-size" is >= 255. Reduce your "icon-size".')),e.addSymbols(e.icon,Q,te,x,_,b,!1,n,t,L.lineStartIndex,L.lineLength,-1,T,S),j=e.icon.placedSymbolArray.length-1,$&&(O=4*$.length,e.addSymbols(e.icon,$,te,x,_,b,nd.vertical,n,t,L.lineStartIndex,L.lineLength,-1,T,S),V=e.icon.placedSymbolArray.length-1)}for(var ne in i.horizontal){var re=i.horizontal[ne];A||(U=os(re.text),m?P=$d(re):A=Qd(u,G,t,c,d,f,re,p,l.layout.get("text-rotate").evaluate(b,{},S),v));var ie=1===re.positionedLines.length;if(N+=Yd(e,n,t,re,o,l,m,b,v,L,i.vertical?nd.horizontal:nd.horizontalOnly,ie?Object.keys(i.horizontal):[ne],Z,j,w,T,S),ie)break}i.vertical&&(F+=Yd(e,n,t,i.vertical,o,l,m,b,v,L,nd.vertical,["vertical"],Z,V,w,T,S));var ae=-1,oe=function(e,t){return e?Math.max(e,t):t};ae=oe(P,ae),ae=oe(I,ae);var se=(ae=oe(z,ae))>-1?1:0;e.glyphOffsetArray.length>=cp.MAX_GLYPHS&&H("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(G.x,G.y,G.z,t.x,t.y,Z.right>=0?Z.right:-1,Z.center>=0?Z.center:-1,Z.left>=0?Z.left:-1,Z.vertical>=0?Z.vertical:-1,j,V,U,void 0!==A?A:e.collisionBoxArray.length,void 0!==A?A+1:e.collisionBoxArray.length,void 0!==M?M:e.collisionBoxArray.length,void 0!==M?M+1:e.collisionBoxArray.length,void 0!==R?R:e.collisionBoxArray.length,void 0!==R?R+1:e.collisionBoxArray.length,B||e.collisionBoxArray.length,B?B+1:e.collisionBoxArray.length,c,N,F,D,O,se,0,q,W,ae)}(e,s,m,o,n,r,i,g,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,E,R,l,0,C,M,_,t,a,u,c,f)}};if("line"===B){var L,D=d(Ed(t.geometry,0,0,Os,Os));try{for(D.s();!(L=D.n()).done;){var O,N=L.value,F=Td(N,S,A,n.vertical||x,r,24,T,e.overscaling,Os),j=d(F);try{for(j.s();!(O=j.n()).done;){var V=O.value;x&&ef(e,x.text,P,V)||z(N,V,f)}}catch(oe){j.e(oe)}finally{j.f()}}}catch(oe){D.e(oe)}finally{D.f()}}else if("line-center"===B){var Z,U=d(t.geometry);try{for(U.s();!(Z=U.n()).done;){var G=Z.value;if(G.length>1){var q=kd(G,A,n.vertical||x,r,24,T);q&&z(G,q,f)}}}catch(oe){U.e(oe)}finally{U.f()}}else if("Polygon"===t.type){var W,X=d(cc(t.geometry,0));try{for(X.s();!(W=X.n()).done;){var K=W.value,Y=jd(K,16);z(K[0],new yd(Y.x,Y.y,0,0,void 0),f)}}catch(oe){X.e(oe)}finally{X.f()}}else if("LineString"===t.type){var J,Q=d(t.geometry);try{for(Q.s();!(J=Q.n()).done;){var $=J.value;z($,new yd($[0].x,$[0].y,0,0,void 0),f)}}catch(oe){Q.e(oe)}finally{Q.f()}}else if("Point"===t.type){var ee,te=d(t.geometry);try{for(te.s();!(ee=te.n()).done;){var ne,re=ee.value,ie=d(re);try{for(ie.s();!(ne=ie.n()).done;){var ae=ne.value;z([ae],new yd(ae.x,ae.y,0,0,void 0),f)}}catch(oe){ie.e(oe)}finally{ie.f()}}}catch(oe){te.e(oe)}finally{te.f()}}}var Kd=32640;function Yd(e,t,n,r,i,o,s,l,u,h,f,p,m,v,g,_,x){var b=function(e,t,n,r,i,o,s,l){var u=[];if(0===t.positionedLines.length)return u;var h,f=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,p=function(e){var t=e[0],n=e[1],r=t*n;return r>0?[t,-n]:r<0?[-t,n]:0===t?[n,t]:[n,-t]}(n),m=Math.abs(t.top-t.bottom),v=d(t.positionedLines);try{for(v.s();!(h=v.n()).done;)m-=h.value.lineOffset}catch(oe){v.e(oe)}finally{v.f()}for(var g=t.positionedLines.length,_=m/g,x=t.top-n[1],b=0;b<g;++b){var w=t.positionedLines[b];x=Od(t,_,x,b);var k,T=d(w.positionedGlyphs);try{for(T.s();!(k=T.n()).done;){var S=k.value;if(S.rect){var E=S.rect||{},C=4,A=!0,R=1,M=0;if(S.imageName){var B=s[S.imageName];if(!B)continue;if(B.sdf){H("SDF images are not supported in formatted text and will be ignored.");continue}A=!1,C=1/(R=B.pixelRatio)}var P=(i||l)&&S.vertical,I=S.metrics.advance*S.scale/2,z=S.metrics,L=S.rect;if(null!==L){l&&t.verticalizable&&(M=S.imageName?I-S.metrics.width*S.scale/2:0);var D=i?[S.x+I,S.y]:[0,0],O=[0,0],N=[0,0],F=!1;i||(P?(N=[S.x+I+p[0],S.y+p[1]-M],F=!0):O=[S.x+I+n[0],S.y+n[1]-M]);var j=L.w*S.scale/(R*(S.localGlyph?2:1)),V=L.h*S.scale/(R*(S.localGlyph?2:1)),Z=void 0,U=void 0,G=void 0,q=void 0;if(P){var W=S.y-x,X=new y(-I,I-W),K=-Math.PI/2,Y=a(y,c(N));(Z=new y(-I+O[0],O[1]))._rotateAround(K,X)._add(Y),Z.x+=-W+I,Z.y-=(z.left-C)*S.scale;var J=S.imageName?z.advance*S.scale:yh*S.scale,Q=String.fromCharCode(S.glyph);Eh(Q)?Z.x+=(1-C)*S.scale:Ch(Q)?Z.x+=J-z.height*S.scale+(-C-1)*S.scale:Z.x+=S.imageName||z.width+2*C===L.w&&z.height+2*C===L.h?(J-V)/2:(J-(z.height+2*C)*S.scale)/2,U=new y(Z.x,Z.y-j),G=new y(Z.x+V,Z.y),q=new y(Z.x+V,Z.y-j)}else{var $=(z.left-C)*S.scale-I+O[0],ee=(-z.top-C)*S.scale+O[1],te=$+j,ne=ee+V;Z=new y($,ee),U=new y(te,ee),G=new y($,ne),q=new y(te,ne)}if(f){var re=void 0;re=i?new y(0,0):F?new y(p[0],p[1]):new y(n[0],n[1]),Z._rotateAround(f,re),U._rotateAround(f,re),G._rotateAround(f,re),q._rotateAround(f,re)}var ie=new y(0,0),ae=new y(0,0);u.push({tl:Z,tr:U,bl:G,br:q,tex:E,writingMode:t.writingMode,glyphOffset:D,sectionIndex:S.sectionIndex,isSDF:A,pixelOffsetTL:ie,pixelOffsetBR:ae,minFontScaleX:0,minFontScaleY:0})}}}}catch(oe){T.e(oe)}finally{T.f()}}return u}(0,r,u,o,s,l,i,e.allowVerticalPlacement),w=e.textSizeData,k=null;"source"===w.kind?(k=[_h*o.layout.get("text-size").evaluate(l,{},x)])[0]>Kd&&H("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===w.kind&&((k=[_h*g.compositeTextSizes[0].evaluate(l,{},x),_h*g.compositeTextSizes[1].evaluate(l,{},x)])[0]>Kd||k[1]>Kd)&&H("".concat(e.layerIds[0],': Value for "text-size" is >= 255. Reduce your "text-size".')),e.addSymbols(e.text,b,k,u,s,l,f,t,n,h.lineStartIndex,h.lineLength,v,_,x);var T,S=d(p);try{for(S.s();!(T=S.n()).done;)m[T.value]=e.text.placedSymbolArray.length-1}catch(E){S.e(E)}finally{S.f()}return 4*b.length}function Jd(e){for(var t in e)return e[t];return null}function Qd(e,t,n,r,i,a,o,s,l,u){var c=o.top,h=o.bottom,d=o.left,f=o.right,p=o.collisionPadding;if(p&&(d-=p[0],c-=p[1],f+=p[2],h+=p[3]),l){var m=new y(d,c),v=new y(f,c),g=new y(d,h),_=new y(f,h),x=w(l),b=new y(0,0);u&&(b=new y(u[0],u[1])),m._rotateAround(x,b),v._rotateAround(x,b),g._rotateAround(x,b),_._rotateAround(x,b),d=Math.min(m.x,v.x,g.x,_.x),f=Math.max(m.x,v.x,g.x,_.x),c=Math.min(m.y,v.y,g.y,_.y),h=Math.max(m.y,v.y,g.y,_.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,d,c,f,h,s,r,i,a),e.length-1}function $d(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);var t=e.bottom-e.top;return t>0?Math.max(10,t):null}function ef(e,t,n,r){var i=e.compareText;if(t in i){for(var a=i[t],o=a.length-1;o>=0;o--)if(r.dist(a[o])<n)return!0}else i[t]=[];return i[t].push(r),!1}var tf=fo([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]).members,nf=fo([{name:"a_pos_3",components:3,type:"Int16"}]),rf=fo([{name:"a_pos",type:"Int16",components:2}]),af=Os/Math.PI/2,of=2*Hs(1,0)*af*Math.PI,sf=[64,32,16],lf=-af,uf=af,cf=[new vu([lf,lf,lf],[uf,uf,uf]),new vu([lf,lf,lf],[0,0,uf]),new vu([0,lf,lf],[uf,0,uf]),new vu([lf,0,lf],[0,uf,uf]),new vu([0,0,lf],[uf,uf,uf])];function hf(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=Yl([],e._camera.position,e.worldSize),a=[t,n,1,1];lu(a,a,e.pixelMatrixInverse),su(a,a,1/a[3]);var o=Ql([],iu([],a,i)),s=e.globeMatrix,l=[s[12],s[13],s[14]],u=iu([],l,i),c=Ul(u),h=Ql([],u),d=e.worldSize/(2*Math.PI),f=$l(h,o),p=Math.asin(d/c);if(p<Math.acos(f)){if(!r)return null;var m=[],v=[];Yl(m,o,c/f),Ql(v,iu(v,m,u)),Ql(o,Hl(o,u,Yl(o,v,Math.tan(p)*c)))}var g=[];new fu(i,o).closestPointOnSphere(l,d,g);var y=Ql([],$(s,0)),_=Ql([],$(s,1)),x=Ql([],$(s,2)),b=$l(y,g),w=$l(_,g),T=$l(x,g),S=k(Math.asin(-w/d)),E=k(Math.atan2(b,T));E=e.center.lng+function(e,t){var n=(t-e+180)%360-180;return n<-180?n+360:n}(e.center.lng,E);var C=Us(E),R=A(Gs(S),0,1);return new Js(C,R)}var df=g((function e(t,n,r){v(this,e),this.a=iu([],t,r),this.b=iu([],n,r),this.center=r;var i=Ql([],this.a),a=Ql([],this.b);this.angle=Math.acos($l(i,a))}));function ff(e,t){return 0===e.angle||(n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)))<0||n>1?null:function(e,t,n,r){var i=Math.sin(n);return e*(Math.sin((1-r)*n)/i)+t*(Math.sin(r*n)/i)}(e.a[t],e.b[t],e.angle,A(n,0,1))+e.center[t];var n}function pf(e){if(e.z<=1)return cf[e.z+2*e.y+e.x];var t=_f(yf(e));return vu.fromPoints(t)}function mf(e,t){var n=Af(t.zoom);if(0===n)return pf(e);var r=yf(e),i=_f(r),a=Us(r.getWest())*t.worldSize,o=Us(r.getEast())*t.worldSize,s=Gs(r.getNorth())*t.worldSize,l=Gs(r.getSouth())*t.worldSize,u=[a,s,0],c=[o,s,0],h=[a,l,0],d=[o,l,0],f=Pl([],t.globeMatrix);return tu(u,u,f),tu(c,c,f),tu(h,h,f),tu(d,d,f),i[0]=zn(i[0],h,n),i[1]=zn(i[1],d,n),i[2]=zn(i[2],c,n),i[3]=zn(i[3],u,n),vu.fromPoints(i)}function vf(e,t,n,r,i){var a,o=d(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;tu(s,s,r),Yl(s,s,i),Xl(e,e,s),Kl(t,t,s)}}catch(l){o.e(l)}finally{o.f()}}function gf(e,t,n){var r=t/e.worldSize,i=Number.MAX_VALUE,a=[-i,-i,-i],o=[i,i,i],s=e.globeMatrix;if(n.z<=1)return vf(o,a,pf(n).getCorners(),s,r),new vu(o,a);var l=yf(n),u=_f(l);if(vf(o,a,u,s,r),l.contains(e.center)){a[2]=0;var c=e.point,h=[c.x*r,c.y*r,0];return Xl(o,o,h),Kl(a,a,h),new vu(o,a)}var d=[s[12]*r,s[13]*r,s[14]*r],f=l.getCenter(),p=A(e.center.lat,-85.051129,Ks),m=A(f.lat,-85.051129,Ks),v=Us(e.center.lng),g=Gs(p),y=v-Us(f.lng),_=g-Gs(m);y>.5?y-=1:y<-.5&&(y+=1);var x=0;Math.abs(y)>Math.abs(_)?x=y>=0?1:3:(x=_>=0?0:2,Jl(d,d,[s[4]*r,s[5]*r,s[6]*r],-Math.sin(w(_>=0?l.getSouth():l.getNorth()))*af));var b=u[x],k=u[(x+1)%4],T=new df(b,k,d),S=[ff(T,0)||b[0],ff(T,1)||b[1],ff(T,2)||b[2]];return o[2]=Math.min(b[2],k[2]),Xl(o,o,S),Kl(a,a,S),new vu(o,a)}function yf(e){var t=e.x,n=e.y,r=1/(1<<e.z),i=new js(qs(t*r),Ws((n+1)*r)),a=new js(qs((t+1)*r),Ws(n*r));return new Ns(i,a)}function _f(e){var t=w(e.getNorth()),n=w(e.getSouth()),r=Math.cos(t),i=Math.cos(n),a=Math.sin(t),o=Math.sin(n),s=e.getWest(),l=e.getEast();return[xf(i,o,s),xf(i,o,l),xf(r,a,l),xf(r,a,s)]}function xf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:af;return n=w(n),[e*Math.sin(n)*r,-t*r,e*Math.cos(n)*r]}function bf(e,t,n){return xf(Math.cos(w(e)),Math.sin(w(e)),t,n)}function wf(e,t,n,r){var i=1<<n.z,a=(e/Os+n.x)/i;return bf(Ws((t/Os+n.y)/i),qs(a),r)}function kf(e){var t=e.min,n=e.max;return 16383/Math.max(n[0]-t[0],n[1]-t[1],n[2]-t[2])}var Tf=new Float64Array(16);function Sf(e){var t,n,r=kf(e),i=Nl(Tf,[r,r,r]);return zl(i,i,((t=[])[0]=-(n=e.min)[0],t[1]=-n[1],t[2]=-n[2],t))}function Ef(e){var t,n,r=(n=e.min,(t=Tf)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t),i=1/kf(e);return Ll(r,r,[i,i,i])}function Cf(e,t,n,r,i){var a=function(e){var t=Os/(2*Math.PI);return e/(2*Math.PI)/t}(n),o=[e,t,-n/(2*Math.PI)],s=Bl(new Float64Array(16));return zl(s,s,o),Ll(s,s,[a,a,a]),Dl(s,s,w(-i)),Ol(s,s,w(-r)),s}function Af(e){return R(5,6,e)}function Rf(e,t){var n,r,i,a,o,s,l,u,c,h,d=bf(t.lat,t.lng);return i=(n=ql([],function(e){var t=bf(e._center.lat,e._center.lng),n=eu([],Gl(0,1,0),t),r=Fl([],-e.angle,t);n=tu(n,n,r),Fl(r,-e._pitch,n);var i=Ql([],t);return Yl(i,i,e.cameraToCenterDistance/e.pixelsPerMeter*of),tu(i,i,r),Hl([],t,i)}(e),d))[0],a=n[1],o=n[2],s=(r=d)[0],l=r[1],u=r[2],h=(c=Math.sqrt(i*i+a*a+o*o)*Math.sqrt(s*s+l*l+u*u))&&$l(n,r)/c,Math.acos(Math.min(Math.max(h,-1),1))}var Mf=w(85),Bf=Math.cos(Mf),Pf=Math.sin(Mf);function If(e,t){var n=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),a=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),o=Math.sin(e._pitch)*a+i;return Math.min(1.01*o,i*(1/e._horizonShift))}function zf(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};var n=Math.pow(2,-e.z),r=e.x*n,i=(e.x+1)*n,a=e.y*n,o=(e.y+1)*n,s=qs(r),l=qs(i),u=Ws(a),c=Ws(o),h=t.project(s,u),d=t.project(l,u),f=t.project(l,c),p=t.project(s,c),m=Math.min(h.x,d.x,f.x,p.x),v=Math.min(h.y,d.y,f.y,p.y),g=Math.max(h.x,d.x,f.x,p.x),y=Math.max(h.y,d.y,f.y,p.y),_=n/16;function x(e,n,r,i,a,o){var s=(r+a)/2,l=(i+o)/2,u=t.project(qs(s),Ws(l)),c=Math.max(0,m-u.x,v-u.y,u.x-g,u.y-y);m=Math.min(m,u.x),g=Math.max(g,u.x),v=Math.min(v,u.y),y=Math.max(y,u.y),c>_&&(x(e,u,r,i,s,l),x(u,n,s,l,a,o))}x(h,d,r,a,i,a),x(d,f,i,a,i,o),x(f,p,i,o,r,o),x(p,h,r,o,r,a),m-=_,v-=_,g+=_,y+=_;var b=1/Math.max(g-m,y-v);return{scale:b,x:m*b,y:v*b,x2:g*b,y2:y*b,projection:t}}var Lf=Bl(new Float32Array(16)),Df=function(){function e(t){v(this,e),this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}return g(e,[{key:"project",value:function(e,t){return{x:0,y:0,z:0}}},{key:"unproject",value:function(e,t){return new js(0,0)}},{key:"projectTilePoint",value:function(e,t,n){return{x:e,y:t,z:0}}},{key:"locationPoint",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e._coordinatePoint(e.locationCoordinate(t),n)}},{key:"pixelsPerMeter",value:function(e,t){return Hs(1,e)*t}},{key:"pixelSpaceConversion",value:function(e,t,n){return 1}},{key:"farthestPixelDistance",value:function(e){return If(e,e.pixelsPerMeter)}},{key:"pointCoordinate",value:function(e,t,n,r){var i=e.horizonLineFromTop(!1),a=new y(t,Math.max(i,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(a,r))}},{key:"pointCoordinate3D",value:function(e,t,n){var r=new y(t,n);if(e.elevation)return e.elevation.pointCoordinate(r);var i=this.pointCoordinate(e,r.x,r.y,0);return[i.x,i.y,i.z]}},{key:"isPointAboveHorizon",value:function(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);var n=e.horizonLineFromTop();return t.y<n}},{key:"createInversionMatrix",value:function(e,t){return Lf}},{key:"createTileMatrix",value:function(e,t,n){var r,i,a,o=n.canonical,s=Bl(new Float64Array(16));if(this.isReprojectedInTileSpace){var l=zf(o,this);r=1,i=l.x+n.wrap*l.scale,a=l.y,Ll(s,s,[r/l.scale,r/l.scale,e.pixelsPerMeter/t])}else r=t/e.zoomScale(o.z),i=(o.x+Math.pow(2,o.z)*n.wrap)*r,a=o.y*r;return zl(s,s,[i,a,0]),Ll(s,s,[r/Os,r/Os,1]),s}},{key:"upVector",value:function(e,t,n){return[0,0,1]}},{key:"upVectorScale",value:function(e,t,n){return{metersToTile:1}}}]),e}(),Of=function(e){p(n,e);var t=m(n);function n(e){var r;v(this,n),(r=t.call(this,e)).range=[4,7],r.center=e.center||[-96,37.5];var i=r.parallels=e.parallels||[29.5,45.5],a=h(i,2),o=a[0],s=a[1],l=Math.sin(w(o));return r.n=(l+Math.sin(w(s)))/2,r.c=1+l*(2*r.n-l),r.r0=Math.sqrt(r.c)/r.n,r}return g(n,[{key:"project",value:function(e,t){var n=this.n,r=this.c,i=this.r0,a=w(e-this.center[0]),o=w(t),s=Math.sqrt(r-2*n*Math.sin(o))/n;return{x:s*Math.sin(a*n),y:s*Math.cos(a*n)-i,z:0}}},{key:"unproject",value:function(e,t){var n=this.n,r=this.c,i=this.r0+t,a=Math.atan2(e,Math.abs(i))*Math.sign(i);i*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(i));var o=w(this.center[0])*n,s=k((a=M(a,-Math.PI-o,Math.PI-o))/n)+this.center[0],l=Math.asin(A((r-(e*e+i*i)*n*n)/(2*n),-1,1)),u=A(k(l),-85.051129,Ks);return new js(s,u)}}]),n}(Df),Nf=1.340264,Ff=-.081106,jf=893e-6,Vf=.003796,Zf=Math.sqrt(3)/2,Uf=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"project",value:function(e,t){t=t/180*Math.PI,e=e/180*Math.PI;var n=Math.asin(Zf*Math.sin(t)),r=n*n,i=r*r*r;return{x:.5*(e*Math.cos(n)/(Zf*(Nf+3*Ff*r+i*(7*jf+9*Vf*r)))/Math.PI+.5),y:1-.5*(n*(Nf+Ff*r+i*(jf+Vf*r))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;for(var n,r=t=(2*(1-t)-1)*Math.PI,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r=A(r-(n=(r*(Nf+Ff*i+a*(jf+Vf*i))-t)/(Nf+3*Ff*i+a*(7*jf+9*Vf*i))),-Math.PI/3,Math.PI/3))*r)*i*i,!(Math.abs(n)<1e-12));++o);var s=Zf*e*(Nf+3*Ff*i+a*(7*jf+9*Vf*i))/Math.cos(r),l=Math.asin(Math.sin(r)/Zf),u=A(180*s/Math.PI,-180,180),c=A(180*l/Math.PI,-85.051129,Ks);return new js(u,c)}}]),n}(Df),Gf=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).wrap=!0,r.supportsWorldCopies=!0,r}return g(n,[{key:"project",value:function(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}},{key:"unproject",value:function(e,t){var n=360*(e-.5),r=A(360*(.5-t),-85.051129,Ks);return new js(n,r)}}]),n}(Df),Hf=Math.PI/2;function qf(e){return Math.tan((Hf+e)/2)}var Wf=function(e){p(n,e);var t=m(n);function n(e){var r;v(this,n),(r=t.call(this,e)).center=e.center||[0,30];var i=r.parallels=e.parallels||[30,30],a=h(i,2),o=a[0],s=a[1],l=w(o),u=w(s),c=Math.cos(l);return r.n=l===u?Math.sin(l):Math.log(c/Math.cos(u))/Math.log(qf(u)/qf(l)),r.f=c*Math.pow(qf(l),r.n)/r.n,r}return g(n,[{key:"project",value:function(e,t){t=w(t),e=w(e-this.center[0]);var n=1e-6,r=this.n,i=this.f;i>0?t<-Hf+n&&(t=-Hf+n):t>Hf-n&&(t=Hf-n);var a=i/Math.pow(qf(t),r),o=a*Math.sin(r*e),s=i-a*Math.cos(r*e);return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+.5),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI,t=(2*(1-t)-.5)*Math.PI;var n=this.n,r=this.f,i=r-t,a=Math.sign(i),o=Math.sign(n)*Math.sqrt(e*e+i*i),s=Math.atan2(e,Math.abs(i))*a;i*n<0&&(s-=Math.PI*Math.sign(e)*a);var l=A(k(s/n)+this.center[0],-180,180),u=A(k(2*Math.atan(Math.pow(r/o,1/n))-Hf),-85.051129,Ks);return new js(l,u)}}]),n}(Df),Xf=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).wrap=!0,r.supportsWorldCopies=!0,r.supportsTerrain=!0,r.supportsFog=!0,r.supportsFreeCamera=!0,r.isReprojectedInTileSpace=!1,r.unsupportedLayers=[],r.range=null,r}return g(n,[{key:"project",value:function(e,t){return{x:Us(e),y:Gs(t),z:0}}},{key:"unproject",value:function(e,t){var n=qs(e),r=Ws(t);return new js(n,r)}}]),n}(Df),Kf=w(Ks),Yf=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"project",value:function(e,t){var n=(t=w(t))*t,r=n*n;return{x:.5*((e=w(e))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;var n=t=(2*(1-t)-1)*Math.PI,r=25,i=0,a=n*n;do{var o=(a=n*n)*a;n=A(n-(i=(n*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))),-Kf,Kf)}while(Math.abs(i)>1e-6&&--r>0);var s=A(k(e/(.8707+(a=n*n)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979))),-180,180),l=k(n);return new js(s,l)}}]),n}(Df),Jf=w(Ks),Qf=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"project",value:function(e,t){t=w(t),e=w(e);var n=Math.cos(t),r=2/Math.PI,i=Math.acos(n*Math.cos(e/2)),a=Math.sin(i)/i,o=.5*(e*r+2*n*Math.sin(e/2)/a)||0,s=.5*(t+Math.sin(t)/a)||0;return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){var n=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,i=25,a=1e-6,o=0,s=0;do{var l=Math.cos(r),u=Math.sin(r),c=2*u*l,h=u*u,d=l*l,f=Math.cos(n/2),p=Math.sin(n/2),m=2*f*p,v=p*p,g=1-d*f*f,y=g?1/g:0,_=g?Math.acos(l*f)*Math.sqrt(1/g):0,x=.5*(2*_*l*p+2*n/Math.PI)-e,b=.5*(_*u+r)-t,w=.5*y*(d*v+_*l*f*h)+1/Math.PI,T=y*(m*c/4-_*u*p),S=.125*y*(c*p-_*u*d*m),E=.5*y*(h*f+_*v*l)+.5,C=T*S-E*w;s=(x*S-b*w)/C,n=A(n-(o=(b*T-x*E)/C),-Math.PI,Math.PI),r=A(r-s,-Jf,Jf)}while((Math.abs(o)>a||Math.abs(s)>a)&&--i>0);return new js(k(n),k(r))}}]),n}(Df),$f=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).center=e.center||[0,0],r.parallels=e.parallels||[0,0],r.cosPhi=Math.max(.01,Math.cos(w(r.parallels[0]))),r.scale=1/(2*Math.max(Math.PI*r.cosPhi,1/r.cosPhi)),r.wrap=!0,r.supportsWorldCopies=!0,r}return g(n,[{key:"project",value:function(e,t){var n=this.scale,r=this.cosPhi;return{x:w(e)*r*n+.5,y:-Math.sin(w(t))/r*n+.5,z:0}}},{key:"unproject",value:function(e,t){var n=this.scale,r=this.cosPhi,i=-(t-.5)/n,a=A(k((e-.5)/n)/r,-180,180),o=Math.asin(A(i*r,-1,1)),s=A(k(o),-85.051129,Ks);return new js(a,s)}}]),n}(Df),ep=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).requiresDraping=!0,r.supportsWorldCopies=!1,r.supportsFog=!0,r.zAxisUnit="pixels",r.unsupportedLayers=["debug","custom"],r.range=[3,5],r}return g(n,[{key:"projectTilePoint",value:function(e,t,n){var r=wf(e,t,n);return tu(r,r,Sf(pf(n))),{x:r[0],y:r[1],z:r[2]}}},{key:"locationPoint",value:function(e,t){var n=bf(t.lat,t.lng),r=Ql([],n),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;Jl(n,n,r,Hs(1,0)*Os*i);var a=Bl(new Float64Array(16));return Il(a,e.pixelMatrix,e.globeMatrix),tu(n,n,a),new y(n[0],n[1])}},{key:"pixelsPerMeter",value:function(e,t){return Hs(1,0)*t}},{key:"pixelSpaceConversion",value:function(e,t,n){var r=In(Hs(1,45)*t,Hs(1,e)*t,n);return this.pixelsPerMeter(e,t)/r}},{key:"createTileMatrix",value:function(e,t,n){var r=Ef(pf(n.canonical));return Il(new Float64Array(16),e.globeMatrix,r)}},{key:"createInversionMatrix",value:function(e,t){var n=e.center,r=Sf(pf(t));return Ol(r,r,w(n.lng)),Dl(r,r,w(n.lat)),Ll(r,r,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(r)}},{key:"pointCoordinate",value:function(e,t,n,r){return hf(e,t,n,!0)||new Js(0,0)}},{key:"pointCoordinate3D",value:function(e,t,n){var r=this.pointCoordinate(e,t,n,0);return[r.x,r.y,r.z]}},{key:"isPointAboveHorizon",value:function(e,t){return!hf(e,t.x,t.y,!1)}},{key:"farthestPixelDistance",value:function(e){var t=function(e,t){var n,r=e.cameraToCenterDistance,i=e._centerAltitude*t,a=e._camera,o=e._camera.forward(),s=Hl([],Yl([],o,-r),[0,0,i]),l=e.worldSize/(2*Math.PI),u=[0,0,-l],c=e.width/e.height,h=Math.tan(e.fovAboveCenter),d=Yl([],a.up(),h),f=Yl([],a.right(),h*c),p=Ql([],Hl([],Hl([],o,d),f)),m=[];if(new fu(s,p).closestPointOnSphere(u,l,m)){var v=Hl([],m,u),g=iu([],v,s);n=Math.cos(e.fovAboveCenter)*Ul(g)}else{var y=iu([],s,u),_=iu([],u,s);Ql(_,_);var x=Ul(y)-l;n=Math.sqrt(x*(x+2*l));var b=Math.acos(n/(l+x))-Math.acos($l(o,_));n*=Math.cos(b)}return 1.01*n}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),n=Af(e.zoom);if(n>0){var r=If(e,Hs(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),a=Math.max(e.width,e.height)/e.worldSize*Math.PI;return In(t,r+i*(1-Math.cos(a)),Math.pow(n,10))}return t}},{key:"upVector",value:function(e,t,n){return wf(t,n,e,1)}},{key:"upVectorScale",value:function(e){return{metersToTile:of*kf(pf(e))}}}]),n}(Xf);function tp(e){var t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new Xf(e);case"equirectangular":return new Gf(e);case"naturalEarth":return new Yf(e);case"equalEarth":return new Uf(e);case"winkelTripel":return new Qf(e);case"albers":return n?new $f(e):new Of(e);case"lambertConformalConic":return n?new $f(e):new Wf(e);case"globe":return new ep(e)}throw new Error("Invalid projection name: ".concat(e.name))}var np=Rc.VectorTileFeature.types,rp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ip(e,t,n,r,i,a,o,s,l,u,c,h,d){var f=s?Math.min(Kd,Math.round(s[0])):0,p=s?Math.min(Kd,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),a,o,(f<<1)+(l?1:0),p,16*u,16*c,256*h,256*d)}function ap(e,t,n,r,i,a,o){e.emplaceBack(t,n,r,i,a,o)}function op(e,t,n,r,i){e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i)}function sp(e){var t,n=d(e.sections);try{for(n.s();!(t=n.n()).done;)if(za(t.value.text))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var lp=function(){function e(t){v(this,e),this.layoutVertexArray=new ko,this.indexArray=new Bo,this.programConfigurations=t,this.segments=new Ds,this.dynamicLayoutVertexArray=new _o,this.opacityVertexArray=new So,this.placedSymbolArray=new Ho,this.globeExtVertexArray=new To}return g(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hh.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,fh.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,rp,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,dh.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}]),e}();Wi(lp,"SymbolBuffers");var up=function(){function e(t,n,r){v(this,e),this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new r,this.segments=new Ds,this.collisionVertexArray=new Ro,this.collisionVertexArrayExt=new Mo}return g(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,ph.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,mh.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),e}();Wi(up,"CollisionBuffers");var cp=function(){function e(t){v(this,e),this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Bl([]),this.placementViewportMatrix=Bl([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=xh(this.zoom,n["text-size"]),this.iconSizeData=xh(this.zoom,n["icon-size"]);var r=this.layers[0].layout,i=r.get("symbol-sort-key"),a=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((function(e){return nd[e]})),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=t.sourceID,this.projection=t.projection}return g(e,[{key:"createArrays",value:function(){this.text=new lp(new Es(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new lp(new Es(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new Xo,this.lineVertexArray=new Ko,this.symbolInstances=new Wo}},{key:"calculateGlyphDependencies",value:function(e,t,n,r,i){for(var a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,r&&i){var o=Sh[e.charAt(a)];o&&(t[o.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,t,n,r){var i=this.layers[0],a=i.layout,o="globe"===this.projection.name,s=a.get("text-font"),l=a.get("text-field"),u=a.get("icon-image"),c=("constant"!==l.value.kind||l.value.value instanceof Lt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),h="constant"!==u.value.kind||!!u.value.value||Object.keys(u.parameters).length>0,f=a.get("symbol-sort-key");if(this.features=[],c||h){var p,m=t.iconDependencies,v=t.glyphDependencies,g=t.availableImages,y=new Wa(this.zoom),_=d(e);try{for(_.s();!(p=_.n()).done;){var x=p.value,b=x.feature,w=x.id,k=x.index,T=x.sourceLayerIndex,S=i._featureFilter.needGeometry,E=ol(b,S);if(i._featureFilter.filter(y,E,n)){S||(E.geometry=al(b,n,r)),o&&1!==b.type&&n.z<=5&&function(){for(var e=E.geometry,t=.98078528056,r=0;r<e.length;r++)e[r]=tl(e[r],(function(e){return e}),(function(e,r){return $l(wf(e.x,e.y,n,1),wf(r.x,r.y,n,1))<t}))}();var C=void 0,A=void 0;if(c){var R=i.getValueAndResolveTokens("text-field",E,n,g),M=Lt.factory(R);sp(M)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Ga()||this.hasRTLText&&qa.isParsed())&&(C=Th(M,i,E))}if(h){var B=i.getValueAndResolveTokens("icon-image",E,n,g);A=B instanceof Dt?B:Dt.fromString(B)}if(C||A){var P=this.sortFeaturesByKey?f.evaluate(E,{},n):void 0;if(this.features.push({id:w,text:C,icon:A,index:k,sourceLayerIndex:T,geometry:E.geometry,properties:b.properties,type:np[b.type],sortKey:P}),A&&(m[A.name]=!0),C){var I=s.evaluate(E,{},n).join(","),z="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(nd.vertical)>=0;var L,D=d(C.sections);try{for(D.s();!(L=D.n()).done;){var O=L.value;if(O.image)m[O.image.name]=!0;else{var N=Ca(C.toString()),F=O.fontStack||I,j=v[F]=v[F]||{};this.calculateGlyphDependencies(O.text,j,z,this.allowVerticalPlacement,N)}}}catch(V){D.e(V)}finally{D.f()}}}}}}catch(V){_.e(V)}finally{_.f()}"line"===a.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function a(t){r.push(e[t]),i++}function o(e,t,i){var a=n[e];return delete n[e],n[t]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(i[0]),a}function s(e,n,i){var a=t[n];return delete t[n],t[e]=a,r[a].geometry[0].shift(),r[a].geometry[0]=i[0].concat(r[a].geometry[0]),a}function l(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(r.x,":").concat(r.y)}for(var u=0;u<e.length;u++){var c=e[u],h=c.geometry,d=c.text?c.text.toString():null;if(d){var f=l(d,h),p=l(d,h,!0);if(f in n&&p in t&&n[f]!==t[p]){var m=s(f,p,h),v=o(f,p,r[m].geometry);delete t[f],delete n[p],n[l(d,r[v].geometry,!0)]=v,r[m].geometry=null}else f in n?o(f,p,h):p in t?s(f,p,h):(a(u),t[f]=i-1,n[p]=i-1)}else a(u)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,r))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"getProjection",value:function(){return this.projectionInstance||(this.projectionInstance=tp(this.projection)),this.projectionInstance}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var n=this.lineVertexArray.length,r=e.segment;if(void 0!==r){for(var i=e.dist(t[r+1]),a=e.dist(t[r]),o={},s=r+1;s<t.length;s++)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s<t.length-1&&(i+=t[s+1].dist(t[s]));for(var l=r||0;l>=0;l--)o[l]={x:t[l].x,y:t[l].y,tileUnitDistanceFromAnchor:a},l>0&&(a+=t[l-1].dist(t[l]));for(var u=0;u<t.length;u++){var c=o[u];this.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f){for(var p=e.indexArray,m=e.layoutVertexArray,v=e.globeExtVertexArray,g=e.segments.prepareSegment(4*t.length,m,p,this.canOverlap?a.sortKey:void 0),y=this.glyphOffsetArray.length,_=g.vertexLength,x=this.allowVerticalPlacement&&o===nd.vertical?Math.PI/2:0,b=a.text&&a.text.sections,w=0;w<t.length;w++){var k=t[w],T=k.tl,S=k.tr,E=k.bl,C=k.br,A=k.tex,R=k.pixelOffsetTL,M=k.pixelOffsetBR,B=k.minFontScaleX,P=k.minFontScaleY,I=k.glyphOffset,z=k.isSDF,L=k.sectionIndex,D=g.vertexLength,O=I[1];if(ip(m,l.x,l.y,T.x,O+T.y,A.x,A.y,n,z,R.x,R.y,B,P),ip(m,l.x,l.y,S.x,O+S.y,A.x+A.w,A.y,n,z,M.x,R.y,B,P),ip(m,l.x,l.y,E.x,O+E.y,A.x,A.y+A.h,n,z,R.x,M.y,B,P),ip(m,l.x,l.y,C.x,O+C.y,A.x+A.w,A.y+A.h,n,z,M.x,M.y,B,P),s){var N=s.anchor,F=s.up;ap(v,N.x,N.y,N.z,F[0],F[1],F[2]),ap(v,N.x,N.y,N.z,F[0],F[1],F[2]),ap(v,N.x,N.y,N.z,F[0],F[1],F[2]),ap(v,N.x,N.y,N.z,F[0],F[1],F[2]),op(e.dynamicLayoutVertexArray,N.x,N.y,N.z,x)}else op(e.dynamicLayoutVertexArray,l.x,l.y,l.z,x);p.emplaceBack(D,D+1,D+2),p.emplaceBack(D+1,D+2,D+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(I[0]),w!==t.length-1&&L===t[w+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,a,a.index,{},d,f,b&&b[L])}var j=s?s.anchor:l;e.placedSymbolArray.emplaceBack(j.x,j.y,j.z,l.x,l.y,y,this.glyphOffsetArray.length-y,_,u,c,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],o,0,!1,0,h,0)}},{key:"_commitLayoutVertex",value:function(e,t,n,r,i,a,o){e.emplaceBack(t,n,r,i,a,Math.round(o.x),Math.round(o.y))}},{key:"_addCollisionDebugVertices",value:function(e,t,n,r,i,a,o){for(var s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,u=o.tileAnchorX,c=o.tileAnchorY,h=0;h<4;h++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,c,new y(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,c,new y(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,c,new y(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,c,new y(e.x1,e.y2)),s.vertexLength+=4;var d=n.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),l=this.getSymbolInstanceTextSize(e,a,t,o);this._addCollisionDebugVertices(s,l,this.textCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"_addIconDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),l=this.getSymbolInstanceIconSize(e,t,o);this._addCollisionDebugVertices(s,l,this.iconCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"generateCollisionDebugBuffers",value:function(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new up(Co,vh.members,Oo),this.iconCollisionBox=new up(Co,vh.members,Oo);for(var n=wh(this.iconSizeData,e),r=wh(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(r,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}},{key:"getSymbolInstanceTextSize",value:function(e,t,n,r){var i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),a=bh(this.textSizeData,e,i)/yh;return this.tilePixelRatio*a}},{key:"getSymbolInstanceIconSize",value:function(e,t,n){var r=this.icon.placedSymbolArray.get(n),i=bh(this.iconSizeData,e,r);return this.tilePixelRatio*i}},{key:"_commitDebugCollisionVertexUpdate",value:function(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}},{key:"_updateTextDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),l=this.getSymbolInstanceTextSize(e,a,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,l,s.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(e,t,n,r,i){for(var a=r;a<i;a++){var o=n.get(a),s=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,s,o.padding)}}},{key:"updateCollisionDebugBuffers",value:function(e,t){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var n=wh(this.iconSizeData,e),r=wh(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(r,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,n,r,i,a,o,s,l){for(var u={},c=t;c<n;c++){var h=e.get(c);u.textBox={x1:h.x1,y1:h.y1,x2:h.x2,y2:h.y2,padding:h.padding,projectedAnchorX:h.projectedAnchorX,projectedAnchorY:h.projectedAnchorY,projectedAnchorZ:h.projectedAnchorZ,tileAnchorX:h.tileAnchorX,tileAnchorY:h.tileAnchorY},u.textFeatureIndex=h.featureIndex;break}for(var d=r;d<i;d++){var f=e.get(d);u.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,padding:f.padding,projectedAnchorX:f.projectedAnchorX,projectedAnchorY:f.projectedAnchorY,projectedAnchorZ:f.projectedAnchorZ,tileAnchorX:f.tileAnchorX,tileAnchorY:f.tileAnchorY},u.verticalTextFeatureIndex=f.featureIndex;break}for(var p=a;p<o;p++){var m=e.get(p);u.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,padding:m.padding,projectedAnchorX:m.projectedAnchorX,projectedAnchorY:m.projectedAnchorY,projectedAnchorZ:m.projectedAnchorZ,tileAnchorX:m.tileAnchorX,tileAnchorY:m.tileAnchorY},u.iconFeatureIndex=m.featureIndex;break}for(var v=s;v<l;v++){var g=e.get(v);u.verticalIconBox={x1:g.x1,y1:g.y1,x2:g.x2,y2:g.y2,padding:g.padding,projectedAnchorX:g.projectedAnchorX,projectedAnchorY:g.projectedAnchorY,projectedAnchorZ:g.projectedAnchorZ,tileAnchorX:g.tileAnchorX,tileAnchorY:g.tileAnchorY},u.verticalIconFeatureIndex=g.featureIndex;break}return u}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),r=[],i=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);r.push(0|Math.round(t*s.tileAnchorX+n*s.tileAnchorY)),i.push(s.featureIndex)}return a.sort((function(e,t){return r[e]-r[t]||i[t]-i[e]})),a}},{key:"addToSortKeyRanges",value:function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var n,r=d(this.symbolInstanceIndexes);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.symbolInstances.get(i);this.featureSortOrder.push(a.featureIndex),[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e,n,r){e>=0&&r.indexOf(e)===n&&t.addIndicesForPlacedSymbol(t.text,e)})),a.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,a.verticalPlacedTextSymbolIndex),a.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.placedIconSymbolIndex),a.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,a.verticalPlacedIconSymbolIndex)}}catch(o){r.e(o)}finally{r.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();Wi(cp,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),cp.MAX_GLYPHS=65535,cp.addDynamicAttributes=op;var hp=new so({"symbol-placement":new no(at.layout_symbol["symbol-placement"]),"symbol-spacing":new no(at.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new no(at.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ro(at.layout_symbol["symbol-sort-key"]),"symbol-z-order":new no(at.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new no(at.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new no(at.layout_symbol["icon-ignore-placement"]),"icon-optional":new no(at.layout_symbol["icon-optional"]),"icon-rotation-alignment":new no(at.layout_symbol["icon-rotation-alignment"]),"icon-size":new ro(at.layout_symbol["icon-size"]),"icon-text-fit":new no(at.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new no(at.layout_symbol["icon-text-fit-padding"]),"icon-image":new ro(at.layout_symbol["icon-image"]),"icon-rotate":new ro(at.layout_symbol["icon-rotate"]),"icon-padding":new no(at.layout_symbol["icon-padding"]),"icon-keep-upright":new no(at.layout_symbol["icon-keep-upright"]),"icon-offset":new ro(at.layout_symbol["icon-offset"]),"icon-anchor":new ro(at.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new no(at.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new no(at.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new no(at.layout_symbol["text-rotation-alignment"]),"text-field":new ro(at.layout_symbol["text-field"]),"text-font":new ro(at.layout_symbol["text-font"]),"text-size":new ro(at.layout_symbol["text-size"]),"text-max-width":new ro(at.layout_symbol["text-max-width"]),"text-line-height":new ro(at.layout_symbol["text-line-height"]),"text-letter-spacing":new ro(at.layout_symbol["text-letter-spacing"]),"text-justify":new ro(at.layout_symbol["text-justify"]),"text-radial-offset":new ro(at.layout_symbol["text-radial-offset"]),"text-variable-anchor":new no(at.layout_symbol["text-variable-anchor"]),"text-anchor":new ro(at.layout_symbol["text-anchor"]),"text-max-angle":new no(at.layout_symbol["text-max-angle"]),"text-writing-mode":new no(at.layout_symbol["text-writing-mode"]),"text-rotate":new ro(at.layout_symbol["text-rotate"]),"text-padding":new no(at.layout_symbol["text-padding"]),"text-keep-upright":new no(at.layout_symbol["text-keep-upright"]),"text-transform":new ro(at.layout_symbol["text-transform"]),"text-offset":new ro(at.layout_symbol["text-offset"]),"text-allow-overlap":new no(at.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new no(at.layout_symbol["text-ignore-placement"]),"text-optional":new no(at.layout_symbol["text-optional"])}),dp={paint:new so({"icon-opacity":new ro(at.paint_symbol["icon-opacity"]),"icon-color":new ro(at.paint_symbol["icon-color"]),"icon-halo-color":new ro(at.paint_symbol["icon-halo-color"]),"icon-halo-width":new ro(at.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ro(at.paint_symbol["icon-halo-blur"]),"icon-translate":new no(at.paint_symbol["icon-translate"]),"icon-translate-anchor":new no(at.paint_symbol["icon-translate-anchor"]),"text-opacity":new ro(at.paint_symbol["text-opacity"]),"text-color":new ro(at.paint_symbol["text-color"],{runtimeType:gt,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new ro(at.paint_symbol["text-halo-color"]),"text-halo-width":new ro(at.paint_symbol["text-halo-width"]),"text-halo-blur":new ro(at.paint_symbol["text-halo-blur"]),"text-translate":new no(at.paint_symbol["text-translate"]),"text-translate-anchor":new no(at.paint_symbol["text-translate-anchor"])}),layout:hp},fp=function(){function e(t){v(this,e),this.type=t.property.overrides?t.property.overrides.runtimeType:ft,this.defaultValue=t}return g(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();Wi(fp,"FormatSectionOverride",{omit:["defaultValue"]});var pp=function(e){p(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,dp)}return g(n,[{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));var r=this.layout.get("text-writing-mode");if(r){var i,a=[],l=d(r);try{for(l.s();!(i=l.n()).done;){var u=i.value;a.indexOf(u)<0&&a.push(u)}}catch(c){l.e(c)}finally{l.f()}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,n,r){var i=this.layout.get(e).evaluate(t,{},n,r),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||Yr(a.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,n){return n in e?String(e[n]):""}))}(t.properties,i)}},{key:"createBucket",value:function(e){return new cp(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var e,t=d(dp.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(n.hasPaintOverride(this.layout,r)){var i=this.paint.get(r),a=new fp(i),o=new Kr(a,i.property.specification),s=null;s="constant"===i.value.kind||"source"===i.value.kind?new Qr("source",o):new $r("composite",o,i.value.zoomStops,i.value._interpolationType),this.paint._values[r]=new eo(i.property,s,i.parameters)}}}catch(l){t.e(l)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&n.hasPaintOverride(this.layout,e)}},{key:"getProgramConfiguration",value:function(e){return new Ss(this,e)}}],[{key:"hasPaintOverride",value:function(e,t){var n=e.get("text-field"),r=dp.paint.properties[t],i=!1,a=function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(r.overrides&&r.overrides.hasOverride(a))return void(i=!0)}}catch(o){n.e(o)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof Lt)a(n.value.value.sections);else if("source"===n.value.kind){var o=function e(t){i||(t instanceof Zt&&Ft(t.value)===bt?a(t.value.sections):t instanceof Wt?a(t.sections):t.eachChild(e))},s=n.value;s._styleExpression&&o(s._styleExpression.expression)}return i}}]),n}(Is),mp={paint:new so({"background-color":new no(at.paint_background["background-color"]),"background-pattern":new ao(at.paint_background["background-pattern"]),"background-opacity":new no(at.paint_background["background-opacity"])})},vp={paint:new so({"raster-opacity":new no(at.paint_raster["raster-opacity"]),"raster-hue-rotate":new no(at.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new no(at.paint_raster["raster-brightness-min"]),"raster-brightness-max":new no(at.paint_raster["raster-brightness-max"]),"raster-saturation":new no(at.paint_raster["raster-saturation"]),"raster-contrast":new no(at.paint_raster["raster-contrast"]),"raster-resampling":new no(at.paint_raster["raster-resampling"]),"raster-fade-duration":new no(at.paint_raster["raster-fade-duration"])})},gp=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e,{})).implementation=e,r}return g(n,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){return!1}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}},{key:"onRemove",value:function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}]),n}(Is),yp={paint:new so({"sky-type":new no(at.paint_sky["sky-type"]),"sky-atmosphere-sun":new no(at.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new no(at.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new no(at.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new no(at.paint_sky["sky-gradient-radius"]),"sky-gradient":new oo(at.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new no(at.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new no(at.paint_sky["sky-atmosphere-color"]),"sky-opacity":new no(at.paint_sky["sky-opacity"])})};function _p(e,t,n){var r=[0,0,1],i=cu([]);return du(i,i,n?-w(e)+Math.PI:w(e)),hu(i,i,-w(t)),nu(r,r,i),Ql(r,r)}var xp={circle:function(e){p(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,Cl)}return g(n,[{key:"createBucket",value:function(e){return new ul(e)}},{key:"queryRadius",value:function(e){var t=e;return wl("circle-radius",this,t)+wl("circle-stroke-width",this,t)+kl(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s){var l=Sl(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return gu(e,r,a,o,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,u)}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(e){return new Ss(this,e)}}]),n}(Is),heatmap:function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e,Au))._updateColorRamp(),r}return g(n,[{key:"createBucket",value:function(e){return new wu(e)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=Ru({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(e){return wl("heatmap-radius",this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s){var l=this.paint.get("heatmap-radius").evaluate(t,n);return gu(e,r,a,o,s,!0,!0,new y(0,0),l)}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(e){return new Ss(this,e)}}]),n}(Is),hillshade:function(e){p(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,Mu)}return g(n,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}}]),n}(Is),fill:function(e){p(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,vc)}return g(n,[{key:"getProgramIds",value:function(){var e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}},{key:"getProgramConfiguration",value:function(e){return new Ss(this,e)}},{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new pc(e)}},{key:"queryRadius",value:function(){return kl(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a){return!e.queryGeometry.isAboveHorizon&&dl(Tl(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),r)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Is),"fill-extrusion":function(e){p(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,qc)}return g(n,[{key:"createBucket",value:function(e){return new Dc(e)}},{key:"queryRadius",value:function(){return kl(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(e){return new Ss(this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s,l){var u=Sl(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(t,n),h=this.paint.get("fill-extrusion-base").evaluate(t,n),f=[0,0],p=s&&a.elevation,m=a.elevation?a.elevation.exaggeration():1,v=e.tile.getBucket(this);if(p&&v instanceof Dc){var g=v.centroidVertexArray,_=l+1;if(_<g.length){var x=g.get(_);f[0]=x.a_centroid_pos0,f[1]=x.a_centroid_pos1}}if(0===f[0]&&1===f[1])return!1;"globe"===a.projection.name&&(r=Gc([r],[new y(0,0),new y(Os,Os)],e.tileID.canonical).map((function(e){return e.polygon})).flat());var b=function(e,t,n,r,i,a,o,s,l,u,c){return"globe"===e.projection.name?function(e,t,n,r,i,a,o,s,l,u,c){var h=[],f=[],p=e.projection.upVectorScale(c,e.center.lat,e.worldSize).metersToTile,m=[0,0,0,1],v=[0,0,0,1],g=function(e,t,n,r){e[0]=t,e[1]=n,e[2]=r,e[3]=1},y=Uc();n>0&&(n+=y),r+=y;var _,x=d(t);try{for(x.s();!(_=x.n()).done;){var b,w=_.value,k=[],T=[],S=d(w);try{for(S.s();!(b=S.n()).done;){var E=b.value,C=E.x+i.x,A=E.y+i.y,R=e.projection.projectTilePoint(C,A,c),M=e.projection.upVector(c,E.x,E.y),B=n,P=r;if(o){var I=th(C,A,n,r,o,s,l,u);B+=I.base,P+=I.top}0!==n?g(m,R.x+M[0]*p*B,R.y+M[1]*p*B,R.z+M[2]*p*B):g(m,R.x,R.y,R.z),g(v,R.x+M[0]*p*P,R.y+M[1]*p*P,R.z+M[2]*p*P),tu(m,m,a),tu(v,v,a),k.push(eh(m)),T.push(eh(v))}}catch(z){S.e(z)}finally{S.f()}h.push(k),f.push(T)}}catch(z){x.e(z)}finally{x.f()}return[h,f]}(e,t,n,r,i,a,o,s,l,u,c):o?function(e,t,n,r,i,a,o,s,l){var u,c=[],h=[],f=[0,0,0,1],p=d(e);try{for(p.s();!(u=p.n()).done;){var m,v=u.value,g=[],y=[],_=d(v);try{for(_.s();!(m=_.n()).done;){var x=m.value,b=x.x+r.x,w=x.y+r.y,k=th(b,w,t,n,a,o,s,l);f[0]=b,f[1]=w,f[2]=k.base,f[3]=1,lu(f,f,i),f[3]=Math.max(f[3],1e-5);var T=eh([f[0]/f[3],f[1]/f[3],f[2]/f[3]]);f[0]=b,f[1]=w,f[2]=k.top,f[3]=1,lu(f,f,i),f[3]=Math.max(f[3],1e-5);var S=eh([f[0]/f[3],f[1]/f[3],f[2]/f[3]]);g.push(T),y.push(S)}}catch(E){_.e(E)}finally{_.f()}c.push(g),h.push(y)}}catch(E){p.e(E)}finally{p.f()}return[c,h]}(t,n,r,i,a,o,s,l,u):function(e,t,n,r,i){var a,o=[],s=[],l=i[8]*t,u=i[9]*t,c=i[10]*t,h=i[11]*t,f=i[8]*n,p=i[9]*n,m=i[10]*n,v=i[11]*n,g=d(e);try{for(g.s();!(a=g.n()).done;){var _,x=a.value,b=[],w=[],k=d(x);try{for(k.s();!(_=k.n()).done;){var T=_.value,S=T.x+r.x,E=T.y+r.y,C=i[0]*S+i[4]*E+i[12],A=i[1]*S+i[5]*E+i[13],R=i[2]*S+i[6]*E+i[14],M=i[3]*S+i[7]*E+i[15],B=C+l,P=A+u,I=R+c,z=Math.max(M+h,1e-5),L=C+f,D=A+p,O=R+m,N=Math.max(M+v,1e-5),F=new y(B/z,P/z);F.z=I/z,b.push(F);var j=new y(L/N,D/N);j.z=O/N,w.push(j)}}catch(V){k.e(V)}finally{k.f()}o.push(b),s.push(w)}}catch(V){g.e(V)}finally{g.f()}return[o,s]}(t,n,r,i,a)}(a,r,h,c,u,o,p?s:null,f,m,a.center.lat,e.tileID.canonical),w=e.queryGeometry;return function(e,t,n){var r=1/0;dl(n,t)&&(r=$c(n,t[0]));for(var i=0;i<t.length;i++)for(var a=t[i],o=e[i],s=0;s<a.length-1;s++){var l=a[s],u=[l,a[s+1],o[s+1],o[s],l];cl(n,u)&&(r=Math.min(r,$c(n,u)))}return r!==1/0&&r}(b[0],b[1],w.isPointQuery()?w.screenBounds:w.screenGeometry)}}]),n}(Is),line:function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e,lh)).gradientVersion=0,r}return g(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){if("line-gradient"===e){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Pn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=uh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new oh(e)}},{key:"getProgramIds",value:function(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}},{key:"getProgramConfiguration",value:function(e){return new Ss(this,e)}},{key:"queryRadius",value:function(e){var t=e,n=ch(wl("line-width",this,t),wl("line-gap-width",this,t)),r=wl("line-offset",this,t);return n/2+Math.abs(r)+kl(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a){if(e.queryGeometry.isAboveHorizon)return!1;var o=Tl(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*ch(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),l=this.paint.get("line-offset").evaluate(t,n);return l&&(r=function(e,t){for(var n=[],r=new y(0,0),i=0;i<e.length;i++){for(var a=e[i],o=[],s=0;s<a.length;s++){var l=a[s-1],u=a[s],c=a[s+1],h=0===s?r:u.sub(l)._unit()._perp(),d=s===a.length-1?r:c.sub(u)._unit()._perp(),f=h._add(d)._unit();f._mult(1/(f.x*d.x+f.y*d.y)),o.push(f._mult(t)._add(u))}n.push(o)}return n}(r,l*e.pixelToTileUnitsFactor)),function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.length>=3)for(var a=0;a<i.length;a++)if(_l(e,i[a]))return!0;if(fl(e,i,n))return!0}return!1}(o,r,s)}},{key:"isTileClipped",value:function(){return!0}}]),n}(Is),symbol:pp,background:function(e){p(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,mp)}return g(n,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),n}(Is),raster:function(e){p(n,e);var t=m(n);function n(e){return v(this,n),t.call(this,e,vp)}return g(n,[{key:"getProgramIds",value:function(){return["raster"]}}]),n}(Is),sky:function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e,yp))._updateColorRamp(),r}return g(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=Ru({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}},{key:"getCenter",value:function(e,t){if("atmosphere"===this.paint.get("sky-type")){var n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,a=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&H("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?_p(a.azimuthal,90-a.polar,t):_p(n[0],90-n[1],t)}var o=this.paint.get("sky-gradient-center");return _p(o[0],90-o[1],t)}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}]),n}(Is)},bp=function(){function e(t,n,r,i){v(this,e),this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(n,i)}return g(e,[{key:"update",value:function(e,n,r){var i=e.width,a=e.height,o=this.context,s=o.gl,l=t.HTMLImageElement,u=t.HTMLCanvasElement,c=t.HTMLVideoElement,h=t.ImageData,d=t.ImageBitmap;if(s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!n||!1!==n.premultiply)),r||this.size&&this.size[0]===i&&this.size[1]===a){var f=r||{x:0,y:0},p=f.x,m=f.y;e instanceof l||e instanceof u||e instanceof c||e instanceof h||d&&e instanceof d?s.texSubImage2D(s.TEXTURE_2D,0,p,m,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,p,m,i,a,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[i,a],e instanceof l||e instanceof u||e instanceof c||e instanceof h||d&&e instanceof d?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,i,a,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}},{key:"bind",value:function(e,t){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?e===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}(),wp=function(){function e(t,n){v(this,e),this.width=t,this.height=n,this.nextRow=0,this.image=new Eu({width:t,height:n}),this.positions={},this.uploaded=!1}return g(e,[{key:"getDash",value:function(e,t){var n=this.getKey(e,t);return this.positions[n]}},{key:"trim",value:function(){var e=this.width,t=this.height=O(this.nextRow);this.image.resize({width:e,height:t})}},{key:"getKey",value:function(e,t){return e.join(",")+t}},{key:"getDashRanges",value:function(e,t,n){var r=[],i=e.length%2==1?-e[e.length-1]*n:0,a=e[0]*n,o=!0;r.push({left:i,right:a,isDash:o,zeroLength:0===e[0]});for(var s=e[0],l=1;l<e.length;l++){o=!o;var u=e[l];i=s*n,a=(s+=u)*n,r.push({left:i,right:a,isDash:o,zeroLength:0===u})}return r}},{key:"addRoundDash",value:function(e,t,n){for(var r=t/2,i=-n;i<=n;i++)for(var a=this.width*(this.nextRow+n+i),o=0,s=e[o],l=0;l<this.width;l++){l/s.right>1&&(s=e[++o]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),h=Math.min(u,c),d=void 0,f=i/n*(r+1);if(s.isDash){var p=r-Math.abs(f);d=Math.sqrt(h*h+p*p)}else d=r-Math.sqrt(h*h+f*f);this.image.data[a+l]=Math.max(0,Math.min(255,d+128))}}},{key:"addRegularDash",value:function(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=e[n+1];r.zeroLength?e.splice(n,1):i&&i.isDash===r.isDash&&(i.left=r.left,e.splice(n,1))}var a=e[0],o=e[e.length-1];a.isDash===o.isDash&&(a.left=o.left-this.width,o.right=a.right+this.width);for(var s=this.width*this.nextRow,l=0,u=e[l],c=0;c<this.width;c++){c/u.right>1&&(u=e[++l]);var h=Math.abs(c-u.left),d=Math.abs(c-u.right),f=Math.min(h,d);this.image.data[s+c]=Math.max(0,Math.min(255,(u.isDash?f:-f)+t+128))}}},{key:"addDash",value:function(e,t){var n=this.getKey(e,t);if(this.positions[n])return this.positions[n];var r="round"===t,i=r?7:0,a=2*i+1;if(this.nextRow+a>this.height)return H("LineAtlas out of space"),null;0===e.length&&e.push(1);for(var o=0,s=0;s<e.length;s++)e[s]<0&&(H("Negative value is found in line dasharray, replacing values with 0"),e[s]=0),o+=e[s];if(0!==o){var l=this.width/o,u=this.getDashRanges(e,this.width,l);r?this.addRoundDash(u,l,i):this.addRegularDash(u,"square"===t?.5*l:0)}var c=this.nextRow+i;this.nextRow+=a;var h={tl:[c,i],br:[o,0]};return this.positions[n]=h,h}}]),e}();Wi(wp,"LineAtlas");for(var kp=function(){function e(t){var n=this;v(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return g(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){this._channel=void 0,this._callback=function(){}}}]),e}(),Tp=function(){function e(){v(this,e),this.tasks={},this.taskQueue=[],F(["process"],this),this.invoker=new kp(this.process),this.nextId=0}return g(e,[{key:"add",value:function(e,t){var n=this,r=this.nextId++,i=function(e){var t=e.type,n=e.isSymbolTile,r=e.zoom;return r=r||0,"message"===t?0:"maybePrepare"!==t||n?"parseTile"!==t||n?"parseTile"===t&&n?300-r:"maybePrepare"===t&&n?400-r:500:200-r:100-r}(t);if(0===i){X();try{e()}finally{}return{cancel:function(){}}}return this.tasks[r]={fn:e,metadata:t,priority:i,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:function(){delete n.tasks[r]}}}},{key:"process",value:function(){var e=this;X();try{if(this.taskQueue=this.taskQueue.filter((function(t){return!!e.tasks[t]})),!this.taskQueue.length)return;var t=this.pick();if(null===t)return;var n=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}},{key:"pick",value:function(){for(var e=null,t=1/0,n=0;n<this.taskQueue.length;n++){var r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;var i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}},{key:"remove",value:function(){this.invoker.remove()}}]),e}(),Sp=function(){function e(t){v(this,e),this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var r=t[n];this._stringToNumber[r]=n,this._numberToString[n]=r}}return g(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){return this._numberToString[e]}}]),e}(),Ep=["tile","layer","source","sourceLayer","state"],Cp=function(){function e(t,n,r,i,a){v(this,e),this.type="Feature",this._vectorTileFeature=t,this._z=n,this._x=r,this._y=i,this.properties=t.properties,this.id=a}return g(e,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry},set:function(e){this._geometry=e}},{key:"toJSON",value:function(){var e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);var t,n=d(Ep);try{for(n.s();!(t=n.n()).done;){var r=t.value;void 0!==this[r]&&(e[r]=this[r])}}catch(i){n.e(i)}finally{n.f()}return e}}]),e}(),Ap=32,Rp=33,Mp=new Uint16Array(8184),Bp=0;Bp<2046;Bp++){var Pp=Bp+2,Ip=0,zp=0,Lp=0,Dp=0,Op=0,Np=0;for(1&Pp?Lp=Dp=Op=Ap:Ip=zp=Np=Ap;(Pp>>=1)>1;){var Fp=Ip+Lp>>1,jp=zp+Dp>>1;1&Pp?(Lp=Ip,Dp=zp,Ip=Op,zp=Np):(Ip=Lp,zp=Dp,Lp=Op,Dp=Np),Op=Fp,Np=jp}var Vp=4*Bp;Mp[Vp+0]=Ip,Mp[Vp+1]=zp,Mp[Vp+2]=Lp,Mp[Vp+3]=Dp}var Zp=new Uint16Array(2178),Up=new Uint8Array(1089),Gp=new Uint16Array(1089);function Hp(e){return 0===e?-.03125:32===e?.03125:0}var qp=fo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Wp={type:2,extent:Os,loadGeometry:function(){return[[new y(0,0),new y(8193,0),new y(8193,8193),new y(0,8193),new y(0,0)]]}},Xp=function(){function e(t,n,r,i,a){v(this,e),this.tileID=t,this.uid=L(),this.uses=0,this.tileSize=n,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=a,this.expiredRequestCount=0,this.state="loading",i&&i.transform&&(this.projection=i.transform.projection)}return g(e,[{key:"registerFadeDuration",value:function(e){var t=e+this.timeAdded;t<ce.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"tileTransform",get:function(){return this._tileTransform||(this._tileTransform=zf(this.tileID.canonical,this.projection)),this._tileTransform}},{key:"loadVectorData",value:function(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;var r,i=d(e);try{var a=function(){var e=r.value,i=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==i.length){e.layers=i,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return i.filter((function(t){return t.id===e}))[0]})));var a,o=d(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s.id]=e}}catch(l){o.e(l)}finally{o.f()}}};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof cp){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof cp&&o.hasRTLText){this.hasRTLText=!0,qa.isLoading()||qa.isLoaded()||"deferred"!==Ga()||Ha();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(l))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Uo}},{key:"unloadVectorData",value:function(){if(this.hasData()){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new bp(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new bp(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new bp(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,n,r,i,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:o,transform:a,params:i,tileTransform:this.tileTransform},e,t,n):{}}},{key:"querySourceFeatures",value:function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=t?t.sourceLayer:"",a=r._geojsonTileLayer||r[i];if(a)for(var o=di(t&&t.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,h={z:l,x:u,y:c},d=0;d<a.length;d++){var f=a.feature(d);if(o.needGeometry){var p=ol(f,!0);if(!o.filter(new Wa(this.tileID.overscaledZ),p,this.tileID.canonical))continue}else if(!o.filter(new Wa(this.tileID.overscaledZ),f))continue;var m=n.getId(f,i),v=new Cp(f,l,u,c,m);v.tile=h,e.push(v)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var t=this.expirationTime;if(e.cacheControl){var n=K(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var a=this.expirationTime-t;a?this.expirationTime=r+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length&&t){var n=this.latestFeatureIndex.loadVTLayers(),r=t.style.listImages();for(var i in this.buckets)if(t.style.hasLayer(i)){var a=this.buckets[i],o=a.layers[0].sourceLayer||"_geojsonTileLayer",s=n[o],l=e[o];if(s&&l&&0!==Object.keys(l).length){if(a.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a instanceof oh||a instanceof pc){var u=t.style._getSourceCache(a.layers[0].source);t._terrain&&t._terrain.enabled&&u&&a.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(u.id,this.tileID)}var c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(a)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<ce.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=ce.now()+e}},{key:"setTexture",value:function(e,t){var n=t.context,r=n.gl;this.texture=t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new bp(n,e,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),n.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax))}},{key:"setDependencies",value:function(e,t){var n,r={},i=d(t);try{for(i.s();!(n=i.n()).done;)r[n.value]=!0}catch(a){i.e(a)}finally{i.f()}this.dependencies[e]=r}},{key:"hasDependency",value:function(e,t){var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.dependencies[i];if(a){var o,s=d(t);try{for(s.s();!(o=s.n()).done;)if(a[o.value])return!0}catch(l){s.e(l)}finally{s.f()}}}}catch(l){r.e(l)}finally{r.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}},{key:"_makeDebugTileBoundsBuffers",value:function(e,t){if(t&&"mercator"!==t.name&&!this._tileDebugBuffer){for(var n=al(Wp,this.tileID.canonical,this.tileTransform)[0],r=new mo,i=new No,a=0;a<n.length;a++){var o=n[a],s=o.x,l=o.y;r.emplaceBack(s,l),i.emplaceBack(a)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,rf.members),this._tileDebugSegments=Ds.simpleSegment(0,0,r.length,i.length)}}},{key:"_makeTileBoundsBuffers",value:function(e,t){if(!this._tileBoundsBuffer&&t&&"mercator"!==t.name){var n,r,i=al(Wp,this.tileID.canonical,this.tileTransform)[0];if(this.isRaster){var a=function(e,t){for(var n=zf(e,t),r=Math.pow(2,e.z),i=0;i<Rp;i++)for(var a=0;a<Rp;a++){var o=qs((e.x+(a+Hp(a))/Ap)/r),s=Ws((e.y+(i+Hp(i))/Ap)/r),l=t.project(o,s),u=i*Rp+a;Zp[2*u+0]=Math.round((l.x*n.scale-n.x)*Os),Zp[2*u+1]=Math.round((l.y*n.scale-n.y)*Os)}Up.fill(0),Gp.fill(0);for(var c=2045;c>=0;c--){var h=4*c,d=Mp[h+0],f=Mp[h+1],p=Mp[h+2],m=Mp[h+3],v=d+p>>1,g=f+m>>1,y=v+g-f,_=g+d-v,x=f*Rp+d,b=m*Rp+p,w=g*Rp+v,k=Math.hypot((Zp[2*x+0]+Zp[2*b+0])/2-Zp[2*w+0],(Zp[2*x+1]+Zp[2*b+1])/2-Zp[2*w+1])>=16;if(Up[w]=Up[w]||(k?1:0),c<1022){var T=(f+_>>1)*Rp+(d+y>>1),S=(m+_>>1)*Rp+(p+y>>1);Up[w]=Up[w]||Up[T]||Up[S]}}var E=new go,C=new Bo,A=0;function R(e,t){var n=t*Rp+e;return 0===Gp[n]&&(E.emplaceBack(Zp[2*n+0],Zp[2*n+1],e*Os/Ap,t*Os/Ap),Gp[n]=++A),Gp[n]-1}function M(e,t,n,r,i,a){var o=e+n>>1,s=t+r>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&Up[s*Rp+o])M(i,a,e,t,o,s),M(n,r,i,a,o,s);else{var l=R(e,t),u=R(n,r),c=R(i,a);C.emplaceBack(l,u,c)}}return M(0,0,Ap,Ap,Ap,0),M(Ap,Ap,0,0,0,Ap),{vertices:E,indices:C}}(this.tileID.canonical,t);n=a.vertices,r=a.indices}else{n=new go,r=new Bo;var o,s=d(i);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=l.x,c=l.y;n.emplaceBack(u,c,0,0)}}catch(p){s.e(p)}finally{s.f()}for(var h=Pu(n.int16,void 0,4),f=0;f<h.length;f+=3)r.emplaceBack(h[f],h[f+1],h[f+2])}this._tileBoundsBuffer=e.createVertexBuffer(n,qp.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(r),this._tileBoundsSegments=Ds.simpleSegment(0,0,n.length,r.length)}}},{key:"_makeGlobeTileDebugBuffers",value:function(e,t){var n=t.projection;if(n&&"globe"===n.name&&!t.freezeTileCoverage){var r,i=this.tileID.canonical,a=Sf(mf(i,t)),o=Af(t.zoom);o>0&&(r=Pl(new Float64Array(16),t.globeMatrix));var s=(i.x+.5)/(1<<i.z)-Us(t.center.lng),l=0;s>.5?l=-1:s<-.5&&(l=1),this._makeGlobeTileDebugBorderBuffer(e,i,t,a,r,o,l),this._makeGlobeTileDebugTextBuffer(e,i,t,a,r,o,l)}}},{key:"_globePoint",value:function(e,t,n,r,i,a,o,s){var l=wf(e,t,n);if(a){var u=1<<n.z,c=[((e/Os+n.x)/u+s)*r,(t/Os+n.y)/u*r,0];tu(c,c,a),l=zn(l,c,o)}return tu(l,l,i)}},{key:"_makeGlobeTileDebugBorderBuffer",value:function(e,t,n,r,i,a,o){var s=this,l=new mo,u=new No,c=new vo,h=function(e,h,d,f,p){for(var m=(d-e)/(p-1),v=(f-h)/(p-1),g=l.length,y=0;y<p;y++){var _=e+y*m,x=h+y*v;l.emplaceBack(_,x);var b=s._globePoint(_,x,t,n.worldSize,r,i,a,o);c.emplaceBack(b[0],b[1],b[2]),u.emplaceBack(g+y)}},d=Os;h(0,0,d,0,16),h(d,0,d,d,16),h(d,d,0,d,16),h(0,d,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(u),this._tileDebugBuffer=e.createVertexBuffer(l,rf.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(c,nf.members),this._tileDebugSegments=Ds.simpleSegment(0,0,l.length,u.length)}},{key:"_makeGlobeTileDebugTextBuffer",value:function(e,t,n,r,i,a,o){var s=new mo,l=new Bo,u=new vo,c=25;l.reserve(32),s.reserve(c),u.reserve(c);for(var h=function(e,t){return c*e+t},d=0;d<c;d++)for(var f=2048*d,p=0;p<c;p++){var m=2048*p;s.emplaceBack(m,f);var v=this._globePoint(m,f,t,n.worldSize,r,i,a,o);u.emplaceBack(v[0],v[1],v[2])}for(var g=0;g<4;g++)for(var y=0;y<4;y++){var _=h(g,y),x=h(g,y+1),b=h(g+1,y),w=h(g+1,y+1);l.emplaceBack(_,x,b),l.emplaceBack(b,x,w)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(l),this._tileDebugTextBuffer=e.createVertexBuffer(s,rf.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(u,nf.members),this._tileDebugTextSegments=Ds.simpleSegment(0,0,c,32)}}]),e}(),Kp=function(){function e(){v(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return g(e,[{key:"updateState",value:function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},I(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var a in this.deletedStates[e][r]={},this.state[e][r])n[a]||(this.deletedStates[e][r][a]=null);else for(var o in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][o]&&delete this.deletedStates[e][r][o]}},{key:"removeFeatureState",value:function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(e,t){var n=String(t),r=I({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var i=this.deletedStates[e][t];if(null===i)return{};for(var a in i)delete r[a]}return r}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var a in this.stateChanges[r])this.state[r][a]||(this.state[r][a]={}),I(this.state[r][a],this.stateChanges[r][a]),i[a]=this.state[r][a];n[r]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var l in this.state[o])s[l]={},this.state[o][l]={};else for(var u in this.deletedStates[o]){if(null===this.deletedStates[o][u])this.state[o][u]={};else for(var c=0,h=Object.keys(this.deletedStates[o][u]);c<h.length;c++){var d=h[c];delete this.state[o][u][d]}s[u]=this.state[o][u]}n[o]=n[o]||{},I(n[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var f in e)e[f].setFeatureState(n,t)}}]),e}(),Yp=function(){function e(t){v(this,e),this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}return g(e,[{key:"getElevation",value:function(e,t){var n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}},{key:"isLeaf",value:function(e,t){return this.leaves[this.toIdx(e,t)]}},{key:"toIdx",value:function(e,t){return t*this.size+e}}]),e}();function Jp(e,t,n,r){for(var i=0,a=Number.MAX_VALUE,o=0;o<3;o++)if(Math.abs(r[o])<1e-15){if(n[o]<e[o]||n[o]>t[o])return null}else{var s=1/r[o],l=(e[o]-n[o])*s,u=(t[o]-n[o])*s;if(l>u){var c=l;l=u,u=c}if(l>i&&(i=l),u<a&&(a=u),i>a)return null}return i}function Qp(e,t,n,r,i,a,o,s,l,u,c){var h=r-e,d=i-t,f=a-n,p=o-e,m=s-t,v=l-n,g=c[1]*v-c[2]*m,y=c[2]*p-c[0]*v,_=c[0]*m-c[1]*p,x=h*g+d*y+f*_;if(Math.abs(x)<1e-15)return null;var b=1/x,w=u[0]-e,k=u[1]-t,T=u[2]-n,S=(w*g+k*y+T*_)*b;if(S<0||S>1)return null;var E=k*f-T*d,C=T*h-w*f,A=w*d-k*h,R=(c[0]*E+c[1]*C+c[2]*A)*b;return R<0||S+R>1?null:(p*E+m*C+v*A)*b}function $p(e,t,n){return(e-t)/(n-t)}function em(e,t,n,r,i,a,o,s,l){var u=1<<n,c=a-r,h=o-i,d=(e+1)/u*c+r,f=(t+0)/u*h+i,p=(t+1)/u*h+i;s[0]=(e+0)/u*c+r,s[1]=f,l[0]=d,l[1]=p}var tm=function(){function e(t){if(v(this,e),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var n=function(e){for(var t=Math.ceil(Math.log2(e.dim/8)),n=[],r=Math.ceil(Math.pow(2,t)),i=1/r,a=function(e,t,n,r,i){var a=r?1:0,o=(e+1)*n-a,s=t*n,l=(t+1)*n-a;i[0]=e*n,i[1]=s,i[2]=o,i[3]=l},o=new Yp(r),s=[],l=0;l<r*r;l++){a(l%r,Math.floor(l/r),i,!1,s);var u=rm(s[0],s[1],e),c=rm(s[2],s[1],e),h=rm(s[2],s[3],e),d=rm(s[0],s[3],e);o.minimums.push(Math.min(u,c,h,d)),o.maximums.push(Math.max(u,c,h,d)),o.leaves.push(1)}for(n.push(o),r/=2;r>=1;r/=2){var f=n[n.length-1];o=new Yp(r);for(var p=0;p<r*r;p++){a(p%r,Math.floor(p/r),2,!0,s);var m=f.getElevation(s[0],s[1]),v=f.getElevation(s[2],s[1]),g=f.getElevation(s[2],s[3]),y=f.getElevation(s[0],s[3]),_=f.isLeaf(s[0],s[1]),x=f.isLeaf(s[2],s[1]),b=f.isLeaf(s[2],s[3]),w=f.isLeaf(s[0],s[3]),k=Math.min(m.min,v.min,g.min,y.min),T=Math.max(m.max,v.max,g.max,y.max),S=_&&x&&b&&w;o.maximums.push(T),o.minimums.push(k),o.leaves.push(T-k<=5&&S?1:0)}n.push(o)}return n}(this.dem),r=n.length-1,i=n[r];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(n,0,0,r,0)}}return g(e,[{key:"raycastRoot",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Jp([e,t,-100],[n,r,this.maximums[0]*o],i,a)}},{key:"raycast",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var s=this.raycastRoot(e,t,n,r,i,a,o);if(null==s)return null;for(var l=[],u=[],c=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];d.length>0;){var f=d.pop(),p=f.idx,m=f.t,v=f.nodex,g=f.nodey,y=f.depth;if(this.leaves[p]){em(v,g,y,e,t,n,r,c,h);var _=1<<y,x=(v+0)/_,b=(v+1)/_,w=(g+0)/_,k=(g+1)/_,T=rm(x,w,this.dem)*o,S=rm(b,w,this.dem)*o,E=rm(b,k,this.dem)*o,C=rm(x,k,this.dem)*o,A=Qp(c[0],c[1],T,h[0],c[1],S,h[0],h[1],E,i,a),R=Qp(h[0],h[1],E,c[0],h[1],C,c[0],c[1],T,i,a),M=Math.min(null!==A?A:Number.MAX_VALUE,null!==R?R:Number.MAX_VALUE);if(M!==Number.MAX_VALUE)return M;var B=Jl([],i,a,m);if(nm(T,S,C,E,$p(B[0],c[0],h[0]),$p(B[1],c[1],h[1]))>=B[2])return m}else{for(var P=0,I=0;I<this._siblingOffset.length;I++){em((v<<1)+this._siblingOffset[I][0],(g<<1)+this._siblingOffset[I][1],y+1,e,t,n,r,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[p]+I]*o;var z=Jp(c,h,i,a);if(null!=z){var L=z;l[I]=L;for(var D=!1,O=0;O<P&&!D;O++)L>=l[u[O]]&&(u.splice(O,0,I),D=!0);D||(u[P]=I),P++}}for(var N=0;N<P;N++){var F=u[N];d.push({idx:this.childOffsets[p]+F,t:l[F],nodex:(v<<1)+this._siblingOffset[F][0],nodey:(g<<1)+this._siblingOffset[F][1],depth:y+1})}}}return null}},{key:"_addNode",value:function(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(e,t,n,r,i){if(1!==e[r].isLeaf(t,n)){this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);for(var a=r-1,o=e[a],s=0,l=0,u=0;u<this._siblingOffset.length;u++){var c=2*t+this._siblingOffset[u][0],h=2*n+this._siblingOffset[u][1],d=o.getElevation(c,h),f=o.isLeaf(c,h),p=this._addNode(d.min,d.max,f);f&&(s|=1<<u),l||(l=p)}for(var m=0;m<this._siblingOffset.length;m++)s&1<<m||this._construct(e,2*t+this._siblingOffset[m][0],2*n+this._siblingOffset[m][1],a,l+m)}}}]),e}();function nm(e,t,n,r,i,a){return In(In(e,n,a),In(t,r,a),i)}function rm(e,t,n){var r=n.dim,i=A(e*r-.5,0,r-1),a=A(t*r-.5,0,r-1),o=Math.floor(i),s=Math.floor(a),l=Math.min(o+1,r-1),u=Math.min(s+1,r-1);return nm(n.get(o,s),n.get(l,s),n.get(o,u),n.get(l,u),i-o,a-s)}var im={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]},am=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(v(this,e),this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return H('"'.concat(r,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=n.height;var o=this.dim=n.height-2,s=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.encoding=r||"mapbox",this.borderReady=i,!i){for(var l=0;l<o;l++)s[this._idx(-1,l)]=s[this._idx(0,l)],s[this._idx(o,l)]=s[this._idx(o-1,l)],s[this._idx(l,-1)]=s[this._idx(l,0)],s[this._idx(l,o)]=s[this._idx(l,o-1)];s[this._idx(-1,-1)]=s[this._idx(0,0)],s[this._idx(o,-1)]=s[this._idx(o-1,0)],s[this._idx(-1,o)]=s[this._idx(0,o-1)],s[this._idx(o,o)]=s[this._idx(o-1,o-1)],a&&this._buildQuadTree()}}return g(e,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}},{key:"_buildQuadTree",value:function(){this._tree=new tm(this)}},{key:"get",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e=A(e,-1,this.dim),t=A(t,-1,this.dim));var n=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}},{key:"unpackVector",get:function(){return im[this.encoding]}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"_unpackMapbox",value:function(e,t,n){return(256*e*256+256*t+n)/10-1e4}},{key:"_unpackTerrarium",value:function(e,t,n){return 256*e+t+n/256-32768}},{key:"getPixels",value:function(){return new Cu({width:this.stride,height:this.stride},this.pixels)}},{key:"backfillBorder",value:function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}for(var s=-t*this.dim,l=-n*this.dim,u=a;u<o;u++)for(var c=r;c<i;c++){var h=4*this._idx(c,u),d=4*this._idx(c+s,u+l);this.pixels[h+0]=e.pixels[d+0],this.pixels[h+1]=e.pixels[d+1],this.pixels[h+2]=e.pixels[d+2],this.pixels[h+3]=e.pixels[d+3]}}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}}],[{key:"getUnpackVector",value:function(e){return im[e]}},{key:"pack",value:function(t,n){var r=[0,0,0,0],i=e.getUnpackVector(n),a=Math.floor((t+i[3])/i[2]);return r[2]=a%256,a=Math.floor(a/256),r[1]=a%256,a=Math.floor(a/256),r[0]=a,r}}]),e}();Wi(am,"DEMData"),Wi(tm,"DemMinMaxQuadTree",{omit:["dem"]});var om=function(){function e(t,n){v(this,e),this.max=t,this.onRemove=n,this.reset()}return g(e,[{key:"reset",value:function(){for(var e in this.data){var t,n=d(this.data[e]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}}catch(i){n.e(i)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var a={value:t,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout((function(){r.remove(e,a)}),n)),this.data[i].push(a),this.order.push(i),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var n in this.data){var r,i=d(this.data[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;e(a.value)||t.push(a)}}catch(u){i.e(u)}finally{i.f()}}for(var o=0,s=t;o<s.length;o++){var l=s[o];this.remove(l.value.tileID,l)}}}]),e}(),sm=g((function e(t,n,r){v(this,e),this.func=t,this.mask=n,this.range=r}));sm.ReadOnly=!1,sm.ReadWrite=!0,sm.disabled=new sm(519,sm.ReadOnly,[0,1]);var lm=7680,um=g((function e(t,n,r,i,a,o){v(this,e),this.test=t,this.ref=n,this.mask=r,this.fail=i,this.depthFail=a,this.pass=o}));um.disabled=new um({func:519,mask:0},0,0,lm,lm,lm);var cm=g((function e(t,n,r){v(this,e),this.blendFunction=t,this.blendColor=n,this.mask=r}));cm.Replace=[1,0],cm.disabled=new cm(cm.Replace,Pt.transparent,[!1,!1,!1,!1]),cm.unblended=new cm(cm.Replace,Pt.transparent,[!0,!0,!0,!0]),cm.alphaBlended=new cm([1,771],Pt.transparent,[!0,!0,!0,!0]);var hm=1029,dm=2305,fm=g((function e(t,n,r){v(this,e),this.enable=t,this.mode=n,this.frontFace=r}));fm.disabled=new fm(!1,hm,dm),fm.backCCW=new fm(!0,hm,dm),fm.backCW=new fm(!0,hm,2304),fm.frontCW=new fm(!0,1028,2304),fm.frontCCW=new fm(!0,1028,dm);var pm=function(e){p(n,e);var t=m(n);function n(e,r,a){var o;return v(this,n),(o=t.call(this)).id=e,o._onlySymbols=a,r.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),r.on("error",(function(){o._sourceErrored=!0})),o._source=r,o._tiles={},o._cache=new om(0,o._unloadTile.bind(i(o))),o._timers={},o._cacheTimers={},o._minTileCacheSize=r.minTileCacheSize,o._maxTileCacheSize=r.maxTileCacheSize,o._loadedParentTiles={},o._coveredTiles={},o._state=new Kp,o._isRaster="raster"===o._source.type||"raster-dem"===o._source.type||"custom"===o._source.type&&"raster"===o._source._dataType,o}return g(n,[{key:"onAdd",value:function(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){if(this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._source.prepareTile)for(var t in this._tiles){var n=this._tiles[t];this._source.prepareTile(n)&&this.map.painter.terrain&&this.map.painter.terrain._clearRenderCacheForTile(this.id,n.tileID),n.upload(e),n.prepare(this.map.style.imageManager)}else for(var r in this._tiles){var i=this._tiles[r];i.upload(e),i.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return P(this._tiles).map((function(e){return e.tileID})).sort(mm).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(e){var t=this,n=[];for(var r in this._tiles)this._isIdRenderable(+r,e)&&n.push(this._tiles[r]);return e?n.sort((function(e,n){var r=e.tileID,i=n.tileID,a=new y(r.canonical.x,r.canonical.y)._rotate(t.transform.angle),o=new y(i.canonical.x,i.canonical.y)._rotate(t.transform.angle);return r.overscaledZ-i.overscaledZ||o.y-a.y||o.x-a.x})).map((function(e){return e.tileID.key})):n.map((function(e){return e.tileID})).sort(mm).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}},{key:"_reloadTile",value:function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}},{key:"_tileLoaded",value:function(e,t,n,r){if(r)if(e.state="errored",404!==r.status)this._source.fire(new rt(r,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){var i=this.map.painter.terrain;this.update(this.transform,i.getScaledDemTileSize(),!0),i.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=ce.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new nt("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var i=this.getTileByID(r);a(e,i),a(i,e)}}function a(e,t){if(e.dem&&!e.dem.borderReady){e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,n,r){for(var i in this._tiles){var a=this._tiles[i];if(!(r[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>n)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var l=o;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){r[o.key]=o;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var r=e.overscaledZ-1;r>=t;r--){var i=e.scaledTo(r),a=this._getLoadedTile(i);if(a)return a}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}},{key:"updateCacheSize",value:function(e,t){t=t||this._source.tileSize;var n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),a="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(o)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(+o,this._tiles[o])}}},{key:"update",value:function(e,t,r){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||r)){var a;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new Yc(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(a=a.filter((function(e){return i._source.hasTile(e)})))):a=[];var o=this._updateRetainedTiles(a);if(vm(this._source.type)&&0!==a.length){for(var s={},l={},u=0,c=Object.keys(o);u<c.length;u++){var h=c[u],f=o[h],p=this._tiles[h];if(p&&!(p.fadeEndTime&&p.fadeEndTime<=ce.now())){var m=this.findLoadedParent(f,Math.max(f.overscaledZ-n.maxOverzooming,this._source.minzoom));m&&(this._addTile(m.tileID),s[m.tileID.key]=m.tileID),l[h]=f}}var v=a[a.length-1].overscaledZ;for(var g in this._tiles){var y=this._tiles[g];if(!o[g]&&y.hasData())for(var _=y.tileID;_.overscaledZ>v;){_=_.scaledTo(_.overscaledZ-1);var x=this._tiles[_.key];if(x&&x.hasData()&&l[_.key]){o[g]=y.tileID;break}}}for(var b in s)o[b]||(this._coveredTiles[b]=!0,o[b]=s[b])}for(var w in o)this._tiles[w].clearFadeHold();var k,T=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n}(this._tiles,o),S=d(T);try{for(S.s();!(k=S.n()).done;){var E=k.value,C=this._tiles[E];C.hasSymbolBuckets&&!C.holdingForFade()?C.setHoldDuration(this.map._fadeDuration):C.hasSymbolBuckets&&!C.symbolFadeFinished()||this._removeTile(+E)}}catch(A){S.e(A)}finally{S.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}},{key:"_updateRetainedTiles",value:function(e){var t={};if(0===e.length)return t;var r,i={},a=e.reduce((function(e,t){return Math.min(e,t.overscaledZ)}),1/0),o=e[0].overscaledZ,s=Math.max(o-n.maxOverzooming,this._source.minzoom),l=Math.max(o+n.maxUnderzooming,this._source.minzoom),u={},c=d(e);try{for(c.s();!(r=c.n()).done;){var h=r.value,f=this._addTile(h);t[h.key]=h,f.hasData()||a<this._source.maxzoom&&(u[h.key]=h)}}catch(T){c.e(T)}finally{c.f()}this._retainLoadedChildren(u,a,l,t);var p,m=d(e);try{for(m.s();!(p=m.n()).done;){var v=p.value,g=this._tiles[v.key];if(!g.hasData()){if(v.canonical.z>=this._source.maxzoom){var y=v.children(this._source.maxzoom)[0],_=this.getTile(y);if(_&&_.hasData()){t[y.key]=y;continue}}else{var x=v.children(this._source.maxzoom);if(t[x[0].key]&&t[x[1].key]&&t[x[2].key]&&t[x[3].key])continue}for(var b=g.wasRequested(),w=v.overscaledZ-1;w>=s;--w){var k=v.scaledTo(w);if(i[k.key])break;if(i[k.key]=!0,!(g=this.getTile(k))&&b&&(g=this._addTile(k)),g&&(t[k.key]=k,b=g.wasRequested(),g.hasData()))break}}}}catch(T){m.e(T)}finally{m.f()}return t}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,r=this._tiles[e].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var a=0,o=t;a<o.length;a++){var s=o[a];this._loadedParentTiles[s]=n}}}},{key:"_addTile",value:function(e){var t=this._tiles[e.key];if(t)return this._source.prepareTile&&this._source.prepareTile(t),t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var n=Boolean(t);if(!n){var r=this.map?this.map.painter:null;t=new Xp(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._source.prepareTile&&this._source.prepareTile(t)||this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new nt("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}},{key:"_setTileReloadTimer",value:function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),r))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}},{key:"tilesIn",value:function(e,t,n){var r=[],i=this.transform;if(!i)return r;var a="globe"===i.projection.name,o=Us(i.center.lng);for(var s in this._tiles){var l=this._tiles[s];if(n&&l.clearQueryDebugViz(),!l.holdingForFade()){var u=void 0;if(a){var h=l.tileID.canonical;if(0===h.z){var f=[Math.abs(A.apply(void 0,[o].concat(c(gm(h,-1))))-o),Math.abs(A.apply(void 0,[o].concat(c(gm(h,1))))-o)];u=[0,2*f.indexOf(Math.min.apply(Math,f))-1]}else{var p=[Math.abs(A.apply(void 0,[o].concat(c(gm(h,-1))))-o),Math.abs(A.apply(void 0,[o].concat(c(gm(h,0))))-o),Math.abs(A.apply(void 0,[o].concat(c(gm(h,1))))-o)];u=[p.indexOf(Math.min.apply(Math,p))-1]}}else u=[0];var m,v=d(u);try{for(v.s();!(m=v.n()).done;){var g=m.value,y=e.containsTile(l,i,t,g);y&&r.push(y)}}catch(_){v.e(_)}finally{v.f()}}}return r}},{key:"getVisibleCoordinates",value:function(e){var t,n=this,r=this.getRenderableIds(e).map((function(e){return n._tiles[e].tileID})),i=d(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped())}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(vm(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=ce.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}},{key:"removeFeatureState",value:function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,n){var r=this._tiles[e];r&&r.setDependencies(t,n)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))}},{key:"_preloadTiles",value:function(e,t){var n,r=this,i=new Map,a=Array.isArray(e)?e:[e],o=this.map.painter.terrain,s=this.usedForTerrain&&o?o.getScaledDemTileSize():this._source.tileSize,l=d(a);try{for(l.s();!(n=l.n()).done;){var u,c=n.value,h=c.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),f=d(h);try{for(f.s();!(u=f.n()).done;){var p=u.value;i.set(p.key,p)}}catch(m){f.e(m)}finally{f.f()}this.usedForTerrain&&c.updateElevation(!1)}}catch(m){l.e(m)}finally{l.f()}B(Array.from(i.values()),(function(e,t){var n=new Xp(e,r._source.tileSize*e.overscaleFactor(),r.transform.tileZoom,r.map.painter,r._isRaster);r._loadTile(n,(function(e){"raster-dem"===r._source.type&&n.dem&&r._backfillDEM(n),t(e,n)}))}),t)}}]),n}(it);function mm(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function vm(e){return"raster"===e||"image"===e||"video"===e}function gm(e,t){var n=1<<e.z;return[e.x/n+t,(e.x+1)/n+t]}pm.maxOverzooming=10,pm.maxUnderzooming=3;var ym=function(){function e(t,n,r){v(this,e),this._demTile=t,this._dem=this._demTile.dem,this._scale=n,this._offset=r}return g(e,[{key:"tileCoordToPixel",value:function(e,t){var n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(n);return new y(r,i)}},{key:"getElevationAt",value:function(e,t,n,r){var i=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],o=Math.floor(i),s=Math.floor(a),l=this._dem;return r=!!r,n?In(In(l.get(o,s,r),l.get(o,s+1,r),a-s),In(l.get(o+1,s,r),l.get(o+1,s+1,r),a-s),i-o):l.get(o,s,r)}},{key:"getElevationAtPixel",value:function(e,t,n){return this._dem.get(e,t,!!n)}},{key:"getMeterToDEM",value:function(e){return(1<<this._demTile.tileID.canonical.z)*Hs(1,e)*this._dem.stride}}],[{key:"create",value:function(t,n,r){var i=r||t.findDEMTileFor(n);if(i&&i.dem){var a=i.dem,o=i.tileID,s=1<<n.canonical.z-o.canonical.z;return new e(i,i.tileSize/Os/s,[(n.canonical.x/s-o.canonical.x)*a.dim,(n.canonical.y/s-o.canonical.y)*a.dim])}}}]),e}(),_m=function(){function e(t,n){v(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Gi(Os,16,0),this.featureIndexArray=new Jo,this.promoteId=n}return g(e,[{key:"insert",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,a);for(var s=this.grid,l=0;l<t.length;l++){for(var u=t[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var d=u[h];c[0]=Math.min(c[0],d.x),c[1]=Math.min(c[1],d.y),c[2]=Math.max(c[2],d.x),c[3]=Math.max(c[3],d.y)}c[0]<Os&&c[1]<Os&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}}},{key:"loadVTLayers",value:function(){if(!this.vtLayers)for(var e in this.vtLayers=new Rc.VectorTile(new Mh(this.rawTileData)).layers,this.sourceLayerCoder=new Sp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={},this.vtLayers)this.vtFeatures[e]=[];return this.vtLayers}},{key:"query",value:function(e,t,n,r){var i=this;this.loadVTLayers();var a=e.params||{},o=di(a.filter),s=e.tileResult,l=e.transform,u=s.bufferedTilespaceBounds,c=this.grid.query(u.min.x,u.min.y,u.max.x,u.max.y,(function(e,t,n,r){return xl(s.bufferedTilespaceGeometry,e,t,n,r)}));c.sort(bm);var h=null;l.elevation&&c.length>0&&(h=ym.create(l.elevation,this.tileID));for(var d,f={},p=function(l){var u=c[l];if(u===d)return"continue";d=u;var p=i.featureIndexArray.get(u),m=null;i.loadMatchingFeature(f,p,o,a.layers,a.availableImages,t,n,r,(function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=al(t,i.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(s,t,r,m,i.z,e.transform,e.pixelPosMatrix,h,a)}))},m=0;m<c.length;m++)p(m);return f}},{key:"loadMatchingFeature",value:function(e,t,n,r,i,a,o,s,l){var u=t.featureIndex,c=t.bucketIndex,h=t.sourceLayerIndex,d=t.layoutVertexArrayOffset,f=this.bucketLayerIDs[c];if(!r||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,f)){var p=this.sourceLayerCoder.decode(h),m=this.vtLayers[p].feature(u);if(n.needGeometry){var v=ol(m,!0);if(!n.filter(new Wa(this.tileID.overscaledZ),v,this.tileID.canonical))return}else if(!n.filter(new Wa(this.tileID.overscaledZ),m))return;for(var g=this.getId(m,p),y=0;y<f.length;y++){var _=f[y];if(!(r&&r.indexOf(_)<0)){var x=a[_];if(x){var b={};void 0!==g&&s&&(b=s.getState(x.sourceLayer||"_geojsonTileLayer",g));var w=I({},o[_]);w.paint=xm(w.paint,x.paint,m,b,i),w.layout=xm(w.layout,x.layout,m,b,i);var k=!l||l(m,x,b,d);if(k){var T=new Cp(m,this.z,this.x,this.y,g);T.layer=w;var S=e[_];void 0===S&&(S=e[_]=[]),S.push({featureIndex:u,feature:T,intersectionZ:k})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,n,r,i,a,o,s){var l={};this.loadVTLayers();var u,c=di(i),h=d(e);try{for(h.s();!(u=h.n()).done;){var f=u.value;this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:f,layoutVertexArrayOffset:0},c,a,o,s,t)}}catch(p){h.e(p)}finally{h.f()}return l}},{key:"loadFeature",value:function(e){var t=e.featureIndex,n=e.sourceLayerIndex;this.loadVTLayers();var r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[t])return i[t];var a=this.vtLayers[r].feature(t);return i[t]=a,a}},{key:"hasLayer",value:function(e){var t,n=d(this.bucketLayerIDs);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=d(i);try{for(a.s();!(r=a.n()).done;)if(e===r.value)return!0}catch(o){a.e(o)}finally{a.f()}}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"getId",value:function(e,t){var n=e.id;return this.promoteId&&"boolean"==typeof(n=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]])&&(n=Number(n)),n}}]),e}();function xm(e,t,n,r,i){return V(e,(function(e,a){var o=t instanceof to?t.get(a):null;return o&&o.evaluate?o.evaluate(n,r,i):o}))}function bm(e,t){return t-e}Wi(_m,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});var wm=g((function e(t){v(this,e);var n={},r=[];for(var i in t){var a=t[i],o=n[i]={};for(var s in a.glyphs){var l=a.glyphs[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u=l.metrics.localGlyph?2:1,c={x:0,y:0,w:l.bitmap.width+2*u,h:l.bitmap.height+2*u};r.push(c),o[s]=c}}}var h=$h(r),d=h.w,f=h.h,p=new Eu({width:d||1,height:f||1});for(var m in t){var g=t[m];for(var y in g.glyphs){var _=g.glyphs[+y];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var x=n[m][y],b=_.metrics.localGlyph?2:1;Eu.copy(_.bitmap,p,{x:0,y:0},{x:x.x+b,y:x.y+b},_.bitmap)}}}this.image=p,this.positions=n}));Wi(wm,"GlyphAtlas");var km=function(){function e(t){v(this,e),this.tileID=new Yc(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=zf(t.tileID.canonical,t.projection),this.projection=t.projection}return g(e,[{key:"parse",value:function(e,t,n,r,i){var a=this;this.status="parsing",this.data=e,this.collisionBoxArray=new Uo;var o=new Sp(Object.keys(e.layers).sort()),s=new _m(this.tileID,this.promoteId);s.bucketLayerIDs=[];var l,u,c,h,f={},p=new wp(256,256),m={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:p,availableImages:n},v=t.familiesBySource[this.source];for(var g in v){var y=e.layers[g];if(y){var _,x=!1,b=!1,w=d(v[g]);try{for(w.s();!(_=w.n()).done;)"symbol"===_.value[0].type?x=!0:b=!0}catch(N){w.e(N)}finally{w.f()}if((!0!==this.isSymbolTile||x)&&(!1!==this.isSymbolTile||b)){1===y.version&&H('Vector tile source "'.concat(this.source,'" layer "').concat(g,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var k=o.encode(g),T=[],S=0;S<y.length;S++){var E=y.feature(S),C=s.getId(E,g);T.push({feature:E,id:C,index:S,sourceLayerIndex:k})}var A,R=d(v[g]);try{for(R.s();!(A=R.n()).done;){var M=A.value,B=M[0];void 0!==this.isSymbolTile&&"symbol"===B.type!==this.isSymbolTile||B.minzoom&&this.zoom<Math.floor(B.minzoom)||B.maxzoom&&this.zoom>=B.maxzoom||"none"!==B.visibility&&(Tm(M,this.zoom,n),(f[B.id]=B.createBucket({index:s.bucketLayerIDs.length,layers:M,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:k,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(T,m,this.tileID.canonical,this.tileTransform),s.bucketLayerIDs.push(M.map((function(e){return e.id}))))}}catch(N){R.e(N)}finally{R.f()}}}}p.trim();var I={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},z=V(m.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(z).length?r.send("getGlyphs",{uid:this.uid,stacks:z},(function(e,t){l||(l=e,u=t,O.call(a))}),void 0,!1,I):u={};var L=Object.keys(m.iconDependencies);L.length?r.send("getImages",{icons:L,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){l||(l=e,c=t,O.call(a))}),void 0,!1,I):c={};var D=Object.keys(m.patternDependencies);function O(){if(l)return i(l);if(u&&c&&h){var e=new wm(u),t=new td(c,h);for(var r in f){var a=f[r];a instanceof cp?(Tm(a.layers,this.zoom,n),qd(a,u,e.positions,c,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):a.hasPattern&&(a instanceof oh||a instanceof pc||a instanceof Dc)&&(Tm(a.layers,this.zoom,n),a.addFeatures(m,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:P(f).filter((function(e){return!e.isEmpty()})),featureIndex:s,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:p,imageAtlas:t,glyphMap:this.returnDependencies?u:null,iconMap:this.returnDependencies?c:null,glyphPositions:this.returnDependencies?e.positions:null})}}D.length?r.send("getImages",{icons:D,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){l||(l=e,h=t,O.call(a))}),void 0,!1,I):h={},O.call(this)}}]),e}();function Tm(e,t,n){var r,i=new Wa(t),a=d(e);try{for(a.s();!(r=a.n()).done;)r.value.recalculate(i,n)}catch(o){a.e(o)}finally{a.f()}}var Sm=function(){function e(t){v(this,e),this.entries={},this.scheduler=t}return g(e,[{key:"request",value:function(e,t,n,r){var i=this,a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){var o=h(a.result,2),s=o[0],l=o[1];return this.scheduler?this.scheduler.add((function(){r(s,l)}),t):r(s,l),function(){}}return a.callbacks.push(r),a.cancel||(a.cancel=n((function(n,r){a.result=[n,r];var o,s=d(a.callbacks);try{var l=function(){var e=o.value;i.scheduler?i.scheduler.add((function(){e(n,r)}),t):e(n,r)};for(s.s();!(o=s.n()).done;)l()}catch(u){s.e(u)}finally{s.f()}setTimeout((function(){return delete i.entries[e]}),3e3)}))),function(){a.result||(a.callbacks=a.callbacks.filter((function(e){return e!==r})),a.callbacks.length||(a.cancel(),delete i.entries[e]))}}}]),e}();function Em(e,t,n){var r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(function(t){var r=qe(e.request,(function(e,r,i,a){e?t(e):r&&t(null,{vectorTile:n?void 0:new Rc.VectorTile(new Mh(r)),rawData:r,cacheControl:i,expires:a})}));return function(){r.cancel(),t()}}),t)}e.ARRAY_TYPE=Rl,e.AUTH_ERR_MSG=ge,e.Aabb=vu,e.Actor=function(){function e(n,r,i){v(this,e),this.target=n,this.parent=r,this.mapId=i,this.callbacks={},this.cancelCallbacks={},F(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=X()?n:t,this.scheduler=new Tp}return g(e,[{key:"send",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[s]=n);var l=J(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:e,hasCallback:!!n,targetMapId:r,mustQueue:a,sourceMapId:this.mapId,data:Ji(t,l)},l),{cancel:function(){n&&delete i.callbacks[s],i.target.postMessage({id:s,type:"<cancel>",targetMapId:r,sourceMapId:i.mapId})}}}},{key:"receive",value:function(e){var t=this,n=e.data,r=n.id;if(r&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){var i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i.cancel()}else if(n.mustQueue||X()){var a=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((function(){return t.processTask(r,n)}),a&&a.metadata||{type:"message"})}else this.processTask(r,n)}},{key:"processTask",value:function(e,t){var n=this;if("<response>"===t.type){var r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(Qi(t.error)):r(null,Qi(t.data)))}else{var i=J(this.globalScope)?void 0:[],a=t.hasCallback?function(t,r){delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:t?Ji(t):null,data:Ji(r,i)},i)}:function(e){},o=Qi(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,o,a);else if(this.parent.getWorkerSource){var s=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,s[0],o.source)[s[1]](o,a)}else a(new Error("Could not find function ".concat(t.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}(),e.CanonicalTileID=Xc,e.Color=Pt,e.ColorMode=cm,e.CullFaceMode=fm,e.DEMData=am,e.DataConstantProperty=no,e.DedupedRequest=Sm,e.DepthMode=sm,e.EXTENT=Os,e.Elevation=function(){function e(){v(this,e)}return g(e,[{key:"isDataAvailableAtPoint",value:function(e){var t=this._source();if(!t||e.y<0||e.y>1)return!1;var n=t.getSource().maxzoom,r=1<<n,i=Math.floor(e.x),a=Math.floor((e.x-i)*r),o=Math.floor(e.y*r),s=this.findDEMTileFor(new Yc(n,i,n,a,o));return!(!s||!s.dem)}},{key:"getAtPointOrZero",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(e,t)||0}},{key:"getAtPoint",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];null==t&&(t=null);var r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;var i=r.getSource().maxzoom,a=1<<i,o=Math.floor(e.x),s=e.x-o,l=new Yc(i,o,i,Math.floor(s*a),Math.floor(e.y*a)),u=this.findDEMTileFor(l);if(!u||!u.dem)return t;var c=u.dem,h=1<<u.tileID.canonical.z,d=(s*h-u.tileID.canonical.x)*c.dim,f=(e.y*h-u.tileID.canonical.y)*c.dim,p=Math.floor(d),m=Math.floor(f);return(n?this.exaggeration():1)*In(In(c.get(p,m),c.get(p,m+1),f-m),In(c.get(p+1,m),c.get(p+1,m+1),f-m),d-p)}},{key:"getAtTileOffset",value:function(e,t,n){var r=1<<e.canonical.z;return this.getAtPointOrZero(new Js(e.wrap+(e.canonical.x+t/Os)/r,(e.canonical.y+n/Os)/r))}},{key:"getAtTileOffsetFunc",value:function(e,t,n,r){var i=this;return function(a){var o=i.getAtTileOffset(e,a.x,a.y),s=r.upVector(e.canonical,a.x,a.y);return Yl(s,s,o*r.upVectorScale(e.canonical,t,n).metersToTile),s}}},{key:"getForTilePoints",value:function(e,t,n,r){var i=this,a=ym.create(this,e,r);return!!a&&(t.forEach((function(e){e[2]=i.exaggeration()*a.getElevationAt(e[0],e[1],n)})),!0)}},{key:"getMinMaxForTile",value:function(e){var t=this.findDEMTileFor(e);if(!t||!t.dem)return null;for(var n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z,a=e.canonical.x/i-r.canonical.x,o=e.canonical.y/i-r.canonical.y,s=0,l=0;l<e.canonical.z-r.canonical.z&&!n.leaves[s];l++){a*=2,o*=2;var u=2*Math.floor(o)+Math.floor(a);s=n.childOffsets[s]+u,a%=1,o%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}},{key:"getMinElevationBelowMSL",value:function(){throw new Error("Pure virtual method called.")}},{key:"raycast",value:function(e,t,n){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(e){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(e){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),e}(),e.ErrorEvent=rt,e.EvaluationParameters=Wa,e.Event=nt,e.Evented=it,e.FillExtrusionBucket=Dc,e.Frustum=mu,e.FrustumCorners=pu,e.GLOBE_METERS_TO_ECEF=of,e.GLOBE_RADIUS=af,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GLOBE_ZOOM_THRESHOLD_MIN=5,e.GlobeSharedBuffers=function(){function e(t){v(this,e),this._createGrid(t),this._createPoles(t)}return g(e,[{key:"destroy",value:function(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();var e,t=d(this._poleSegments);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(o){t.e(o)}finally{t.f()}var n,r=d(this._gridSegments);try{for(r.s();!(n=r.n()).done;)n.value.destroy()}catch(o){r.e(o)}finally{r.f()}if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();var i,a=d(this._wireframeSegments);try{for(a.s();!(i=a.n()).done;)i.value.destroy()}catch(o){a.e(o)}finally{a.f()}}}},{key:"_createGrid",value:function(e){for(var t=new mo,n=new Bo,r=65,i=0;i<r;i++)for(var a=0;a<r;a++)t.emplaceBack(a,i);this._gridSegments=[];for(var o=0,s=0;o<sf.length;o++){for(var l=sf[o],u=0;u<l;u++)for(var c=0;c<64;c++){var h=u*r+c;n.emplaceBack(h+1,h,h+r),n.emplaceBack(h+r,h+r+1,h+1)}var d=64*l*2;this._gridSegments.push(Ds.simpleSegment(0,s,(l+1)*r,d)),s+=d}this._gridBuffer=e.createVertexBuffer(t,rf.members),this._gridIndexBuffer=e.createIndexBuffer(n,!0)}},{key:"_createPoles",value:function(e){for(var t=new Bo,n=0;n<=64;n++)t.emplaceBack(0,n+1,n+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);var r=new Lo,i=new Lo;this._poleSegments=[];for(var a=0,o=0;a<5;a++){var s=360/(1<<a);r.emplaceBack(0,-af,0,.5,0),i.emplaceBack(0,-af,0,.5,1);for(var l=0;l<=64;l++){var u=l/64,c=In(0,s,u),d=xf(Bf,Pf,c,af),f=h(d,3),p=f[0],m=f[1],v=f[2];r.emplaceBack(p,m,v,u,0),i.emplaceBack(p,m,v,u,1)}this._poleSegments.push(Ds.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(r,tf,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(i,tf,!1)}},{key:"getGridBuffers",value:function(e){return[this._gridBuffer,this._gridIndexBuffer,this._gridSegments[e]]}},{key:"getPoleBuffers",value:function(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}},{key:"getWirefameBuffers",value:function(e,t){if(!this._wireframeSegments){var n=new Oo,r=64,i=r+1;this._wireframeSegments=[];for(var a=0,o=0;a<sf.length;a++){for(var s=sf[a],l=0;l<s;l++)for(var u=0;u<r;u++){var c=l*i+u;n.emplaceBack(c,c+1),n.emplaceBack(c,c+i),n.emplaceBack(c,c+i+1)}var h=s*r*3;this._wireframeSegments.push(Ds.simpleSegment(0,o,(s+1)*i,h)),o+=h}this._wireframeIndexBuffer=e.createIndexBuffer(n)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}}]),e}(),e.GlyphManager=Bd,e.ImagePosition=ed,e.LineAtlas=wp,e.LngLat=js,e.LngLatBounds=Ns,e.LocalGlyphMode=Md,e.MAX_MERCATOR_LATITUDE=Ks,e.MercatorCoordinate=Js,e.ONE_EM=yh,e.OverscaledTileID=Yc,e.Properties=so,e.RGBAImage=Cu,e.Ray=fu,e.RequestManager=function(){function e(t,n,r){v(this,e),this._transformRequestFn=t,this._customAccessToken=n,this._silenceAuthErrors=!!r,this._createSkuToken()}return g(e,[{key:"_createSkuToken",value:function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",ve,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeStyleURL",value:function(e,t){if(!ye(e))return e;var n=be(e);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeGlyphsURL",value:function(e,t){if(!ye(e))return e;var n=be(e);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSourceURL",value:function(e,t,n,r){if(!ye(e))return e;var i=be(e);return i.path="/v4/".concat(i.authority,".json"),i.params.push("secure"),n&&i.params.push("language=".concat(n)),r&&i.params.push("worldview=".concat(r)),this._makeAPIURL(i,this._customAccessToken||t)}},{key:"normalizeSpriteURL",value:function(e,t,n,r){var i=be(e);return ye(e)?(i.path="/styles/v1".concat(i.path,"/sprite").concat(t).concat(n),this._makeAPIURL(i,this._customAccessToken||r)):(i.path+="".concat(t).concat(n),we(i))}},{key:"normalizeTileURL",value:function(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!ye(e))return e;var r=be(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||n&&"raster"!==r.authority&&512===n?"@2x":"").concat(de.supported?".webp":"$1")),"raster"===r.authority?r.path="/".concat(he.RASTER_URL_PREFIX).concat(r.path):(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/".concat(he.TILE_URL_VERSION).concat(r.path));var i=this._customAccessToken||function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.match(/^access_token=(.*)$/);if(r)return r[1]}}catch(i){n.e(i)}finally{n.f()}return null}(r.params)||he.ACCESS_TOKEN;return he.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(r,i)}},{key:"canonicalizeTileURL",value:function(e,t){var n=be(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;var r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+="raster/".concat(n.path.replace("/".concat(he.RASTER_URL_PREFIX,"/"),"")):r+="tiles/".concat(n.path.replace("/".concat(he.TILE_URL_VERSION,"/"),""));var i=n.params;return t&&(i=i.filter((function(e){return!e.match(/^access_token=/)}))),i.length&&(r+="?".concat(i.join("&"))),r}},{key:"canonicalizeTileset",value:function(e,t){var n,r=!!t&&ye(t),i=[],a=d(e.tiles||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value;_e(o)?i.push(this.canonicalizeTileURL(o,r)):i.push(o)}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"_makeAPIURL",value:function(e,t){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=be(he.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){var i=e.params.indexOf("secure");i>=0&&e.params.splice(i,1)}if("/"!==r.path&&(e.path="".concat(r.path).concat(e.path)),!he.REQUIRE_ACCESS_TOKEN)return we(e);if(t=t||he.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token=".concat(t||"")),we(e)}}]),e}(),e.ResourceType=Ze,e.SegmentVector=Ds,e.SourceCache=pm,e.StencilMode=um,e.StructArrayLayout1ui2=No,e.StructArrayLayout2f1f2i16=Ao,e.StructArrayLayout2i4=mo,e.StructArrayLayout2ui4=Oo,e.StructArrayLayout3f12=Mo,e.StructArrayLayout3ui6=Bo,e.StructArrayLayout4i8=go,e.StructArrayLayout5f20=Lo,e.Texture=bp,e.Tile=Xp,e.Transitionable=Ya,e.Uniform1f=fs,e.Uniform1i=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).current=0,r}return g(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}}]),n}(ds),e.Uniform2f=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).current=[0,0],r}return g(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}}]),n}(ds),e.Uniform3f=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).current=[0,0,0],r}return g(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}}]),n}(ds),e.Uniform4f=ps,e.UniformColor=ms,e.UniformMatrix2f=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).current=ys,r}return g(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t))for(var r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}}]),n}(ds),e.UniformMatrix3f=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).current=gs,r}return g(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t))for(var r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}}]),n}(ds),e.UniformMatrix4f=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).current=vs,r}return g(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var r=1;r<16;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}}]),n}(ds),e.UnwrappedTileID=Kc,e.ValidationError=ri,e.VectorTileWorkerSource=function(e){p(n,e);var t=m(n);function n(e,r,i,a,o){var s;return v(this,n),(s=t.call(this)).actor=e,s.layerIndex=r,s.availableImages=i,s.loadVectorData=o||Em,s.loading={},s.loaded={},s.deduped=new Sm(e.scheduler),s.isSpriteLoaded=a,s.scheduler=e.scheduler,s}return g(n,[{key:"loadTile",value:function(e,t){var n=this,r=e.uid,i=e&&e.request,a=i&&i.collectResourceTiming,o=this.loading[r]=new km(e);o.abort=this.loadVectorData(e,(function(s,l){var u=!n.loading[r];if(delete n.loading[r],u||s||!l)return o.status="done",u||(n.loaded[r]=o),t(s);var c=l.rawData,h={};l.expires&&(h.expires=l.expires),l.cacheControl&&(h.cacheControl=l.cacheControl),o.vectorTile=l.vectorTile||new Rc.VectorTile(new Mh(c));var d=function(){o.parse(o.vectorTile,n.layerIndex,n.availableImages,n.actor,(function(e,n){if(e||!n)return t(e);var r={};if(a){var o=te(i);o.length>0&&(r.resourceTiming=JSON.parse(JSON.stringify(o)))}t(null,I({rawTileData:c.slice(0)},n,h,r))}))};n.isSpriteLoaded?d():n.once("isSpriteLoaded",(function(){n.scheduler?n.scheduler.add(d,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):d()})),n.loaded=n.loaded||{},n.loaded[r]=o}))}},{key:"reloadTile",value:function(e,t){var n=this,r=this.loaded,i=e.uid,a=this;if(r&&r[i]){var o=r[i];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=zf(e.tileID.canonical,e.projection);var s=function(e,r){var i=o.reloadCallback;i&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,n.availableImages,a.actor,i)),t(e,r)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}},{key:"abortTile",value:function(e,t){var n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}},{key:"removeTile",value:function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}}]),n}(it),e.WritingMode=nd,e.ZoomHistory=$i,e.add=Hl,e.addDynamicAttributes=op,e.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-s*u,e[1]=i*u-r*c,e[2]=r*s-i*o,e[3]=s*l-a*c,e[4]=n*c-i*l,e[5]=i*a-n*s,e[6]=a*u-o*l,e[7]=r*l-n*u,e[8]=n*o-r*a,e},e.asyncAll=B,e.bezier=E,e.bindAll=F,e.boundsAttributes=qp,e.bufferConvexPolygon=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=M(r-1,-1,e.length-1),a=M(r+1,-1,e.length-1),o=e[r],s=e[a],l=e[i].sub(o).unit(),u=s.sub(o).unit(),c=u.angleWithSep(l.x,l.y),h=l.add(u).unit().mult(-1*t/Math.sin(c/2));n.push(o.add(h))}return n},e.cacheEntryPossiblyAdded=function(e){++Ve>ze&&(e.getActor().send("enforceCacheSizeLimit",Ie),Ve=0)},e.calculateGlobeLabelMatrix=function(e,t){var n=e.point,r=Cf(n.x,n.y,e.worldSize/e._pixelsPerMercatorPixel,0,0);return Il(r,r,Ef(pf(t)))},e.calculateGlobeMatrix=function(e){var t=e.point,n=t.x,r=t.y,i=e._center,a=i.lng,o=i.lat;return Cf(n,r,e.worldSize,a,o)},e.calculateGlobeMercatorMatrix=function(e){var t=e.pixelsPerMeter,n=t/Hs(1,e.center.lat),r=Bl(new Float64Array(16));return zl(r,r,[e.point.x,e.point.y,0]),Ll(r,r,[n,n,t]),Float32Array.from(r)},e.circumferenceAtLatitude=Zs,e.clamp=A,e.clearTileCache=function(e){var t=Oe(),n=[];for(var r in Le)t&&n.push(t.delete(r)),delete Le[r];e&&Promise.all(n).catch(e).then((function(){return e()}))},e.clipLine=Ed,e.clone=function(e){var t=new Rl(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=U,e.collisionCircleLayout=gh,e.config=he,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new Rl(16);return Rl!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=Ml,e.createExpression=Jr,e.createLayout=fo,e.createStyleLayer=function(e){return"custom"===e.type?new gp(e):new xp[e.type](e)},e.cross=eu,e.degToRad=w,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=$l,e.ease=C,e.easeCubicInOut=S,e.emitValidationErrors=Ui,e.endsWith=j,e.enforceCacheSizeLimit=function(e){for(var t in Le)Ne(t),Le[t].then((function(t){t.keys().then((function(n){for(var r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=bh,e.evaluateSizeForZoom=wh,e.evaluateVariableOffset=Hd,e.evented=Ua,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=ce,e.exported$1=de,e.extend=I,e.extend$1=ot,e.fillExtrusionHeightLift=Uc,e.filterObject=Z,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,u=n*o,c=r*o,h=r*s,d=i*o,f=i*s,p=i*l,m=a*o,v=a*s,g=a*l;return e[0]=1-h-p,e[1]=c+g,e[2]=d-v,e[3]=0,e[4]=c-g,e[5]=1-u-p,e[6]=f+m,e[7]=0,e[8]=d+v,e[9]=f-m,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=Nl,e.furthestTileCorner=function(e){var t=Math.round((e+45+360)%360/90)%4;return T[t]},e.getAABBPointSquareDist=function(e,t,n){for(var r=0,i=0;i<2;++i){var a=n?n[i]:0;e[i]>a&&(r+=(e[i]-a)*(e[i]-a)),t[i]<a&&(r+=(a-t[i])*(a-t[i]))}return r},e.getAnchorAlignment=pd,e.getAnchorJustification=Wd,e.getBounds=function(e){var t,n=1/0,r=1/0,i=-1/0,a=-1/0,o=d(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),a=Math.max(a,s.y)}}catch(l){o.e(l)}finally{o.f()}return{min:new y(n,r),max:new y(i,a)}},e.getColumn=$,e.getGridMatrix=function(e,t,n){var r=t.getNorth(),i=t.getSouth(),a=t.getWest(),o=.015625;return[0,(t.getEast()-a)*o,1<<e.z,(i-r)/sf[n],0,e.y,r,a,o]},e.getImage=$e,e.getJSON=function(e,t){return He(I(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){var t=80.051129;e=A(e,-80.051129,t)/t*90;var n=Math.pow(Math.abs(Math.sin(w(e))),3);return Math.round(n*(sf.length-1))},e.getMapSessionAPI=Be,e.getPerformanceMeasurement=te,e.getProjection=tp,e.getRTLTextPluginStatus=Ga,e.getReferrer=Ge,e.getTilePoint=function(e,t){var n=t.x,r=t.y;return new y(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*e.scale-e.x)*Os,(r*e.scale-e.y)*Os)},e.getTileVec3=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Gl(((t.x-n)*e.scale-e.x)*Os,(t.y*e.scale-e.y)*Os,Xs(t.z,t.y))},e.getVideo=function(e,n){var r=t.document.createElement("video");r.muted=!0,r.onloadstart=function(){n(null,r)};for(var i=0;i<e.length;i++){var a=t.document.createElement("source");Ke(e[i])||(r.crossOrigin="Anonymous"),a.src=e[i],r.appendChild(a)}return{cancel:function(){}}},e.globeCenterToScreenPoint=function(e){var t=[0,0,0],n=Bl(new Float64Array(16));return Il(n,e.pixelMatrix,e.globeMatrix),tu(t,t,n),new y(t[0],t[1])},e.globeDenormalizeECEF=Ef,e.globeECEFOrigin=function(e,t){var n=[0,0,0];return tu(n,n,Sf(pf(t.canonical))),tu(n,n,e),n},e.globeNormalizeECEF=Sf,e.globePixelsToTileUnits=function(e,t){return Os/(512*Math.pow(2,e))*kf(pf(t))},e.globePoleMatrixForTile=function(e,t,n){var r=Bl(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return Ol(r,n.globeMatrix,i),Float32Array.from(r)},e.globeTileBounds=pf,e.globeTiltAtLngLat=Rf,e.globeToMercatorTransition=Af,e.globeUseCustomAntiAliasing=function(e,t,n){var r=Af(n.zoom),i=e.style.map._antialias,a=!!t.extStandardDerivatives,o=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===r&&!i&&!o&&a},e.identity=Bl,e.identity$1=cu,e.invert=Pl,e.isFullscreen=function(){return!!t.document.fullscreenElement||!!t.document.webkitFullscreenElement},e.isLngLatBehindGlobe=function(e,t){return Rf(e,t)>Math.PI/2*1.01},e.isMapAuthenticated=function(e){return Pe.has(e)},e.isMapboxURL=ye,e.isSafariWithAntialiasingBug=function(e){var t=e.navigator?e.navigator.userAgent:null;return!!J(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=Ws,e.len=ou,e.length=Ul,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.loadVectorTile=Em,e.makeRequest=He,e.mapValue=function(e,t,n,r,i){return A((e-t)/(n-t)*(i-r)+r,r,i)},e.mercatorScale=Ys,e.mercatorXfromLng=Us,e.mercatorYfromLat=Gs,e.mercatorZfromAltitude=Hs,e.mul=jl,e.mul$1=au,e.multiply=Il,e.multiply$1=function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],d=n[0],f=n[1],p=n[2],m=n[3],v=n[4],g=n[5],y=n[6],_=n[7],x=n[8];return e[0]=d*r+f*o+p*u,e[1]=d*i+f*s+p*c,e[2]=d*a+f*l+p*h,e[3]=m*r+v*o+g*u,e[4]=m*i+v*s+g*c,e[5]=m*a+v*l+g*h,e[6]=y*r+_*o+x*u,e[7]=y*i+_*s+x*c,e[8]=y*a+_*l+x*h,e},e.multiply$2=Wl,e.nextPowerOfTwo=O,e.normalize=Ql,e.normalize$1=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o,e},e.number=In,e.ortho=function(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*u,e[15]=1,e},e.pbf=Mh,e.perspective=function(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(a=1/(r-i)),e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=qa,e.pointGeometry=y,e.polygonContainsPoint=_l,e.polygonIntersectsBox=xl,e.polygonIntersectsPolygon=cl,e.polygonizeBounds=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=new y(n,n),a=e.sub(i),o=t.add(i),s=[a,new y(o.x,a.y),o,new y(a.x,o.y)];return r&&s.push(a.clone()),s},e.posAttributes=rf,e.postMapLoadEvent=Re,e.postTurnstileEvent=Ce,e.potpack=$h,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=k,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Fa,pluginURL:ja}),Ua.on("pluginStateChange",e),e},e.removeAuthState=function(e){Pe.delete(e)},e.renderColorRamp=Ru,e.resample=$s,e.rotateX=Dl,e.rotateX$1=hu,e.rotateY=Ol,e.rotateY$1=du,e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*r,e[1]=o*i+c*r,e[2]=s*i+h*r,e[3]=l*i+d*r,e[4]=u*i-a*r,e[5]=c*i-o*r,e[6]=h*i-s*r,e[7]=d*i-l*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e},e.scale=Ll,e.scale$1=su,e.scale$2=Yl,e.scaleAndAdd=Jl,e.setCacheLimits=function(e,t){Ie=e,ze=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Fa===La||Fa===Da||Fa===Oa)throw new Error("setRTLTextPlugin cannot be called multiple times.");ja=ce.resolveURL(e),Fa=La,Na=t,Za(),n||Ha()},e.smoothstep=R,e.spec=at,e.storeAuthState=function(e,t){t?Pe.add(e):Pe.delete(e)},e.sub=iu,e.subtract=ql,e.symbolSize=kh,e.tileAABB=function(e,t,n,r,i,a,o,s,l){if("globe"===l.name)return gf(e,t,new Xc(n,r,i));var u=zf({z:n,x:r,y:i},l);return new vu([(a+u.x/u.scale)*t,t*(u.y/u.scale),o],[(a+u.x2/u.scale)*t,t*(u.y2/u.scale),s])},e.tileCornersToBounds=yf,e.tileTransform=zf,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},e.transformMat4=tu,e.transformMat4$1=lu,e.transformQuat=nu,e.transitionTileAABBinECEF=mf,e.translate=zl,e.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Va,e.uniqueId=L,e.updateGlobeVertexNormal=function(e,t,n,r,i){var a=5*t+2;e.float32[a+0]=n,e.float32[a+1]=r,e.float32[a+2]=i},e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateFilter=function(e){return Zi(Ti(e))},e.validateFog=function(e){return Zi(Li(e))},e.validateLayer=function(e){return Zi(Ri(e))},e.validateLight=function(e){return Zi(Ii(e))},e.validateSource=function(e){return Zi(Pi(e))},e.validateStyle=Fi,e.validateTerrain=function(e){return Zi(zi(e))},e.values=P,e.vectorTile=Rc,e.version=ue,e.warnOnce=H,e.window=t,e.wrap=M})),y(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){var n,r="[",i=d(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r+="".concat(t(a),",")}}catch(c){i.e(c)}finally{i.f()}return"".concat(r,"]")}var o,s="{",l=d(Object.keys(e).sort());try{for(l.s();!(o=l.n()).done;){var u=o.value;s+="".concat(u,":").concat(t(e[u]),",")}}catch(c){l.e(c)}finally{l.f()}return"".concat(s,"}")}function n(n){var r,i="",a=d(e.refProperties);try{for(a.s();!(r=a.n()).done;){var o=r.value;i+="/".concat(t(n[o]))}}catch(s){a.e(s)}finally{a.f()}return i}var r=function(){function t(e){v(this,t),this.keyCache={},e&&this.replace(e)}return g(t,[{key:"replace",value:function(e){this._layerConfigs={},this._layers={},this.update(e,[])}},{key:"update",value:function(t,r){var i,a=this,o=d(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;this._layerConfigs[s.id]=s,(this._layers[s.id]=e.createStyleLayer(s)).compileFilter(),this.keyCache[s.id]&&delete this.keyCache[s.id]}}catch(b){o.e(b)}finally{o.f()}var l,u=d(r);try{for(u.s();!(l=u.n()).done;){var c=l.value;delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}}catch(b){u.e(b)}finally{u.f()}this.familiesBySource={};var h,f=function(e,t){for(var r={},i=0;i<e.length;i++){var a=t&&t[e[i].id]||n(e[i]);t&&(t[e[i].id]=a);var o=r[a];o||(o=r[a]=[]),o.push(e[i])}var s=[];for(var l in r)s.push(r[l]);return s}(e.values(this._layerConfigs),this.keyCache),p=d(f);try{for(p.s();!(h=p.n()).done;){var m=h.value.map((function(e){return a._layers[e.id]})),v=m[0];if("none"!==v.visibility){var g=v.source||"",y=this.familiesBySource[g];y||(y=this.familiesBySource[g]={});var _=v.sourceLayer||"_geojsonTileLayer",x=y[_];x||(x=y[_]=[]),x.push(m)}}}catch(b){p.e(b)}finally{p.f()}}}]),t}(),i=function(){function t(){v(this,t)}return g(t,[{key:"loadTile",value:function(t,n){var r=t.uid,i=t.encoding,a=t.rawImageData,o=t.padding,s=t.buildQuadTree,l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap?this.getImageData(a,o):a;n(null,new e.DEMData(r,l,i,o<1,s))}},{key:"getImageData",value:function(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}]),t}(),a=function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)l(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)l(t.coordinates[r],n);return t};function l(e,t){if(0!==e.length){u(e[0],t);for(var n=1;n<e.length;n++)u(e[n],!t)}}function u(e,t){for(var n=0,r=0,i=0,a=e.length,o=a-1;i<a;o=i++){var s=(e[i][0]-e[o][0])*(e[o][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!t&&e.reverse()}var c=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,f=function(){function t(n){v(this,t),this._feature=n,this.extent=e.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))}return g(t,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var t,n=[],r=d(this._feature.geometry);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push([new e.pointGeometry(i[0],i[1])])}}catch(p){r.e(p)}finally{r.f()}return n}var a,o=[],s=d(this._feature.geometry);try{for(s.s();!(a=s.n()).done;){var l,u=a.value,c=[],h=d(u);try{for(h.s();!(l=h.n()).done;){var f=l.value;c.push(new e.pointGeometry(f[0],f[1]))}}catch(p){h.e(p)}finally{h.f()}o.push(c)}}catch(p){s.e(p)}finally{s.f()}return o}},{key:"toGeoJSON",value:function(e,t,n){return c.call(this,e,t,n)}}]),t}(),y=function(){function t(n){v(this,t),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=n.length,this._features=n}return g(t,[{key:"feature",value:function(e){return new f(this._features[e])}}]),t}(),_=e.vectorTile.VectorTileFeature,x=b;function b(e,t){this.options=t||{},this.features=e,this.length=e.length}function w(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}b.prototype.feature=function(e){return new w(this.features[e],this.options.extent)},w.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],i=[],a=0;a<r.length;a++)i.push(new e.pointGeometry(r[a][0],r[a][1]));this.geometry.push(i)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},w.prototype.toGeoJSON=_.prototype.toGeoJSON;var k=S,T=x;function S(t){var n=new e.pbf;return function(e,t){for(var n in e.layers)t.writeMessage(3,E,e.layers[n])}(t,n),n.finish()}function E(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,C,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var a=r.values;for(n=0;n<a.length;n++)t.writeMessage(4,P,a[n])}function C(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,A,e),t.writeVarintField(3,n.type),t.writeMessage(4,B,n)}function A(e,t){var n=e.feature,r=e.keys,i=e.values,a=e.keycache,o=e.valuecache;for(var s in n.properties){var l=n.properties[s],u=a[s];if(null!==l){void 0===u&&(r.push(s),a[s]=u=r.length-1),t.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,d=o[h];void 0===d&&(i.push(l),o[h]=d=i.length-1),t.writeVarint(d)}}}function R(e,t){return(t<<3)+(7&e)}function M(e){return e<<1^e>>31}function B(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,a=0,o=n.length,s=0;s<o;s++){var l=n[s],u=1;1===r&&(u=l.length),t.writeVarint(R(1,u));for(var c=3===r?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==r&&t.writeVarint(R(2,c-1));var d=l[h].x-i,f=l[h].y-a;t.writeVarint(M(d)),t.writeVarint(M(f)),i+=d,a+=f}3===r&&t.writeVarint(R(7,1))}}function P(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function I(e,t,n,r,i,a){if(!(i-r<=n)){var o=r+i>>1;z(e,t,o,r,i,a%2),I(e,t,n,r,o-1,a+1),I(e,t,n,o+1,i,a+1)}}function z(e,t,n,r,i,a){for(;i>r;){if(i-r>600){var o=i-r+1,s=n-r+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);z(e,t,n,Math.max(r,Math.floor(n-s*u/o+c)),Math.min(i,Math.floor(n+(o-s)*u/o+c)),a)}var h=t[2*n+a],d=r,f=i;for(L(e,t,r,n),t[2*i+a]>h&&L(e,t,r,i);d<f;){for(L(e,t,d,f),d++,f--;t[2*d+a]<h;)d++;for(;t[2*f+a]>h;)f--}t[2*r+a]===h?L(e,t,r,f):L(e,t,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}function L(e,t,n,r){D(e,n,r),D(t,2*n,2*r),D(t,2*n+1,2*r+1)}function D(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function O(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}k.fromVectorTileJs=S,k.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new x(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return S({layers:n})},k.GeoJSONWrapper=T;var N,F=function(e){return e[0]},j=function(e){return e[1]},V=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Float64Array;v(this,e),this.nodeSize=i,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,s=this.ids=new o(t.length),l=this.coords=new a(2*t.length),u=0;u<t.length;u++)s[u]=u,l[2*u]=n(t[u]),l[2*u+1]=r(t[u]);I(s,l,i,0,s.length-1,0)}return g(e,[{key:"range",value:function(e,t,n,r){return function(e,t,n,r,i,a,o){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var h=u.pop(),d=u.pop(),f=u.pop();if(d-f<=o)for(var p=f;p<=d;p++)s=t[2*p],l=t[2*p+1],s>=n&&s<=i&&l>=r&&l<=a&&c.push(e[p]);else{var m=Math.floor((f+d)/2);s=t[2*m],l=t[2*m+1],s>=n&&s<=i&&l>=r&&l<=a&&c.push(e[m]);var v=(h+1)%2;(0===h?n<=s:r<=l)&&(u.push(f),u.push(m-1),u.push(v)),(0===h?i>=s:a>=l)&&(u.push(m+1),u.push(d),u.push(v))}}return c}(this.ids,this.coords,e,t,n,r,this.nodeSize)}},{key:"within",value:function(e,t,n){return function(e,t,n,r,i,a){for(var o=[0,e.length-1,0],s=[],l=i*i;o.length;){var u=o.pop(),c=o.pop(),h=o.pop();if(c-h<=a)for(var d=h;d<=c;d++)O(t[2*d],t[2*d+1],n,r)<=l&&s.push(e[d]);else{var f=Math.floor((h+c)/2),p=t[2*f],m=t[2*f+1];O(p,m,n,r)<=l&&s.push(e[f]);var v=(u+1)%2;(0===u?n-i<=p:r-i<=m)&&(o.push(h),o.push(f-1),o.push(v)),(0===u?n+i>=p:r+i>=m)&&(o.push(f+1),o.push(c),o.push(v))}}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}}]),e}(),Z={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},U=Math.fround||(N=new Float32Array(1),function(e){return N[0]=+e,N[0]}),G=function(){function e(t){v(this,e),this.options=Q(Object.create(Z),t),this.trees=new Array(this.options.maxZoom+1)}return g(e,[{key:"load",value:function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom,a=t.nodeSize;n&&console.time("total time");var o="prepare ".concat(e.length," points");n&&console.time(o),this.points=e;for(var s=[],l=0;l<e.length;l++)e[l].geometry&&s.push(q(e[l],l));this.trees[i+1]=new V(s,$,ee,a,Float32Array),n&&console.timeEnd(o);for(var u=i;u>=r;u--){var c=+Date.now();s=this._cluster(s,u),this.trees[u]=new V(s,$,ee,a,Float32Array),n&&console.log("z%d: %d clusters in %dms",u,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var o=this.getClusters([n,r,180,a],t),s=this.getClusters([-180,r,i,a],t);return o.concat(s)}var l,u=this.trees[this._limitZoom(t)],c=u.range(K(n),Y(a),K(i),Y(r)),h=[],f=d(c);try{for(f.s();!(l=f.n()).done;){var p=l.value,m=u.points[p];h.push(m.numPoints?W(m):this.points[m.index])}}catch(v){f.e(v)}finally{f.f()}return h}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var a=i.points[t];if(!a)throw new Error(r);var o,s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),l=i.within(a.x,a.y,s),u=[],c=d(l);try{for(c.s();!(o=c.n()).done;){var h=o.value,f=i.points[h];f.parentId===e&&u.push(f.numPoints?W(f):this.points[f.index])}}catch(p){c.e(p)}finally{c.f()}if(0===u.length)throw new Error(r);return u}},{key:"getLeaves",value:function(e,t,n){var r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}},{key:"getTile",value:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),a=this.options,o=a.extent,s=a.radius/o,l=(n-s)/i,u=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,u),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,u),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,u),r.points,-1,n,i,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,n,r,i){var a,o=this.getChildren(t),s=d(o);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(e,u.cluster_id,n,r,i):i<r?i++:e.push(l),e.length===n)break}}catch(c){s.e(c)}finally{s.f()}return i}},{key:"_addTileFeatures",value:function(e,t,n,r,i,a){var o,s=d(e);try{for(s.s();!(o=s.n()).done;){var l=t[o.value],u=l.numPoints,c=void 0,h=void 0,f=void 0;if(u)c=X(l),h=l.x,f=l.y;else{var p=this.points[l.index];c=p.properties,h=K(p.geometry.coordinates[0]),f=Y(p.geometry.coordinates[1])}var m={type:1,geometry:[[Math.round(this.options.extent*(h*i-n)),Math.round(this.options.extent*(f*i-r))]],tags:c},v=void 0;u?v=l.id:this.options.generateId?v=l.index:this.points[l.index].id&&(v=this.points[l.index].id),void 0!==v&&(m.id=v),a.features.push(m)}}catch(g){s.e(g)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var n=[],r=this.options,i=r.radius,a=r.extent,o=r.reduce,s=r.minPoints,l=i/(a*Math.pow(2,t)),u=0;u<e.length;u++){var c=e[u];if(!(c.zoom<=t)){c.zoom=t;var h,f=this.trees[t+1],p=f.within(c.x,c.y,l),m=c.numPoints||1,v=m,g=d(p);try{for(g.s();!(h=g.n()).done;){var y=h.value,_=f.points[y];_.zoom>t&&(v+=_.numPoints||1)}}catch(I){g.e(I)}finally{g.f()}if(v>m&&v>=s){var x,b=c.x*m,w=c.y*m,k=o&&m>1?this._map(c,!0):null,T=(u<<5)+(t+1)+this.points.length,S=d(p);try{for(S.s();!(x=S.n()).done;){var E=x.value,C=f.points[E];if(!(C.zoom<=t)){C.zoom=t;var A=C.numPoints||1;b+=C.x*A,w+=C.y*A,C.parentId=T,o&&(k||(k=this._map(c,!0)),o(k,this._map(C)))}}}catch(I){S.e(I)}finally{S.f()}c.parentId=T,n.push(H(b/v,w/v,T,v,k))}else if(n.push(c),v>1){var R,M=d(p);try{for(M.s();!(R=M.n()).done;){var B=R.value,P=f.points[B];P.zoom<=t||(P.zoom=t,n.push(P))}}catch(I){M.e(I)}finally{M.f()}}}}return n}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t){if(e.numPoints)return t?Q({},e.properties):e.properties;var n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?Q({},r):r}}]),e}();function H(e,t,n,r,i){return{x:U(e),y:U(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function q(e,t){var n=h(e.geometry.coordinates,2),r=n[0],i=n[1];return{x:U(K(r)),y:U(Y(i)),zoom:1/0,index:t,parentId:-1}}function W(e){return{type:"Feature",id:e.id,properties:X(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),J(e.y)]}};var t}function X(e){var t=e.numPoints,n=t>=1e4?"".concat(Math.round(t/1e3),"k"):t>=1e3?Math.round(t/100)/10+"k":t;return Q(Q({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function K(e){return e/360+.5}function Y(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function J(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function Q(e,t){for(var n in t)e[n]=t[n];return e}function $(e){return e.x}function ee(e){return e.y}function te(e,t,n,r){for(var i,a=r,o=n-t>>1,s=n-t,l=e[t],u=e[t+1],c=e[n],h=e[n+1],d=t+3;d<n;d+=3){var f=ne(e[d],e[d+1],l,u,c,h);if(f>a)i=d,a=f;else if(f===a){var p=Math.abs(d-o);p<s&&(i=d,s=p)}}a>r&&(i-t>3&&te(e,t,i,r),e[i+2]=a,n-i>3&&te(e,i,n,r))}function ne(e,t,n,r,i,a){var o=i-n,s=a-r;if(0!==o||0!==s){var l=((e-n)*o+(t-r)*s)/(o*o+s*s);l>1?(n=i,r=a):l>0&&(n+=o*l,r+=s*l)}return(o=e-n)*o+(s=t-r)*s}function re(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)ie(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)ie(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)ie(e,t[r][i])}(i),i}function ie(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function ae(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===a)oe(i,s);else if("MultiPoint"===a)for(var u=0;u<i.length;u++)oe(i[u],s);else if("LineString"===a)se(i,s,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(u=0;u<i.length;u++)se(i[u],s=[],o,!1),e.push(re(l,"LineString",s,t.properties));return}le(i,s,o,!1)}else if("Polygon"===a)le(i,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(u=0;u<t.geometry.geometries.length;u++)ae(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];le(i[u],c,o,!0),s.push(c)}}e.push(re(l,a,s,t.properties))}}function oe(e,t){t.push(ue(e[0])),t.push(ce(e[1])),t.push(0)}function se(e,t,n,r){for(var i,a,o=0,s=0;s<e.length;s++){var l=ue(e[s][0]),u=ce(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(o+=r?(i*u-l*a)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-a,2))),i=l,a=u}var c=t.length-3;t[2]=1,te(t,0,c,n),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function le(e,t,n,r){for(var i=0;i<e.length;i++){var a=[];se(e[i],a,n,r),t.push(a)}}function ue(e){return e/360+.5}function ce(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function he(e,t,n,r,i,a,o,s){if(r/=t,a>=(n/=t)&&o<r)return e;if(o<n||a>=r)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],h=c.geometry,d=c.type,f=0===i?c.minX:c.minY,p=0===i?c.maxX:c.maxY;if(f>=n&&p<r)l.push(c);else if(!(p<n||f>=r)){var m=[];if("Point"===d||"MultiPoint"===d)de(h,m,n,r,i);else if("LineString"===d)fe(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===d)me(h,m,n,r,i,!1);else if("Polygon"===d)me(h,m,n,r,i,!0);else if("MultiPolygon"===d)for(var v=0;v<h.length;v++){var g=[];me(h[v],g,n,r,i,!0),g.length&&m.push(g)}if(m.length){if(s.lineMetrics&&"LineString"===d){for(v=0;v<m.length;v++)l.push(re(c.id,d,m[v],c.tags));continue}"LineString"!==d&&"MultiLineString"!==d||(1===m.length?(d="LineString",m=m[0]):d="MultiLineString"),"Point"!==d&&"MultiPoint"!==d||(d=3===m.length?"Point":"MultiPoint"),l.push(re(c.id,d,m,c.tags))}}}return l.length?l:null}function de(e,t,n,r,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=n&&o<=r&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function fe(e,t,n,r,i,a,o){for(var s,l,u=pe(e),c=0===i?ge:ye,h=e.start,d=0;d<e.length-3;d+=3){var f=e[d],p=e[d+1],m=e[d+2],v=e[d+3],g=e[d+4],y=0===i?f:p,_=0===i?v:g,x=!1;o&&(s=Math.sqrt(Math.pow(f-v,2)+Math.pow(p-g,2))),y<n?_>n&&(l=c(u,f,p,v,g,n),o&&(u.start=h+s*l)):y>r?_<r&&(l=c(u,f,p,v,g,r),o&&(u.start=h+s*l)):ve(u,f,p,m),_<n&&y>=n&&(l=c(u,f,p,v,g,n),x=!0),_>r&&y<=r&&(l=c(u,f,p,v,g,r),x=!0),!a&&x&&(o&&(u.end=h+s*l),t.push(u),u=pe(e)),o&&(h+=s)}var b=e.length-3;f=e[b],p=e[b+1],m=e[b+2],(y=0===i?f:p)>=n&&y<=r&&ve(u,f,p,m),b=u.length-3,a&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&ve(u,u[0],u[1],u[2]),u.length&&t.push(u)}function pe(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function me(e,t,n,r,i,a){for(var o=0;o<e.length;o++)fe(e[o],t,n,r,i,a,!1)}function ve(e,t,n,r){e.push(t),e.push(n),e.push(r)}function ge(e,t,n,r,i,a){var o=(a-t)/(r-t);return e.push(a),e.push(n+(i-n)*o),e.push(1),o}function ye(e,t,n,r,i,a){var o=(a-n)/(i-n);return e.push(t+(r-t)*o),e.push(a),e.push(1),o}function _e(e,t){for(var n=[],r=0;r<e.length;r++){var i,a=e[r],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)i=xe(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){i=[];for(var s=0;s<a.geometry.length;s++)i.push(xe(a.geometry[s],t))}else if("MultiPolygon"===o)for(i=[],s=0;s<a.geometry.length;s++){for(var l=[],u=0;u<a.geometry[s].length;u++)l.push(xe(a.geometry[s][u],t));i.push(l)}n.push(re(a.id,o,i,a.tags))}return n}function xe(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function be(e,t){if(e.transformed)return e;var n,r,i,a=1<<e.z,o=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(we(u[r],u[r+1],t,a,o,s));else for(r=0;r<u.length;r++){var h=[];for(i=0;i<u[r].length;i+=2)h.push(we(u[r][i],u[r][i+1],t,a,o,s));l.geometry.push(h)}}return e.transformed=!0,e}function we(e,t,n,r,i,a){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-a))]}function ke(e,t,n,r,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,Te(o,e[s],a,i);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,h=e[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),h>o.maxY&&(o.maxY=h)}return o}function Te(e,t,n,r){var i=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)Se(o,i,e,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<i.length;s++)Se(o,i[s],e,n,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)Se(o,u[s],e,n,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===a&&r.lineMetrics){for(var h in c={},t.tags)c[h]=t.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var d={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==t.id&&(d.id=t.id),e.features.push(d)}}function Se(e,t,n,r,i,a){var o=r*r;if(r>0&&t.size<(i?o:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>o)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,a=i-2;r<i;a=r,r+=2)n+=(e[r]-e[a])*(e[r+1]+e[a+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var o=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=o,e[i-1-r]=s}}(s,a),e.push(s)}}function Ee(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)ae(n,e.features[r],t,r);else ae(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(e,t){var n=t.buffer/t.extent,r=e,i=he(e,1,-1-n,n,0,-1,2,t),a=he(e,1,1-n,2+n,0,-1,2,t);return(i||a)&&(r=he(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=_e(i,1).concat(r)),a&&(r=r.concat(_e(a,-1)))),r}(r,t)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ce(e,t,n){return 32*((1<<e)*n+t)+e}function Ae(e,t){var n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);var i=new y(r.features),a=k(i);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:i,rawData:a.buffer})}Ee.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ee.prototype.splitTile=function(e,t,n,r,i,a,o){for(var s=[e,t,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,h=Ce(t,n,r),d=this.tiles[h];if(!d&&(u>1&&console.time("creation"),d=this.tiles[h]=ke(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(d.source=e,i){if(t===l.maxZoom||t===i)continue;var p=1<<i-t;if(n!==Math.floor(a/p)||r!==Math.floor(o/p))continue}else if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue;if(d.source=null,0!==e.length){u>1&&console.time("clipping");var m,v,g,y,_,x,b=.5*l.buffer/l.extent,w=.5-b,k=.5+b,T=1+b;m=v=g=y=null,_=he(e,c,n-b,n+k,0,d.minX,d.maxX,l),x=he(e,c,n+w,n+T,0,d.minX,d.maxX,l),e=null,_&&(m=he(_,c,r-b,r+k,1,d.minY,d.maxY,l),v=he(_,c,r+w,r+T,1,d.minY,d.maxY,l),_=null),x&&(g=he(x,c,r-b,r+k,1,d.minY,d.maxY,l),y=he(x,c,r+w,r+T,1,d.minY,d.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(v||[],t+1,2*n,2*r+1),s.push(g||[],t+1,2*n+1,2*r),s.push(y||[],t+1,2*n+1,2*r+1)}}},Ee.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,a=r.debug;if(e<0||e>24)return null;var o=1<<e,s=Ce(e,t=(t%o+o)%o,n);if(this.tiles[s])return be(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,u=e,c=t,h=n;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[Ce(u,c,h)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,c,h),a>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?be(this.tiles[s],i):null):null};var Re=function(t){p(r,t);var n=m(r);function r(e,t,i,a,o){var s;return v(this,r),s=n.call(this,e,t,i,a,Ae),o&&(s.loadGeoJSON=o),s}return g(r,[{key:"loadData",value:function(t,n){var r=this,i=t&&t.request,o=i&&i.collectResourceTiming;this.loadGeoJSON(t,(function(s,l){if(s||!l)return n(s);if("object"!=typeof l)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));a(l,!0);try{if(t.filter){var u=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===u.result)throw new Error(u.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));var c=l.features.filter((function(e){return u.value.evaluate({zoom:0},e)}));l={type:"FeatureCollection",features:c}}r._geoJSONIndex=t.cluster?new G(function(t){var n=t.superclusterOptions,r=t.clusterProperties;if(!r||!n)return n;for(var i={},a={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u++){var f=c[u],p=h(r[f],2),m=p[0],v=p[1],g=e.createExpression(v),y=e.createExpression("string"==typeof m?[m,["accumulated"],["get",f]]:m);i[f]=g.value,a[f]=y.value}return n.map=function(e){s.properties=e;var t,n={},r=d(l);try{for(r.s();!(t=r.n()).done;){var a=t.value;n[a]=i[a].evaluate(o,s)}}catch(u){r.e(u)}finally{r.f()}return n},n.reduce=function(e,t){s.properties=t;var n,r=d(l);try{for(r.s();!(n=r.n()).done;){var i=n.value;o.accumulated=e[i],e[i]=a[i].evaluate(o,s)}}catch(u){r.e(u)}finally{r.f()}},n}(t)).load(l.features):function(e,t){return new Ee(e,t)}(l,t.geojsonVtOptions)}catch(s){return n(s)}r.loaded={};var f={};if(o){var p=e.getPerformanceMeasurement(i);p&&(f.resourceTiming={},f.resourceTiming[t.source]=JSON.parse(JSON.stringify(p)))}n(null,f)}))}},{key:"reloadTile",value:function(e,t){var n=this.loaded;return n&&n[e.uid]?o(s(r.prototype),"reloadTile",this).call(this,e,t):this.loadTile(e,t)}},{key:"loadGeoJSON",value:function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}},{key:"getClusterExpansionZoom",value:function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}},{key:"getClusterChildren",value:function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}},{key:"getClusterLeaves",value:function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}]),r}(e.VectorTileWorkerSource),Me=function(){function t(n){var r=this;v(this,t),this.self=n,this.actor=new e.Actor(n,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Re},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));r.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}return g(t,[{key:"clearCaches",value:function(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}},{key:"checkIfReady",value:function(e,t,n){n()}},{key:"setReferrer",value:function(e,t){this.referrer=t}},{key:"spriteLoaded",value:function(t,n){for(var r in this.isSpriteLoaded[t]=n,this.workerSources[t]){var i=this.workerSources[t][r];for(var a in i)i[a]instanceof e.VectorTileWorkerSource&&(i[a].isSpriteLoaded=n,i[a].fire(new e.Event("isSpriteLoaded")))}}},{key:"setImages",value:function(e,t,n){for(var r in this.availableImages[e]=t,this.workerSources[e]){var i=this.workerSources[e][r];for(var a in i)i[a].availableImages=t}n()}},{key:"enableTerrain",value:function(e,t,n){this.terrain=t,n()}},{key:"setProjection",value:function(t,n){this.projections[t]=e.getProjection(n)}},{key:"setLayers",value:function(e,t,n){this.getLayerIndex(e).replace(t),n()}},{key:"updateLayers",value:function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}},{key:"loadTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}},{key:"loadDEMTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}},{key:"reloadTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}},{key:"abortTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}},{key:"removeTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}},{key:"removeSource",value:function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}}},{key:"loadWorkerSource",value:function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}},{key:"syncRTLPluginState",value:function(t,n,r){try{e.plugin.setState(n);var i=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=i){this.self.importScripts(i);var a=e.plugin.isParsed();r(a?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(i)),a)}}catch(e){r(e.toString())}}},{key:"getAvailableImages",value:function(e){var t=this.availableImages[e];return t||(t=[]),t}},{key:"getLayerIndex",value:function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}},{key:"getWorkerSource",value:function(e,t,n){var r=this;return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][n]||(this.workerSources[e][t][n]=new this.workerSourceTypes[t]({send:function(t,n,i,a,o,s){r.actor.send(t,n,i,e,o,s)},scheduler:this.actor.scheduler},this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])),this.workerSources[e][t][n]}},{key:"getDEMWorkerSource",value:function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}},{key:"enforceCacheSizeLimit",value:function(t,n){e.enforceCacheSizeLimit(n)}},{key:"getWorkerPerformanceMetrics",value:function(e,t,n){n(void 0,void 0)}}]),t}();return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Me(self)),Me})),y(["./shared"],(function(e){function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n}var n=u;function u(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===f[t=e&&e.failIfMajorPerformanceCaveat]&&(f[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(u.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),f[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var f={};function y(t,n,r){var i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function _(t,n,r){for(var i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t),a=0,o=Object.keys(n);a<o.length;a++){var s=o[a];i.setAttributeNS(null,s,n[s])}return r&&r.appendChild(i),i}u.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var x,b=e.window.document&&e.window.document.documentElement.style,w=b&&void 0!==b.userSelect?"userSelect":"WebkitUserSelect";function k(){b&&w&&(x=b[w],b[w]="none")}function T(){b&&w&&(b[w]=x)}function S(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",S,!0)}function E(){e.window.addEventListener("click",S,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",S,!0)}),0)}function C(e,t){var n=e.getBoundingClientRect();return M(e,n,t)}function A(e,t){for(var n=e.getBoundingClientRect(),r=[],i=0;i<t.length;i++)r.push(M(e,n,t[i]));return r}function R(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function M(t,n,r){var i=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.pointGeometry((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function B(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-i*r;return o?(e[0]=a*(o=1/o),e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null}function P(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}var I=function(t){p(r,t);var n=m(r);function r(){var t;return v(this,r),(t=n.call(this)).images={},t.updatedImages={},t.callbackDispatchedThisFrame={},t.loaded=!1,t.requestors=[],t.patterns={},t.atlasImage=new e.RGBAImage({width:1,height:1}),t.dirty=!0,t}return g(r,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,n=d(this.requestors);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.ids,a=r.callback;this._notify(i,a)}}catch(o){n.e(o)}finally{n.f()}this.requestors=[]}}},{key:"hasImage",value:function(e){return!!this.getImage(e)}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(t,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),r=!1),r}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var n,r=0,i=d(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a[0]<r||a[1]<a[0]||t<a[1])return!1;r=a[1]}}catch(o){i.e(o)}finally{i.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var n=!0;if(!this.isLoaded()){var r,i=d(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.images[a]||(n=!1)}}catch(o){i.e(o)}finally{i.f()}}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(t,n){var r,i={},a=d(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?i[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'.concat(o,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(l){a.e(l)}finally{a.f()}n(null,i)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(t){var n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},a=new e.ImagePosition(i,r);this.patterns[t]={bin:i,position:a}}return this._updatePatternAtlas(),this.patterns[t].position}},{key:"bind",value:function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var t=[];for(var n in this.patterns)t.push(this.patterns[n].bin);var r=e.potpack(t),i=r.w,a=r.h,o=this.atlasImage;for(var s in o.resize({width:i||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,h=this.images[s].data,d=h.width,f=h.height;e.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c},{width:d,height:f}),e.RGBAImage.copy(h,o,{x:0,y:f-1},{x:u,y:c-1},{width:d,height:1}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c+f},{width:d,height:1}),e.RGBAImage.copy(h,o,{x:d-1,y:0},{x:u-1,y:c},{width:1,height:f}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:u+d,y:c},{width:1,height:f})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var t,n=d(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];P(i)&&this.updateImage(r,i)}}}catch(a){n.e(a)}finally{n.f()}}}]),r}(e.Evented),z=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new(function(){function t(){v(this,t),this.specification=e.spec.light.position}return g(t,[{key:"possiblyEvaluate",value:function(t,n){return function(t){var n=h(t,3),r=n[0],i=n[1],a=n[2],o=e.degToRad(i+90),s=e.degToRad(a);return{x:r*Math.cos(o)*Math.sin(s),y:r*Math.sin(o)*Math.sin(s),z:r*Math.cos(s),azimuthal:i,polar:a}}(t.expression.evaluate(n))}},{key:"interpolate",value:function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}}]),t}()),color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),L="-transition",D=function(t){p(r,t);var n=m(r);function r(t){var i;return v(this,r),(i=n.call(this))._transitionable=new e.Transitionable(z),i.setLight(t),i._transitioning=i._transitionable.untransitioned(),i}return g(r,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,n))for(var r in t){var i=t[r];e.endsWith(r,L)?this._transitionable.setTransition(r.slice(0,-L.length),i):this._transitionable.setValue(r,i)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),r}(e.Evented),O=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),N="-transition",F=function(t){p(r,t);var n=m(r);function r(t,i){var a;return v(this,r),(a=n.call(this))._transitionable=new e.Transitionable(O),a.set(t),a._transitioning=a._transitionable.untransitioned(),a.drapeRenderMode=i,a}return g(r,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){for(var n in t){var r=t[n];e.endsWith(n,N)?this._transitionable.setTransition(n.slice(0,-N.length),r):this._transitionable.setValue(n,r)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}}]),r}(e.Evented);function j(t,n,r,i){var a=e.smoothstep(45,65,r),o=V(t,i),s=h(o,2),l=s[0],u=s[1],c=e.length(n),d=1-Math.min(1,Math.exp((c-l)/(u-l)*-6));return d*=d*d,(d=Math.min(1,1.00747*d))*a*t.alpha}function V(e,t){var n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}var Z=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])}),U="-transition",G=function(t){p(r,t);var n=m(r);function r(t,i){var a;return v(this,r),(a=n.call(this))._transitionable=new e.Transitionable(Z),a.set(t),a._transitioning=a._transitionable.untransitioned(),a._transform=i,a}return g(r,[{key:"state",get:function(){var t=this._transform,n="globe"===t.projection.name,r=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),a=[.5,3];return{range:n?[e.number(a[0],i[0],r),e.number(a[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}},{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateFog,t,n)){for(var r=0,i=Object.keys(e.spec.fog);r<i.length;r++){var a=i[r];t&&void 0===t[a]&&(t[a]=e.spec.fog[a].default)}for(var o in t){var s=t[o];e.endsWith(o,U)?this._transitionable.setTransition(o.slice(0,-U.length),s):this._transitionable.setValue(o,s)}}}},{key:"getOpacity",value:function(t){if(!this._transform.projection.supportsFog)return 0;var n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*n.a}},{key:"getOpacityAtLatLng",value:function(t,n){return this._transform.projection.supportsFog?function(t,n,r){var i=e.MercatorCoordinate.fromLngLat(n),a=r.elevation?r.elevation.getAtPointOrZero(i):0,o=[i.x,i.y,a];return e.transformMat4(o,o,r.mercatorFogMatrix),j(t,o,r.pitch,r._fov)}(this.state,t,n):0}},{key:"getFovAdjustedRange",value:function(e){return this._transform.projection.supportsFog?V(this.state,e):[0,1]}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),r}(e.Evented),H=function(){function t(n,r){var i=this;v(this,t),this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var a=this.workerPool.acquire(this.id),o=0;o<a.length;o++){var s=new t.Actor(a[o],r,this.id);s.name="Worker ".concat(o),this.actors.push(s)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){i.ready=!0}))}return g(t,[{key:"broadcast",value:function(t,n,r){e.asyncAll(this.actors,(function(e,r){e.send(t,n,r)}),r=r||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),t}();function q(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}H.Actor=e.Actor;var W=function(){function t(e,n,r,i){v(this,t),this.screenBounds=e,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,i)}return g(t,[{key:"isPointQuery",value:function(){return 1===this.screenBounds.length}},{key:"bufferedScreenGeometry",value:function(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}},{key:"bufferedCameraGeometry",value:function(t){var n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}},{key:"bufferedCameraGeometryGlobe",value:function(t){var n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,t),a=this.cameraPoint.clone();switch(3*((a.y>n.y)+(a.y>r.y))+((a.x>n.x)+(a.x>r.x))){case 0:i[0]=a,i[4]=a.clone();break;case 1:i.splice(1,0,a);break;case 2:i[1]=a;break;case 3:i.splice(4,0,a);break;case 5:i.splice(2,0,a);break;case 6:i[3]=a;break;case 7:i.splice(3,0,a);break;case 8:i[2]=a}return i}},{key:"containsTile",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.queryPadding/n._pixelsPerMercatorPixel+1,o=r?this._bufferedCameraMercator(a,n):this._bufferedScreenMercator(a,n),s=t.tileID.wrap+(o.unwrapped?i:0),l=o.polygon.map((function(n){return e.getTilePoint(t.tileTransform,n,s)}));if(e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT)){s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);var u,c=this.screenGeometryMercator.polygon.map((function(n){return e.getTileVec3(t.tileTransform,n,s)})),h=c.map((function(t){return new e.pointGeometry(t[0],t[1])})),d=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),f=e.getTileVec3(t.tileTransform,d,s),p=c.map((function(t){var n=e.sub(t,t,f);return e.normalize(n,n),new e.Ray(f,n)})),m=q(t,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:h,tilespaceRays:p,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(u=e.getBounds(l),u.min.x=e.clamp(u.min.x,0,e.EXTENT),u.min.y=e.clamp(u.min.y,0,e.EXTENT),u.max.x=e.clamp(u.max.x,0,e.EXTENT),u.max.y=e.clamp(u.max.y,0,e.EXTENT),u),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:m}}}},{key:"_bufferedScreenMercator",value:function(e,t){var n,r=Y(e);return this._screenRaycastCache[r]?this._screenRaycastCache[r]:(n="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((function(e){return t.pointCoordinate3D(e)})),unwrapped:!0},this._screenRaycastCache[r]=n,n)}},{key:"_bufferedCameraMercator",value:function(e,t){var n,r=Y(e);return this._cameraRaycastCache[r]?this._cameraRaycastCache[r]:(n="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((function(e){return t.pointCoordinate3D(e)})),unwrapped:!0},this._cameraRaycastCache[r]=n,n)}},{key:"_projectAndResample",value:function(t,n){var r=function(t,n){var r=e.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],a=[0,e.GLOBE_RADIUS,0,1],o=[0,0,0,1];e.transformMat4$1(i,i,r),e.transformMat4$1(a,a,r),e.transformMat4$1(o,o,r);var s=new e.pointGeometry(i[0]/i[3],i[1]/i[3]),l=new e.pointGeometry(a[0]/a[3],a[1]/a[3]),u=e.polygonContainsPoint(t,s)&&i[3]<o[3],h=e.polygonContainsPoint(t,l)&&a[3]<o[3];if(!u&&!h)return null;var d=function(e,t,n){for(var r=1;r<e.length;r++){var i=K(t.pointCoordinate3D(e[r-1]).x),a=K(t.pointCoordinate3D(e[r]).x);if(n<0){if(i<a)return{idx:r,t:-i/(a-1-i)}}else if(a<i)return{idx:r,t:(1-i)/(a+1-i)}}return null}(t,n,u?-1:1);if(!d)return null;var f=d.idx,p=d.t,m=f>1?X(t.slice(0,f),n):[],v=f<t.length?X(t.slice(f),n):[];m=m.map((function(t){return new e.pointGeometry(K(t.x),t.y)})),v=v.map((function(t){return new e.pointGeometry(K(t.x),t.y)}));var g=c(m);0===g.length&&g.push(v[v.length-1]);var y,_=e.number(g[g.length-1].y,(0===v.length?m[0]:v[0]).y,p);return y=u?[new e.pointGeometry(0,_),new e.pointGeometry(0,0),new e.pointGeometry(1,0),new e.pointGeometry(1,_)]:[new e.pointGeometry(1,_),new e.pointGeometry(1,1),new e.pointGeometry(0,1),new e.pointGeometry(0,_)],g.push.apply(g,c(y)),0===v.length?g.push(m[0]):g.push.apply(g,c(v)),{polygon:g.map((function(t){return new e.MercatorCoordinate(t.x,t.y)})),unwrapped:!1}}(t,n);if(r)return r;var i=function(t,n){for(var r=!1,i=-1/0,a=0,o=0;o<t.length-1;o++)t[o].x>i&&(i=t[o].x,a=o);for(var s=0;s<t.length-1;s++){var l=(a+s)%(t.length-1),u=t[l],c=t[l+1];Math.abs(u.x-c.x)>.5&&(u.x<c.x?(u.x+=1,0===l&&(t[t.length-1].x+=1)):(c.x+=1,l+1===t.length-1&&(t[0].x+=1)),r=!0)}var h=e.mercatorXfromLng(n.center.lng);return r&&h<Math.abs(h-1)&&t.forEach((function(e){e.x-=1})),{polygon:t,unwrapped:r}}(X(t,n).map((function(t){return new e.pointGeometry(K(t.x),t.y)})),n);return{polygon:i.polygon.map((function(t){return new e.MercatorCoordinate(t.x,t.y)})),unwrapped:i.unwrapped}}}],[{key:"createFromScreenPoints",value:function(n,r){var i,a;if(n instanceof e.pointGeometry||"number"==typeof n[0]){var o=e.pointGeometry.convert(n);i=[e.pointGeometry.convert(n)],a=r.isPointAboveHorizon(o)}else{var s=e.pointGeometry.convert(n[0]),l=e.pointGeometry.convert(n[1]);i=[s,l],a=e.polygonizeBounds(s,l).every((function(e){return r.isPointAboveHorizon(e)}))}return new t(i,r.getCameraPoint(),a,r)}}]),t}();function X(t,n){return e.resample(t,(function(e){var t=n.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function K(e){return e<0?1+e%1:e%1}function Y(e){return 100*e|0}function J(t,n,r,i,a){var o=function(r,i){if(r)return a(r);if(i){var o=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(e){return e.id}))),i.language_options&&(o.languageOptions=i.language_options),i.language&&i.language[i.id]&&(o.language=i.language[i.id]),i.worldview_options&&(o.worldviewOptions=i.worldview_options),i.worldview?o.worldview=i.worldview[i.id]:i.worldview_default&&(o.worldview=i.worldview_default),o.tiles=n.canonicalizeTileset(o,t.url),a(null,o)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url,null,r,i),e.ResourceType.Source),o):e.exported.frame((function(){return o(null,t)}))}var Q,$=function(){function t(n,r,i){v(this,t),this.bounds=e.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=r||0,this.maxzoom=i||24}return g(t,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(t){var n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<a&&t.y>=i&&t.y<o}}]),t}(),ee=function(){function e(t,n,r){v(this,e),this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||n.destroy()}return g(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),te={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ne=function(){function e(t,n,r,i){v(this,e),this.length=n.length,this.attributes=r,this.itemSize=n.bytesPerElement,this.dynamicDraw=i,this.context=t;var a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||n.destroy()}return g(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var n=0;n<this.attributes.length;n++){var r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}},{key:"setVertexAttribPointers",value:function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[te[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),re=function(){function e(t){v(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return g(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),ie=function(t){p(r,t);var n=m(r);function r(){return v(this,r),n.apply(this,arguments)}return g(r,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),r}(re),ae=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),n}(re),oe=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),n}(re),se=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(re),le=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),n}(re),ue=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),n}(re),ce=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),n}(re),he=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),n}(re),de=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),n}(re),fe=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(re),pe=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),n}(re),me=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),n}(re),ve=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),n}(re),ge=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(re),ye=function(t){p(r,t);var n=m(r);function r(){return v(this,r),n.apply(this,arguments)}return g(r,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),r}(re),_e=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),n}(re),xe=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),n}(re),be=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),n}(re),we=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),n}(re),ke=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),n}(re),Te=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),n}(re),Se=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(re),Ee=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(re),Ce=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(re),Ae=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),n}(re),Re=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),n}(re),Me=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),n}(re),Be=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this,e)).vao=e.extVertexArrayObject,r}return g(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),n}(re),Pe=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),n}(re),Ie=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(re),ze=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(re),Le=function(e){p(n,e);var t=m(n);function n(e,r){var i;return v(this,n),(i=t.call(this,e)).context=e,i.parent=r,i}return g(n,[{key:"getDefault",value:function(){return null}}]),n}(re),De=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),n}(Le),Oe=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(Le),Ne=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),n}(Oe),Fe=function(){function e(t,n,r,i){v(this,e),this.context=t,this.width=n,this.height=r;var a=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new De(t,a),i&&(this.depthAttachment=new Oe(t,a))}return g(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),je=function(){function n(e){v(this,n),this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new ie(this),this.clearDepth=new ae(this),this.clearStencil=new oe(this),this.colorMask=new se(this),this.depthMask=new le(this),this.stencilMask=new ue(this),this.stencilFunc=new ce(this),this.stencilOp=new he(this),this.stencilTest=new de(this),this.depthRange=new fe(this),this.depthTest=new pe(this),this.depthFunc=new me(this),this.blend=new ve(this),this.blendFunc=new ge(this),this.blendColor=new ye(this),this.blendEquation=new _e(this),this.cullFace=new xe(this),this.cullFaceSide=new be(this),this.frontFace=new we(this),this.program=new ke(this),this.activeTexture=new Te(this),this.viewport=new Se(this),this.bindFramebuffer=new Ee(this),this.bindRenderbuffer=new Ce(this),this.bindTexture=new Ae(this),this.bindVertexBuffer=new Re(this),this.bindElementBuffer=new Me(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Be(this),this.pixelStoreUnpack=new Pe(this),this.pixelStoreUnpackPremultiplyAlpha=new Ie(this),this.pixelStoreUnpackFlipY=new ze(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}return g(n,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new ee(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,n){return new ne(this,e,t,n)}},{key:"createRenderbuffer",value:function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}},{key:"createFramebuffer",value:function(e,t,n){return new Fe(this,e,t,n)}},{key:"clear",value:function(e){var t=e.color,n=e.depth,r=e.stencil,i=this.gl,a=0;t&&(a|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(a|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(a)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(n){t(n.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),n}(),Ve=function(t){p(r,t);var n=m(r);function r(t,a,o,s){var l;return v(this,r),(l=n.call(this)).id=t,l.dispatcher=o,l.setEventedParent(s),l.type="raster",l.minzoom=0,l.maxzoom=22,l.roundZoom=!0,l.scheme="xyz",l.tileSize=512,l._loaded=!1,l._options=e.extend({type:"raster"},a),e.extend(i(l),e.pick(a,["url","scheme","tileSize"])),l}return g(r,[{key:"load",value:function(){var t=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=J(this._options,this.map._requestManager,null,null,(function(n,r){t._tileJSONRequest=null,t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(e.extend(t,r),r.bounds&&(t.tileBounds=new $(r.bounds,t.minzoom,t.maxzoom)),e.postTurnstileEvent(r.tiles),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),t.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var r=this,i=e.exported.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),(function(i,a,o,s){return delete t.request,t.aborted?(t.state="unloaded",n(null)):i?(t.state="errored",n(i)):a?(r.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s}),t.setTexture(a,r.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(r.dispatcher),void n(null)):n(null)}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}}],[{key:"loadTileData",value:function(e,t,n){e.setTexture(t,n)}},{key:"unloadTileData",value:function(e,t){e.texture&&t.saveTileTexture(e.texture)}}]),r}(e.Evented);function Ze(t,n,r,i,a,o,s,l){var u=[t,r,a,n,i,o,1,1,1],c=[s,l,1],d=e.adjoint([],u),f=e.transformMat3(c,c,e.transpose(d,d)),p=h(f,3),m=p[0],v=p[1],g=p[2];return e.multiply$1(u,[m,0,0,0,v,0,0,0,g],u)}var Ue=function(t){p(r,t);var n=m(r);function r(e,t,i,a){var o;return v(this,r),(o=n.call(this)).id=e,o.dispatcher=i,o.coordinates=t.coordinates,o.type="image",o.minzoom=0,o.maxzoom=22,o.tileSize=512,o.tiles={},o._loaded=!1,o.setEventedParent(a),o.options=t,o}return g(r,[{key:"load",value:function(t,n){var r=this;this._loaded=n||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(n,i){if(r._loaded=!0,n)r.fire(new e.ErrorEvent(n));else if(i){var a=e.window.HTMLImageElement;r.image=i instanceof a?e.exported.getImageData(i):i,r.width=r.image.width,r.height=r.image.height,t&&(r.coordinates=t),r._finishLoading()}}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this.texture&&this.texture.destroy()}},{key:"setCoordinates",value:function(t){this.coordinates=t,this._boundsArray=void 0;var n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){var n,r=1/0,i=1/0,a=-1/0,o=-1/0,s=d(t);try{for(s.s();!(n=s.n()).done;){var l=n.value;r=Math.min(r,l.x),i=Math.min(i,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y)}}catch(f){s.e(f)}finally{s.f()}var u=Math.max(a-r,o-i),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),h=Math.pow(2,c);return new e.CanonicalTileID(c,Math.floor((r+a)/2*h),Math.floor((i+o)/2*h))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"_clear",value:function(){this._boundsArray=void 0}},{key:"_prepareData",value:function(t){for(var n in this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}if(!this._boundsArray){var i=e.tileTransform(this.tileID,this.map.transform.projection),a=this.coordinates.map((function(t){var n=i.projection.project(t[0],t[1]);return e.getTilePoint(i,n)._round()})),o=h(a,4),s=o[0],l=o[1],u=o[2],c=o[3];this.perspectiveTransform=function(t,n,r,i,a,o,s,l,u,c){var h=Ze(0,0,t,0,0,n,t,n),d=Ze(r,i,a,o,s,l,u,c);return e.multiply$1(d,e.adjoint(h,h),d),[d[6]/d[8]*t/e.EXTENT,d[7]/d[8]*n/e.EXTENT]}(this.width,this.height,s.x,s.y,l.x,l.y,c.x,c.y,u.x,u.y);var d=this._boundsArray=new e.StructArrayLayout4i8;d.emplaceBack(s.x,s.y,0,0),d.emplaceBack(l.x,l.y,e.EXTENT,0),d.emplaceBack(c.x,c.y,0,e.EXTENT),d.emplaceBack(u.x,u.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(d,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._prepareData(t)}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),Ge={vector:function(t){p(r,t);var n=m(r);function r(t,a,o,s){var u;if(v(this,r),(u=n.call(this)).id=t,u.dispatcher=o,u.type="vector",u.minzoom=0,u.maxzoom=22,u.scheme="xyz",u.tileSize=512,u.reparseOverscaled=!0,u.isTileClipped=!0,u._loaded=!1,e.extend(i(u),e.pick(a,["url","scheme","tileSize","promoteId"])),u._options=e.extend({type:"vector"},a),u._collectResourceTiming=a.collectResourceTiming,512!==u.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return u.setEventedParent(s),u._tileWorkers={},u._deduped=new e.DedupedRequest,l(u)}return g(r,[{key:"load",value:function(t){var n=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));var r=this.language||this.map._language,i=this.worldview||this.map._worldview;this._tileJSONRequest=J(this._options,this.map._requestManager,r,i,(function(a,o){n._tileJSONRequest=null,n._loaded=!0,a?(r&&console.warn("Ensure that your requested language string is a valid BCP-47 code. Found: ".concat(r)),i&&2!==i.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(i)),n.fire(new e.ErrorEvent(a))):o&&(e.extend(n,o),o.bounds&&(n.tileBounds=new $(o.bounds,n.minzoom,n.maxzoom)),e.postTurnstileEvent(o.tiles,n.map._requestManager._customAccessToken),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(a)}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"setSourceProperty",value:function(e){var t=this;this._tileJSONRequest&&this._tileJSONRequest.cancel(),e(),this.load((function(){var e,n=t.map.style._getSourceCaches(t.id),r=d(n);try{for(r.s();!(e=r.n()).done;)e.value.clearTiles()}catch(i){r.e(i)}finally{r.f()}}))}},{key:"setTiles",value:function(e){var t=this;return this.setSourceProperty((function(){t._options.tiles=e})),this}},{key:"setUrl",value:function(e){var t=this;return this.setSourceProperty((function(){t.url=e,t._options.url=e})),this}},{key:"_setLanguage",value:function(e){var t=this;return e===this.language||this.setSourceProperty((function(){t.language=e})),this}},{key:"_setWorldview",value:function(e){var t=this;return e===this.worldview?this:this.worldviewOptions&&e&&!this.worldviewOptions[e]?(console.warn('Vector tile source "'.concat(this.id,'" does not support worldview "').concat(e,'".')),this):(this.setSourceProperty((function(){t.worldview=e})),this)}},{key:"onRemove",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"loadTile",value:function(t,n){var r=this,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(i,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",a,s.bind(this));else if(t.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",a,s.bind(this),void 0,!0);else{var o=e.loadVectorTile.call({deduped:this._deduped},a,(function(e,n){e||!n?s.call(r,e):(a.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",a,s.bind(r),void 0,!0))}),!0);t.request={cancel:o}}function s(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}}]),r}(e.Evented),raster:Ve,"raster-dem":function(t){p(r,t);var n=m(r);function r(t,i,a,o){var s;return v(this,r),(s=n.call(this,t,i,a,o)).type="raster-dem",s.maxzoom=22,s._options=e.extend({type:"raster-dem"},i),s.encoding=i.encoding||"mapbox",s}return g(r,[{key:"loadTile",value:function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,a,o,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s});var l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&(null==Q&&(Q=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),Q),u=1-(a.width-e.prevPowerOfTwo(a.width))/2;u<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));var c=l?a:e.exported.getImageData(a,u),h={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:c,encoding:this.encoding,padding:u};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",h,i.bind(this),void 0,!0))}}.bind(this))}},{key:"_getNeighboringTiles",value:function(t){var n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,a=0===n.x?t.wrap-1:t.wrap,o=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),l}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}}]),r}(Ve),geojson:function(t){p(r,t);var n=m(r);function r(t,i,a,o){var s;v(this,r),(s=n.call(this)).id=t,s.type="geojson",s.minzoom=0,s.maxzoom=18,s.tileSize=512,s.isTileClipped=!0,s.reparseOverscaled=!0,s._loaded=!1,s.actor=a.getActor(),s.setEventedParent(o),s._data=i.data,s._options=e.extend({},i),s._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(s.maxzoom=i.maxzoom),i.type&&(s.type=i.type),i.attribution&&(s.attribution=i.attribution),s.promoteId=i.promoteId;var l=e.EXTENT/s.tileSize;return s.workerOptions=e.extend({source:s.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*l,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*l,extent:e.EXTENT,maxZoom:s.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:s.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*l,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),s}return g(r,[{key:"onAdd",value:function(e){this.map=e,this.setData(this._data)}},{key:"setData",value:function(e){return this._data=e,this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}},{key:"_updateWorkerData",value:function(){var t=this;if(this._pendingLoad)this._coalesce=!0;else{this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;var n=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),n,(function(n,r){if(t._loaded=!0,t._pendingLoad=null,n)t.fire(new e.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:t._metadataFired?"content":"metadata"};t._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[t.id]&&(i.resourceTiming=r.resourceTiming[t.id]),t.fire(new e.Event("data",i)),t._metadataFired=!0}t._coalesce&&(t._updateWorkerData(),t._coalesce=!1)}))}}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(t,n){var r=this,i=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(i,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,a){return delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(a,r.map.painter,"reloadTile"===i),n(null))}),void 0,"loadTile"===i)}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._pendingLoad&&this._pendingLoad.cancel()}},{key:"serialize",value:function(){return e.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),video:function(t){p(r,t);var n=m(r);function r(e,t,i,a){var o;return v(this,r),(o=n.call(this,e,t,i,a)).roundZoom=!0,o.type="video",o.options=t,o}return g(r,[{key:"load",value:function(){var t=this;this._loaded=!1;var n=this.options;this.urls=[];var r,i=d(n.urls);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.urls.push(this.map._requestManager.transformRequest(a,e.ResourceType.Source).url)}}catch(o){i.e(o)}finally{i.f()}e.getVideo(this.urls,(function(n,r){t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.setAttribute("playsinline",""),t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(t){if(this.video){var n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=t}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),r}(Ue),image:Ue,canvas:function(t){p(r,t);var n=m(r);function r(t,i,a,o){var s;return v(this,r),s=n.call(this,t,i,a,o),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof e.window.HTMLCanvasElement||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),s.options=i,s.animate=void 0===i.animate||i.animate,s}return g(r,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1}}]),r}(Ue),custom:function(t){p(r,t);var n=m(r);function r(t,a,o,s){var l;return v(this,r),(l=n.call(this)).id=t,l.type="custom",l._dataType="raster",l._dispatcher=o,l._implementation=a,l.setEventedParent(s),l.scheme="xyz",l.minzoom=0,l.maxzoom=22,l.tileSize=512,l._loaded=!1,l.roundZoom=!0,l._implementation||l.fire(new e.ErrorEvent(new Error("Missing implementation for ".concat(l.id," custom source")))),l._implementation.loadTile||l.fire(new e.ErrorEvent(new Error("Missing loadTile implementation for ".concat(l.id," custom source")))),l._implementation.bounds&&(l.tileBounds=new $(l._implementation.bounds,l.minzoom,l.maxzoom)),a.update=l._update.bind(i(l)),a.coveringTiles=l._coveringTiles.bind(i(l)),e.extend(i(l),e.pick(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"])),l}return g(r,[{key:"serialize",value:function(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}},{key:"load",value:function(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}},{key:"onRemove",value:function(e){this._implementation.onRemove&&this._implementation.onRemove(e)}},{key:"hasTile",value:function(e){if(this._implementation.hasTile){var t=e.canonical,n=t.x,r=t.y,i=t.z;return this._implementation.hasTile({x:n,y:r,z:i})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var r=t.tileID.canonical,i=r.x,a=r.y,o=r.z,s=new e.window.AbortController,l=this._implementation.loadTile({x:i,y:a,z:o},{signal:s.signal});if(!l)return this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null);l.cancel=function(){return s.abort()},t.request=l.then(function(r){return delete t.request,t.aborted?(t.state="unloaded",n(null)):r?function(t){return t instanceof e.window.ImageData||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLCanvasElement}(r)?(this.loadTileData(t,r),t.state="loaded",void n(null)):(t.state="errored",n(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment")))):(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null))}.bind(this)).catch((function(e){20!==e.code&&(t.state="errored",n(e))}))}},{key:"loadTileData",value:function(e,t){Ve.loadTileData(e,t,this._map.painter)}},{key:"unloadTileData",value:function(e){Ve.unloadTileData(e,this._map.painter)}},{key:"prepareTile",value:function(e){if(!this._implementation.prepareTile)return null;var t=e.tileID.canonical,n=t.x,r=t.y,i=t.z,a=this._implementation.prepareTile({x:n,y:r,z:i});return a?(this.loadTileData(e,a),e.state="loaded",a):null}},{key:"unloadTile",value:function(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){var n=e.tileID.canonical,r=n.x,i=n.y,a=n.z;this._implementation.unloadTile({x:r,y:i,z:a})}t()}},{key:"abortTile",value:function(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}},{key:"hasTransition",value:function(){return!1}},{key:"_coveringTiles",value:function(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((function(e){return{x:e.canonical.x,y:e.canonical.y,z:e.canonical.z}}))}},{key:"_update",value:function(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}]),r}(e.Evented)},He=function(t,n,r,i){var a=new Ge[n.type](t,n,r,i);if(a.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(a.id));return e.bindAll(["load","abort","unload","serialize","prepare"],a),a};function qe(t,n){var r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply(r,r,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function We(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=e.tilesIn(r,o,s);l.sort(Ke);var u,c=[],h=d(l);try{for(h.s();!(u=h.n()).done;){var f=u.value;c.push({wrappedTileID:f.tile.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,n,e._state,f,i,a,qe(e.transform,f.tile.tileID),s)})}}catch(v){h.e(v)}finally{h.f()}var p=function(e){var t,n={},r={},i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.queryResults,s=a.wrappedTileID,l=r[s]=r[s]||{};for(var u in o){var c,h=o[u],f=l[u]=l[u]||{},p=n[u]=n[u]||[],m=d(h);try{for(m.s();!(c=m.n()).done;){var g=c.value;f[g.featureIndex]||(f[g.featureIndex]=!0,p.push(g))}}catch(v){m.e(v)}finally{m.f()}}}}catch(v){i.e(v)}finally{i.f()}return n}(c);for(var m in p)p[m].forEach((function(t){var n=t.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(r["source-layer"],n.id):{})}));return p}function Xe(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],i={},a=0;a<n.length;a++){var o=n[a],s=o.tileID.canonical.key;i[s]||(i[s]=!0,o.querySourceFeatures(r,t))}return r}function Ke(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Ye(){return null!=Aa.workerClass?new Aa.workerClass:new e.window.Worker(Aa.workerUrl)}var Je,Qe="mapboxgl_preloaded_worker_pool",$e=function(){function e(){v(this,e),this.active={}}return g(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new Ye);return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[Qe]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}();function et(){return Je||(Je=new $e),Je}function tt(t,n){var r={};for(var i in t)"ref"!==i&&(r[i]=t[i]);return e.refProperties.forEach((function(e){e in n&&(r[e]=n[e])})),r}function nt(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=tt(e[r],t[e[r].ref]));return e}$e.workerCount=2;var rt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function it(e,t,n){n.push({command:rt.addSource,args:[e,t[e]]})}function at(e,t,n){t.push({command:rt.removeSource,args:[e]}),n[e]=!0}function ot(e,t,n,r){at(e,n,r),it(e,t,n)}function st(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;return!0}function lt(e,n,r,i,a,o){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:o,args:[i,s,n[s],a]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:o,args:[i,s,n[s],a]}))}function ut(e){return e.id}function ct(e,t){return e[t.id]=t,e}var ht=function(){function t(e,n){v(this,t),this.reset(e,n)}return g(t,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var n=1,r=this._distances[n],i=t*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var a=n-1,o=this._distances[a],s=r-o,l=s>0?(i-o)/s:0;return this.points[a].mult(1-l).add(this.points[n].mult(l))}}]),t}(),dt=function(){function e(t,n,r){v(this,e);var i=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return g(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"insertCircle",value:function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}},{key:"_insertBoxCell",value:function(e,t,n,r,i,a){this.boxCells[i].push(a)}},{key:"_insertCircleCell",value:function(e,t,n,r,i,a){this.circleCells[i].push(a)}},{key:"_query",value:function(e,t,n,r,i,a){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return a?o.filter(a):o}return this._forEachCell(e,t,n,r,this._queryCell,o,{hitTest:i,seenUids:{box:{},circle:{}}},a),i?o.length>0:o}},{key:"_queryCircle",value:function(e,t,n,r,i){var a=e-n,o=e+n,s=t-n,l=t+n;if(o<0||a>this.width||l<0||s>this.height)return!r&&[];var u=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,u,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?u.length>0:u}},{key:"query",value:function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}},{key:"hitTest",value:function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}},{key:"hitTestCircle",value:function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}},{key:"_queryCell",value:function(e,t,n,r,i,a,o,s){var l=o.seenUids,u=this.boxCells[i];if(null!==u){var c,h=this.bboxes,f=d(u);try{for(f.s();!(c=f.n()).done;){var p=c.value;if(!l.box[p]){l.box[p]=!0;var m=4*p;if(e<=h[m+2]&&t<=h[m+3]&&n>=h[m+0]&&r>=h[m+1]&&(!s||s(this.boxKeys[p]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[p],x1:h[m],y1:h[m+1],x2:h[m+2],y2:h[m+3]})}}}}catch(S){f.e(S)}finally{f.f()}}var v=this.circleCells[i];if(null!==v){var g,y=this.circles,_=d(v);try{for(_.s();!(g=_.n()).done;){var x=g.value;if(!l.circle[x]){l.circle[x]=!0;var b=3*x;if(this._circleAndRectCollide(y[b],y[b+1],y[b+2],e,t,n,r)&&(!s||s(this.circleKeys[x]))){if(o.hitTest)return a.push(!0),!0;var w=y[b],k=y[b+1],T=y[b+2];a.push({key:this.circleKeys[x],x1:w-T,y1:k-T,x2:w+T,y2:k+T})}}}}catch(S){_.e(S)}finally{_.f()}}}},{key:"_queryCellCircle",value:function(e,t,n,r,i,a,o,s){var l=o.circle,u=o.seenUids,c=this.boxCells[i];if(null!==c){var h,f=this.bboxes,p=d(c);try{for(p.s();!(h=p.n()).done;){var m=h.value;if(!u.box[m]){u.box[m]=!0;var v=4*m;if(this._circleAndRectCollide(l.x,l.y,l.radius,f[v+0],f[v+1],f[v+2],f[v+3])&&(!s||s(this.boxKeys[m])))return a.push(!0),!0}}}catch(k){p.e(k)}finally{p.f()}}var g=this.circleCells[i];if(null!==g){var y,_=this.circles,x=d(g);try{for(x.s();!(y=x.n()).done;){var b=y.value;if(!u.circle[b]){u.circle[b]=!0;var w=3*b;if(this._circlesCollide(_[w],_[w+1],_[w+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return a.push(!0),!0}}}catch(k){x.e(k)}finally{x.f()}}}},{key:"_forEachCell",value:function(e,t,n,r,i,a,o,s){for(var l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),d=l;d<=c;d++)for(var f=u;f<=h;f++)if(i.call(this,e,t,n,r,this.xCellCount*f+d,a,o,s))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,n,r,i,a){var o=r-e,s=i-t,l=n+a;return l*l>o*o+s*s}},{key:"_circleAndRectCollide",value:function(e,t,n,r,i,a,o){var s=(a-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;var u=(o-i)/2,c=Math.abs(t-(i+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;var h=l-s,d=c-u;return h*h+d*d<=n*n}}]),e}(),ft=Math.tan(85*Math.PI/180);function pt(t,n,r,i,a,o,s){var l=e.create();if(r)if("globe"===o.name){var u=e.calculateGlobeLabelMatrix(a,n);e.multiply(l,l,u)}else{var c=B([],s);l[0]=c[0],l[1]=c[1],l[4]=c[2],l[5]=c[3],i||e.rotateZ(l,l,a.angle)}else e.multiply(l,a.labelPlaneMatrix,t);return l}function mt(e,t,n,r,i,a,o){var s=pt(e,t,n,r,i,a,o);return"globe"===a.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function vt(t,n,r,i,a,o,s){if(r){if("globe"===o.name){var l=pt(t,n,r,i,a,o,s);return e.invert(l,l),e.multiply(l,t,l),l}var u=e.clone(t),c=e.identity([]);return c[0]=s[0],c[1]=s[1],c[4]=s[2],c[5]=s[3],e.multiply(u,u,c),i||e.rotateZ(u,u,-a.angle),u}return a.glCoordMatrix}function gt(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=[t.x,t.y,r,1];r?e.transformMat4$1(i,i,n):Mt(i,i,n);var a=i[3];return{point:[i[0]/a,i[1]/a,i[2]/a],signedDistanceFromCamera:a}}function yt(t,n){var r=[t[0],t[1],t[2],1];e.transformMat4$1(r,r,n);var i=r[3];return{point:[r[0]/i,r[1]/i,r[2]/i],signedDistanceFromCamera:i}}function _t(e,t){return Math.min(.5+e/t*.5,1.5)}function xt(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function bt(t,n,r,i,a,o,s,l,u,c){var h=r.transform,d=i?t.textSizeData:t.iconSizeData,f=e.evaluateSizeForZoom(d,r.transform.zoom),p="globe"===h.projection.name,m=[256/r.width*2+1,256/r.height*2+1],v=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;v.clear();var g=null;p&&(g=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);for(var y=t.lineVertexArray,_=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,x=r.transform.width/r.transform.height,b=!1,w=0;w<_.length;w++){var k=_.get(w);if(k.writingMode!==e.WritingMode.vertical||b||0!==w&&_.get(w-1).writingMode===e.WritingMode.horizontal||(b=!0),!k.hidden&&k.writingMode!==e.WritingMode.vertical||b){b=!1;var T=new e.pointGeometry(k.tileAnchorX,k.tileAnchorY),S=u?u(T):[0,0,0],E=h.projection.projectTilePoint(T.x,T.y,c.canonical),C=[E.x+S[0],E.y+S[1],E.z+S[2]],A=[].concat(C,[1]);if(e.transformMat4$1(A,A,n),xt(A,m)){var R=_t(r.transform.cameraToCenterDistance,A[3]),M=e.evaluateSizeForFeature(d,f,k),B=s?M/R:M*R,P=gt(new e.pointGeometry(C[0],C[1]),a,C[2]);if(P.signedDistanceFromCamera<=0)Rt(k.numGlyphs,v);else{var I={},z=s?null:u,L=Tt(k,B,!1,l,n,a,o,t.glyphOffsetArray,y,v,g,P.point,T,I,x,z,h.projection,c,s);b=L.useVertical,z&&L.needsFlipping&&(I={}),(L.notEnoughRoom||b||L.needsFlipping&&Tt(k,B,!0,l,n,a,o,t.glyphOffsetArray,y,v,g,P.point,T,I,x,z,h.projection,c,s).notEnoughRoom)&&Rt(k.numGlyphs,v)}}else Rt(k.numGlyphs,v)}else Rt(k.numGlyphs,v)}i?(t.text.dynamicLayoutVertexBuffer.updateData(v),g&&t.text.globeExtVertexBuffer.updateData(g)):(t.icon.dynamicLayoutVertexBuffer.updateData(v),g&&t.icon.globeExtVertexBuffer.updateData(g))}function wt(e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,m){var v=s.glyphStartIndex+s.numGlyphs,g=s.lineStartIndex,y=s.lineStartIndex+s.lineLength,_=t.getoffsetX(s.glyphStartIndex),x=t.getoffsetX(v-1),b=Ct(e*_,n,r,i,a,o,s.segment,g,y,l,u,c,h,d,!0,f,p,m);if(!b)return null;var w=Ct(e*x,n,r,i,a,o,s.segment,g,y,l,u,c,h,d,!0,f,p,m);return w?{first:b,last:w}:null}function kt(t,n,r,i){return t.writingMode===e.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:t.writingMode===e.WritingMode.vertical?n.y<r.y?{needsFlipping:!0}:null:0!==t.flipState&&function(e,t,n){var r=(t.x-e.x)*n;return 0===r||Math.abs((t.y-e.y)/r)>ft}(n,r,i)?1===t.flipState?{needsFlipping:!0}:null:n.x>r.x?{needsFlipping:!0}:null}function Tt(t,n,r,i,a,o,s,l,u,c,h,f,p,m,v,g,y,_,x){var b,w=n/24,k=t.lineOffsetX*w,T=t.lineOffsetY*w;if(t.numGlyphs>1){var S=t.glyphStartIndex+t.numGlyphs,E=t.lineStartIndex,C=t.lineStartIndex+t.lineLength,A=wt(w,l,k,T,r,f,p,t,u,o,m,g,!1,y,_,x);if(!A)return{notEnoughRoom:!0};var R=yt(A.first.point,s).point,M=yt(A.last.point,s).point,B=new e.pointGeometry(R[0],R[1]),P=new e.pointGeometry(M[0],M[1]);if(i&&!r){var I=kt(t,B,P,v);if(t.flipState=I&&I.needsFlipping?1:2,I)return I}b=[A.first];for(var z=t.glyphStartIndex+1;z<S-1;z++)b.push(Ct(w*l.getoffsetX(z),k,T,r,f,p,t.segment,E,C,u,o,m,g,!1,!1,y,_,x));b.push(A.last)}else{if(i&&!r){var L=gt(p,a).point,D=t.lineStartIndex+t.segment+1,O=new e.pointGeometry(u.getx(D),u.gety(D)),N=gt(O,a),F=N.signedDistanceFromCamera>0?N.point:Et(p,O,L,1,a,void 0,y,_.canonical),j=kt(t,new e.pointGeometry(L[0],L[1]),new e.pointGeometry(F[0],F[1]),v);if(t.flipState=j&&j.needsFlipping?1:2,j)return j}var V=Ct(w*l.getoffsetX(t.glyphStartIndex),k,T,r,f,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,o,m,g,!1,!1,y,_,x);if(!V)return{notEnoughRoom:!0};b=[V]}if(h){var Z,U=d(b);try{for(U.s();!(Z=U.n()).done;){var G=Z.value;e.updateGlobeVertexNormal(h,c.length+0,G.up[0],G.up[1],G.up[2]),e.updateGlobeVertexNormal(h,c.length+1,G.up[0],G.up[1],G.up[2]),e.updateGlobeVertexNormal(h,c.length+2,G.up[0],G.up[1],G.up[2]),e.updateGlobeVertexNormal(h,c.length+3,G.up[0],G.up[1],G.up[2]),e.addDynamicAttributes(c,G.point[0],G.point[1],G.point[2],G.angle)}}catch(X){U.e(X)}finally{U.f()}}else{var H,q=d(b);try{for(q.s();!(H=q.n()).done;){var W=H.value;e.addDynamicAttributes(c,W.point[0],W.point[1],W.point[2],W.angle)}}catch(X){q.e(X)}finally{q.f()}}return{}}function St(t,n,r,i,a){var o=i.projectTilePoint(t.x,t.y,n);if(!a)return gt(o,r,o.z);var s=a(t);return gt(new e.pointGeometry(o.x+s[0],o.y+s[1]),r,o.z+s[2])}function Et(t,n,r,i,a,o,s,l){var u=St(t.add(t.sub(n)._unit()),l,a,s,o).point,c=e.sub([],r,u);return e.scaleAndAdd([],r,c,i/e.length(c))}function Ct(t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v,g,y){var _=i?t-n:t+n,x=_>0?1:-1,b=0;i&&(x*=-1,b=Math.PI),x<0&&(b+=Math.PI);for(var w=x>0?l+s:l+s+1,k=a,T=a,S=0,E=0,C=Math.abs(_),A=[],R=[],M=o,B=function(){var t=w-x;return 0===S?o:new e.pointGeometry(c.getx(t),c.gety(t))},P=function(){return Et(B(),M,T,C-S+1,h,f,v,g.canonical)};S+E<=C;){if((w+=x)<l||w>=u)return null;if(T=k,A.push(k),p&&R.push(M||B()),void 0===(k=d[w])){var I=St(M=new e.pointGeometry(c.getx(w),c.gety(w)),g.canonical,h,v,f);k=I.signedDistanceFromCamera>0?d[w]=I.point:P()}else M=null;S+=E,E=e.distance(T,k)}M=M||new e.pointGeometry(c.getx(w),c.gety(w));var z=B();m&&f&&(d[w]=k=void 0===d[w]?k:P(),E=e.distance(T,k));var L=(C-S)/E,D=M.sub(z).mult(L)._add(z),O=e.sub([],k,T),N=e.scaleAndAdd([],T,O,L),F=[0,0,1],j=O[0],V=O[1];if(y&&(0!==(F=v.upVector(g.canonical,D.x,D.y))[0]||0!==F[1]||1!==F[2])){var Z=[1,0,0],U=[0,1,0];Z[0]=F[2],Z[1]=0,Z[2]=-F[0],e.cross(U,F,Z),e.normalize(Z,Z),e.normalize(U,U),j=e.dot(O,Z),V=e.dot(O,U)}if(r){var G=e.cross([],F,O);e.normalize(G,G),e.scaleAndAdd(N,N,G,r*x)}var H=b+Math.atan2(V,j);return A.push(N),p&&R.push(D),{point:N,angle:H,path:A,tilePath:R,up:F}}var At=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Rt(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(At,4*r)}}function Mt(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var Bt=100,Pt=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new dt(e.width+200,e.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new dt(e.width+200,e.height+200,25);v(this,t),this.transform=e,this.grid=r,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Bt,this.screenBottomBoundary=e.height+Bt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=n}return g(t,[{key:"placeCollisionBox",value:function(e,t,n,r,i,a,o,s){var l=n.projectedAnchorX,u=n.projectedAnchorY,c=n.projectedAnchorZ,h=n.elevation,d=n.tileID;if(h&&d){var f=e.getProjection().upVector(d.canonical,n.tileAnchorX,n.tileAnchorY),p=e.getProjection().upVectorScale(d.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=f[0]*h*p,u+=f[1]*h*p,c+=f[2]*h*p}var m=this.projectAndGetPerspectiveRatio(o,[l,u,c],n.tileID,"globe"===e.projection.name||!!h||this.transform.pitch>0,e.getProjection()),v=a*m.perspectiveRatio,g=(n.x1*t+r.x-n.padding)*v+m.point.x,y=(n.y1*t+r.y-n.padding)*v+m.point.y,_=(n.x2*t+r.x+n.padding)*v+m.point.x,x=(n.y2*t+r.y+n.padding)*v+m.point.y,b=m.perspectiveRatio<=.55||m.occluded;return!this.isInsideGrid(g,y,_,x)||!i&&this.grid.hitTest(g,y,_,x,s)||b?{box:[],offscreen:!1,occluded:m.occluded}:{box:[g,y,_,x],offscreen:this.isOffscreen(g,y,_,x),occluded:!1}}},{key:"placeCollisionCircles",value:function(t,n,r,i,a,o,s,l,u,c,h,f,p,m,v){var g=[],y=this.transform.elevation,_=y?y.getAtTileOffsetFunc(v,this.transform.center.lat,this.transform.worldSize,t.getProjection()):function(e){return[0,0,0]},x=new e.pointGeometry(r.tileAnchorX,r.tileAnchorY),b=t.getProjection().projectTilePoint(r.tileAnchorX,r.tileAnchorY,v.canonical),w=_(x),k=[b.x+w[0],b.y+w[1],b.z+w[2]],T="globe"===t.projection.name,S=this.projectAndGetPerspectiveRatio(s,[k[0],k[1],k[2]],v,T||!!y||this.transform.pitch>0,t.getProjection()),E=S.perspectiveRatio,C=(h?o/E:o*E)/e.ONE_EM,A=gt(new e.pointGeometry(k[0],k[1]),l,k[2]).point,R=S.signedDistanceFromCamera>0?wt(C,a,r.lineOffsetX*C,r.lineOffsetY*C,!1,A,x,r,i,l,{},y&&!h?_:null,h&&!!y,t.getProjection(),v,h):null,M=!1,B=!1,P=!0;if(R&&!S.occluded){for(var I=.5*p*E+m,z=new e.pointGeometry(-100,-100),L=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),D=new ht,O=R.first,N=R.last,F=[],j=O.path.length-1;j>=1;j--)F.push(O.path[j]);for(var V=1;V<N.path.length;V++)F.push(N.path[V]);var Z=2.5*I;if(u){var U=F.map(y&&!T?function(e,t){var n=_(t<O.path.length-1?O.tilePath[O.path.length-1-t]:N.tilePath[t-O.path.length+2]);return e[2]=n[2],yt(e,u)}:function(e){return yt(e,u)});F=U.some((function(e){return e.signedDistanceFromCamera<=0}))?[]:U.map((function(e){return e.point}))}var G=[];if(F.length>0){for(var H=F.map((function(t){return new e.pointGeometry(t[0],t[1])})),q=1/0,W=-1/0,X=1/0,K=-1/0,Y=0;Y<H.length;Y++)q=Math.min(q,H[Y].x),X=Math.min(X,H[Y].y),W=Math.max(W,H[Y].x),K=Math.max(K,H[Y].y);G=q>=z.x&&W<=L.x&&X>=z.y&&K<=L.y?[H]:W<z.x||q>L.x||K<z.y||X>L.y?[]:e.clipLine([H],z.x,z.y,L.x,L.y)}var J,Q=d(G);try{for(Q.s();!(J=Q.n()).done;){var $=J.value;D.reset($,.25*I);var ee=0;ee=D.length<=.5*I?1:Math.ceil(D.paddedLength/Z)+1;for(var te=0;te<ee;te++){var ne=te/Math.max(ee-1,1),re=D.lerp(ne),ie=re.x+Bt,ae=re.y+Bt;g.push(ie,ae,I,0);var oe=ie-I,se=ae-I,le=ie+I,ue=ae+I;if(P=P&&this.isOffscreen(oe,se,le,ue),B=B||this.isInsideGrid(oe,se,le,ue),!n&&this.grid.hitTestCircle(ie,ae,I,f)&&(M=!0,!c))return{circles:[],offscreen:!1,collisionDetected:M,occluded:!1}}}}catch(ce){Q.e(ce)}finally{Q.f()}}return{circles:!c&&M||!B?[]:g,offscreen:P,collisionDetected:M,occluded:S.occluded}}},{key:"queryRenderedSymbols",value:function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var n,r=[],i=1/0,a=1/0,o=-1/0,s=-1/0,l=d(t);try{for(l.s();!(n=l.n()).done;){var u=n.value,c=new e.pointGeometry(u.x+Bt,u.y+Bt);i=Math.min(i,c.x),a=Math.min(a,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y),r.push(c)}}catch(x){l.e(x)}finally{l.f()}var h,f=this.grid.query(i,a,o,s).concat(this.ignoredGrid.query(i,a,o,s)),p={},m={},v=d(f);try{for(v.s();!(h=v.n()).done;){var g=h.value,y=g.key;if(void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),!p[y.bucketInstanceId][y.featureIndex]){var _=[new e.pointGeometry(g.x1,g.y1),new e.pointGeometry(g.x2,g.y1),new e.pointGeometry(g.x2,g.y2),new e.pointGeometry(g.x1,g.y2)];e.polygonIntersectsPolygon(r,_)&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===m[y.bucketInstanceId]&&(m[y.bucketInstanceId]=[]),m[y.bucketInstanceId].push(y.featureIndex))}}}catch(x){v.e(x)}finally{v.f()}return m}},{key:"insertCollisionBox",value:function(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,n,r,i){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])}},{key:"projectAndGetPerspectiveRatio",value:function(t,n,r,i,a){var o=[n[0],n[1],n[2],1],s=!1;if(n[2]||this.transform.pitch>0){e.transformMat4$1(o,o,t);var l="globe"===a.name;this.fogState&&r&&!l&&(s=function(t,n,r,i,a,o){var s=o.calculateFogTileMatrix(a),l=[n,r,i];return e.transformMat4(l,l,s),j(t,l,o.pitch,o._fov)}(this.fogState,n[0],n[1],n[2],r.toUnwrapped(),this.transform)>.9)}else Mt(o,o,t);return{point:new e.pointGeometry((o[0]/o[3]+1)/2*this.transform.width+Bt,(-o[1]/o[3]+1)/2*this.transform.height+Bt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(a)/o[3]*.5,1.5),signedDistanceFromCamera:o[3],occluded:i&&o[2]>o[3]||s}}},{key:"isOffscreen",value:function(e,t,n,r){return n<Bt||e>=this.screenRightBoundary||r<Bt||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}]),t}();function It(t,n,r){var i=n.createTileMatrix(t,t.worldSize,r.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function zt(e,t,n){if(t.projection.name===n.projection.name)return e.projMatrix;var r=n.clone();return r.setProjection(t.projection),It(r,t.getProjection(),e)}function Lt(e,t,n){return t.name===n.projection.name?e.projMatrix:It(n,t,e)}var Dt=function(){function e(t,n,r,i){v(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?n:-n))):i&&r?1:0,this.placed=r}return g(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),Ot=function(){function e(t,n,r,i,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];v(this,e),this.text=new Dt(t?t.text:null,n,r,a),this.icon=new Dt(t?t.icon:null,n,i,a),this.clipped=o}return g(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),Nt=g((function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];v(this,e),this.text=t,this.icon=n,this.skipFade=r,this.clipped=i})),Ft=g((function t(){v(this,t),this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]})),jt=g((function e(t,n,r,i,a){v(this,e),this.bucketInstanceId=t,this.featureIndex=n,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=a})),Vt=function(){function e(t){v(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return g(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function Zt(t,n,r,i,a){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*n,l=-(o.verticalAlign-.5)*r,u=e.evaluateVariableOffset(t,i);return new e.pointGeometry(s+u[0]*a,l+u[1]*a)}function Ut(t,n,r,i,a){var o=new e.pointGeometry(t,n);return r&&o._rotate(i?a:-a),o}var Gt=function(){function t(e,n,r,i,a){v(this,t),this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new Pt(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Vt(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}return g(t,[{key:"getBucketParts",value:function(t,n,r,i){var a=r.getBucket(n),o=r.latestFeatureIndex;if(a&&o&&n.id===a.layerIds[0]){var s=a.layers[0].layout,l=r.collisionBoxArray,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.EXTENT,h=r.tileID.toUnwrapped();this.transform.setProjection(a.projection);var f,p,m,v=(f=r.tileID,p=a.getProjection(),m=this.transform,p.name===this.projection?m.calculateProjMatrix(f.toUnwrapped()):It(m,p,f)),g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");n.compileFilter();var _=n.dynamicFilter(),x=n.dynamicFilterNeedsFeature(),b=this.transform.calculatePixelsToTileUnitsMatrix(r),w=mt(v,r.tileID.canonical,g,y,this.transform,a.getProjection(),b),k=null;if(g){var T=vt(v,r.tileID.canonical,g,y,this.transform,a.getProjection(),b);k=e.multiply([],this.transform.labelPlaneMatrix,T)}var S=null;_&&r.latestFeatureIndex&&(S={unwrappedTileID:h,dynamicFilter:_,dynamicFilterNeedsFeature:x,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[a.bucketInstanceId]=new jt(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,r.tileID);var E={bucket:a,layout:s,posMatrix:v,textLabelPlaneMatrix:w,labelToScreenMatrix:k,clippingData:S,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(i){var C,A=d(a.sortKeyRanges);try{for(A.s();!(C=A.n()).done;){var R=C.value,M=R.sortKey,B=R.symbolInstanceStart,P=R.symbolInstanceEnd;t.push({sortKey:M,symbolInstanceStart:B,symbolInstanceEnd:P,parameters:E})}}catch(I){A.e(I)}finally{A.f()}}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:E})}}},{key:"attemptAnchorPlacement",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v,g){var y,_=[h.textOffset0,h.textOffset1],x=Zt(e,n,r,_,i),b=this.collisionIndex.placeCollisionBox(f,i,t,Ut(x.x,x.y,a,o,this.transform.angle),c,s,l,u.predicate);if((!m||0!==this.collisionIndex.placeCollisionBox(f,f.getSymbolInstanceIconSize(g,this.transform.zoom,d),m,Ut(x.x,x.y,a,o,this.transform.angle),c,s,l,u.predicate).box.length)&&b.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(y=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:_,width:n,height:r,anchor:e,textScale:i,prevAnchor:y},this.markUsedJustification(f,e,h,p),f.allowVerticalPlacement&&(this.markUsedOrientation(f,p,h),this.placedOrientations[h.crossTileID]=p),{shift:x,placedGlyphBoxes:b}}},{key:"placeLayerBucketPart",value:function(t,n,r,i){var a=this,o=t.parameters,s=o.bucket,l=o.layout,u=o.posMatrix,c=o.textLabelPlaneMatrix,h=o.labelToScreenMatrix,f=o.clippingData,p=o.textPixelRatio,m=o.holdingForFade,v=o.collisionBoxArray,g=o.partiallyEvaluatedTextSize,y=o.partiallyEvaluatedIconSize,_=o.collisionGroup,x=l.get("text-optional"),b=l.get("icon-optional"),w=l.get("text-allow-overlap"),k=l.get("icon-allow-overlap"),T="map"===l.get("text-rotation-alignment"),S="map"===l.get("text-pitch-alignment"),E="none"!==l.get("icon-text-fit"),C="viewport-y"===l.get("symbol-z-order");this.transform.setProjection(s.projection);var A=w&&(k||!s.hasIconData()||b),R=k&&(w||!s.hasTextData()||x);!s.collisionArrays&&v&&s.deserializeCollisionBoxes(v),r&&i&&s.updateCollisionDebugBuffers(this.transform.zoom,v);var M=function(t,i,o){if(f){var v={zoom:a.transform.zoom,pitch:a.transform.pitch},C=null;if(f.dynamicFilterNeedsFeature){var M=a.retainedQueryData[s.bucketInstanceId];C=f.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:M.bucketIndex,sourceLayerIndex:M.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,f.dynamicFilter)(v,C,a.retainedQueryData[s.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),a.transform.calculateDistanceTileData(f.unwrappedTileID)))return a.placements[t.crossTileID]=new Nt(!1,!1,!1,!0),void(n[t.crossTileID]=!0)}if(!n[t.crossTileID])if(m)a.placements[t.crossTileID]=new Nt(!1,!1,!1);else{var B=!1,P=!1,I=!0,z=!1,L=!1,D=null,O={box:null,offscreen:null,occluded:null},N={box:null,offscreen:null,occluded:null},F=null,j=null,V=null,Z=0,U=0,G=0;o.textFeatureIndex?Z=o.textFeatureIndex:t.useRuntimeCollisionCircles&&(Z=t.featureIndex),o.verticalTextFeatureIndex&&(U=o.verticalTextFeatureIndex);var H=function(e){e.tileID=a.retainedQueryData[s.bucketInstanceId].tileID,(a.transform.elevation||e.elevation)&&(e.elevation=a.transform.elevation?a.transform.elevation.getAtTileOffset(a.retainedQueryData[s.bucketInstanceId].tileID,e.tileAnchorX,e.tileAnchorY):0)},q=o.textBox;if(q){H(q);var W=function(n){var r=e.WritingMode.horizontal;if(s.allowVerticalPlacement&&!n&&a.prevPlacement){var i=a.prevPlacement.placedOrientations[t.crossTileID];i&&(a.placedOrientations[t.crossTileID]=i,r=i,a.markUsedOrientation(s,r,t))}return r},X=function(n,r){if(s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&o.verticalTextBox){var i,a=d(s.writingModes);try{for(a.s();!(i=a.n()).done&&(i.value===e.WritingMode.vertical?(O=r(),N=O):O=n(),!(O&&O.box&&O.box.length)););}catch(l){a.e(l)}finally{a.f()}}else O=n()};if(l.get("text-variable-anchor")){var K=l.get("text-variable-anchor");if(a.prevPlacement&&a.prevPlacement.variableOffsets[t.crossTileID]){var Y=a.prevPlacement.variableOffsets[t.crossTileID];K.indexOf(Y.anchor)>0&&(K=K.filter((function(e){return e!==Y.anchor})),K.unshift(Y.anchor))}var J=function(e,n,r){var o=s.getSymbolInstanceTextSize(g,t,a.transform.zoom,i),l=(e.x2-e.x1)*o+2*e.padding,c=(e.y2-e.y1)*o+2*e.padding,h=E&&!k?n:null;h&&H(h);for(var d={box:[],offscreen:!1,occluded:!1},f=w?2*K.length:K.length,m=0;m<f;++m){var v=a.attemptAnchorPlacement(K[m%K.length],e,l,c,o,T,S,p,u,_,m>=K.length,t,i,s,r,h,g,y);if(v&&(d=v.placedGlyphBoxes)&&d.box&&d.box.length){B=!0,D=v.shift;break}}return d};X((function(){return J(q,o.iconBox,e.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return n&&H(n),s.allowVerticalPlacement&&!(O&&O.box&&O.box.length)&&t.numVerticalGlyphVertices>0&&n?J(n,o.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),O&&(B=O.box,I=O.offscreen,z=O.occluded);var Q=W(O&&O.box);if(!B&&a.prevPlacement){var $=a.prevPlacement.variableOffsets[t.crossTileID];$&&(a.variableOffsets[t.crossTileID]=$,a.markUsedJustification(s,$.anchor,t,Q))}}else{var ee=function(n,r){var o=s.getSymbolInstanceTextSize(g,t,a.transform.zoom,i),l=a.collisionIndex.placeCollisionBox(s,o,n,new e.pointGeometry(0,0),w,p,u,_.predicate);return l&&l.box&&l.box.length&&(a.markUsedOrientation(s,r,t),a.placedOrientations[t.crossTileID]=r),l};X((function(){return ee(q,e.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&n?(H(n),ee(n,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),W(O&&O.box&&O.box.length)}}if(B=(F=O)&&F.box&&F.box.length>0,I=F&&F.offscreen,z=F&&F.occluded,t.useRuntimeCollisionCircles){var te=s.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),ne=e.evaluateSizeForFeature(s.textSizeData,g,te),re=l.get("text-padding");j=a.collisionIndex.placeCollisionCircles(s,w,te,s.lineVertexArray,s.glyphOffsetArray,ne,u,c,h,r,S,_.predicate,t.collisionCircleDiameter*ne/e.ONE_EM,re,a.retainedQueryData[s.bucketInstanceId].tileID),B=w||j.circles.length>0&&!j.collisionDetected,I=I&&j.offscreen,z=j.occluded}if(o.iconFeatureIndex&&(G=o.iconFeatureIndex),o.iconBox){var ie=function(t){H(t);var n=E&&D?Ut(D.x,D.y,T,S,a.transform.angle):new e.pointGeometry(0,0),r=s.getSymbolInstanceIconSize(y,a.transform.zoom,i);return a.collisionIndex.placeCollisionBox(s,r,t,n,k,p,u,_.predicate)};P=N&&N.box&&N.box.length&&o.verticalIconBox?(V=ie(o.verticalIconBox)).box.length>0:(V=ie(o.iconBox)).box.length>0,I=I&&V.offscreen,L=V.occluded}var ae=x||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,oe=b||0===t.numIconVertices;if(ae||oe?oe?ae||(P=P&&B):B=P&&B:P=B=P&&B,B&&F&&F.box&&a.collisionIndex.insertCollisionBox(F.box,l.get("text-ignore-placement"),s.bucketInstanceId,N&&N.box&&U?U:Z,_.ID),P&&V&&a.collisionIndex.insertCollisionBox(V.box,l.get("icon-ignore-placement"),s.bucketInstanceId,G,_.ID),j&&(B&&a.collisionIndex.insertCollisionCircles(j.circles,l.get("text-ignore-placement"),s.bucketInstanceId,Z,_.ID),r)){var se=s.bucketInstanceId,le=a.collisionCircleArrays[se];void 0===le&&(le=a.collisionCircleArrays[se]=new Ft);for(var ue=0;ue<j.circles.length;ue+=4)le.circles.push(j.circles[ue+0]),le.circles.push(j.circles[ue+1]),le.circles.push(j.circles[ue+2]),le.circles.push(j.collisionDetected?1:0)}var ce="globe"!==s.projection.name;A=A&&(ce||!z),R=R&&(ce||!L),a.placements[t.crossTileID]=new Nt(B||A,P||R,I||s.justReloaded),n[t.crossTileID]=!0}};if(C)for(var B=s.getSortedSymbolIndexes(this.transform.angle),P=B.length-1;P>=0;--P){var I=B[P];M(s.symbolInstances.get(I),I,s.collisionArrays[I])}else for(var z=t.symbolInstanceStart;z<t.symbolInstanceEnd;z++)M(s.symbolInstances.get(z),z,s.collisionArrays[z]);if(r&&s.bucketInstanceId in this.collisionCircleArrays){var L=this.collisionCircleArrays[s.bucketInstanceId];e.invert(L.invProjMatrix,u),L.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}},{key:"markUsedJustification",value:function(t,n,r,i){var a;a=i===e.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(n)];for(var o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];o<s.length;o++){var l=s[o];l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=a>=0&&l!==a?0:r.crossTileID)}}},{key:"markUsedOrientation",value:function(t,n,r){for(var i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,a=n===e.WritingMode.vertical?n:0,o=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];o<s.length;o++){var l=s[o];t.text.placedSymbolArray.get(l).placedOrientation=i}r.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=a)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=i[s];u?(this.opacities[s]=new Ot(u,r,l.text,l.icon,null,l.clipped),n=n||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new Ot(null,r,l.text,l.icon,l.skipFade,l.clipped),n=n||l.text||l.icon)}for(var c in i){var h=i[c];if(!this.opacities[c]){var d=new Ot(h,r,!1,!1);d.isHidden()||(this.opacities[c]=d,n=n||h.text.placed||h.icon.placed)}}for(var f in a)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=a[f]);for(var p in o)this.placedOrientations[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.placedOrientations[p]=o[p]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var n,r={},i=d(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,r,a.collisionBoxArray)}}catch(s){i.e(s)}finally{i.f()}}},{key:"updateBucketOpacities",value:function(t,n,r){var i=this;t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var a=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),s=new Ot(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),u=a.get("icon-allow-overlap"),c=a.get("text-variable-anchor"),h="map"===a.get("text-rotation-alignment"),d="map"===a.get("text-pitch-alignment"),f="none"!==a.get("icon-text-fit"),p=new Ot(null,0,l&&(u||!t.hasIconData()||a.get("icon-optional")),u&&(l||!t.hasTextData()||a.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var m=function(e,t,n){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)},v=0,g=function(r){var a=t.symbolInstances.get(r),l=a.numHorizontalGlyphVertices,u=a.numVerticalGlyphVertices,g=a.crossTileID,y=i.opacities[g];n[g]?y=s:y||(y=p,i.opacities[g]=y),n[g]=!0;var _=l>0||u>0,x=a.numIconVertices>0,b=i.placedOrientations[a.crossTileID],w=b===e.WritingMode.vertical,k=b===e.WritingMode.horizontal||b===e.WritingMode.horizontalOnly;if(!_&&!x||y.isHidden()||v++,_){var T=$t(y.text);m(t.text,l,w?en:T),m(t.text,u,k?en:T);var S=y.text.isHidden();[a.rightJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.leftJustifiedTextSymbolIndex].forEach((function(e){e>=0&&(t.text.placedSymbolArray.get(e).hidden=S||w?1:0)})),a.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).hidden=S||k?1:0);var E=i.variableOffsets[a.crossTileID];E&&i.markUsedJustification(t,E.anchor,a,b);var C=i.placedOrientations[a.crossTileID];C&&(i.markUsedJustification(t,"left",a,C),i.markUsedOrientation(t,C,a))}if(x){var A=$t(y.icon);a.placedIconSymbolIndex>=0&&(m(t.icon,a.numIconVertices,w?en:A),t.icon.placedSymbolArray.get(a.placedIconSymbolIndex).hidden=y.icon.isHidden()),a.verticalPlacedIconSymbolIndex>=0&&(m(t.icon,a.numVerticalIconVertices,k?en:A),t.icon.placedSymbolArray.get(a.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var R=t.collisionArrays[r];if(R){var M=new e.pointGeometry(0,0),B=!0;if(R.textBox||R.verticalTextBox){if(c){var P=i.variableOffsets[g];P?(M=Zt(P.anchor,P.width,P.height,P.textOffset,P.textScale),h&&M._rotate(d?i.transform.angle:-i.transform.angle)):B=!1}o&&(B=!y.clipped),R.textBox&&Ht(t.textCollisionBox.collisionVertexArray,y.text.placed,!B||w,M.x,M.y),R.verticalTextBox&&Ht(t.textCollisionBox.collisionVertexArray,y.text.placed,!B||k,M.x,M.y)}var I=B&&Boolean(!k&&R.verticalIconBox);R.iconBox&&Ht(t.iconCollisionBox.collisionVertexArray,y.icon.placed,I,f?M.x:0,f?M.y:0),R.verticalIconBox&&Ht(t.iconCollisionBox.collisionVertexArray,y.icon.placed,!I,f?M.x:0,f?M.y:0)}}},y=0;y<t.symbolInstances.length;y++)g(y);if(t.fullyClipped=0===v,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var _=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=_.invProjMatrix,t.placementViewportMatrix=_.viewportMatrix,t.collisionCircleArray=_.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}},{key:"setStale",value:function(){this.stale=!0}}]),t}();function Ht(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}var qt=Math.pow(2,25),Wt=Math.pow(2,24),Xt=Math.pow(2,17),Kt=Math.pow(2,16),Yt=Math.pow(2,9),Jt=Math.pow(2,8),Qt=Math.pow(2,1);function $t(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*qt+t*Wt+n*Xt+t*Kt+n*Yt+t*Jt+n*Qt+t}var en=0,tn=function(){function e(t){v(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}return g(e,[{key:"continuePlacement",value:function(e,t,n,r,i){for(var a=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(a,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<a.length;){var o=a[this._currentPartIndex];if(t.placeLayerBucketPart(o,this._seenCrossTileIDs,n,0===o.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}]),e}(),nn=function(){function t(e,n,r,i,a,o,s,l){v(this,t),this.placement=new Gt(e,a,o,s,l),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}return g(t,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(t,n,r){for(var i=this,a=e.exported.now(),o=function(){var t=e.exported.now()-a;return!i._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=n[t[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new tn(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),t}(),rn=512/e.EXTENT/2,an=function(){function t(e,n,r){v(this,t),this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=r;for(var i=0;i<n.length;i++){var a=n.get(i),o=a.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,e)})}}return g(t,[{key:"getScaledCoordinates",value:function(t,n){var r=rn/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.tileAnchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.tileAnchorY)*r)}}},{key:"findMatches",value:function(e,t,n){for(var r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),i=0;i<e.length;i++){var a=e.get(i);if(!a.crossTileID){var o=this.indexedSymbolInstances[a.key];if(o){var s,l=this.getScaledCoordinates(a,t),u=d(o);try{for(u.s();!(s=u.n()).done;){var c=s.value;if(Math.abs(c.coord.x-l.x)<=r&&Math.abs(c.coord.y-l.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,a.crossTileID=c.crossTileID;break}}}catch(h){u.e(h)}finally{u.f()}}}}}}]),t}(),on=function(){function e(){v(this,e),this.maxCrossTileID=0}return g(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),sn=function(){function e(){v(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return g(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var a in r){var o=r[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),i[o.tileID.key]=o}this.indexes[n]=i}this.lng=e}},{key:"addBucket",value:function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var i=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,i)}else{var u=o[e.scaledTo(Number(a)).key];u&&u.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var h=t.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),i[h.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new an(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){for(var n in t.indexedSymbolInstances){var r,i=d(t.indexedSymbolInstances[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete this.usedCrossTileIDs[e][a.crossTileID]}}catch(o){i.e(o)}finally{i.f()}}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}]),e}(),ln=function(){function e(){v(this,e),this.layerIndexes={},this.crossTileIDs=new on,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return g(e,[{key:"addLayer",value:function(e,t,n,r){var i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new sn);var a=!1,o={};"globe"!==r.name&&i.handleWrapJump(n);var s,l=d(t);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.getBucket(e);c&&e.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(u.tileID,c,this.crossTileIDs)&&(a=!0),o[c.bucketInstanceId]=!0)}}catch(h){l.e(h)}finally{l.f()}return i.removeStaleBuckets(o)&&(a=!0),a}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]}}]),e}(),un=function(t,n){return e.emitValidationErrors(t,n&&n.filter((function(e){return"source.canvas"!==e.identifier})))},cn=e.pick(rt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),hn=e.pick(rt,["setCenter","setZoom","setBearing","setPitch"]),dn={version:8,layers:[],sources:{}},fn={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},pn=function(n){p(a,n);var r=m(a);function a(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};v(this,a),(n=r.call(this)).map=t,n.dispatcher=new H(et(),i(n)),n.imageManager=new I,n.imageManager.setEventedParent(i(n)),n.glyphManager=new e.GlyphManager(t._requestManager,o.localFontFamily?e.LocalGlyphMode.all:o.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,o.localFontFamily||o.localIdeographFontFamily),n.lineAtlas=new e.LineAtlas(256,512),n.crossTileSymbolIndex=new ln,n._layers={},n._num3DLayers=0,n._numSymbolLayers=0,n._numCircleLayers=0,n._serializedLayers={},n._sourceCaches={},n._otherSourceCaches={},n._symbolSourceCaches={},n.zoomHistory=new e.ZoomHistory,n._loaded=!1,n._availableImages=[],n._order=[],n._drapedFirstOrder=[],n._markersNeedUpdate=!1,n._resetUpdates(),n.dispatcher.broadcast("setReferrer",e.getReferrer());var s=i(n);return n._rtlTextPluginCallback=a.registerForPluginStateChange((function(t){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,n){if(e.triggerPluginCompletionEvent(t),n&&n.every((function(e){return e})))for(var r in s._sourceCaches){var i=s._sourceCaches[r],a=i.getSource().type;"vector"!==a&&"geojson"!==a||i.reload()}}))})),n.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=n.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(var r in n._layers){var i=n._layers[r];i.source===t.id&&n._validateLayer(i)}}})),n}return g(a,[{key:"loadURL",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof r.validate?r.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,r.accessToken);var a=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,(function(t,r){n._request=null,t?n.fire(new e.ErrorEvent(t)):r&&n._load(r,i)}))}},{key:"loadJSON",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((function(){n._request=null,n._load(t,!1!==r.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(dn,!1)}},{key:"_updateLayerCount",value:function(e,t){var n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}},{key:"_load",value:function(t,n){if(!n||!un(this,e.validateStyle(t))){for(var r in this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection(),t.sources)this.addSource(r,t.sources[r],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);var i=nt(this.stylesheet.layers);this._order=i.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var a,o=d(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;(s=e.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize(),this._updateLayerCount(s,!0)}}catch(l){o.e(l)}finally{o.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new D(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}}},{key:"terrainSetForDrapingOnly",value:function(){return!!this.terrain&&0===this.terrain.drapeRenderMode}},{key:"setProjection",value:function(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}},{key:"applyProjectionUpdate",value:function(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}},{key:"_updateMapProjection",value:function(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}},{key:"_loadSprite",value:function(t){var n=this;this._spriteRequest=function(t,n,r){var i,a,o,s=e.exported.devicePixelRatio>1?"@2x":"",l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){l=null,o||(o=e,i=t,c())})),u=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){u=null,o||(o=e,a=t,c())}));function c(){if(o)r(o);else if(i&&a){var t=e.exported.getImageData(a),n={};for(var s in i){var l=i[s],u=l.width,c=l.height,h=l.x,d=l.y,f=l.sdf,p=l.pixelRatio,m=l.stretchX,v=l.stretchY,g=l.content,y=new e.RGBAImage({width:u,height:c});e.RGBAImage.copy(t,y,{x:h,y:d},{x:0,y:0},{width:u,height:c}),n[s]={data:y,pixelRatio:p,sdf:f,stretchX:m,stretchY:v,content:g}}r(null,n)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,(function(t,r){if(n._spriteRequest=null,t)n.fire(new e.ErrorEvent(t));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.dispatcher.broadcast("spriteLoaded",!0),n.fire(new e.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(t){var n=this.getSource(t.source);if(n){var r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(t.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,n=[],r=d(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=this._layers[i];"custom"!==a.type&&n.push(a.serialize())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(var e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"order",get:function(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}},{key:"isLayerDraped",value:function(e){return!!this.terrain&&fn[e.type]}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(t){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var a in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var o=this._updatedSources[a];"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}var l={};for(var u in this._sourceCaches){var c=this._sourceCaches[u];l[u]=c.used,c.used=!1}var h,f=d(this._order);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=this._layers[p];if(m.recalculate(t,this._availableImages),!m.isHidden(t.zoom)){var v=this._getLayerSourceCache(m);v&&(v.used=!0)}var g=this.map.painter;if(g){var y=m.getProgramIds();if(!y)continue;var _,x=m.getProgramConfiguration(t.zoom),b=d(y);try{for(b.s();!(_=b.n()).done;){var w=_.value;g.useProgram(w,x)}}catch(S){b.e(S)}finally{b.f()}}}}catch(S){f.e(S)}finally{f.f()}for(var k in l){var T=this._sourceCaches[k];l[k]!==T.used&&T.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:T.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(n){var r=this;if(this._checkLoaded(),un(this,e.validateStyle(n)))return!1;(n=e.clone$1(n)).layers=nt(n.layers);var i=function(e,n){if(!e)return[{command:rt.setStyle,args:[n]}];var r=[];try{if(!t(e.version,n.version))return[{command:rt.setStyle,args:[n]}];t(e.center,n.center)||r.push({command:rt.setCenter,args:[n.center]}),t(e.zoom,n.zoom)||r.push({command:rt.setZoom,args:[n.zoom]}),t(e.bearing,n.bearing)||r.push({command:rt.setBearing,args:[n.bearing]}),t(e.pitch,n.pitch)||r.push({command:rt.setPitch,args:[n.pitch]}),t(e.sprite,n.sprite)||r.push({command:rt.setSprite,args:[n.sprite]}),t(e.glyphs,n.glyphs)||r.push({command:rt.setGlyphs,args:[n.glyphs]}),t(e.transition,n.transition)||r.push({command:rt.setTransition,args:[n.transition]}),t(e.light,n.light)||r.push({command:rt.setLight,args:[n.light]}),t(e.fog,n.fog)||r.push({command:rt.setFog,args:[n.fog]}),t(e.projection,n.projection)||r.push({command:rt.setProjection,args:[n.projection]});var i={},a=[];!function(e,n,r,i){var a;for(a in n=n||{},e=e||{})e.hasOwnProperty(a)&&(n.hasOwnProperty(a)||at(a,r,i));for(a in n)n.hasOwnProperty(a)&&(e.hasOwnProperty(a)?t(e[a],n[a])||("geojson"===e[a].type&&"geojson"===n[a].type&&st(e,n,a)?r.push({command:rt.setGeoJSONSourceData,args:[a,n[a].data]}):ot(a,n,r,i)):it(a,n,r))}(e.sources,n.sources,a,i);var o=[];e.layers&&e.layers.forEach((function(e){e.source&&i[e.source]?r.push({command:rt.removeLayer,args:[e.id]}):o.push(e)}));var s=e.terrain;s&&i[s.source]&&(r.push({command:rt.setTerrain,args:[void 0]}),s=void 0),r=r.concat(a),t(s,n.terrain)||r.push({command:rt.setTerrain,args:[n.terrain]}),function(e,n,r){n=n||[];var i,a,o,s,l,u,c,h=(e=e||[]).map(ut),d=n.map(ut),f=e.reduce(ct,{}),p=n.reduce(ct,{}),m=h.slice(),v=Object.create(null);for(i=0,a=0;i<h.length;i++)o=h[i],p.hasOwnProperty(o)?a++:(r.push({command:rt.removeLayer,args:[o]}),m.splice(m.indexOf(o,a),1));for(i=0,a=0;i<d.length;i++)o=d[d.length-1-i],m[m.length-1-i]!==o&&(f.hasOwnProperty(o)?(r.push({command:rt.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-a),1)):a++,u=m[m.length-i],r.push({command:rt.addLayer,args:[p[o],u]}),m.splice(m.length-i,0,o),v[o]=!0);for(i=0;i<d.length;i++)if(s=f[o=d[i]],l=p[o],!v[o]&&!t(s,l))if(t(s.source,l.source)&&t(s["source-layer"],l["source-layer"])&&t(s.type,l.type)){for(c in lt(s.layout,l.layout,r,o,null,rt.setLayoutProperty),lt(s.paint,l.paint,r,o,null,rt.setPaintProperty),t(s.filter,l.filter)||r.push({command:rt.setFilter,args:[o,l.filter]}),t(s.minzoom,l.minzoom)&&t(s.maxzoom,l.maxzoom)||r.push({command:rt.setLayerZoomRange,args:[o,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?lt(s[c],l[c],r,o,c.slice(6),rt.setPaintProperty):t(s[c],l[c])||r.push({command:rt.setLayerProperty,args:[o,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?lt(s[c],l[c],r,o,c.slice(6),rt.setPaintProperty):t(s[c],l[c])||r.push({command:rt.setLayerProperty,args:[o,c,l[c]]}))}else r.push({command:rt.removeLayer,args:[o]}),u=m[m.lastIndexOf(o)+1],r.push({command:rt.addLayer,args:[l,u]})}(o,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:rt.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((function(e){return!(e.command in hn)}));if(0===i.length)return!1;var a=i.filter((function(e){return!(e.command in cn)}));if(a.length>0)throw new Error("Unimplemented: ".concat(a.map((function(e){return e.command})).join(", "),"."));return i.forEach((function(e){"setTransition"!==e.command&&"setProjection"!==e.command&&r[e.command].apply(r,e.args)})),this.stylesheet=n,this._updateMapProjection(),!0}},{key:"addImage",value:function(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}},{key:"_afterImageUpdated",value:function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this._availableImages.slice()}},{key:"addSource",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,"sources.".concat(t),n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var a=He(t,n,this.dispatcher,this);a.setEventedParent(this,(function(){return{isSourceLoaded:r._isSourceCacheLoaded(t),source:a.serialize(),sourceId:t}}));var o=function(n){var i=(n?"symbol:":"other:")+t,o=r._sourceCaches[i]=new e.SourceCache(i,a,n);(n?r._symbolSourceCaches:r._otherSourceCaches)[t]=o,o.style=r,o.onAdd(r.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),a.onAdd&&a.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(t){this._checkLoaded();var n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(r,'" is using it.'))));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));var i,a=this._getSourceCaches(t),o=d(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;delete this._sourceCaches[s.id],delete this._updatedSources[s.id],s.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s.getSource().id})),s.setEventedParent(null),s.clearTiles()}}catch(l){o.e(l)}finally{o.f()}return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}},{key:"setGeoJSONSourceData",value:function(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}},{key:"getSource",value:function(e){var t=this._getSourceCache(e);return t&&t.getSource()}},{key:"addLayer",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=t.id;if(this.getLayer(i))this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(i,'" already exists on this map'))));else{var a;if("custom"===t.type){if(un(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,"layers.".concat(i),t,{arrayIndex:-1},r))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[a.id]=a.serialize(),this._updateLayerCount(a,!0)}var o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));else{this._order.splice(o,0,i),this._layerOrderChanged=!0,this._layers[i]=a;var s=this._getLayerSourceCache(a);if(this._removedLayers[i]&&a.source&&s&&"custom"!==a.type){var l=this._removedLayers[i];delete this._removedLayers[i],l.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",s.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),this._updateDrapeFirstLayers()}}}},{key:"moveLayer",value:function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var r=this._order.indexOf(t);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null),this._updateLayerCount(n,!1);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"hasLayerType",value:function(e){for(var t in this._layers)if(this._layers[t].type===e)return!0;return!1}},{key:"setLayerZoomRange",value:function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var a=this.getLayer(n);if(a){if(!t(a.filter,r))return null==r?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(e.validateFilter,"layers.".concat(a.id,".filter"),r,{layerType:a.type},i)||(a.filter=e.clone$1(r),this._updateLayer(a)))}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(t){var n=this.getLayer(t);return n&&e.clone$1(n.filter)}},{key:"setLayoutProperty",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(n);o?t(o.getLayoutProperty(r),i)||(o.setLayoutProperty(r,i,a),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(t,n){var r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(n);o?t(o.getPaintProperty(r),i)||(o.setPaintProperty(r,i,a)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(e,t){var n=this.getLayer(e);return n&&n.getPaintProperty(t)}},{key:"setFeatureState",value:function(t,n){this._checkLoaded();var r=t.source,i=t.sourceLayer,a=this.getSource(r);if(a){var o=a.type;if("geojson"===o&&i)this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==o||i){void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));var s,l=this._getSourceCaches(r),u=d(l);try{for(u.s();!(s=u.n()).done;)s.value.setFeatureState(i,t.id,n)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(t,n){this._checkLoaded();var r=t.source,i=this.getSource(r);if(i){var a=i.type,o="vector"===a?t.sourceLayer:void 0;if("vector"!==a||o)if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));else{var s,l=this._getSourceCaches(r),u=d(l);try{for(u.s();!(s=u.n()).done;)s.value.removeFeatureState(o,t.id,n)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(t){this._checkLoaded();var n=t.source,r=t.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var t={};for(var n in this._sourceCaches){var r=this._sourceCaches[n].getSource();t[r.id]||(t[r.id]=r.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0;var t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(n(o)){r[o]=a;var s,l=d(e);try{for(l.s();!(s=l.n()).done;){var u=s.value[o];if(u){var c,h=d(u);try{for(h.s();!(c=h.n()).done;){var f=c.value;i.push(f)}}catch(S){h.e(S)}finally{h.f()}}}}catch(S){l.e(S)}finally{l.f()}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var p=[],m=this._order.length-1;m>=0;m--){var v=this._order[m];if(n(v))for(var g=i.length-1;g>=0;g--){var y=i[g].feature;if(r[y.layer.id]<m)break;p.push(y),i.pop()}else{var _,x=d(e);try{for(x.s();!(_=x.n()).done;){var b=_.value[v];if(b){var w,k=d(b);try{for(k.s();!(w=k.n()).done;){var T=w.value;p.push(T.feature)}}catch(S){k.e(S)}finally{k.f()}}}}catch(S){x.e(S)}finally{x.f()}}}return p}},{key:"queryRenderedFeatures",value:function(t,n,r){var i=this;n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);var a={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var o,s=d(n.layers);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=this._layers[l];if(!u)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(l,"' does not exist in the map's style and cannot be queried for features.")))),[];a[u.source]=!0}}catch(v){s.e(v)}finally{s.f()}}var c=[];n.availableImages=this._availableImages;var h=n&&n.layers?n.layers.some((function(e){var t=i.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),f=W.createFromScreenPoints(t,r);for(var p in this._sourceCaches){var m=this._sourceCaches[p].getSource().id;n.layers&&!a[m]||c.push(We(this._sourceCaches[p],this._layers,this._serializedLayers,f,n,r,h,!!this.map._showQueryGeometry))}return this.placement&&c.push(function(e,t,n,r,i,a,o){var s,l={},u=a.queryRenderedSymbols(r),c=[],h=d(Object.keys(u).map(Number));try{for(h.s();!(s=h.n()).done;){var f=s.value;c.push(o[f])}}catch(v){h.e(v)}finally{h.f()}c.sort(Ke);for(var p=function(){var n=g[m],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(var a in r){var o=l[a]=l[a]||[],s=r[a];s.sort((function(e,t){var r=n.featureSortOrder;if(r){var i=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));var c,h=d(s);try{for(h.s();!(c=h.n()).done;){var f=c.value;o.push(f)}}catch(v){h.e(v)}finally{h.f()}}},m=0,g=c;m<g.length;m++)p();var y=function(t){l[t].forEach((function(r){var i=r.feature,a=n(e[t]).getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a}))};for(var _ in l)y(_);return l}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),f.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)}},{key:"querySourceFeatures",value:function(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);var r,i=this._getSourceCaches(t),a=[],o=d(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;a=a.concat(Xe(s,n))}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"addSourceType",value:function(e,t,n){return a.getSourceType(e)?n(new Error('A source type called "'.concat(e,'" already exists.'))):(a.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var r=this.light.getLight(),i=!1;for(var a in e)if(!t(e[a],r[a])){i=!0;break}if(i){var o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,n),this.light.updateTransitions(o)}}},{key:"getTerrain",value:function(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}},{key:"setTerrainForDraping",value:function(){this.setTerrain({source:"",exaggeration:0},0)}},{key:"setTerrain",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===r){if("object"==typeof n.source){var i="terrain-dem-src";this.addSource(i,n.source),n=e.clone$1(n),n=e.extend(n,{source:i})}if(this._validate(e.validateTerrain,"terrain",n))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode)this._createTerrain(n,r);else{for(var a=this.terrain,o=a.get(),s=0,l=Object.keys(e.spec.terrain);s<l.length;s++){var u=l[s];!n.hasOwnProperty(u)&&e.spec.terrain[u].default&&(n[u]=e.spec.terrain[u].default)}for(var c in n)if(!t(n[c],o[c])){a.set(n),this.stylesheet.terrain=n;var h=this._setTransitionParameters({duration:0});a.updateTransitions(h);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}},{key:"_createFog",value:function(e){var t=this.fog=new G(e,this.map.transform);this.stylesheet.fog=e;var n=this._setTransitionParameters({duration:0});t.updateTransitions(n)}},{key:"_updateMarkersOpacity",value:function(){var e=this;0!==this.map._markers.length&&this.map._requestDomTask((function(){var t,n=d(e.map._markers);try{for(n.s();!(t=n.n()).done;)t.value._evaluateOpacity()}catch(r){n.e(r)}finally{n.f()}}))}},{key:"getFog",value:function(){return this.fog?this.fog.get():null}},{key:"setFog",value:function(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){var n=this.fog,r=n.get();for(var i in 0===Object.keys(e).length&&n.set(e),e)if(!t(e[i],r[i])){n.set(e),this.stylesheet.fog=e;var a=this._setTransitionParameters({duration:0});n.updateTransitions(a);break}}else this._createFog(e);this._markersNeedUpdate=!0}},{key:"_setTransitionParameters",value:function(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}},{key:"_updateDrapeFirstLayers",value:function(){var e,t,n=this;if(this.map._optimizeForTerrain&&this.terrain){var r=this._order.filter((function(e){return n.isLayerDraped(n._layers[e])})),i=this._order.filter((function(e){return!n.isLayerDraped(n._layers[e])}));this._drapedFirstOrder=[],(e=this._drapedFirstOrder).push.apply(e,c(r)),(t=this._drapedFirstOrder).push.apply(t,c(i))}}},{key:"_createTerrain",value:function(e,t){var n=this.terrain=new F(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();var r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}},{key:"_force3DLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}},{key:"_forceSymbolLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}},{key:"_validate",value:function(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!a||!1!==a.validate)&&un(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}},{key:"_remove",value:function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var n in this._sourceCaches)this._sourceCaches[n].clearTiles(),this._sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){var t,n=this._getSourceCaches(e),r=d(n);try{for(r.s();!(t=r.n()).done;)t.value.clearTiles()}catch(i){r.e(i)}finally{r.f()}}},{key:"_reloadSource",value:function(e){var t,n=this._getSourceCaches(e),r=d(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.resume(),i.reload()}}catch(a){r.e(a)}finally{r.f()}}},{key:"_updateSources",value:function(e){for(var t in this._sourceCaches)this._sourceCaches[t].update(e)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this._sourceCaches){var t=this._sourceCaches[e];t.resume(),t.reload()}}},{key:"_updatePlacement",value:function(t,n,r,i){var a,o=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=!1,u=!1,c={},h=d(this._order);try{for(h.s();!(a=h.n()).done;){var f=a.value,p=this._layers[f];if("symbol"===p.type){if(!c[p.source]){var m=function(){var e=o._getLayerSourceCache(p);if(!e)return"continue";c[p.source]=e.getRenderableIds(!0).map((function(t){return e.getTileByID(t)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}();if("continue"===m)continue}var v=this.crossTileSymbolIndex.addLayer(p,c[p.source],t.center.lng,t.projection);l=l||v}}}catch(b){h.e(b)}finally{h.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new nn(t,this._order,s,n,r,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),u=!0),l&&this.pauseablePlacement.placement.setStale()),u||l){var g,y=d(this._order);try{for(y.s();!(g=y.n()).done;){var _=g.value,x=this._layers[_];"symbol"===x.type&&this.placement.updateLayerOpacities(x,c[x.source])}}catch(b){y.e(b)}finally{y.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var r=function(e){e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}},{key:"getGlyphs",value:function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}},{key:"getResource",value:function(t,n,r){return e.makeRequest(n,r)}},{key:"_getSourceCache",value:function(e){return this._otherSourceCaches[e]}},{key:"_getLayerSourceCache",value:function(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}},{key:"_getSourceCaches",value:function(e){var t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}},{key:"_isSourceCacheLoaded",value:function(t){var n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'")))),!1):n.every((function(e){return e.loaded()}))}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}},{key:"hasSymbolLayers",value:function(){return this._numSymbolLayers>0}},{key:"hasCircleLayers",value:function(){return this._numCircleLayers>0}},{key:"_clearWorkerCaches",value:function(){this.dispatcher.broadcast("clearCaches")}},{key:"destroy",value:function(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}]),a}(e.Evented);pn.getSourceType=function(e){return Ge[e]},pn.setSourceType=function(e,t){Ge[e]=t},pn.registerForPluginStateChange=e.registerForPluginStateChange;var mn="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",vn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",gn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",yn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",_n="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif",xn={},bn={},wn=[];Cn(mn,wn),Cn(gn,wn),Cn(yn,wn),Cn(_n,wn),xn=An("",gn),bn=An(_n,yn);var kn=An("\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Tn=mn,Sn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",En={background:An("uniform vec4 u_color;uniform float u_opacity;void main() {vec4 out_color=u_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:An("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_mix);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:An("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);vec4 world_center=vec4(pos,1);\n#else \nmat3 surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:An("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:An("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\nvec3 pos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:An("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:An("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:An("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:An("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:An("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:An("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:An("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:An("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:An("uniform lowp vec3 u_lightpos;varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;varying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\nvoid main() {vec4 color=v_color;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(v_normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying highp vec3 v_normal;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;vec3 pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_normal=normal;v_depth=gl_Position.w;\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_color.rgb+=clamp(color.rgb*directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:An("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 out_color=mix(color1,color2,u_fade);out_color=out_color*v_lighting;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);vec3 p=vec3(pos_nx.xy,h);\n#else\nvec3 p=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);directional*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\nv_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:An("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos);float f=getElevation(v_pos+vec2(epsilon.x,0));float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float h=getElevation(v_pos+vec2(0,epsilon.y));float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:An("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:An("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;uniform float u_mix;uniform vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist_a=texture2D(u_dash_image,v_tex_a).a;float sdfdist_b=texture2D(u_dash_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfwidth=min(dash_from.z*u_scale.y,dash_to.z*u_scale.z);float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/sdfwidth;alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\n#ifdef RENDER_LINE_GRADIENT\nhighp vec4 out_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nvec4 out_color=color;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);}}\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform mediump vec3 u_scale;varying vec2 v_tex_a;varying vec2 v_tex_b;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash_from\n#pragma mapbox: define lowp vec4 dash_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash_from\n#pragma mapbox: initialize lowp vec4 dash_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;float scaleA=dash_from.z==0.0 ? 0.0 : tileZoomRatio/(dash_from.z*fromScale);float scaleB=dash_to.z==0.0 ? 0.0 : tileZoomRatio/(dash_to.z*toScale);float heightA=dash_from.y;float heightB=dash_to.y;v_tex_a=vec2(a_linesofar*scaleA/floorwidth,(-normal.y*heightA+dash_from.x+0.5)/u_texsize.y);v_tex_b=vec2(a_linesofar*scaleB/floorwidth,(-normal.y*heightB+dash_to.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:An("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:An("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:An("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:An("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);vec4 offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\nvec4 offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:An("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);vec3 world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;float globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nvec3 world_pos=vec3(tile_anchor,0)+h;float globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);vec4 projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nvec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:An("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float skirtOffset=24575.0;const float wireframeOffset=0.00015;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=u_skirt_height*u_skirt_height*wireframeOffset;\n#endif\nvec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:An("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:An("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",vn),skyboxGradient:An("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",vn),skyboxCapture:An("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:An("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);vec4 color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\nvec4 color=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idy=u_grid_matrix[1][2];float S=u_grid_matrix[2][2];vec3 latLng=u_grid_matrix*vec3(a_pos,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=a_pos[0]*S;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;\n#ifdef GLOBE_POLES\nvec3 up_vector=normalize(globe_pos)*u_tile_up_scale;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:An("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);\n#ifdef PROJECTION_GLOBE_VIEW\nfloat globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));float horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nfloat horizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function Cn(e,t){var n,r=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n"),i=d(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if("#"===(a=a.trim())[0]&&a.includes("if")&&!a.includes("endif")){var o,s=(a=a.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim()).split(" "),l=d(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;t.includes(u)||t.push(u)}}catch(c){l.e(c)}finally{l.f()}}}}catch(c){i.e(c)}finally{i.f()}}function An(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},a=[].concat(wn);return Cn(e,a),Cn(t,a),{fragmentSource:e=e.replace(n,(function(e,t,n,r,a){return i[a]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nvarying ").concat(n," ").concat(r," ").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n")})),vertexSource:t=t.replace(n,(function(e,t,n,r,a){var o="float"===r?"vec2":"vec4",s=a.match(/color/)?"color":o;return i[a]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nuniform lowp float u_").concat(a,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(a,";\nvarying ").concat(n," ").concat(r," ").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(a," = a_").concat(a,";\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(a," = unpack_mix_").concat(s,"(a_").concat(a,", u_").concat(a,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nuniform lowp float u_").concat(a,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = a_").concat(a,";\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = unpack_mix_").concat(s,"(a_").concat(a,", u_").concat(a,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n")})),staticAttributes:r,usedDefines:a}}var Rn=function(){function e(){v(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}return g(e,[{key:"bind",value:function(e,t,n,r,i,a,o){this.context=e;for(var s=this.boundPaintVertexBuffers.length!==r.length,l=0;!s&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(s=!0);for(var u=this.boundDynamicVertexBuffers.length!==o.length,c=0;!u&&c<o.length;c++)this.boundDynamicVertexBuffers[c]!==o[c]&&(u=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||s||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==a)this.freshBind(t,n,r,i,a,o);else{e.bindVertexArrayOES.set(this.vao);var h,f=d(o);try{for(f.s();!(h=f.n()).done;){var p=h.value;p&&p.bind()}}catch(m){f.e(m)}finally{f.f()}i&&i.dynamicDraw&&i.bind()}}},{key:"freshBind",value:function(e,t,n,r,i,a){var o,s=e.numAttributes,l=this.context,u=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),o=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=a;else{o=l.currentNumAttributes||0;for(var c=s;c<o;c++)u.disableVertexAttribArray(c)}t.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,i);var h,f=d(n);try{for(f.s();!(h=f.n()).done;){var p=h.value;p.enableAttributes(u,e),p.bind(),p.setVertexAttribPointers(u,e,i)}}catch(y){f.e(y)}finally{f.f()}var m,v=d(a);try{for(v.s();!(m=v.n()).done;){var g=m.value;g&&(g.enableAttributes(u,e),g.bind(),g.setVertexAttribPointers(u,e,i))}}catch(y){v.e(y)}finally{v.f()}r&&r.bind(),l.currentNumAttributes=s}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function Mn(t,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function Bn(t,n,r,i,a,o,s){var l=t.context,u=l.gl,c=r.fbo;if(c){t.prepareDrawTile();var h=t.useProgram("hillshade");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());var d=function(e,t,n,r){var i=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l=!e.options.moving;return{u_matrix:r||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Mn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:a,u_accent:o}}(t,r,i,t.terrain?n.projMatrix:null);t.prepareDrawProgram(l,h,n.toUnwrapped());var f=t.getTileBoundsBuffers(r),p=f.tileBoundsBuffer,m=f.tileBoundsIndexBuffer,v=f.tileBoundsSegments;h.draw(l,u.TRIANGLES,a,o,s,e.CullFaceMode.disabled,d,i.id,p,m,v)}}function Pn(t,n,r){if(n.needsDEMTextureUpload){var i=t.context,a=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);var o=r.getPixels();n.demTexture?n.demTexture.update(o,{premultiply:!1}):n.demTexture=new e.Texture(i,o,a.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}}function In(t,n,r,i,a,o){var s=t.context,l=s.gl;if(n.dem){var u=n.dem;if(s.activeTexture.set(l.TEXTURE1),Pn(t,n,u),n.demTexture){n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);var c=u.dim;s.activeTexture.set(l.TEXTURE0);var h=n.fbo;if(!h){var d=new e.Texture(s,{width:c,height:c,data:null},l.RGBA);d.bind(l.LINEAR,l.CLAMP_TO_EDGE),(h=n.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(d.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,c,c]);var f=t.getMercatorTileBoundsBuffers(),p=f.tileBoundsBuffer,m=f.tileBoundsIndexBuffer,v=f.tileBoundsSegments;t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,a,o,e.CullFaceMode.disabled,function(t,n){var r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}}(n.tileID,u),r.id,p,m,v),n.needsHillshadePrepare=!1}}}var zn=function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}},Ln=function(e,t){return{u_matrix:e,u_image0:0,u_skirt_height:t}},Dn=function(e,t,n,r,i,a,o,s,l,u,c,h,d,f){return{u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:a,u_image0:0,u_frustum_tl:o,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:u,u_globe_pos:c,u_globe_radius:h,u_viewport:d,u_grid_matrix:f?Float32Array.from(f):new Float32Array(9)}};function On(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}var Nn=new(function(){function e(){v(this,e),this.operations={}}return g(e,[{key:"newMorphing",value:function(e,t,n,r,i){if(e in this.operations){var a=this.operations[e];a.to.tileID.key!==n.tileID.key&&(a.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}},{key:"getMorphValuesForProxy",value:function(e){if(!(e in this.operations))return null;var t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}},{key:"update",value:function(e){for(var t in this.operations){var n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}},{key:"_nextOp",value:function(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}},{key:"_validOp",value:function(e){return e.from.hasData()&&e.to.hasData()}}]),e}()),Fn={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function jn(e,t){var n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}var Vn=function(e){return{u_matrix:e}};function Zn(t,n,r,i,a){if(a>0){var o=e.exported.now(),s=(o-t.timeAdded)/a,l=n?(o-n.timeAdded)/a:-1,u=r.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),d=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var Un=function(e){p(n,e);var t=m(n);function n(e){var r;v(this,n);var a={type:"raster-dem",maxzoom:e.transform.maxZoom},o=new H(et(),null),s=He("mock-dem",a,o,e.style);return r=t.call(this,"mock-dem",s,!1),s.setEventedParent(i(r)),r._sourceLoaded=!0,r}return g(n,[{key:"_loadTile",value:function(e,t){e.state="loaded",t(null)}}]),n}(e.SourceCache),Gn=function(t){p(r,t);var n=m(r);function r(e){var t;v(this,r);var a=He("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new H(et(),null),e.style);return t=n.call(this,"proxy",a,!1),a.setEventedParent(i(t)),t.map=t.getSource().map=e,t.used=t._sourceLoaded=!0,t.renderCache=[],t.renderCachePool=[],t.proxyCachedFBO={},t}return g(r,[{key:"update",value:function(t,n,r){var i=this;if(!t.freezeTileCoverage){this.transform=t;var a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((function(n,r){if(n[r.key]="",!i._tiles[r.key]){var a=new e.Tile(r,i._source.tileSize*r.overscaleFactor(),t.tileZoom);a.state="loaded",i._tiles[r.key]=a}return n}),{});for(var o in this._tiles)o in a||(this.freeFBO(o),this._tiles[o].unloadVectorData(),delete this._tiles[o])}}},{key:"freeFBO",value:function(e){var t=this.proxyCachedFBO[e];if(void 0!==t){var n,r=Object.values(t);(n=this.renderCachePool).push.apply(n,r),delete this.proxyCachedFBO[e]}}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(e){return e.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),r}(e.SourceCache),Hn=function(e){p(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)).proxyTileKey=r,a.projMatrix=i,a}return g(n)}(e.OverscaledTileID),qn=function(t){p(r,t);var n=m(r);function r(t,i){var a;v(this,r),(a=n.call(this)).painter=t,a.terrainTileForTile={},a.prevTerrainTileForTile={};var o=function(t){var n=new e.StructArrayLayout4i8,r=new e.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);for(var a=e.EXTENT/128,o=e.EXTENT+a/2,s=o+a,l=-a;l<s;l+=a)for(var u=-a;u<s;u+=a){var c=u<0||u>o||l<0||l>o?24575:0,h=e.clamp(Math.round(u),0,e.EXTENT),d=e.clamp(Math.round(l),0,e.EXTENT);n.emplaceBack(h+c,d,h,d)}for(var f=function(e,t){var n=t*i+e;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)},p=1;p<129;p++)for(var m=1;m<129;m++)f(m,p);return[0,129].forEach((function(e){for(var t=0;t<130;t++)f(t,e),f(e,t)})),[n,r,32768]}(),s=h(o,3),l=s[0],u=s[1],c=s[2],d=t.context;a.gridBuffer=d.createVertexBuffer(l,e.boundsAttributes.members),a.gridIndexBuffer=d.createIndexBuffer(u),a.gridSegments=e.SegmentVector.simpleSegment(0,0,l.length,u.length),a.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,l.length,c),a.proxyCoords=[],a.proxiedCoords={},a._visibleDemTiles=[],a._drapedRenderBatches=[],a._sourceTilesOverlap={},a.proxySourceCache=new Gn(i.map),a.orthoMatrix=e.create(),e.ortho(a.orthoMatrix,0,e.EXTENT,0,e.EXTENT,0,1);var f=d.gl;return a._overlapStencilMode=new e.StencilMode({func:f.GEQUAL,mask:255},0,255,f.KEEP,f.KEEP,f.REPLACE),a._previousZoom=t.transform.zoom,a.pool=[],a._findCoveringTileCache={},a._tilesDirty={},a.style=i,a._useVertexMorphing=!0,a._exaggeration=1,a._mockSourceCache=new Un(i.map),a}return g(r,[{key:"style",set:function(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency()}},{key:"update",value:function(t,n,r){var i=this;if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;var a=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(a.get("source")),this._exaggeration=a.get("exaggeration");var o=function(){i.sourceCache.used&&e.warnOnce("Raster DEM source '".concat(i.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));var t=i.getScaledDemTileSize();i.sourceCache.update(n,t,!0),i.resetTileLookupCache(i.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"resetTileLookupCache",value:function(e){this._findCoveringTileCache[e]={}}},{key:"getScaledDemTileSize",value:function(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}},{key:"_checkRenderCacheEfficiency",value:function(){var t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce("Terrain render cache efficiency is not optimal (".concat(t.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(t.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}},{key:"_onStyleDataEvent",value:function(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(var e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((function(e){return e.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}},{key:"useVertexMorphing",set:function(e){this._useVertexMorphing=e}},{key:"updateTileBinding",value:function(t){var n=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var r=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);var a=this.proxyCoords=r.getIds().map((function(e){var t=r.getTileByID(e).tileID;return t.projMatrix=i.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){var r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.pointGeometry(r.x,r.y);t.sort((function(t,n){if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;var r=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=new e.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),o=i.mult(1<<t.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(r)-o.distSqr(a)}))}(a,this.painter),this._previousZoom=i.zoom;var o=this.proxyToSource||{};this.proxyToSource={},a.forEach((function(e){n.proxyToSource[e.key]={}})),this.terrainTileForTile={};var s=this._style._sourceCaches;for(var l in s){var u=s[l];if(u.used&&(u!==this.sourceCache&&this.resetTileLookupCache(u.id),this._setupProxiedCoordsForOrtho(u,t[l],o),!u.usedForTerrain)){var c=t[l];u.getSource().reparseOverscaled&&this._assignTerrainTiles(c)}}this.proxiedCoords[r.id]=a.map((function(e){return new Hn(e,e.key,n.orthoMatrix)})),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();var h={};this._visibleDemTiles=[];var f,p=d(this.proxyCoords);try{for(p.s();!(f=p.n()).done;){var m=f.value,v=this.terrainTileForTile[m.key];if(v){var g=v.tileID.key;g in h||(this._visibleDemTiles.push(v),h[g]=g)}}}catch(y){p.e(y)}finally{p.f()}}}},{key:"_assignTerrainTiles",value:function(e){var t=this;this._initializing||e.forEach((function(e){if(!t.terrainTileForTile[e.key]){var n=t._findTileCoveringTileID(e,t.sourceCache);n&&(t.terrainTileForTile[e.key]=n)}}))}},{key:"_prepareDEMTextures",value:function(){var e=this.painter.context,t=e.gl;for(var n in this.terrainTileForTile){var r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),Pn(this.painter,r,i))}}},{key:"_prepareDemTileUniforms",value:function(e,t,n,r){if(!t||null==t.demTexture)return!1;var i=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-i.z),o=r||"";return n["u_dem_tl".concat(o)]=[i.x*a%1,i.y*a%1],n["u_dem_scale".concat(o)]=a,!0}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}},{key:"emptyDepthBufferTexture",get:function(){var t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){var r=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}},{key:"_getLoadedAreaMinimum",value:function(){var e=0,t=this._visibleDemTiles.reduce((function(t,n){if(!n.dem)return t;var r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}},{key:"_updateEmptyDEMTexture",value:function(){var t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);var r=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;var a=this._emptyDEMTexture;return a?a.update(i,{premultiply:!1}):a=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),a}},{key:"setupElevationDraw",value:function(t,n,r){var i,a=this.painter.context,o=a.gl,s=(i=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(i),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0,u_tile_tl_up:[0,0,1],u_tile_tr_up:[0,0,1],u_tile_br_up:[0,0,1],u_tile_bl_up:[0,0,1],u_tile_up_scale:1});s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();var l=this.painter.transform,u=l.projection,c=t.tileID.canonical;s.u_tile_tl_up=u.upVector(c,0,0),s.u_tile_tr_up=u.upVector(c,e.EXTENT,0),s.u_tile_br_up=u.upVector(c,e.EXTENT,e.EXTENT),s.u_tile_bl_up=u.upVector(c,0,e.EXTENT),s.u_tile_up_scale=r&&r.useDenormalizedUpVectorScale?e.GLOBE_METERS_TO_ECEF:u.upVectorScale(c,l.center.lat,l.worldSize).metersToTile;var h=null,d=null,f=1;if(r&&r.morphing&&this._useVertexMorphing){var p=r.morphing.srcDemTile,m=r.morphing.dstDemTile;f=r.morphing.phase,p&&m&&(this._prepareDemTileUniforms(t,p,s,"_prev")&&(d=p),this._prepareDemTileUniforms(t,m,s)&&(h=m))}if(d&&h?(a.activeTexture.set(o.TEXTURE2),h.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.activeTexture.set(o.TEXTURE4),d.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),s.u_dem_lerp=f):(h=this.terrainTileForTile[t.tileID.key],a.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,h,s)?h.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),a.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&h){var v=(1<<h.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=v}r&&r.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(a,s)}},{key:"renderToBackBuffer",value:function(t){var n=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,n,r,i,a){if("globe"===t.transform.projection.name)!function(t,n,r,i,a){var o,s,l=t.context,u=l.gl,c=t.options.showTerrainWireframe?2:0,f=t.transform,p=e.globeUseCustomAntiAliasing(t,l,f),m=function(e,n){if(s!==e){var r=[Fn[e],"PROJECTION_GLOBE_VIEW"];p&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(Fn[c]),o=t.useProgram("globeRaster",null,r),s=e}},v=t.colorModeForRenderPass(),g=new e.DepthMode(u.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Nn.update(a);var y=e.calculateGlobeMercatorMatrix(f),_=[e.mercatorXfromLng(f.center.lng),e.mercatorYfromLat(f.center.lat)],x=c?[!1,!0]:[!1],b=t.globeSharedBuffers,w=[f.width*e.exported.devicePixelRatio,f.height*e.exported.devicePixelRatio],k=Float32Array.from(f.globeMatrix),T={useDenormalizedUpVectorScale:!0};if(x.forEach((function(c){s=-1;var p,x=c?u.LINES:u.TRIANGLES,S=d(i);try{for(S.s();!(p=S.n()).done;){var E=p.value,C=r.getTile(E),A=e.StencilMode.disabled,R=n.prevTerrainTileForTile[E.key],M=n.terrainTileForTile[E.key];On(R,M)&&Nn.newMorphing(E.key,R,M,a,250),l.activeTexture.set(u.TEXTURE0),C.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE);var B=Nn.getMorphValuesForProxy(E.key),P=B?1:0;B&&e.extend$1(T,{morphing:{srcDemTile:B.from,dstDemTile:B.to,phase:e.easeCubicInOut(B.phase)}});var I=e.tileCornersToBounds(E.canonical),z=e.getLatitudinalLod(I.getCenter().lat),L=e.getGridMatrix(E.canonical,I,z),D=e.globeNormalizeECEF(e.globeTileBounds(E.canonical)),O=Dn(f.projMatrix,k,y,D,e.globeToMercatorTransition(f.zoom),_,f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.globeCenterInViewSpace,f.globeRadius,w,L);if(m(P,c),n.setupElevationDraw(C,o,T),t.prepareDrawProgram(l,o,E.toUnwrapped()),b){var N=c?b.getWirefameBuffers(t.context,z):b.getGridBuffers(z),F=h(N,3),j=F[0],V=F[1],Z=F[2];o.draw(l,x,g,A,v,e.CullFaceMode.backCCW,O,"globe_raster",j,V,Z)}}}catch(U){S.e(U)}finally{S.f()}})),b){var S=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];p&&S.push("CUSTOM_ANTIALIASING"),o=t.useProgram("globeRaster",null,S);var E,C=d(i);try{var A=function(){var i=E.value,a=i.canonical,s=a.x,c=a.y,d=a.z,p=0===c,m=c===(1<<d)-1,y=b.getPoleBuffers(d),x=h(y,4),k=x[0],S=x[1],C=x[2],A=x[3];if(A&&(p||m)){var R=r.getTile(i);l.activeTexture.set(u.TEXTURE0),R.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE);var M=e.globePoleMatrixForTile(d,s,f),B=e.globeNormalizeECEF(e.globeTileBounds(i.canonical)),P=function(t,n){return t.draw(l,u.TRIANGLES,g,e.StencilMode.disabled,v,e.CullFaceMode.disabled,Dn(f.projMatrix,M,M,B,0,_,f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.globeCenterInViewSpace,f.globeRadius,w),"globe_pole_raster",n,C,A)};n.setupElevationDraw(R,o,T),t.prepareDrawProgram(l,o,i.toUnwrapped()),p&&P(o,k),m&&(M=e.scale(e.create(),M,[1,-1,1]),P(o,S))}};for(C.s();!(E=C.n()).done;)A()}catch(R){C.e(R)}finally{C.f()}}}(t,n,r,i,a);else{var o,s,l=t.context,u=l.gl,c=t.options.showTerrainWireframe?2:0,f=function(e,n){if(s!==e){var r=[Fn[e]];n&&r.push(Fn[c]),o=t.useProgram("terrainRaster",null,r),s=e}},p=t.colorModeForRenderPass(),m=new e.DepthMode(u.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Nn.update(a);var v=t.transform,g=6*Math.pow(1.5,22-v.zoom)*n.exaggeration();(c?[!1,!0]:[!1]).forEach((function(c){s=-1;var y,_=c?u.LINES:u.TRIANGLES,x=c?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments],b=h(x,2),w=b[0],k=b[1],T=d(i);try{for(T.s();!(y=T.n()).done;){var S=y.value,E=r.getTile(S),C=e.StencilMode.disabled,A=n.prevTerrainTileForTile[S.key],R=n.terrainTileForTile[S.key];On(A,R)&&Nn.newMorphing(S.key,A,R,a,250),l.activeTexture.set(u.TEXTURE0),E.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST);var M=Nn.getMorphValuesForProxy(S.key),B=M?1:0,P=void 0;M&&(P={morphing:{srcDemTile:M.from,dstDemTile:M.to,phase:e.easeCubicInOut(M.phase)}});var I=Ln(S.projMatrix,jn(S.canonical,v.renderWorldCopies)?g/10:g);f(B,c),n.setupElevationDraw(E,o,P),t.prepareDrawProgram(l,o,S.toUnwrapped()),o.draw(l,_,m,C,p,e.CullFaceMode.backCCW,I,"terrain_raster",n.gridBuffer,w,k)}}catch(z){T.e(z)}finally{T.f()}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}},{key:"renderBatch",value:function(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;var n,r=this.painter,i=this.painter.context,a=this.proxySourceCache,o=this.proxiedCoords[a.id],s=this._drapedRenderBatches.shift(),l=[],u=r.style.order,c=0,h=d(o);try{for(h.s();!(n=h.n()).done;){var f=n.value,p=a.getTileByID(f.proxyTileKey),m=a.proxyCachedFBO[f.key]?a.proxyCachedFBO[f.key][t]:void 0,v=void 0!==m?a.renderCache[m]:this.pool[c++],g=void 0!==m;if(p.texture=v.tex,!g||v.dirty){var y=void 0;i.bindFramebuffer.set(v.fb.framebuffer),this.renderedToTile=!1,v.dirty&&(i.clear({color:e.Color.transparent,stencil:0}),v.dirty=!1);for(var _=s.start;_<=s.end;++_){var x=r.style._layers[u[_]];if(!x.isHidden(r.transform.zoom)){var b=r.style._getLayerSourceCache(x),w=b?this.proxyToSource[f.key][b.id]:[f];if(w){var k=w;i.viewport.set([0,0,v.fb.width,v.fb.height]),y!==(b?b.id:null)&&(this._setupStencil(v,w,x,b),y=b?b.id:null),r.renderLayer(r,b,x,k)}}}this.renderedToTile?(v.dirty=!0,l.push(p.tileID)):g||--c,5===c&&(c=0,this.renderToBackBuffer(l))}else l.push(p.tileID)}}catch(T){h.e(T)}finally{h.f()}return this.renderToBackBuffer(l),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,r.width,r.height]),s.end+1}},{key:"postRender",value:function(){}},{key:"renderCacheEfficiency",value:function(e){var t=e.order.length;if(0===t)return{efficiency:100};for(var n,r=0,i=0,a=!1,o=0;o<t;++o){var s=e._layers[e.order[o]];this._style.isLayerDraped(s)?(a&&++r,++i):a||(a=!0,n=s.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}},{key:"getMinElevationBelowMSL",value:function(){var e=0;return this._visibleDemTiles.filter((function(e){return e.dem})).forEach((function(t){e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}},{key:"raycast",value:function(e,t,n){if(!this._visibleDemTiles)return null;var r=this._visibleDemTiles.filter((function(e){return e.dem})).map((function(r){var i=r.tileID,a=1<<i.overscaledZ,o=i.canonical,s=o.x,l=o.y,u=s/a,c=(s+1)/a,h=l/a,d=(l+1)/a;return{minx:u,miny:h,maxx:c,maxy:d,t:r.dem.tree.raycastRoot(u,h,c,d,e,t,n),tile:r}}));r.sort((function(e,t){return(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)}));var i,a=d(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(null==o.t)return null;var s=o.tile.dem.tree.raycast(o.minx,o.miny,o.maxx,o.maxy,e,t,n);if(null!=s)return s}}catch(l){a.e(l)}finally{a.f()}return null}},{key:"_createFBO",value:function(){var t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);var i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);var a=t.createFramebuffer(r[0],r[1],!1);return a.colorAttachment.set(i.texture),a.depthAttachment=new Ne(t,a.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,a.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):a.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:a,tex:i,dirty:!1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var e=this;if(this._style.light&&this._style.light.hasTransition())return!0;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((function(t){var n=e._style._layers[t],r=n.isHidden(e.painter.transform.zoom),i=n.getCrossfadeParameters(),a=!!i&&1!==i.t,o=n.hasTransition();return"custom"!==n.type&&!r&&(a||o)}))}},{key:"_clearRasterFadeFromRenderCache",value:function(){var e=!1;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Ve){e=!0;break}if(e)for(var n=0;n<this._style.order.length;++n){var r=this._style._layers[this._style.order[n]],i=r.isHidden(this.painter.transform.zoom),a=this._style._getLayerSourceCache(r);if("raster"===r.type&&!i&&a){var o,s=r.paint.get("raster-fade-duration"),l=d(this.proxyCoords);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=this.proxyToSource[u.key][a.id];if(c){var h,f=d(c);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=Zn(a.getTile(p),a.findLoadedParent(p,0),a,this.painter.transform,s);(1!==m.opacity||0!==m.mix)&&this._clearRenderCacheForTile(a.id,p)}}catch(v){f.e(v)}finally{f.f()}}}}catch(v){l.e(v)}finally{l.f()}}}}},{key:"_setupDrapedRenderBatches",value:function(){var e=this._style.order,t=e.length;if(0!==t){for(var n,r=[],i=0,a=this._style._layers[e[i]];!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++i<t;)a=this._style._layers[e[i]];for(;i<t;++i){var o=this._style._layers[e[i]];o.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(o)?void 0===n&&(n=i):void 0!==n&&(r.push({start:n,end:i-1}),n=void 0))}void 0!==n&&r.push({start:n,end:i-1}),this._drapedRenderBatches=r}}},{key:"_setupRenderCache",value:function(e){var t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){var n=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(var r=0;r<n.length;++r){var i,a=Object.values(n[r]);(i=t.renderCachePool).push.apply(i,a)}}}else{this._clearRasterFadeFromRenderCache();for(var o=this.proxyCoords,s=this._tilesDirty,l=o.length-1;l>=0;l--){var u=o[l];if(t.getTileByID(u.key),void 0!==t.proxyCachedFBO[u.key]){var h=e[u.key],f=this.proxyToSource[u.key],p=0,m=function(e){var t=f[e],n=h[e];if(!n||n.length!==t.length||t.some((function(t,r){return t!==n[r]||s[e]&&s[e].hasOwnProperty(t.key)})))return p=-1,"break";++p};for(var v in f)if("break"===m(v))break;for(var g in t.proxyCachedFBO[u.key])t.renderCache[t.proxyCachedFBO[u.key][g]].dirty=p<0||p!==Object.values(h).length}}var y=c(this._drapedRenderBatches);y.sort((function(e,t){return t.end-t.start-(e.end-e.start)}));var _,x=d(y);try{for(x.s();!(_=x.n()).done;){var b,w=_.value,k=d(o);try{for(k.s();!(b=k.n()).done;){var T=b.value;if(!t.proxyCachedFBO[T.key]){var S=t.renderCachePool.pop();void 0===S&&t.renderCache.length<50&&(S=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==S&&(t.proxyCachedFBO[T.key]={},t.proxyCachedFBO[T.key][w.start]=S,t.renderCache[S].dirty=!0)}}}catch(E){k.e(E)}finally{k.f()}}}catch(E){x.e(E)}finally{x.f()}this._tilesDirty={}}}},{key:"_setupStencil",value:function(e,t,n,r){if(r&&this._sourceTilesOverlap[r.id]){var i=this.painter.context,a=i.gl;if(t.length<=1)this._overlapStencilType=!1;else{var o;if(n.isTileClipped())o=t.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"clipOrMaskOverlapStencilType",value:function(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}},{key:"stencilModeForRTTOverlap",value:function(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}},{key:"_renderTileClippingMasks",value:function(t,n){var r=this.painter,i=this.painter.context,a=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);var o,s=r.useProgram("clippingMask"),l=d(t);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=r._tileClippingMaskIDs[u.key]=--n;s.draw(i,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},c,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Vn(u.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}catch(h){l.e(h)}finally{l.f()}}},{key:"pointCoordinate",value:function(t){var n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;var r=[t.x,t.y,1,1];e.transformMat4$1(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;var i=n._camera.position,a=e.mercatorZfromAltitude(1,n.center.lat),o=[i[0],i[1],i[2]/a,0],s=e.subtract([],r.slice(0,3),o);e.normalize(s,s);var l=this.raycast(o,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(o,o,s,l),o[3]=o[2],o[2]*=a,o):null}},{key:"drawDepth",value:function(){var t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),a=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===a||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){var o=n.gl,s=n.createFramebuffer(i,a,!0);n.activeTexture.set(o.TEXTURE0);var l=new e.Texture(n,{width:i,height:a,data:null},o.RGBA);l.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.colorAttachment.set(l.texture);var u=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,a);s.depthAttachment.set(u),this._depthFBO=s,this._depthTexture=l}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,a]),function(t,n,r,i){if("globe"!==t.transform.projection.name){var a=t.context,o=a.gl;a.clear({depth:1});var s,l=t.useProgram("terrainDepth"),u=new e.DepthMode(o.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D),c=d(i);try{for(c.s();!(s=c.n()).done;){var h=s.value,f=r.getTile(h),p=Ln(h.projMatrix,0);n.setupElevationDraw(f,l),l.draw(a,o.TRIANGLES,u,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,p,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}catch(m){c.e(m)}finally{c.f()}}}(t,this,r,this.proxyCoords)}},{key:"_setupProxiedCoordsForOrtho",value:function(e,t,n){if(e.getSource()instanceof Ue)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};for(var r=this.proxiedCoords[e.id]=[],i=this.proxyCoords,a=0;a<i.length;a++){var o=i[a],s=this._findTileCoveringTileID(o,e);if(s){var l=this._createProxiedId(o,s,n[o.key]&&n[o.key][e.id]);r.push(l),this.proxyToSource[o.key][e.id]=[l]}}for(var u=!1,c=0;c<t.length;c++){var h=e.getTile(t[c]);if(h&&h.hasData()){var d=this._findTileCoveringTileID(h.tileID,this.proxySourceCache);if(d&&d.tileID.canonical.z!==h.tileID.canonical.z){var f=this.proxyToSource[d.tileID.key][e.id],p=this._createProxiedId(d.tileID,h,n[d.tileID.key]&&n[d.tileID.key][e.id]);f?f.splice(f.length-1,0,p):this.proxyToSource[d.tileID.key][e.id]=[p],r.push(p),u=!0}}}this._sourceTilesOverlap[e.id]=u}},{key:"_setupProxiedCoordsForImageSource",value:function(t,n,r){if(t.getSource().loaded())for(var i=this.proxiedCoords[t.id]=[],a=this.proxyCoords,o=t.getSource(),s=new e.pointGeometry(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((function(e,t){return e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e}),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=function(t,n){var r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),a=e.EXTENT/(1<<t.canonical.z),o=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+a<o+l.min.x||r>o+l.max.x||i+a<s+l.min.y||i>s+l.max.y},c=0;c<a.length;c++)for(var h=a[c],d=0;d<n.length;d++){var f=t.getTile(n[d]);if(f&&f.hasData()&&!u(h,f.tileID)){var p=this._createProxiedId(h,f,r[h.key]&&r[h.key][t.id]),m=this.proxyToSource[h.key][t.id];m?m.push(p):this.proxyToSource[h.key][t.id]=[p],i.push(p)}}}},{key:"_createProxiedId",value:function(t,n,r){var i=this.orthoMatrix;if(r){var a=r.find((function(e){return e.key===n.tileID.key}));if(a)return a}if(n.tileID.key!==t.key){var o,s,l,u=t.canonical.z-n.tileID.canonical.z;i=e.create();var c=n.tileID.wrap-t.wrap<<t.overscaledZ;u>0?(s=(o=e.EXTENT>>u)*((n.tileID.canonical.x<<u)-t.canonical.x+c),l=o*((n.tileID.canonical.y<<u)-t.canonical.y)):(o=e.EXTENT<<-u,s=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+c<<-u)),l=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-u))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[s,l,0])}return new Hn(n.tileID,t.key,i)}},{key:"_findTileCoveringTileID",value:function(t,n){var r=n.getTile(t);if(r&&r.hasData())return r;var i=this._findCoveringTileCache[n.id],a=i[t.key];if((r=a?n.getTileByID(a):null)&&r.hasData()||null===a)return r;var o=r?r.tileID:t,s=o.overscaledZ,l=n.getSource().minzoom,u=[];if(!a){var c=n.getSource().maxzoom;if(t.canonical.z>=c){var h=t.canonical.z-c;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),o=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h)):0!==h&&(s=c,o=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h))}o.key!==t.key&&(u.push(o.key),r=n.getTile(o))}var d=function(e){u.forEach((function(t){i[t]=e})),u.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&d(r.tileID.key);var f=o.calculateScaledKey(s);if((r=n.getTileByID(f))&&r.hasData())break;var p=i[f];if(null===p)break;void 0===p?u.push(f):r=n.getTileByID(p)}return d(r?r.tileID.key:null),r&&r.hasData()?r:null}},{key:"findDEMTileFor",value:function(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}},{key:"prepareDrawTile",value:function(){this.renderedToTile=!0}},{key:"_clearRenderCacheForTile",value:function(e,t){var n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}},{key:"getWirefameBuffer",value:function(){if(!this.wireframeSegments){var t=function(t){for(var n=0,r=new e.StructArrayLayout2ui4,i=131,a=1;a<129;a++){for(var o=1;o<129;o++)n=a*i+o,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===a&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}]),r}(e.Elevation),Wn=function(){function t(n,r,i,a,o,s){v(this,t);var l=n.gl;this.program=l.createProgram();var u=function(e){for(var t=[],n=0;n<e.length;n++)if(null!==e[n]){var r=e[n].split(" ");t.push(r.pop())}return t}(i.staticAttributes),c=a?a.getBinderAttributes():[],h=u.concat(c),d=a?a.defines():[];d=d.concat(s.map((function(e){return"#define ".concat(e)})));var f=d.concat(n.extStandardDerivatives?"#extension GL_OES_standard_derivatives : enable\n".concat(Sn):Sn,Sn,Tn,kn.fragmentSource,bn.fragmentSource,i.fragmentSource).join("\n"),p=d.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",Tn,kn.vertexSource,bn.vertexSource,xn.vertexSource,i.vertexSource).join("\n"),m=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(m,f),l.compileShader(m),l.attachShader(this.program,m);var g=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(g,p),l.compileShader(g),l.attachShader(this.program,g),this.attributes={},this.numAttributes=h.length;for(var y=0;y<this.numAttributes;y++)h[y]&&(l.bindAttribLocation(this.program,y,h[y]),this.attributes[h[y]]=y);l.linkProgram(this.program),l.deleteShader(g),l.deleteShader(m),this.fixedUniforms=o(n),this.binderUniforms=a?a.getUniforms(n):[],-1!==s.indexOf("TERRAIN")&&(this.terrainUniforms=function(t){return{u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t),u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}}(n)),-1!==s.indexOf("FOG")&&(this.fogUniforms=function(t){return{u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}}(n))}}}return g(t,[{key:"setTerrainUniformValues",value:function(e,t){if(this.terrainUniforms){var n=this.terrainUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r].set(this.program,r,t[r])}}},{key:"setFogUniformValues",value:function(e,t){if(this.fogUniforms){var n=this.fogUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r].set(this.program,r,t[r])}}},{key:"draw",value:function(e,t,n,i,a,o,s,l,u,c,h,f,p,m,v){var g,y=e.gl;if(!this.failedToCreate){e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(a),e.setCullFace(o);for(var _=0,x=Object.keys(this.fixedUniforms);_<x.length;_++){var b=x[_];this.fixedUniforms[b].set(this.program,b,s[b])}m&&m.setUniforms(this.program,e,this.binderUniforms,f,{zoom:p});var w,k=(g={},r(g,y.LINES,2),r(g,y.TRIANGLES,3),r(g,y.LINE_STRIP,1),g)[t],T=d(h.get());try{for(T.s();!(w=T.n()).done;){var S=w.value,E=S.vaos||(S.vaos={});(E[l]||(E[l]=new Rn)).bind(e,this,u,m?m.getPaintVertexBuffers():[],c,S.vertexOffset,v||[]),y.drawElements(t,S.primitiveLength*k,y.UNSIGNED_SHORT,S.primitiveOffset*k*2)}}catch(C){T.e(C)}finally{T.f()}}}}],[{key:"cacheKey",value:function(e,t,n,r){var i,a="".concat(t).concat(r?r.cacheKey:""),o=d(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.usedDefines.includes(s)&&(a+="/".concat(s))}}catch(l){o.e(l)}finally{o.f()}return a}}]),t}();function Xn(e,t,n){var r=1/q(n,1,t.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),a=n.tileSize*Math.pow(2,t.transform.tileZoom)/i,o=a*(n.tileID.canonical.x+n.tileID.wrap*i),s=a*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[o>>16,s>>16],u_pixel_coord_lower:[65535&o,65535&s]}}var Kn=e.create(),Yn=function(t,n,r,i,a,o,s,l,u,c,h){var d=n.style.light,f=d.properties.get("position"),p=[f.x,f.y,f.z],m=e.create$1();"viewport"===d.properties.get("anchor")&&(e.fromRotation(m,-n.transform.angle),e.transformMat3(p,p,m));var v=d.properties.get("color"),g=n.transform,y={u_matrix:t,u_lightpos:p,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[v.r,v.g,v.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Kn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:a,u_edge_radius:o};return"globe"===g.projection.name&&(y.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],y.u_zoom_transition=u,y.u_inv_rot_matrix=h,y.u_merc_center=c,y.u_up_dir=g.projection.upVector(new e.CanonicalTileID(0,0,0),c[0]*e.EXTENT,c[1]*e.EXTENT),y.u_height_lift=l),y},Jn=function(t,n,r,i,a,o,s,l,u,c,h,d,f){var p=Yn(t,n,r,i,a,o,s,c,h,d,f),m={u_height_factor:-Math.pow(2,s.overscaledZ)/u.tileSize/8};return e.extend(p,Xn(l,n,u),m)},Qn=function(e){return{u_matrix:e}},$n=function(t,n,r,i){return e.extend(Qn(t),Xn(r,n,i))},er=function(e,t){return{u_matrix:e,u_world:t}},tr=function(t,n,r,i,a){return e.extend($n(t,n,r,i),{u_world:a})},nr=e.create(),rr=function(t,n,r,i,a,o){var s,l=t.transform,u="globe"===l.projection.name;if("map"===o.paint.get("circle-pitch-alignment"))if(u){var c=e.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel;s=Float32Array.from([c,0,0,c])}else s=l.calculatePixelsToTileUnitsMatrix(r);else s=new Float32Array([l.pixelsToGLUnits[0],0,0,l.pixelsToGLUnits[1]]);var h={u_camera_to_center_distance:l.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,r,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:s,u_inv_rot_matrix:nr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(u){h.u_inv_rot_matrix=i,h.u_merc_center=a,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom);var d=a[0]*e.EXTENT,f=a[1]*e.EXTENT;h.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),d,f)}return h},ir=function(e){var t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},ar=function(t,n,r,i){var a=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/a,n.pixelsToGLUnits[1]/a]}},or=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},sr=e.create(),lr=function(t,n,r,i,a,o,s){var l=t.transform,u="globe"===l.projection.name,c=u?e.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:q(r,1,o),h={u_matrix:n.projMatrix,u_extrude_scale:c,u_intensity:s,u_inv_rot_matrix:sr,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(u){h.u_inv_rot_matrix=i,h.u_merc_center=a,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom);var d=a[0]*e.EXTENT,f=a[1]*e.EXTENT;h.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),d,f)}return h},ur=function(e,t,n,r,i,a,o,s){var l=e.transform,u=l.calculatePixelsToTileUnitsMatrix(t),c={u_matrix:dr(e,t,n,i),u_pixels_to_tile_units:u,u_device_pixel_ratio:o,u_units_to_pixels:[1/l.pixelsToGLUnits[0],1/l.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:a,u_texsize:[0,0],u_scale:[0,0,0],u_mix:0,u_alpha_discard_threshold:0,u_trim_offset:s};if(fr(n)){var h=hr(t,e.transform);c.u_texsize=t.lineAtlasTexture.size,c.u_scale=[h,r.fromScale,r.toScale],c.u_mix=r.t}return c},cr=function(e,t,n,r,i,a){var o=e.transform,s=hr(t,o);return{u_matrix:dr(e,t,n,i),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:a,u_image:0,u_scale:[s,r.fromScale,r.toScale],u_fade:r.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function hr(e,t){return 1/q(e,1,t.tileZoom)}function dr(e,t,n,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function fr(e){var t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}var pr=function(e,t,n,r,i,a){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:mr(i.paint.get("raster-hue-rotate")),u_perspective_transform:a};var o,s};function mr(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var vr,gr=e.create(),yr=function(t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v){var g=a.transform,y={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:g.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:g.width/g.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+u,u_pitch_with_map:+i,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:gr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:gr,u_up_vector:[0,-1,0]};return"globe"===v.name&&(y.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],y.u_zoom_transition=d,y.u_inv_rot_matrix=p,y.u_merc_center=f,y.u_camera_forward=g._camera.forward(),y.u_ecef_origin=e.globeECEFOrigin(g.globeMatrix,h.toUnwrapped()),y.u_tile_matrix=Float32Array.from(g.globeMatrix),y.u_up_vector=m),y},_r=function(t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v,g){return e.extend(yr(t,n,r,i,a,o,s,l,u,c,d,f,p,m,v,g),{u_gamma_scale:i?a.transform.cameraToCenterDistance*Math.cos(a.terrain?0:a.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+h})},xr=function(t,n,r,i,a,o,s,l,u,c,h,d,f,p,m,v){return e.extend(_r(t,n,r,i,a,o,s,l,!0,u,!0,h,d,f,p,m,v),{u_texsize_icon:c,u_texture_icon:1})},br=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},wr=function(t,n,r,i,a,o){return e.extend(function(e,t,n,r){var i=n.imageManager.getPattern(e.from.toString()),a=n.imageManager.getPattern(e.to.toString()),o=n.imageManager.getPixelSize(),s=o.width,l=o.height,u=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/u,h=c*(r.tileID.canonical.x+r.tileID.wrap*u),d=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[s,l],u_mix:t.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/q(r,1,n.transform.tileZoom),u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(i,o,r,a),{u_matrix:t,u_opacity:n})},kr={fillExtrusion:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}},fillExtrusionPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}},fill:function(t){return{u_matrix:new e.UniformMatrix4f(t)}},fillPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t)}},fillOutline:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}},fillOutlinePattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t)}},circle:function(t){return{u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}},collisionBox:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}},collisionCircle:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}},debug:function(t){return{u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}},clippingMask:function(t){return{u_matrix:new e.UniformMatrix4f(t)}},heatmap:function(t){return{u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}},heatmapTexture:function(t){return{u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}},hillshade:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}},hillshadePrepare:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}},line:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_mix:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}},linePattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_scale:new e.Uniform3f(t),u_fade:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}},raster:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}},symbolIcon:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}},symbolSDF:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}},symbolTextAndIcon:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}},background:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}},backgroundPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl_a:new e.Uniform2f(t),u_pattern_br_a:new e.Uniform2f(t),u_pattern_tl_b:new e.Uniform2f(t),u_pattern_br_b:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_mix:new e.Uniform1f(t),u_pattern_size_a:new e.Uniform2f(t),u_pattern_size_b:new e.Uniform2f(t),u_scale_a:new e.Uniform1f(t),u_scale_b:new e.Uniform1f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},terrainRaster:zn,terrainDepth:zn,skybox:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}},skyboxGradient:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}},skyboxCapture:function(t){return{u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}},globeRaster:function(t){return{u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}},globeAtmosphere:function(t){return{u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)}}};function Tr(t,n,r,i,a,o,s){for(var l=t.context,u=l.gl,c=t.transform,h=t.useProgram("collisionBox"),d=[],f=0,p=0,m=0;m<i.length;m++){var v=i[m],g=n.getTile(v),y=g.getBucket(r);if(y){var _=zt(v,y,c),x=_;0===a[0]&&0===a[1]||(x=t.translatePosMatrix(_,g,a,o));var b=s?y.textCollisionBox:y.iconCollisionBox,w=y.collisionCircleArray;if(w.length>0){var k=e.create(),T=x;e.mul(k,y.placementInvProjMatrix,c.glCoordMatrix),e.mul(k,k,y.placementViewportMatrix),d.push({circleArray:w,circleOffset:p,transform:T,invTransform:k,projection:y.getProjection()}),p=f+=w.length/4}b&&(t.terrain&&t.terrain.setupElevationDraw(g,h),h.draw(l,u.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,ar(x,c,g,y.getProjection()),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,c.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]))}}if(s&&d.length){var S=t.useProgram("collisionCircle"),E=new e.StructArrayLayout2f1f2i16;E.resize(4*f),E._trim();for(var C=0,A=0,R=d;A<R.length;A++)for(var M=R[A],B=0;B<M.circleArray.length/4;B++){var P=4*B,I=M.circleArray[P+0],z=M.circleArray[P+1],L=M.circleArray[P+2],D=M.circleArray[P+3];E.emplace(C++,I,z,L,D,0),E.emplace(C++,I,z,L,D,1),E.emplace(C++,I,z,L,D,2),E.emplace(C++,I,z,L,D,3)}(!vr||vr.length<2*f)&&(vr=function(t){var n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var a=6*i;r.uint16[a+0]=4*i+0,r.uint16[a+1]=4*i+1,r.uint16[a+2]=4*i+2,r.uint16[a+3]=4*i+2,r.uint16[a+4]=4*i+3,r.uint16[a+5]=4*i+0}return r}(f));for(var O,N=l.createIndexBuffer(vr,!0),F=l.createVertexBuffer(E,e.collisionCircleLayout.members,!0),j=0,V=d;j<V.length;j++){var Z=V[j],U={u_matrix:Z.transform,u_inv_matrix:Z.invTransform,u_camera_to_center_distance:(O=c).getCameraToCenterDistance(Z.projection),u_viewport_size:[O.width,O.height]};S.draw(l,u.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,U,r.id,F,N,e.SegmentVector.simpleSegment(0,2*Z.circleOffset,Z.circleArray.length,Z.circleArray.length/2),null,c.zoom)}F.destroy(),N.destroy()}}var Sr=e.create();function Er(t,n,r,i,a,o){var s=e.getAnchorAlignment(t),l=-(s.horizontalAlign-.5)*n,u=-(s.verticalAlign-.5)*r,c=e.evaluateVariableOffset(t,i);return new e.pointGeometry((l/a+c[0])*o,(u/a+c[1])*o)}function Cr(t,n,r,i,a,o,s,l,u,c,h){var d=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,p=t.icon.dynamicLayoutVertexArray,m={},v=Lt(l,t.getProjection(),o),g=o.elevation,y=t.getProjection().upVectorScale(l.canonical,o.center.lat,o.worldSize);f.clear();for(var _=0;_<d.length;_++){var x=d.get(_),b=t.allowVerticalPlacement&&!x.placedOrientation,w=x.hidden||!x.crossTileID||b?null:i[x.crossTileID];if(w){var k=new e.pointGeometry(x.tileAnchorX,x.tileAnchorY),T=t.getProjection().upVector(l.canonical,k.x,k.y),S=g?g.getAtTileOffset(l,k.x,k.y):0,E=yt([x.projectedAnchorX+S*T[0]*y.metersToTile,x.projectedAnchorY+S*T[1]*y.metersToTile,x.projectedAnchorZ+S*T[2]*y.metersToTile],r?v:s),C=_t(o.getCameraToCenterDistance(t.getProjection()),E.signedDistanceFromCamera),A=a.evaluateSizeForFeature(t.textSizeData,c,x)*C/e.ONE_EM;r&&(A*=t.tilePixelRatio/u);var R=w.width,M=w.height,B=Er(w.anchor,R,M,w.textOffset,w.textScale,A),P=void 0;if(r){var I=k.add(B),z=t.getProjection().projectTilePoint(I.x,I.y,l.canonical),L=z.x,D=z.y,O=z.z;P=yt([L+S*T[0]*y.metersToTile,D+S*T[1]*y.metersToTile,O+S*T[2]*y.metersToTile],s).point}else{var N=n?B.rotate(-o.angle):B;P=[E.point[0]+N.x,E.point[1]+N.y,0]}for(var F=t.allowVerticalPlacement&&x.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,j=0;j<x.numGlyphs;j++)e.addDynamicAttributes(f,P[0],P[1],P[2],F);h&&x.associatedIconIndex>=0&&(m[x.associatedIconIndex]={shiftedAnchor:P,angle:F})}else Rt(x.numGlyphs,f)}if(h){p.clear();for(var V=t.icon.placedSymbolArray,Z=0;Z<V.length;Z++){var U=V.get(Z);if(U.hidden)Rt(U.numGlyphs,p);else{var G=m[Z];if(G)for(var H=0;H<U.numGlyphs;H++)e.addDynamicAttributes(p,G.shiftedAnchor[0],G.shiftedAnchor[1],G.shiftedAnchor[2],G.angle);else Rt(U.numGlyphs,p)}}t.icon.dynamicLayoutVertexBuffer.updateData(p)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function Ar(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Rr(t,n,r,i,a,o,s,l,u,c,h,f){var p=t.context,m=p.gl,v=t.transform,g="map"===l,y="map"===u,_=g&&"point"!==r.layout.get("symbol-placement"),x=g&&!y&&!_,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),w=!1,k=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),T=[e.mercatorXfromLng(v.center.lng),e.mercatorYfromLat(v.center.lat)],S=r.layout.get("text-variable-anchor"),E="globe"===v.projection.name,C=[],A=[0,-1,0],R=A;!E&&!v.mercatorFromTransition||g||(R=function(t){var n=t._camera.getWorldToCamera(t.worldSize,1),r=e.multiply([],n,t.globeMatrix);e.invert(r,r);var i=[0,0,0],a=[0,1,0,0];return e.transformMat4$1(a,a,r),i[0]=a[0],i[1]=a[1],i[2]=a[2],e.normalize(i,i),i}(v));var M,B=d(i);try{for(B.s();!(M=B.n()).done;){var P=M.value,I=n.getTile(P),z=I.getBucket(r);if(z&&("mercator"!==z.projection.name||!E)){var L=a?z.text:z.icon;if(L&&!z.fullyClipped&&L.segments.get().length){var D=L.programConfigurations.get(r.id),O=a||z.sdfIcons,N=a?z.textSizeData:z.iconSizeData,F=y||0!==v.pitch,j=e.evaluateSizeForZoom(N,v.zoom),V=void 0,Z=void 0,U=void 0,G=void 0,H=[0,0],q=null;if(a){if(Z=I.glyphAtlasTexture,U=m.LINEAR,V=I.glyphAtlasTexture.size,z.iconsInText){H=I.imageAtlasTexture.size,q=I.imageAtlasTexture;var W="composite"===N.kind||"camera"===N.kind;G=F||t.options.rotating||t.options.zooming||W?m.LINEAR:m.NEAREST}}else{var X=1!==r.layout.get("icon-size").constantOr(0)||z.iconsNeedLinear;Z=I.imageAtlasTexture,U=O||t.options.rotating||t.options.zooming||X||F?m.LINEAR:m.NEAREST,V=I.imageAtlasTexture.size}var K="globe"===z.projection.name,Y=K?R:A,J=K?e.globeToMercatorTransition(v.zoom):0,Q=Lt(P,z.getProjection(),v),$=v.calculatePixelsToTileUnitsMatrix(I),ee=pt(Q,I.tileID.canonical,y,g,v,z.getProjection(),$),te=t.terrain&&y&&_?e.invert(e.create(),ee):Sr,ne=vt(Q,I.tileID.canonical,y,g,v,z.getProjection(),$),re=S&&z.hasTextData(),ie="none"!==r.layout.get("icon-text-fit")&&re&&z.hasIconData();if(_){var ae=v.elevation,oe=ae?ae.getAtTileOffsetFunc(P,v.center.lat,v.worldSize,z.getProjection()):function(e){return[0,0,0]},se=mt(Q,I.tileID.canonical,y,g,v,z.getProjection(),$);bt(z,Q,t,a,se,ne,y,c,oe,P)}var le=_||a&&S||ie,ue=t.translatePosMatrix(Q,I,o,s),ce=le?Sr:ee,he=t.translatePosMatrix(ne,I,o,s,!0),de=z.getProjection().createInversionMatrix(v,P.canonical),fe=[];t.terrain&&y&&fe.push("PITCH_WITH_MAP_TERRAIN"),K&&fe.push("PROJECTION_GLOBE_VIEW"),le&&fe.push("PROJECTED_POS_ON_VIEWPORT");var pe=O&&0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),me=void 0;me=O?z.iconsInText?xr(N.kind,j,x,y,t,ue,ce,he,V,H,P,J,T,de,Y,z.getProjection()):_r(N.kind,j,x,y,t,ue,ce,he,a,V,!0,P,J,T,de,Y,z.getProjection()):yr(N.kind,j,x,y,t,ue,ce,he,a,V,P,J,T,de,Y,z.getProjection());var ve={program:t.useProgram(Ar(O,a,z),D,fe),buffers:L,uniformValues:me,atlasTexture:Z,atlasTextureIcon:q,atlasInterpolation:U,atlasInterpolationIcon:G,isSDF:O,hasHalo:pe,tile:I,labelPlaneMatrixInv:te};if(b&&z.canOverlap){w=!0;var ge,ye=L.segments.get(),_e=d(ye);try{for(_e.s();!(ge=_e.n()).done;){var xe=ge.value;C.push({segments:new e.SegmentVector([xe]),sortKey:xe.sortKey,state:ve})}}catch(Ee){_e.e(Ee)}finally{_e.f()}}else C.push({segments:L.segments,sortKey:0,state:ve})}}}}catch(Ee){B.e(Ee)}finally{B.f()}w&&C.sort((function(e,t){return e.sortKey-t.sortKey}));for(var be=0,we=C;be<we.length;be++){var ke=we[be],Te=ke.state;if(t.terrain&&t.terrain.setupElevationDraw(Te.tile,Te.program,{useDepthForOcclusion:!E,labelPlaneMatrixInv:Te.labelPlaneMatrixInv}),p.activeTexture.set(m.TEXTURE0),Te.atlasTexture.bind(Te.atlasInterpolation,m.CLAMP_TO_EDGE),Te.atlasTextureIcon&&(p.activeTexture.set(m.TEXTURE1),Te.atlasTextureIcon&&Te.atlasTextureIcon.bind(Te.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),Te.isSDF){var Se=Te.uniformValues;Te.hasHalo&&(Se.u_is_halo=1,Mr(Te.buffers,ke.segments,r,t,Te.program,k,h,f,Se)),Se.u_is_halo=0}Mr(Te.buffers,ke.segments,r,t,Te.program,k,h,f,Te.uniformValues)}}function Mr(t,n,r,i,a,o,s,l,u){var c=i.context,h=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];a.draw(c,c.gl.TRIANGLES,o,s,l,e.CullFaceMode.disabled,u,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),h)}function Br(t,n,r,i,a,o,s){var l,u,c,h,f,p=t.context.gl,m=r.paint.get("fill-pattern"),v=m&&m.constantOr(1),g=r.getCrossfadeParameters();s?(u=v&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",l=p.LINES):(u=v?"fillPattern":"fill",l=p.TRIANGLES);var y,_=d(i);try{for(_.s();!(y=_.n()).done;){var x=y.value,b=n.getTile(x);if(!v||b.patternsLoaded()){var w=b.getBucket(r);if(w){t.prepareDrawTile();var k=w.programConfigurations.get(r.id),T=t.useProgram(u,k);v&&(t.context.activeTexture.set(p.TEXTURE0),b.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),k.updatePaintBuffers(g));var S=m.constantOr(null);if(S&&b.imageAtlas){var E=b.imageAtlas,C=E.patternPositions[S.to.toString()],A=E.patternPositions[S.from.toString()];C&&A&&k.setConstantPatternPositions(C,A)}var R=t.translatePosMatrix(x.projMatrix,b,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){h=w.indexBuffer2,f=w.segments2;var M=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===u&&v?tr(R,t,g,b,M):er(R,M)}else h=w.indexBuffer,f=w.segments,c=v?$n(R,t,g,b):Qn(R);t.prepareDrawProgram(t.context,T,x.toUnwrapped()),T.draw(t.context,l,a,t.stencilModeForClipping(x),o,e.CullFaceMode.disabled,c,r.id,w.layoutVertexBuffer,h,f,r.paint,t.transform.zoom,k)}}}}catch(B){_.e(B)}finally{_.f()}}function Pr(t,n,r,i,a,o,s){var l=t.context,u=l.gl,c=t.transform,h=r.paint.get("fill-extrusion-pattern"),f=h.constantOr(1),p=r.getCrossfadeParameters(),m=r.paint.get("fill-extrusion-opacity"),v=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],g=r.layout.get("fill-extrusion-edge-radius"),y="globe"===c.projection.name?e.fillExtrusionHeightLift():0,_="globe"===c.projection.name,x=_?e.globeToMercatorTransition(c.zoom):0,b=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)],w=[];_&&(w.push("PROJECTION_GLOBE_VIEW"),t.style.terrainSetForDrapingOnly()&&w.push("TERRAIN")),v[0]>0&&w.push("FAUX_AO");var k,T=d(i);try{for(T.s();!(k=T.n()).done;){var S=k.value,E=n.getTile(S),C=E.getBucket(r);if(C&&C.projection.name===c.projection.name){var A=C.programConfigurations.get(r.id),R=t.useProgram(f?"fillExtrusionPattern":"fillExtrusion",A,w);if(t.terrain){var M=t.terrain;if(t.style.terrainSetForDrapingOnly())M.setupElevationDraw(E,R,{useMeterToDem:!0});else{if(!C.enableTerrain)continue;if(M.setupElevationDraw(E,R,{useMeterToDem:!0}),Ir(l,n,S,C,r,M),!C.centroidVertexBuffer){var B=R.attributes.a_centroid_pos;void 0!==B&&u.vertexAttrib2f(B,0,0)}}}f&&(t.context.activeTexture.set(u.TEXTURE0),E.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),A.updatePaintBuffers(p));var P=h.constantOr(null);if(P&&E.imageAtlas){var I=E.imageAtlas,z=I.patternPositions[P.to.toString()],L=I.patternPositions[P.from.toString()];z&&L&&A.setConstantPatternPositions(z,L)}var D=t.translatePosMatrix(S.projMatrix,E,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),O=c.projection.createInversionMatrix(c,S.canonical),N=r.paint.get("fill-extrusion-vertical-gradient"),F=f?Jn(D,t,N,m,v,g,S,p,E,y,x,b,O):Yn(D,t,N,m,v,g,S,y,x,b,O);t.prepareDrawProgram(l,R,S.toUnwrapped());var j=[];t.terrain&&j.push(C.centroidVertexBuffer),_&&j.push(C.layoutVertexExtBuffer),R.draw(l,l.gl.TRIANGLES,a,o,s,e.CullFaceMode.backCCW,F,r.id,C.layoutVertexBuffer,C.indexBuffer,C.segments,r.paint,t.transform.zoom,A,j)}}}catch(V){T.e(V)}finally{T.f()}}function Ir(t,n,r,i,a,o){for(var s,l,u,c=[function(t){var n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},function(t){var n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)}],h=function(e){for(var t=n.getSource().minzoom,r=function(e){var t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(a)},i=0,o=[0,-1,1];i<o.length;i++){var s=o[i];if(!(e.overscaledZ+s<t)){var l=r(e.calculateScaledKey(e.overscaledZ+s));if(l)return l}}},f=[0,0,0],p=function(t,n){return f[0]=Math.min(t.min.y,n.min.y),f[1]=Math.max(t.max.y,n.max.y),f[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,f},m=function(t,n){return f[0]=Math.min(t.min.x,n.min.x),f[1]=Math.max(t.max.x,n.max.x),f[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,f},v=[function(e,t){return p(e,t)},function(e,t){return p(t,e)},function(e,t){return m(e,t)},function(e,t){return m(t,e)}],g=new e.pointGeometry(0,0),y=function(t,n,i,a,c){var h=[[a?i:t,a?t:i,0],[a?i:n,a?n:i,0]],d=c<0?e.EXTENT+c:c,f=[a?d:(t+n)/2,a?(t+n)/2:d,0];return 0===i&&c<0||0!==i&&c>0?o.getForTilePoints(u,[f],!0,l):h.push(f),o.getForTilePoints(r,h,!0,s),Math.max(h[0][2],h[1][2],f[2])/o.exaggeration()},_=0;_<4;_++){var x=(_<2?1:5)-_,b=i.borders[_];if(0!==b.length){var w=u=c[_](r),k=h(w);if(k&&k instanceof e.FillExtrusionBucket&&k.enableTerrain&&(i.borderDoneWithNeighborZ[_]!==k.canonical.z||k.borderDoneWithNeighborZ[x]!==i.canonical.z)&&(l=o.findDEMTileFor(w))&&l.dem){if(!s){var T=o.findDEMTileFor(r);if(!T||!T.dem)return;s=T}var S=k.borders[x],E=0,C=k.borderDoneWithNeighborZ[x]!==i.canonical.z;if(i.canonical.z===k.canonical.z){for(var A=0;A<b.length;A++){for(var R=i.featuresOnBorder[b[A]],M=R.borders[_],B=void 0;E<S.length&&!((B=k.featuresOnBorder[S[E]]).borders[x][1]>M[0]+3);)C&&k.encodeCentroid(void 0,B,!1),E++;if(B&&E<S.length){for(var P=E,I=0;!(B.borders[x][0]>M[1]-3)&&(I++,++E!==S.length);)B=k.featuresOnBorder[S[E]];if(B=k.featuresOnBorder[S[P]],R.intersectsCount()>1||B.intersectsCount()>1||1!==I){1!==I&&(E=P),i.encodeCentroid(void 0,R,!1),C&&k.encodeCentroid(void 0,B,!1);continue}var z=v[_](R,B),L=_%2?e.EXTENT-1:0;g.x=y(z[0],Math.min(e.EXTENT-1,z[1]),L,_<2,z[2]),g.y=0,i.encodeCentroid(g,R,!1),C&&k.encodeCentroid(g,B,!1)}else i.encodeCentroid(void 0,R,!1)}i.borderDoneWithNeighborZ[_]=k.canonical.z,i.needsCentroidUpdate=!0,C&&(k.borderDoneWithNeighborZ[x]=i.canonical.z,k.needsCentroidUpdate=!0)}else{var D,O=d(b);try{for(O.s();!(D=O.n()).done;){var N=D.value;i.encodeCentroid(void 0,i.featuresOnBorder[N],!1)}}catch(Z){O.e(Z)}finally{O.f()}if(C){var F,j=d(S);try{for(j.s();!(F=j.n()).done;){var V=F.value;k.encodeCentroid(void 0,k.featuresOnBorder[V],!1)}}catch(Z){j.e(Z)}finally{j.f()}k.borderDoneWithNeighborZ[x]=i.canonical.z,k.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[_]=k.canonical.z,i.needsCentroidUpdate=!0}}}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}var zr=new e.Color(1,0,0,1),Lr=new e.Color(0,1,0,1),Dr=new e.Color(0,0,1,1),Or=new e.Color(1,0,1,1),Nr=new e.Color(0,1,1,1);function Fr(t,n,r){var i=t.context,a=t.transform,o=i.gl,s="globe"===a.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null,u=r.projMatrix;if(s&&e.globeToMercatorTransition(a.zoom)>0){var c=e.transitionTileAABBinECEF(r.canonical,a),h=e.globeDenormalizeECEF(c);u=e.multiply(new Float32Array(16),a.globeMatrix,h),e.multiply(u,a.projMatrix,u)}var d=t.useProgram("debug",null,l),f=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(f,d);var p=e.DepthMode.disabled,m=e.StencilMode.disabled,v=t.colorModeForRenderPass(),g="$debug";i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s?f._makeGlobeTileDebugBuffers(t.context,a):f._makeDebugTileBoundsBuffers(t.context,a.projection);var y=f._tileDebugBuffer||t.debugBuffer,_=f._tileDebugIndexBuffer||t.debugIndexBuffer,x=f._tileDebugSegments||t.debugSegments;d.draw(i,o.LINE_STRIP,p,m,v,e.CullFaceMode.disabled,or(u,e.Color.red),g,y,_,x,null,null,null,[f._globeTileDebugBorderBuffer]);var b=f.latestRawTileData,w=Math.floor((b&&b.byteLength||0)/1024),k=n.getTile(r).tileSize,T=512/Math.min(k,512)*(r.overscaledZ/a.zoom)*.5,S=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(S+=" => ".concat(r.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,S+=" ".concat(w,"kb"));var E=f._tileDebugTextBuffer||t.debugBuffer,C=f._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,A=f._tileDebugTextSegments||t.debugSegments;d.draw(i,o.TRIANGLES,p,m,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,or(u,e.Color.transparent,T),g,E,C,A,null,null,null,[f._globeTileDebugTextBuffer])}function jr(e,t,n,r){Zr(e,0,t+n/2,e.transform.width,n,r)}function Vr(e,t,n,r){Zr(e,t-n/2,0,n,e.transform.height,r)}function Zr(t,n,r,i,a,o){var s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}var Ur=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function Gr(e,t,n,r){e.emplaceBack(t,n,r)}var Hr=g((function t(n){v(this,t),this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Gr(this.vertexArray,-1,-1,1),Gr(this.vertexArray,1,-1,1),Gr(this.vertexArray,-1,1,1),Gr(this.vertexArray,1,1,1),Gr(this.vertexArray,-1,-1,-1),Gr(this.vertexArray,1,-1,-1),Gr(this.vertexArray,-1,1,-1),Gr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=n.createVertexBuffer(this.vertexArray,Ur),this.indexBuffer=n.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}));function qr(t,n,r,i,a,o){var s=t.gl,l=n.paint.get("sky-atmosphere-color"),u=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),h=function(e,t,n,r,i){return{u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}}(e.fromMat4(e.create$1(),i),a,c,l,u);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+o,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}var Wr=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),Xr=function(){function t(n){v(this,t);var r=new e.StructArrayLayout5f20;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);var i=new e.StructArrayLayout3ui6;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.vertexBuffer=n.createVertexBuffer(r,Wr.members),this.indexBuffer=n.createIndexBuffer(i),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}return g(t,[{key:"destroy",value:function(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}]),t}(),Kr={symbol:function(t,n,r,i,a){if("translucent"===t.renderPass){var o=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,a,o,s){var l,u=n.transform,c="map"===a,h="map"===o,f=d(t);try{for(f.s();!(l=f.n()).done;){var p=l.value,m=i.getTile(p),v=m.getBucket(r);if(v&&v.text&&v.text.segments.get().length){var g=e.evaluateSizeForZoom(v.textSizeData,u.zoom),y=Lt(p,v.getProjection(),u),_=u.calculatePixelsToTileUnitsMatrix(m),x=pt(y,m.tileID.canonical,h,c,u,v.getProjection(),_),b="none"!==r.layout.get("icon-text-fit")&&v.hasIconData();if(g){var w=Math.pow(2,u.zoom-m.tileID.overscaledZ);Cr(v,c,h,s,e.symbolSize,u,x,p,w,g,b)}}}}catch(k){f.e(k)}finally{f.f()}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),a),0!==r.paint.get("icon-opacity").constantOr(1)&&Rr(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,s),0!==r.paint.get("text-opacity").constantOr(1)&&Rr(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,s),n.map.showCollisionBoxes&&(Tr(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Tr(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(t,n,r,i){if("translucent"===t.renderPass){var a=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var u=t.context,c=u.gl,h=t.transform,f=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,m=t.colorModeForRenderPass(),v="globe"===h.projection.name,g=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],y=[],_=0;_<i.length;_++){var x=i[_],b=n.getTile(x),w=b.getBucket(r);if(w&&w.projection.name===h.projection.name){var k=w.programConfigurations.get(r.id),T=ir(r);v&&T.push("PROJECTION_GLOBE_VIEW");var S=t.useProgram("circle",k,T),E=w.layoutVertexBuffer,C=w.globeExtVertexBuffer,A=w.indexBuffer,R=h.projection.createInversionMatrix(h,x.canonical),M={programConfiguration:k,program:S,layoutVertexBuffer:E,globeExtVertexBuffer:C,indexBuffer:A,uniformValues:rr(t,x,b,R,g,r),tile:b};if(l){var B,P=w.segments.get(),I=d(P);try{for(I.s();!(B=I.n()).done;){var z=B.value;y.push({segments:new e.SegmentVector([z]),sortKey:z.sortKey,state:M})}}catch(X){I.e(X)}finally{I.f()}}else y.push({segments:w.segments,sortKey:0,state:M})}}l&&y.sort((function(e,t){return e.sortKey-t.sortKey}));for(var L={useDepthForOcclusion:!v},D=0,O=y;D<O.length;D++){var N=O[D],F=N.state,j=F.programConfiguration,V=F.program,Z=F.layoutVertexBuffer,U=F.globeExtVertexBuffer,G=F.indexBuffer,H=F.uniformValues,q=F.tile,W=N.segments;t.terrain&&t.terrain.setupElevationDraw(q,V,L),t.prepareDrawProgram(u,V,q.tileID.toUnwrapped()),V.draw(u,c.TRIANGLES,f,p,m,e.CullFaceMode.disabled,H,r.id,Z,G,W,r.paint,h.zoom,j,[U])}}}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var a=t.context,o=a.gl,s=e.StencilMode.disabled,l=new e.ColorMode([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n,r){var i=e.gl,a=t.width*r,o=t.height*r;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,a,o]);var s=n.heatmapFbo;if(!s||s&&(s.width!==a||s.height!==o)){s&&s.destroy();var l=i.createTexture();i.bindTexture(i.TEXTURE_2D,l),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=n.heatmapFbo=e.createFramebuffer(a,o,!1),function(e,t,n,r,i,a){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,i,a,0,o.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,0,l,s,a,o)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(a,t,r,"globe"===t.transform.projection.name?.5:.25),a.clear({color:e.Color.transparent});for(var u=t.transform,c="globe"===u.projection.name,h=c?["PROJECTION_GLOBE_VIEW"]:null,d=c?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,f=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],p=0;p<i.length;p++){var m=i[p];if(!n.hasRenderableParent(m)){var v=n.getTile(m),g=v.getBucket(r);if(g&&g.projection.name===u.projection.name){var y=g.programConfigurations.get(r.id),_=t.useProgram("heatmap",y,h),x=t.transform.zoom;t.terrain&&t.terrain.setupElevationDraw(v,_),t.prepareDrawProgram(a,_,m.toUnwrapped());var b=u.projection.createInversionMatrix(u,m.canonical);_.draw(a,o.TRIANGLES,e.DepthMode.disabled,s,l,d,lr(t,m,v,b,f,x,r.paint.get("heatmap-intensity")),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,y,c?[g.globeExtVertexBuffer]:null)}}}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var r=t.context,i=r.gl,a=n.heatmapFbo;if(a){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var o=n.colorRampTexture;o||(o=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),o.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,function(e,t,n,r){return{u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}}(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}}(t,r))},line:function(t,n,r,i){if("translucent"===t.renderPass){var a=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),u=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,c=r.paint.get("line-dasharray"),f=c.constantOr(1),p=r.layout.get("line-cap"),m=r.paint.get("line-pattern"),v=m.constantOr(1),g=r.paint.get("line-gradient"),y=r.getCrossfadeParameters(),_=v?"linePattern":"line",x=t.context,b=x.gl,w=function(e){var t=[];fr(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");var n=e.paint.get("line-trim-offset");0===n[0]&&0===n[1]||t.push("RENDER_LINE_TRIM_OFFSET");var r=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!r&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t}(r),k=w.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(k=!1);var T,S=d(i);try{var E=function(){var i=T.value,a=n.getTile(i);if(v&&!a.patternsLoaded())return"continue";var o=a.getBucket(r);if(!o)return"continue";t.prepareDrawTile();var d=o.programConfigurations.get(r.id),S=t.useProgram(_,d,w),E=m.constantOr(null);if(E&&a.imageAtlas){var C=a.imageAtlas,A=C.patternPositions[E.to.toString()],R=C.patternPositions[E.from.toString()];A&&R&&d.setConstantPatternPositions(A,R)}var M=c.constantOr(null),B=p.constantOr(null);if(!v&&M&&B&&a.lineAtlas){var P=a.lineAtlas,I=P.getDash(M.to,B),z=P.getDash(M.from,B);I&&z&&d.setConstantPatternPositions(I,z)}var L=r.paint.get("line-trim-offset"),D=h(L,2),O=D[0],N=D[1];if("round"===B||"square"===B){var F=1;O!==N&&(0===O&&(O-=F),1===N&&(N+=F))}var j=t.terrain?i.projMatrix:null,V=v?cr(t,a,r,y,j,u):ur(t,a,r,y,j,o.lineClipsArray.length,u,[O,N]);if(g){var Z=o.gradients[r.id],U=Z.texture;if(r.gradientVersion!==Z.version){var G=256;if(r.stepInterpolant){var H=n.getSource().maxzoom,q=i.canonical.z===H?Math.ceil(1<<t.transform.maxZoom-i.canonical.z):1;G=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*q),256,x.maxTextureSize)}Z.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:G,image:Z.gradient||void 0,clips:o.lineClipsArray}),Z.texture?Z.texture.update(Z.gradient):Z.texture=new e.Texture(x,Z.gradient,b.RGBA),Z.version=r.gradientVersion,U=Z.texture}x.activeTexture.set(b.TEXTURE1),U.bind(r.stepInterpolant?b.NEAREST:b.LINEAR,b.CLAMP_TO_EDGE)}f&&(x.activeTexture.set(b.TEXTURE0),a.lineAtlasTexture.bind(b.LINEAR,b.REPEAT),d.updatePaintBuffers(y)),v&&(x.activeTexture.set(b.TEXTURE0),a.imageAtlasTexture.bind(b.LINEAR,b.CLAMP_TO_EDGE),d.updatePaintBuffers(y)),t.prepareDrawProgram(x,S,i.toUnwrapped());var W=function(n){S.draw(x,b.TRIANGLES,s,n,l,e.CullFaceMode.disabled,V,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,t.transform.zoom,d,[o.layoutVertexBuffer2])};if(k){var X=t.stencilModeForClipping(i).ref;0===X&&t.terrain&&x.clear({stencil:0});var K={func:b.EQUAL,mask:255};V.u_alpha_discard_threshold=.8,W(new e.StencilMode(K,X,255,b.KEEP,b.KEEP,b.INVERT)),V.u_alpha_discard_threshold=0,W(new e.StencilMode(K,X,255,b.KEEP,b.KEEP,b.KEEP))}else W(t.stencilModeForClipping(i))};for(S.s();!(T=S.n()).done;)E()}catch(C){S.e(C)}finally{S.f()}k&&(t.resetStencilClippingMasks(),t.terrain&&x.clear({stencil:0}))}}},fill:function(t,n,r,i){var a=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===u){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);Br(t,n,r,i,c,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var h=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);Br(t,n,r,i,h,s,!0)}}},"fill-extrusion":function(t,n,r,i){var a=r.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){var o=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==a||r.paint.get("fill-extrusion-pattern").constantOr(1))Pr(t,n,r,i,o,e.StencilMode.disabled,e.ColorMode.disabled),Pr(t,n,r,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{var s=t.colorModeForRenderPass();Pr(t,n,r,i,o,e.StencilMode.disabled,s)}}},hillshade:function(t,n,r,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var a,o=t.context,s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),u=t.terrain&&t.terrain.renderingToTexture,c="translucent"!==t.renderPass||u?[{},i]:t.stencilConfigForOverlap(i),f=h(c,2),p=f[0],m=f[1],v=d(m);try{for(v.s();!(a=v.n()).done;){var g=a.value,y=n.getTile(g);if(y.needsHillshadePrepare&&"offscreen"===t.renderPass)In(t,y,r,s,e.StencilMode.disabled,l);else if("translucent"===t.renderPass){var _=u&&t.terrain?t.terrain.stencilModeForRTTOverlap(g):p[g.overscaledZ];Bn(t,g,y,r,s,_,l)}}}catch(x){v.e(x)}finally{v.f()}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()}},raster:function(t,n,r,i,a,o){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity")&&i.length){var s,l=t.context,u=l.gl,c=n.getSource(),f=t.useProgram("raster"),p=t.colorModeForRenderPass(),m=t.terrain&&t.terrain.renderingToTexture,v=c instanceof Ue||m?[{},i]:t.stencilConfigForOverlap(i),g=h(v,2),y=g[0],_=g[1],x=_[_.length-1].overscaledZ,b=!t.options.moving,w=d(_);try{for(w.s();!(s=w.n()).done;){var k=s.value,T=m?e.DepthMode.disabled:t.depthModeForSublayer(k.overscaledZ-x,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,u.LESS),S=k.toUnwrapped(),E=n.getTile(k);if(!m||E&&E.hasData()){var C=m?k.projMatrix:t.transform.calculateProjMatrix(S,b),A=t.terrain&&m?t.terrain.stencilModeForRTTOverlap(k):y[k.overscaledZ],R=o?0:r.paint.get("raster-fade-duration");E.registerFadeDuration(R);var M=n.findLoadedParent(k,0),B=Zn(E,M,n,t.transform,R),P=void 0,I=void 0;t.terrain&&t.terrain.prepareDrawTile();var z="nearest"===r.paint.get("raster-resampling")?u.NEAREST:u.LINEAR;l.activeTexture.set(u.TEXTURE0),E.texture.bind(z,u.CLAMP_TO_EDGE),l.activeTexture.set(u.TEXTURE1),M?(M.texture.bind(z,u.CLAMP_TO_EDGE),P=Math.pow(2,M.tileID.overscaledZ-E.tileID.overscaledZ),I=[E.tileID.canonical.x*P%1,E.tileID.canonical.y*P%1]):E.texture.bind(z,u.CLAMP_TO_EDGE);var L=pr(C,I||[0,0],P||1,B,r,c instanceof Ue?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(l,f,S),c instanceof Ue)c.boundsBuffer&&c.boundsSegments&&f.draw(l,u.TRIANGLES,T,e.StencilMode.disabled,p,e.CullFaceMode.disabled,L,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{var D=t.getTileBoundsBuffers(E),O=D.tileBoundsBuffer,N=D.tileBoundsIndexBuffer,F=D.tileBoundsSegments;f.draw(l,u.TRIANGLES,T,A,p,e.CullFaceMode.disabled,L,r.id,O,N,F)}}}}catch(j){w.e(j)}finally{w.f()}t.resetStencilClippingMasks()}},background:function(t,n,r,i){var a=r.paint.get("background-color"),o=r.paint.get("background-opacity");if(0!==o){var s=t.context,l=s.gl,u=t.transform,c=u.tileSize,h=r.paint.get("background-pattern");if(!t.isPatternMissing(h)){var f=!h&&1===a.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===f){var p,m=e.StencilMode.disabled,v=t.depthModeForSublayer(0,"opaque"===f?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),g=t.colorModeForRenderPass(),y=t.useProgram(h?"backgroundPattern":"background"),_=i;_||(p=t.getBackgroundTiles(),_=Object.values(p).map((function(e){return e.tileID}))),h&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));var x,b=r.getCrossfadeParameters(),w=d(_);try{for(w.s();!(x=w.n()).done;){var k=x.value,T=k.toUnwrapped(),S=i?k.projMatrix:t.transform.calculateProjMatrix(T);t.prepareDrawTile();var E=n?n.getTile(k):p?p[k.key]:new e.Tile(k,c,u.zoom,t),C=h?wr(S,o,t,h,{tileID:k,tileSize:c},b):br(S,o,a);t.prepareDrawProgram(s,y,T);var A=t.getTileBoundsBuffers(E),R=A.tileBoundsBuffer,M=A.tileBoundsIndexBuffer,B=A.tileBoundsSegments;y.draw(s,l.TRIANGLES,v,m,g,e.CullFaceMode.disabled,C,r.id,R,M,B)}}catch(P){w.e(P)}finally{w.f()}}}}},sky:function(t,n,r){var i=t.transform,a="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),o=r.paint.get("sky-opacity")*a;if(0!==o){var s=t.context,l=r.paint.get("sky-type"),u=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),c=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){var a=t.context,o=a.gl,s=n.skyboxFbo;if(!s){s=n.skyboxFbo=a.createFramebuffer(32,32,!1),n.skyboxGeometry=new Hr(a),n.skyboxTexture=a.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,n.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(var l=0;l<6;++l)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}a.bindFramebuffer.set(s.framebuffer),a.viewport.set([0,0,32,32]);var u=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),h=new Float64Array(16);e.identity(h),e.rotateY(h,h,.5*-Math.PI),qr(a,n,c,h,u,0),e.identity(h),e.rotateY(h,h,.5*Math.PI),qr(a,n,c,h,u,1),e.identity(h),e.rotateX(h,h,.5*-Math.PI),qr(a,n,c,h,u,2),e.identity(h),e.rotateX(h,h,.5*Math.PI),qr(a,n,c,h,u,3),e.identity(h),qr(a,n,c,h,u,4),e.identity(h),e.rotateY(h,h,Math.PI),qr(a,n,c,h,u,5),a.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,a){var o=t.context,s=o.gl,l=t.transform,u=t.useProgram("skybox");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);var c=function(e,t,n,r,i){return{u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}}(l.skyboxMatrix,n.getCenter(t,!1),0,i,a);t.prepareDrawProgram(o,u),u.draw(o,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,u,o,c):"gradient"===l&&"sky"===t.renderPass&&function(t,n,r,i,a){var o=t.context,s=o.gl,l=t.transform,u=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Hr(o)),o.activeTexture.set(s.TEXTURE0);var c=n.colorRampTexture;c||(c=n.colorRampTexture=new e.Texture(o,n.colorRamp,s.RGBA)),c.bind(s.LINEAR,s.CLAMP_TO_EDGE);var h=function(t,n,r,i,a){return{u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:a}}(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,a);t.prepareDrawProgram(o,u),u.draw(o,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,u,o,c)}},debug:function(e,t,n){for(var r=0;r<n.length;r++)Fr(e,t,n[r])},custom:function(t,n,r){var i=t.context,a=r.implementation;if(t.transform.projection.unsupportedLayers&&t.transform.projection.unsupportedLayers.includes("custom"))e.warnOnce("Custom layers are not yet supported with non-mercator projections. Use mercator to enable custom layers.");else if("offscreen"===t.renderPass){var o=a.prerender;o&&(t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),o.call(a,i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),i.setColorMode(t.colorModeForRenderPass()),i.setStencilMode(e.StencilMode.disabled);var s="3d"===a.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);i.setDepthMode(s),a.render(i.gl,t.transform.customLayerMatrix()),i.setDirty(),t.setBaseState(),i.bindFramebuffer.set(null)}}},Yr=function(){function t(n,r){v(this,t),this.context=new je(n),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ln,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}return g(t,[{key:"updateTerrain",value:function(e,t){var n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(n||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new qn(this,e));var r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}}},{key:"_updateFog",value:function(e){var t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)this.transform.fogCullDistSq=null;else{var n=t.getFovAdjustedRange(this.transform._fov),r=h(n,2),i=r[0],a=r[1];if(i>a)this.transform.fogCullDistSq=null;else{var o=i+.78*(a-i);this.transform.fogCullDistSq=o*o}}}},{key:"terrain",get:function(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}},{key:"resize",value:function(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var r,i=d(this.style.order);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.style._layers[a].resize()}}catch(o){i.e(o)}finally{i.f()}}}},{key:"setup",value:function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(o);for(var s=new e.StructArrayLayout1ui2,l=0,u=[0,1,3,2,0];l<u.length;l++){var c=u[l];s.emplaceBack(c)}this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();var h=this.context.gl;this.stencilClearMode=new e.StencilMode({func:h.ALWAYS,mask:0},0,255,h.ZERO,h.ZERO,h.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Xr(this.context)}},{key:"getMercatorTileBoundsBuffers",value:function(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}},{key:"getTileBoundsBuffers",value:function(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}},{key:"clearStencil",value:function(){var t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Vn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"resetStencilClippingMasks",value:function(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}},{key:"_renderTileClippingMasks",value:function(t,n,r){if(n&&this.currentStencilSource!==n.id&&t.isTileClipped()&&r&&0!==r.length){if(this._tileClippingMaskIDs&&!this.terrain){var i,a=!1,o=d(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(void 0===this._tileClippingMaskIDs[s.key]){a=!0;break}}}catch(b){o.e(b)}finally{o.f()}if(!a)return}this.currentStencilSource=n.id;var l=this.context,u=l.gl;this.nextStencilID+r.length>256&&this.clearStencil(),l.setColorMode(e.ColorMode.disabled),l.setDepthMode(e.DepthMode.disabled);var c=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var h,f=d(r);try{for(f.s();!(h=f.n()).done;){var p=h.value,m=n.getTile(p),v=this._tileClippingMaskIDs[p.key]=this.nextStencilID++,g=this.getTileBoundsBuffers(m),y=g.tileBoundsBuffer,_=g.tileBoundsIndexBuffer,x=g.tileBoundsSegments;c.draw(l,u.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:u.ALWAYS,mask:0},v,255,u.KEEP,u.KEEP,u.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Vn(p.projMatrix),"$clipping",y,_,x)}}catch(b){f.e(b)}finally{f.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilModeForClipping",value:function(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);var n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilConfigForOverlap",value:function(t){var n=this.context.gl,i=t.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),a=i[i.length-1].overscaledZ,o=i[0].overscaledZ-a+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var s={},l=0;l<o;l++)s[l+a]=new e.StencilMode({func:n.GEQUAL,mask:255},l+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[s,i]}return[r({},a,e.StencilMode.disabled),i]}},{key:"colorModeForRenderPass",value:function(){var t=this.context.gl;if(this._showOverdrawInspector){var n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}},{key:"depthModeForSublayer",value:function(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(t,n){var r=this;this.style=t,this.options=n,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();var i=this.style.order,a=this.style._sourceCaches;for(var o in a){var s=a[o];s.used&&s.prepare(this.context)}var l={},u={},c={};for(var h in a){var f=a[h];l[h]=f.getVisibleCoordinates(),u[h]=l[h].slice().reverse(),c[h]=f.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var p=0;p<i.length;p++)if(this.style._layers[i[p]].is3D()){this.opaquePassCutoff=p;break}if(this.terrain&&(this.terrain.updateTileBinding(c),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),e.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";var m,v=d(i);try{for(v.s();!(m=v.n()).done;){var g=m.value,y=this.style._layers[g],_=t._getLayerSourceCache(y);if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var x=_?u[_.id]:void 0;("custom"===y.type||y.isSky()||x&&x.length)&&this.renderLayer(this,_,y,x)}}}catch(M){v.e(M)}finally{v.f()}if(this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var b=this.style._layers[i[this.currentLayer]],w=t._getLayerSourceCache(b);if(!b.isSky()){var k=w?u[w.id]:void 0;this._renderTileClippingMasks(b,w,k),this.renderLayer(this,w,b,k)}}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,n){var r=t.context,i=r.gl,a=t.transform,o=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===a.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(a.zoom),u=n.properties.get("color").toArray01(),c=n.properties.get("high-color").toArray01(),h=n.properties.get("space-color").toArray01PremultipliedAlpha(),d=e.identity$1([]);e.rotateY$1(d,d,-e.degToRad(a._center.lng)),e.rotateX$1(d,d,e.degToRad(a._center.lat)),e.rotateZ$1(d,d,a.angle),e.rotateX$1(d,d,-a._pitch);var f=e.fromQuat(new Float32Array(16),d),p=e.mapValue(n.properties.get("star-intensity"),0,1,0,.25),m=5e-4,v=e.mapValue(n.properties.get("horizon-blend"),0,1,m,.25),g=e.globeUseCustomAntiAliasing(t,r,a)&&v===m?a.worldSize/(2*Math.PI*1.025)-1:a.globeRadius,y=t.frameCounter/1e3%1,_=e.length(a.globeCenterInViewSpace),x=Math.sqrt(Math.pow(_,2)-Math.pow(g,2)),b=Math.acos(x/_),w=function(t,n,r,i,a,o,s,l,u,c,h,d,f,p){return{u_frustum_tl:t,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:a,u_transition:o,u_fadeout_range:s,u_color:l,u_high_color:u,u_space_color:c,u_star_intensity:h,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:d,u_horizon_angle:f,u_rotation_matrix:p}}(a.frustumCorners.TL,a.frustumCorners.TR,a.frustumCorners.BR,a.frustumCorners.BL,a.frustumCorners.horizon,l,v,u,c,h,p,y,b,f);t.prepareDrawProgram(r,s);var k=t.atmosphereBuffer;k&&s.draw(r,i.TRIANGLES,o,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,w,"skybox",k.vertexBuffer,k.indexBuffer,k.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var T=this.style._layers[i[this.currentLayer]],S=t._getLayerSourceCache(T);T.isSky()&&this.renderLayer(this,S,T,S?u[S.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){var E=this.style._layers[i[this.currentLayer]],C=t._getLayerSourceCache(E);if(E.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(E)){if(E.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer)}else{var A=C?("symbol"===E.type?c:u)[C.id]:void 0;this._renderTileClippingMasks(E,C,C?l[C.id]:void 0),this.renderLayer(this,C,E,A),++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry){var R=null;e.values(this.style._layers).forEach((function(e){var n=t._getLayerSourceCache(e);n&&!e.isHidden(r.transform.zoom)&&(!R||R.getSource().maxzoom<n.getSource().maxzoom)&&(R=n)})),R&&this.options.showTileBoundaries&&Kr.debug(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(e){var t=e.transform.padding;jr(e,e.transform.height-(t.top||0),3,zr),jr(e,t.bottom||0,3,Lr),Vr(e,t.left||0,3,Dr),Vr(e,e.transform.width-(t.right||0),3,Or);var n=e.transform.centerPoint;!function(e,t,n,r){Zr(e,t-1,n-10,2,20,r),Zr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,Nr)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}}},{key:"renderLayer",value:function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes(n.type)||Kr[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}}},{key:"gpuTimingDeferredRenderStart",value:function(){if(this.options.gpuTimingDeferredRender){var e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}},{key:"gpuTimingDeferredRenderEnd",value:function(){if(this.options.gpuTimingDeferredRender){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"collectDeferredRenderGpuQueries",value:function(){var e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}},{key:"queryGpuTimers",value:function(e){var t={};for(var n in e){var r=e[n],i=this.context.extTimerQuery,a=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=a}return t}},{key:"queryGpuTimeDeferredRender",value:function(e){if(!this.options.gpuTimingDeferredRender)return 0;var t,n=this.context.extTimerQuery,r=0,i=d(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r+=n.getQueryObjectEXT(a,n.QUERY_RESULT_EXT)/1e6,n.deleteQueryEXT(a)}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"translatePosMatrix",value:function(t,n,r,i,a){if(!r[0]&&!r[1])return t;var o=a?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);r=[r[0]*l-r[1]*s,r[0]*s+r[1]*l]}var u=[a?r[0]:q(n,r[0],this.transform.zoom),a?r[1]:q(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,u),c}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){if(!e)return!1;if(!e.from||!e.to)return!0;var t=this.imageManager.getPattern(e.from.toString()),n=this.imageManager.getPattern(e.to.toString());return!t||!n}},{key:"currentGlobalDefines",value:function(){var e=this.terrain&&this.terrain.renderingToTexture,t=this.style&&this.style.fog,n=[];return this.terrain&&!this.terrain.renderingToTexture&&n.push("TERRAIN"),t&&!e&&0!==t.getOpacity(this.transform.pitch)&&n.push("FOG"),e&&n.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&n.push("OVERDRAW_INSPECTOR"),n}},{key:"useProgram",value:function(e,t,n){this.cache=this.cache||{};var r=n||[],i=this.currentGlobalDefines().concat(r),a=Wn.cacheKey(En[e],e,i,t);return this.cache[a]||(this.cache[a]=new Wn(this.context,e,En[e],t,kr[e],i)),this.cache[a]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}},{key:"prepareDrawTile",value:function(){this.terrain&&this.terrain.prepareDrawTile()}},{key:"prepareDrawProgram",value:function(t,n,r){if(!this.terrain||!this.terrain.renderingToTexture){var i=this.style.fog;if(i){var a=i.getOpacity(this.transform.pitch),o=function(t,n,r,i,a,o,s,l,u,c,h){var d=t.transform,f=n.properties.get("color").toArray01();f[3]=i;var p=t.frameCounter/1e3%1;return{u_fog_matrix:r?d.calculateFogTileMatrix(r):t.identityMat,u_fog_range:n.getFovAdjustedRange(d._fov),u_fog_color:f,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:p,u_frustum_tl:a,u_frustum_tr:o,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:u,u_globe_radius:c,u_viewport:h,u_globe_transition:e.globeToMercatorTransition(d.zoom),u_is_globe:+("globe"===d.projection.name)}}(this,i,r,a,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);n.setFogUniformValues(t,o)}}}},{key:"setTileLoadedFlag",value:function(e){this.tileLoaded=e}},{key:"saveCanvasCopy",value:function(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}},{key:"canvasCopy",value:function(){var e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}},{key:"averageElevationNeedsEasing",value:function(){if(!this.transform._elevation)return!1;var e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}},{key:"getBackgroundTiles",value:function(){var t,n=this._backgroundTiles,r=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512}),a=d(i);try{for(a.s();!(t=a.n()).done;){var o=t.value;r[o.key]=n[o.key]||new e.Tile(o,512,this.transform.tileZoom,this)}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"clearBackgroundTiles",value:function(){this._backgroundTiles={}}}]),t}(),Jr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(v(this,t),isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=r,this.right=i}return g(t,[{key:"interpolate",value:function(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}},{key:"getCenter",value:function(t,n){var r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.pointGeometry(r,i)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}();function Qr(t,n){var r=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,r)}function $r(t,n){var r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function ei(t,n){var r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){var a=e.normalize([],r);e.scale$2(i,a,e.dot(i,a)),n[0]=i[0],n[1]=i[1]}var o=e.cross([],n,t);if(e.len(o)<1e-15)return null;var s=Math.atan2(-o[1],o[0]);return $r(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),s)}var ti=function(){function t(e,n){v(this,t),this.position=e,this.orientation=n}return g(t,[{key:"position",get:function(){return this._position},set:function(t){if(t){var n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}},{key:"lookAtPoint",value:function(t,n){if(this.orientation=null,this.position){var r=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,i=this.position,a=e.MercatorCoordinate.fromLngLat(t,r),o=[a.x-i.x,a.y-i.y,a.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=ei(o,n)}}},{key:"setPitchBearing",value:function(t,n){this.orientation=$r(e.degToRad(t),e.degToRad(-n))}}]),t}(),ni=function(){function t(n,r){v(this,t),this._transform=e.identity([]),this.orientation=r,this.position=n}return g(t,[{key:"mercatorPosition",get:function(){var t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}},{key:"position",get:function(){var t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]},set:function(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}},{key:"orientation",get:function(){return this._orientation},set:function(t){this._orientation=t||e.identity$1([]),t&&Qr(this._transform,this._orientation)}},{key:"getPitchBearing",value:function(){var e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}},{key:"setPitchBearing",value:function(e,t){this._orientation=$r(e,t),Qr(this._transform,this._orientation)}},{key:"forward",value:function(){var t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}},{key:"up",value:function(){var t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}},{key:"right",value:function(){var t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}},{key:"getCameraToWorld",value:function(t,n){var r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}},{key:"getWorldToCameraPosition",value:function(t,n,r){var i=this.position;e.scale$2(i,i,-t);var a=new Float64Array(16);return e.fromScaling(a,[r,r,r]),e.translate(a,a,i),a[10]*=n,a}},{key:"getWorldToCamera",value:function(t,n){var r=new Float64Array(16),i=new Float64Array(4),a=this.position;return e.conjugate(i,this._orientation),e.scale$2(a,a,-t),e.fromQuat(r,i),e.translate(r,r,a),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}},{key:"getCameraToClipPerspective",value:function(t,n,r,i){var a=new Float64Array(16);return e.perspective(a,t,n,r,i),a}},{key:"getDistanceToElevation",value:function(t){var n=0===t?0:e.mercatorZfromAltitude(t,this.position[1]),r=this.forward();return(n-this.position[2])/r[2]}},{key:"clone",value:function(){return new t(c(this.position),c(this.orientation))}}]),t}();function ri(t,n){var r=ai(t.projection,t.zoom,t.width,t.height),i=function(t,n,r,i,a){var o=new e.LngLat(r.lng-180*oi,r.lat),s=new e.LngLat(r.lng+180*oi,r.lat),l=t.project(o.lng,o.lat),u=t.project(s.lng,s.lat),c=-Math.atan2(u.y-l.y,u.x-l.x),h=e.MercatorCoordinate.fromLngLat(r);h.y=e.clamp(h.y,-.999975,.999975);var d=h.toLngLat(),f=t.project(d.lng,d.lat),p=e.MercatorCoordinate.fromLngLat(d);p.x+=oi;var m=p.toLngLat(),v=t.project(m.lng,m.lat),g=li(v.x-f.x,v.y-f.y,c),y=e.MercatorCoordinate.fromLngLat(d);y.y+=oi;var _=y.toLngLat(),x=t.project(_.lng,_.lat),b=li(x.x-f.x,x.y-f.y,c),w=Math.abs(g.x)/Math.abs(b.y),k=e.identity([]);e.rotateZ(k,k,-c*(1-(a?0:i)));var T=e.identity([]);return e.scale(T,T,[1,1-(1-w)*i,1]),T[4]=-b.x/b.y*i,e.rotateZ(T,T,c),e.multiply(T,k,T),T}(t.projection,0,t.center,r,n),a=ii(t);return e.scale(i,i,[a,a,1]),i}function ii(t){var n=t.projection,r=ai(t.projection,t.zoom,t.width,t.height),i=si(n,t.center),a=si(n,e.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*a)}function ai(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=t.range;if(!o)return 0;var s=Math.min(a,Math.max(r,i)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(o[0]+l,o[1]+l,n)}var oi=1/4e4;function si(t,n){var r=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(n.lng-180*oi,r),a=new e.LngLat(n.lng+180*oi,r),o=t.project(i.lng,r),s=t.project(a.lng,r),l=e.MercatorCoordinate.fromLngLat(i),u=e.MercatorCoordinate.fromLngLat(a),c=s.x-o.x,h=s.y-o.y,d=u.x-l.x,f=u.y-l.y,p=Math.sqrt((d*d+f*f)/(c*c+h*h));return Math.log(p)/Math.LN2}function li(e,t,n){var r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}var ui=function(){function n(t,r,i,a,o,s,l){v(this,n),this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==a?60:a,this.setProjection(s),this.setMaxBounds(l),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Jr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new ni,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}return g(n,[{key:"clone",value:function(){var e=new n(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}},{key:"elevation",get:function(){return this._elevation},set:function(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}},{key:"updateElevation",value:function(e){var t=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||t)&&this._updateCameraOnTerrain(),(e||t)&&this._constrainCameraAltitude(),this._calcMatrices()}},{key:"getProjection",value:function(){return e.pick(this.projection,["name","center","parallels"])}},{key:"setProjection",value:function(n){this.projectionOptions=n||{name:"mercator"};var r=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);var i=!t(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}},{key:"setMercatorFromTransition",value:function(){var t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});var n=t!==this.projection.name;return n&&this._calcMatrices(),n}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"cameraWorldSize",get:function(){var e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}},{key:"pixelsPerMeter",get:function(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}},{key:"cameraPixelsPerMeter",get:function(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSize)}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new e.pointGeometry(this.width,this.height)}},{key:"bearing",get:function(){return e.wrap(this.rotation,-180,180)},set:function(e){this.rotation=e}},{key:"rotation",get:function(){return-this.angle/Math.PI*180},set:function(t){var n,r=-t*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(n=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=r*-s+a*l,e[3]=i*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}},{key:"averageElevation",get:function(){return this._averageElevation},set:function(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}},{key:"_setZoom",value:function(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"_updateCameraOnTerrain",value:function(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);var e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}},{key:"_updateSeaLevelZoom",value:function(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}},{key:"sampleAverageElevation",value:function(){if(!this._elevation)return 0;for(var t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop(),i=0,a=0,o=0;o<n.length;o++){var s=new e.pointGeometry(n[o][0]*this.width,r+n[o][1]*(this.height-r)),l=t.pointCoordinate(s);if(l){var u=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*u,a+=u}}return 0===a?NaN:i/a}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._seaLevelZoom&&this._elevation){var e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),a=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(a))}}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"computeZoomRelativeTo",value:function(t){var n,r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));n=t.z<this._camera.position[2]?[r.x,r.y,r.z]:[t.x,t.y,t.z];var i=e.length(e.sub([],this._camera.position,n));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(t){if(this.height&&(t.position||t.orientation)){this._updateCameraState();var n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){var r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var t=this._camera.position,n=new ti;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}},{key:"_setCameraOrientation",value:function(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);var n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;var i=ei(n,r);return!!i&&(this._camera.orientation=i,!0)}},{key:"_setCameraPosition",value:function(t){var n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(t){var n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies)for(var r=this.pointCoordinate(new e.pointGeometry(0,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,0)),a=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),o=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,a.x,o.x)),l=Math.floor(Math.max(r.x,i.x,a.x,o.x)),u=1,c=s-u;c<=l+u;c++)0!==c&&n.push(new e.UnwrappedTileID(c,t));return n}},{key:"coveringTiles",value:function(t){var n=this,r=this.coveringZoomLevel(t),i=r,a=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);var s=this.locationCoordinate(this.center),l=this.center.lat,u=1<<r,c=[u*s.x,u*s.y,0],h="globe"===this.projection.name,d=!h,f=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,d),p=h?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),m=u*e.mercatorZfromAltitude(1,this.center.lat),v=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[u*p.x,u*p.y,v*(d?1:m)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),_=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?r:0,x=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,b=t.isTerrainDEM?-x:this._elevation?this._elevation.getMinElevationBelowMSL():0,w=this.projection.isReprojectedInTileSpace?ii(this):1,k=function(t){var r=1/4e4,i=new e.MercatorCoordinate(t.x+r,t.y,t.z),a=new e.MercatorCoordinate(t.x,t.y+r,t.z),o=t.toLngLat(),s=i.toLngLat(),l=a.toLngLat(),u=n.locationCoordinate(o),c=n.locationCoordinate(s),h=n.locationCoordinate(l),d=Math.hypot(c.x-u.x,c.y-u.y),f=Math.hypot(h.x-u.x,h.y-u.y);return Math.sqrt(d*f)*w/r},T=function(t){var r=x,i=b;return{aabb:e.tileAABB(n,u,0,0,0,t,i,r,n.projection),zoom:0,x:0,y:0,minZ:i,maxZ:r,wrap:t,fullyVisible:!1}},S=[],E=[],C=r,A=t.reparseOverscaled?i:r,R=function(e){return e*e},M=R((v-this._centerAltitude)*m),B=function(e){if(n._elevation&&e.tileID&&o){var t=n._elevation.getMinMaxForTile(e.tileID),r=e.aabb;t?(r.min[2]=t.min,r.max[2]=t.max,r.center[2]=(r.min[2]+r.max[2])/2):(e.shouldSplit=P(e),e.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=n._centerAltitude))}},P=function(t){if(t.zoom<_)return!0;if(t.zoom===C)return!1;if(null!=t.shouldSplit)return t.shouldSplit;var r=t.aabb.distanceX(g),o=t.aabb.distanceY(g),s=M,u=1;if(h){s=R(t.aabb.distanceZ(g));var c=Math.pow(2,t.zoom),d=e.latFromMercatorY((t.y+1)/c),f=e.latFromMercatorY(t.y/c),p=Math.min(Math.max(l,d),f),v=e.circumferenceAtLatitude(p)/e.circumferenceAtLatitude(l);if(u=p===l?1/Math.max(1,n._mercatorScaleRatio-.3):Math.min(1,v/n._mercatorScaleRatio),n.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===C-1&&v>=.9)return!0}else if(a&&(s=R(t.aabb.distanceZ(g)*m)),n.projection.isReprojectedInTileSpace&&i<=5){var x=Math.pow(2,t.zoom),b=k(new e.MercatorCoordinate((t.x+.5)/x,(t.y+.5)/x));u=b>.85?1:b}var w=r*r+o*o+s;return w<R((1<<C-t.zoom)*y*u*function(e,t){if(t*R(.707)<e)return 1;var n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)}(Math.max(s,M),w))};if(this.renderWorldCopies)for(var I=1;I<=3;I++)S.push(T(-I)),S.push(T(I));for(S.push(T(0));S.length>0;){var z=S.pop(),L=z.x,D=z.y,O=z.fullyVisible;if(!O){var N=z.aabb.intersects(f);if(0===N)continue;O=2===N}if(z.zoom!==C&&P(z))for(var F=0;F<4;F++){var j=(L<<1)+F%2,V=(D<<1)+(F>>1),Z={aabb:o?z.aabb.quadrant(F):e.tileAABB(this,u,z.zoom+1,j,V,z.wrap,z.minZ,z.maxZ,this.projection),zoom:z.zoom+1,x:j,y:V,wrap:z.wrap,fullyVisible:O,tileID:void 0,shouldSplit:void 0,minZ:z.minZ,maxZ:z.maxZ};a&&!h&&(Z.tileID=new e.OverscaledTileID(z.zoom+1===C?A:z.zoom+1,z.wrap,z.zoom+1,j,V),B(Z)),S.push(Z)}else{var U=z.zoom===C?A:z.zoom;if(t.minzoom&&t.minzoom>U)continue;var G=c[0]-(.5+L+(z.wrap<<z.zoom))*(1<<r-z.zoom),H=c[1]-.5-D,q=z.tileID?z.tileID:new e.OverscaledTileID(U,z.wrap,z.zoom,L,D);E.push({tileID:q,distanceSq:G*G+H*H})}}if(this.fogCullDistSq){var W=this.fogCullDistSq,X=this.horizonLineFromTop();E=E.filter((function(r){var i=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],o=n.calculateFogTileMatrix(r.tileID.toUnwrapped());e.transformMat4$1(i,i,o),e.transformMat4$1(a,a,o);var s=e.getAABBPointSquareDist(i,a);if(0===s)return!0;var l=!1,u=n._elevation;if(u&&s>W&&0!==X){var c,h=n.calculateProjMatrix(r.tileID.toUnwrapped());t.isTerrainDEM||(c=u.getMinMaxForTile(r.tileID)),c||(c={min:b,max:x});var d=e.furthestTileCorner(n.rotation),f=[d[0]*e.EXTENT,d[1]*e.EXTENT,c.max];e.transformMat4(f,f,h),l=(1-f[1])*n.height*.5<X}return s<W||l}))}return E.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(t){var n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=this.projection.project(t.lng,n);return new e.pointGeometry(r.x*this.worldSize,r.y*this.worldSize)}},{key:"unproject",value:function(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}},{key:"point",get:function(){return this.project(this.center)}},{key:"setLocationAtPoint",value:function(t,n){var r,i,a=this.centerPoint;if("globe"===this.projection.name){var o=this.worldSize;r=(n.x-a.x)/o,i=(n.y-a.y)/o}else{var s=this.pointCoordinate(n),l=this.pointCoordinate(a);r=s.x-l.x,i=s.y-l.y}var u=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(u.x-r,u.y-i))}},{key:"setLocation",value:function(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e){return this.projection.locationPoint(this,e)}},{key:"locationPoint3D",value:function(e){return this.projection.locationPoint(this,e,!0)}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"pointLocation3D",value:function(e){return this.coordinateLocation(this.pointCoordinate3D(e))}},{key:"locationCoordinate",value:function(t,n){var r=n?e.mercatorZfromAltitude(n,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,r)}},{key:"coordinateLocation",value:function(e){return this.projection.unproject(e.x,e.y)}},{key:"pointRayIntersection",value:function(t,n){var r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],a=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(a,a,this.pixelMatrixInverse);var o=a[3];e.scale$1(i,i,1/i[3]),e.scale$1(a,a,1/o);var s=i[2],l=a[2];return{p0:i,p1:a,t:s===l?0:(r-s)/(l-s)}}},{key:"screenPointToMercatorRay",value:function(t){var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}},{key:"rayIntersectionCoordinate",value:function(t){var n=t.p0,r=t.p1,i=t.t,a=e.mercatorZfromAltitude(n[2],this._center.lat),o=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(a,o,i))}},{key:"pointCoordinate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,e.x,e.y,t)}},{key:"pointCoordinate3D",value:function(t){if(!this.elevation)return this.pointCoordinate(t);var n=this.projection.pointCoordinate3D(this,t.x,t.y);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);var r=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);for(var a=.02*i,o=t.clone(),s=0;s<10&&i-r>a;s++){o.y=e.number(r,i,.66);var l=this.projection.pointCoordinate3D(this,o.x,o.y);l?(i=o.y,n=l):r=o.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}},{key:"isPointAboveHorizon",value:function(e){return this.projection.isPointAboveHorizon(this,e)}},{key:"_coordinatePoint",value:function(t,n){var r=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.pointGeometry(i[0]/i[3],i[1]/i[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"_getBounds",value:function(t,n){var r=new e.pointGeometry(this._edgeInsets.left,this._edgeInsets.top),i=new e.pointGeometry(this.width-this._edgeInsets.right,this._edgeInsets.top),a=new e.pointGeometry(this.width-this._edgeInsets.right,this.height-this._edgeInsets.bottom),o=new e.pointGeometry(this._edgeInsets.left,this.height-this._edgeInsets.bottom),s=this.pointCoordinate(r,t),l=this.pointCoordinate(i,t),u=this.pointCoordinate(a,n),c=this.pointCoordinate(o,n),h=function(e,t){return(t.y-e.y)/(t.x-e.x)};return s.y>1&&l.y>=0?s=new e.MercatorCoordinate((1-c.y)/h(c,s)+c.x,1):s.y<0&&l.y<=1&&(s=new e.MercatorCoordinate(-c.y/h(c,s)+c.x,0)),l.y>1&&s.y>=0?l=new e.MercatorCoordinate((1-u.y)/h(u,l)+u.x,1):l.y<0&&s.y<=1&&(l=new e.MercatorCoordinate(-u.y/h(u,l)+u.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(s)).extend(this.coordinateLocation(l)).extend(this.coordinateLocation(c)).extend(this.coordinateLocation(u))}},{key:"_getBounds3D",value:function(){var e=this.elevation;if(!e.visibleDemTiles.length)return this._getBounds(0,0);var t=e.visibleDemTiles.reduce((function(e,t){if(t.dem){var n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBounds(t.min*e.exaggeration(),t.max*e.exaggeration())}},{key:"getBounds",value:function(){return this._terrainEnabled()?this._getBounds3D():this._getBounds(0,0)}},{key:"horizonLineFromTop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}},{key:"getMaxBounds",value:function(){return this.maxBounds}},{key:"setMaxBounds",value:function(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}},{key:"calculatePosMatrix",value:function(e,t){return this.projection.createTileMatrix(this,t,e)}},{key:"calculateDistanceTileData",value:function(t){var n=t.key,r=this._distanceTileDataCache;if(r[n])return r[n];var i=t.canonical,a=1/this.height,o=this.cameraWorldSize/this.zoomScale(i.z),s=(i.x+Math.pow(2,i.z)*t.wrap)*o,l=i.y*o,u=this.point,c=this.angle,h=Math.sin(-c),d=-Math.cos(-c);return r[n]={bearing:[h,d],center:[(u.x-s)*a,(u.y-l)*a],scale:o/e.EXTENT*a},r[n]}},{key:"calculateFogTileMatrix",value:function(t){var n=t.key,r=this._fogTileMatrixCache;if(r[n])return r[n];var i=this.projection.createTileMatrix(this,this.cameraWorldSize,t);return e.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}},{key:"calculateProjMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];var a=this.calculatePosMatrix(t,this.worldSize);return e.multiply(a,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,a),i[r]=new Float32Array(a),i[r]}},{key:"calculatePixelsToTileUnitsMatrix",value:function(t){var n=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];var i=function(t,n){var r,i,a,o,s,l,u,c,h=t.tileTransform.scale*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return r=new Float32Array(4),o=(i=n.inverseAdjustmentMatrix)[1],s=i[2],l=i[3],c=(a=[h,h])[1],r[0]=i[0]*(u=a[0]),r[1]=o*u,r[2]=s*c,r[3]=l*c,r}(t,this);return r[n]=i,r[n]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"recenterOnTerrain",value:function(){if(this._elevation&&"globe"!==this.projection.name){var t=this._elevation;this._updateCameraState();var n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),a=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=a,i[2]/=a,e.normalize(i,i);var o=t.raycast(r,i,t.exaggeration());if(o){var s=e.scaleAndAdd([],r,i,o),l=new e.MercatorCoordinate(s[0],s[1],e.mercatorZfromAltitude(s[2],e.latFromMercatorY(s[1]))),u=(l.z+e.length([l.x-r[0],l.y-r[1],l.z-r[2]*a]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(u),this._centerAltitude=l.toAltitude(),this._center=this.coordinateLocation(l),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}},{key:"_constrainCameraAltitude",value:function(){if(this._elevation){var t=this._elevation;this._updateCameraState();var n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=t.getAtPointOrZero(a(e.MercatorCoordinate,c(r))),o=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),s=this._camera.position[2]-this.pixelsPerMeter/this.worldSize*i;if(s<o){var l=this.locationCoordinate(this._center,this._centerAltitude),u=[l.x-r[0],l.y-r[1],l.z-r[2]],h=e.length(u);u[2]-=(o-s)/this._pixelsPerMercatorPixel;var d=e.length(u);if(0===d)return;e.scale$2(u,u,h/d*this._pixelsPerMercatorPixel),this._camera.position=[l.x-u[0],l.y-u[1],l.z*this._pixelsPerMercatorPixel-u[2]],this._camera.orientation=ei(u,this._camera.up()),this._updateStateFromCamera()}}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){var n=this.center;return n.lat=e.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(n.lng=e.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}var r=this._unmodified,i=this.point,a=i.x,o=i.y,s=0,l=a,u=o,c=this.width/2,h=this.height/2,d=this.worldMinY*this.scale,f=this.worldMaxY*this.scale;if(o-h<d&&(u=d+h),o+h>f&&(u=f-h),f-d<this.height&&(s=Math.max(s,this.height/(f-d)),u=(f+d)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){var p=this.worldMinX*this.scale,m=this.worldMaxX*this.scale,v=this.worldSize/2-(p+m)/2;(l=(a+v+this.worldSize)%this.worldSize-v)-c<p&&(l=p+c),l+c>m&&(l=m-c),m-p<this.width&&(s=Math.max(s,this.width/(m-p)),l=(m+p)/2)}l===a&&u===o||(this.center=this.unproject(new e.pointGeometry(l,u))),s&&(this.zoom+=this.scaleZoom(s)),this._constrainCameraAltitude(),this._unmodified=r,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var t=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));var r=ai(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;var i=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?n:1),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-t.x/this.width,a[9]=2*t.y/this.height;var o=e.mul([],a,i);if(this.projection.isReprojectedInTileSpace){var s=this.locationCoordinate(this.center),l=e.identity([]);e.translate(l,l,[s.x*this.worldSize,s.y*this.worldSize,0]),e.multiply(l,l,ri(this)),e.translate(l,l,[-s.x*this.worldSize,-s.y*this.worldSize,0]),e.multiply(o,o,l),this.inverseAdjustmentMatrix=function(e){var t=ri(e,!0);return B([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],o,[this.worldSize,this.worldSize,this.worldSize/n,1]),this.projMatrix=o,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);var u=e.invert([],a);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(u,this.horizonLineFromTop(),this.height);var c=new Float32Array(16);e.identity(c),e.scale(c,c,[1,-1,1]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle);var h=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),d=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;h[8]=2*-t.x/this.width,h[9]=2*(t.y+d)/this.height,this.skyboxMatrix=e.multiply(c,h,c);var f=this.point,p=f.x,m=f.y,v=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),_=Math.sin(this.angle),x=p-Math.round(p)+y*v+_*g,b=m-Math.round(m)+y*g+_*v,w=new Float64Array(o);if(e.translate(w,w,[x>.5?x-1:x,b>.5?b-1:b,0]),this.alignedProjMatrix=w,o=e.create(),e.scale(o,o,[this.width/2,-this.height/2,1]),e.translate(o,o,[1,-1,0]),this.labelPlaneMatrix=o,o=e.create(),e.scale(o,o,[1,-1,1]),e.translate(o,o,[-1,-1,0]),e.scale(o,o,[2/this.width,2/this.height,1]),this.glCoordMatrix=o,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},!(o=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=o,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);var k=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(k,k,i),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=o;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}}},{key:"_calcFogMatrices",value:function(){this._fogTileMatrixCache={};var t=this.cameraWorldSize,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,a=[t,t,n];e.scale$2(a,a,i),e.scale$2(r,r,-1),e.multiply$2(r,r,a);var o=e.create();e.translate(o,o,r),e.scale(o,o,a),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,i)}},{key:"_computeCameraPosition",value:function(e){var t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,e/this.worldSize*this._centerAltitude-n[2]*i]}},{key:"_updateCameraState",value:function(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}},{key:"_translateCameraConstrained",value:function(t){var n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=t[2],i=1;r>0&&(i=Math.min((n-this._camera.position[2])/r,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,i),this._updateStateFromCamera(),this.projection.wrap&&(this.center=this.center.wrap())}},{key:"_updateStateFromCamera",value:function(){var t=this._camera.position,n=this._camera.forward(),r=this._camera.getPitchBearing(),i=r.pitch,a=r.bearing,o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),l=Math.max((t[2]-o)/Math.cos(i),s),u=this._zoomFromMercatorZ(l);e.scaleAndAdd(t,t,n,l),this._pitch=e.clamp(i,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(a,-Math.PI,Math.PI),this._setZoom(e.clamp(u,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(e){return Math.pow(2,e)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}},{key:"_minimumHeightOverTerrain",value:function(){var e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}},{key:"_zoomFromMercatorZ",value:function(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}},{key:"_terrainEnabled",value:function(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}},{key:"anyCornerOffEdge",value:function(t,n){var r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),a=Math.min(t.y,n.y),o=Math.max(t.y,n.y);if(a<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;for(var s=[new e.pointGeometry(r,a),new e.pointGeometry(i,o),new e.pointGeometry(r,o),new e.pointGeometry(i,a)],l=this.renderWorldCopies?-3:0,u=this.renderWorldCopies?4:1,c=0,h=s;c<h.length;c++){var d=h[c],f=this.pointRayIntersection(d);if(f.t<0)return!0;var p=this.rayIntersectionCoordinate(f);if(p.x<l||p.y<0||p.x>u||p.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(t,n){var r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}},{key:"getCameraPoint",value:function(){if("globe"===this.projection.name){var t=function(t,n){var r=[t[0],t[1],t[2],1];e.transformMat4$1(r,r,n);var i=Math.max(r[3],1e-6);return[r[0]/i,r[1]/i,r[2]/i,i]}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.pointGeometry(t[0],t[1])}var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,n))}},{key:"getCameraToCenterDistance",value:function(e){var t=ai(e,this.zoom,this.width,this.height,1024),n=e.pixelSpaceConversion(this.center.lat,this.worldSize,t);return.5/Math.tan(.5*this._fov)*this.height*n}}]),n}();function ci(e,t){var n=!1,r=null,i=function i(){r=null,n&&(e(),r=setTimeout(i,t),n=!1)};return function(){return n=!0,r||i(),r}}var hi=function(){function t(n){v(this,t),this._hashName=n&&encodeURIComponent(n),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ci(this._updateHashUnthrottled.bind(this),300)}return g(t,[{key:"addTo",value:function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}},{key:"getHashString",value:function(){var t=this._map;if(!t)return"";var n=di(t);if(this._hashName){var r=this._hashName,i=!1,a=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===r?(i=!0,"".concat(t,"=").concat(n)):e})).filter((function(e){return e}));return i||a.push("".concat(r,"=").concat(n)),"#".concat(a.join("&"))}return"#".concat(n)}},{key:"_getCurrentHash",value:function(){var t,n=this,r=e.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===n._hashName&&(t=e)})),(t&&t[1]||"").split("/")):r.split("/")}},{key:"_onHashChange",value:function(){var e=this._map;if(!e)return!1;var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(e){return isNaN(e)}))){var n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}]),t}();function di(e,t){var n=e.getCenter(),r=Math.round(100*e.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,i),o=Math.round(n.lng*a)/a,s=Math.round(n.lat*a)/a,l=e.getBearing(),u=e.getPitch(),c=t?"/".concat(o,"/").concat(s,"/").concat(r):"".concat(r,"/").concat(s,"/").concat(o);return(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/".concat(Math.round(u))),c}var fi={linearity:.3,easing:e.bezier(0,0,.3,1)},pi=e.extend({deceleration:2500,maxSpeed:1400},fi),mi=e.extend({deceleration:20,maxSpeed:1400},fi),vi=e.extend({deceleration:1e3,maxSpeed:360},fi),gi=e.extend({deceleration:1e3,maxSpeed:90},fi),yi=function(){function t(e){v(this,t),this._map=e,this.clear()}return g(t,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertiaBuffer,n=e.exported.now();t.length>0&&n-t[0].time>160;)t.shift()}},{key:"_onMoveEnd",value:function(t){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){var n,r={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0},i=d(this._inertiaBuffer);try{for(i.s();!(n=i.n()).done;){var a=n.value.settings;r.zoom+=a.zoomDelta||0,r.bearing+=a.bearingDelta||0,r.pitch+=a.pitchDelta||0,a.panDelta&&r.pan._add(a.panDelta),a.around&&(r.around=a.around),a.pinchAround&&(r.pinchAround=a.pinchAround)}}catch(p){i.e(p)}finally{i.f()}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(r.pan.mag()){var l=xi(r.pan.mag(),o,e.extend({},pi,t||{}));s.offset=r.pan.mult(l.amount/r.pan.mag()),s.center=this._map.transform.center,_i(s,l)}if(r.zoom){var u=xi(r.zoom,o,mi);s.zoom=this._map.transform.zoom+u.amount,_i(s,u)}if(r.bearing){var c=xi(r.bearing,o,vi);s.bearing=this._map.transform.bearing+e.clamp(c.amount,-179,179),_i(s,c)}if(r.pitch){var h=xi(r.pitch,o,gi);s.pitch=this._map.transform.pitch+h.amount,_i(s,h)}if(s.zoom||s.bearing){var f=void 0===r.pinchAround?r.around:r.pinchAround;s.around=f?this._map.unproject(f):this._map.getCenter()}return this.clear(),s.noMoveStart=!0,s}}}]),t}();function _i(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function xi(t,n,r){var i=r.maxSpeed,a=r.linearity,o=r.deceleration,s=e.clamp(t*a/(n/1e3),-i,i),l=Math.abs(s)/(o*a);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}var bi=function(t){p(r,t);var n=m(r);function r(t,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};v(this,r);var l=C(i.getCanvasContainer(),a),u=i.unproject(l);return(o=n.call(this,t,e.extend({point:l,lngLat:u,originalEvent:a},s)))._defaultPrevented=!1,o.target=i,o}return g(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(e.Event),wi=function(t){p(r,t);var n=m(r);function r(t,i,a){var o;v(this,r);var s="touchend"===t?a.changedTouches:a.touches,l=A(i.getCanvasContainer(),s),u=l.map((function(e){return i.unproject(e)})),c=l.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new e.pointGeometry(0,0));return(o=n.call(this,t,{points:l,point:c,lngLats:u,lngLat:i.unproject(c),originalEvent:a}))._defaultPrevented=!1,o}return g(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(e.Event),ki=function(e){p(n,e);var t=m(n);function n(e,r,i){var a;return v(this,n),(a=t.call(this,e,{originalEvent:i}))._defaultPrevented=!1,a}return g(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(e.Event),Ti=function(){function t(e,n){v(this,t),this._map=e,this._clickTolerance=n.clickTolerance}return g(t,[{key:"reset",value:function(){this._mousedownPos=void 0}},{key:"wheel",value:function(e){return this._firePreventable(new ki(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new bi(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new bi(e.type,this._map,e))}},{key:"preclick",value:function(t){var n=e.extend({},t);n.type="preclick",this._map.fire(new bi(n.type,this._map,n))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new bi(e.type,this._map,e)))}},{key:"dblclick",value:function(e){return this._firePreventable(new bi(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new bi(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new bi(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new wi(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new wi(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new wi(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new wi(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),Si=function(){function e(t){v(this,e),this._map=t}return g(e,[{key:"reset",value:function(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}},{key:"mousemove",value:function(e){this._map.fire(new bi(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new bi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new bi(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),Ei=function(){function t(e,n){v(this,t),this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1}return g(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(k(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){var n=this;if(this._active){var r=t;if(!(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)){var i=this._startPos;this._lastPos=r,this._box||(this._box=y("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var a=Math.min(i.x,r.x),o=Math.max(i.x,r.x),s=Math.min(i.y,r.y),l=Math.max(i.y,r.y);this._map._requestDomTask((function(){n._box&&(n._box.style.transform="translate(".concat(a,"px,").concat(s,"px)"),n._box.style.width=o-a+"px",n._box.style.height=l-s+"px")}))}}}},{key:"mouseupWindow",value:function(t,n){var r=this;if(this._active&&0===t.button){var i=this._startPos,a=n;if(this.reset(),E(),i.x!==a.x||i.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(i,a,r._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",t)}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),T(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}]),t}();function Ci(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}var Ai=function(){function t(e){v(this,t),this.reset(),this.numTouches=e.numTouches}return g(t,[{key:"reset",value:function(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}},{key:"touchstart",value:function(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){var n,r=new e.pointGeometry(0,0),i=d(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r._add(a)}}catch(o){i.e(o)}finally{i.f()}return r.div(t.length)}(n),this.touches=Ci(r,n)))}},{key:"touchmove",value:function(e,t,n){if(!this.aborted&&this.centroid){var r=Ci(n,t);for(var i in this.touches){var a=this.touches[i],o=r[i];(!o||o.dist(a)>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),t}(),Ri=function(){function e(t){v(this,e),this.singleTap=new Ai(t),this.numTaps=t.numTaps,this.reset()}return g(e,[{key:"reset",value:function(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,n){this.singleTap.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this.singleTap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this.singleTap.touchend(e,t,n);if(r){var i=e.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(r)<30;if(i&&a||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),e}(),Mi=function(){function e(){v(this,e),this._zoomIn=new Ri({numTouches:1,numTaps:2}),this._zoomOut=new Ri({numTouches:2,numTaps:1}),this.reset()}return g(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this,i=this._zoomIn.touchend(e,t,n),a=this._zoomOut.touchend(e,t,n);return i?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}}):a?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Bi={0:1,2:2},Pi=function(){function e(t){v(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return g(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var n=R(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}}},{key:"mousemoveWindow",value:function(e,t){var n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){var n=Bi[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&R(e)===this._eventButton&&(this._moved&&E(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ii=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"mousedown",value:function(e,t){o(s(n.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),n}(Pi),zi=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(Pi),Li=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(Pi),Di=function(){function t(n,r){v(this,t),this._map=n,this._el=n.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}return g(t,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}},{key:"touchstart",value:function(e,t,n){return this._calculateTransform(e,t,n)}},{key:"touchmove",value:function(t,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,n,r)}}},{key:"touchend",value:function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(t,n,r){r.length>0&&(this._active=!0);var i=Ci(r,n),a=new e.pointGeometry(0,0),o=new e.pointGeometry(0,0),s=0;for(var l in i){var u=i[l],c=this._touches[l];c&&(a._add(u),o._add(u.sub(c)),s++,i[l]=u)}if(this._touches=i,!(s<this._minTouches)&&o.mag()){var h=o.div(s);return this._sum._add(h),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:h}}}},{key:"enable",value:function(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}},{key:"disable",value:function(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"_addTouchPanBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=y("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showTouchPanBlockerAlert",value:function(){var e=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),e._alertContainer.setAttribute("role","null")}),500)}}]),t}(),Oi=function(){function e(){v(this,e),this.reset()}return g(e,[{key:"reset",value:function(){this._active=!1,this._firstTwoTouches=void 0}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,n){return{}}},{key:"touchstart",value:function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,n){var r=this._firstTwoTouches;if(r){e.preventDefault();var i=h(r,2),a=i[0],o=i[1],s=Ni(n,t,a),l=Ni(n,t,o);if(s&&l){var u=this._aroundCenter?null:s.add(l).div(2);return this._move([s,l],u,e)}}}},{key:"touchend",value:function(e,t,n){if(this._firstTwoTouches){var r=h(this._firstTwoTouches,2),i=r[0],a=r[1],o=Ni(n,t,i),s=Ni(n,t,a);o&&s||(this._active&&E(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function Ni(e,t,n){for(var r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Fi(e,t){return Math.log(e/t)/Math.LN2}var ji=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._distance=0,this._startDistance=0}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Fi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Fi(this._distance,n),pinchAround:t}}}]),n}(Oi);function Vi(e,t){return 180*e.angleWith(t)/Math.PI}var Zi=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vi(this._vector,n),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=Vi(e,this._startVector);return Math.abs(n)<t}}]),n}(Oi);function Ui(e){return Math.abs(e.y)>Math.abs(e.x)}var Gi=function(e){p(n,e);var t=m(n);function n(e){var r;return v(this,n),(r=t.call(this))._map=e,r}return g(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}},{key:"_start",value:function(e){this._lastPoints=e,Ui(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(e,t,n){var r=this._lastPoints;if(r){var i=e[0].sub(r[0]),a=e[1].sub(r[1]);return this._map._cooperativeGestures&&n.touches.length<3||(this._valid=this.gestureBeginsVertically(i,a,n.timeStamp),!this._valid)?void 0:(this._lastPoints=e,this._active=!0,{pitchDelta:(i.y+a.y)/2*-.5})}}},{key:"gestureBeginsVertically",value:function(e,t,n){if(void 0!==this._valid)return this._valid;var r=e.mag()>=2,i=t.mag()>=2;if(r||i){if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var a=e.y>0==t.y>0;return Ui(e)&&Ui(t)&&a}}}]),n}(Oi),Hi={panStep:100,bearingStep:15,pitchStep:10},qi=function(){function e(){v(this,e);var t=Hi;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return g(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,r=0,i=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Wi,zoom:n?Math.round(l)+n*(e.shiftKey?2:1):l,bearing:s.getBearing()+r*t._bearingStep,pitch:s.getPitch()+i*t._pitchStep,offset:[-a*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function Wi(e){return e*(2-e)}var Xi=4.000244140625,Ki=function(){function t(n,r){v(this,t),this._map=n,this._el=n.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}return g(t,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}},{key:"wheel",value:function(t){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Xi==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var t=C(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform,r=function(){return n._terrainEnabled()&&t._aroundCoord?n.computeZoomRelativeTo(t._aroundCoord):n.zoom};if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>Xi?this._wheelZoomRate:this._defaultZoomRate,a=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==a&&(a=1/a);var o=r(),s=Math.pow(2,o),l="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(l*a))),"wheel"===this._type&&(this._startZoom=o,this._easing=this._smoothOutEasing(200)),this._delta=0}var u,c="number"==typeof this._targetZoom?this._targetZoom:r(),h=this._startZoom,d=this._easing,f=!1;if("wheel"===this._type&&h&&d){var p=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),m=d(p);u=e.number(h,c,m),p<1?this._frameId||(this._frameId=!0):f=!0}else u=c,f=!0;return this._active=!0,f&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!f,zoomDelta:u-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(t){var n=e.ease;if(this._prevEase){var r=this._prevEase,i=(e.exported.now()-r.start)/r.duration,a=r.easing(i+.01)-r.easing(i),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);n=e.bezier(o,s,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"_addScrollZoomBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=y("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showBlockerAlert",value:function(){var e=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),e._alertContainer.setAttribute("role","null")}),200)}}]),t}(),Yi=function(){function e(t,n){v(this,e),this._clickZoom=t,this._tapZoom=n}return g(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),Ji=function(){function e(){v(this,e),this.reset()}return g(e,[{key:"reset",value:function(){this._active=!1}},{key:"blur",value:function(){this.reset()}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Qi=function(){function e(){v(this,e),this._tap=new Ri({numTouches:1,numTaps:1}),this.reset()}return g(e,[{key:"reset",value:function(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}},{key:"touchstart",value:function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}},{key:"touchmove",value:function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),$i=function(){function e(t,n,r){v(this,e),this._el=t,this._mousePan=n,this._touchPan=r}return g(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),ea=function(){function e(t,n,r){v(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=n,this._mousePitch=r}return g(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),ta=function(){function e(t,n,r,i){v(this,e),this._el=t,this._touchZoom=n,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}return g(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),na=function(e){return e.zoom||e.drag||e.pitch||e.rotate},ra=function(e){p(n,e);var t=m(n);function n(){return v(this,n),t.apply(this,arguments)}return g(n)}(e.Event),ia=function(){function t(){v(this,t),this.constants=[1,1,.01],this.radius=0}return g(t,[{key:"setup",value:function(t,n){var r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}},{key:"projectRay",value:function(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);var n=e.scale$2([],t,this.radius);if(n[2]>0){var r=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),i=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),a=e.add([],n,e.scale$2([],e.sub([],e.add([],i,r),n),2));n[0]=a[0],n[1]=a[1]}return n}}]),t}();function aa(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var oa=function(){function t(n,r){v(this,t),this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yi(n),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new ia,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[e.window,"blur",void 0]];var a,o=d(this._listeners);try{for(o.s();!(a=o.n()).done;){var s=h(a.value,3),l=s[0],u=s[1],c=s[2];l.addEventListener(u,l===e.window.document?this.handleWindowEvent:this.handleEvent,c)}}catch(f){o.e(f)}finally{o.f()}}return g(t,[{key:"destroy",value:function(){var t,n=d(this._listeners);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,3),i=r[0],a=r[1],o=r[2];i.removeEventListener(a,i===e.window.document?this.handleWindowEvent:this.handleEvent,o)}}catch(s){n.e(s)}finally{n.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new Ti(t,e));var r=t.boxZoom=new Ei(t,e);this._add("boxZoom",r);var i=new Mi,a=new Ji;t.doubleClickZoom=new Yi(a,i),this._add("tapZoom",i),this._add("clickZoom",a);var o=new Qi;this._add("tapDragZoom",o);var s=t.touchPitch=new Gi(t);this._add("touchPitch",s);var l=new zi(e),u=new Li(e);t.dragRotate=new ea(e,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new Ii(e),h=new Di(t,e);t.dragPan=new $i(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var d=new Zi,f=new ji;t.touchZoomRotate=new ta(n,f,d,o),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Si(t));var p=t.scrollZoom=new Ki(t,this);this._add("scrollZoom",p,["mousePan"]);var m=t.keyboard=new qi;this._add("keyboard",m);for(var v=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];v<g.length;v++){var y=g[v];e.interactive&&e[y]&&t[y].enable(e[y])}}},{key:"_add",value:function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,n=d(this._handlers);try{for(n.s();!(t=n.n()).done;)t.value.handler.reset()}catch(r){n.e(r)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=d(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!na(this._eventsInProgress)||this.isZooming()}},{key:"_blockedByActive",value:function(e,t,n){for(var r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,n=[],r=d(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._el.contains(i.target)&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"handleEvent",value:function(e,t){this._updatingCamera=!0;var n,r="renderFrame"===e.type,i=r?void 0:e,a={needsRenderFrame:!1},o={},s={},l=e.touches?this._getMapTouches(e.touches):void 0,u=l?A(this._el,l):r?void 0:C(this._el,e),c=d(this._handlers);try{for(c.s();!(n=c.n()).done;){var h=n.value,f=h.handlerName,p=h.handler,m=h.allowed;if(p.isEnabled()){var v=void 0;this._blockedByActive(s,m,f)?p.reset():p[t||e.type]&&(v=p[t||e.type](e,u,l),this.mergeHandlerResult(a,o,v,f,i),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||p.isActive())&&(s[f]=p)}}}catch(x){c.e(x)}finally{c.f()}var g={};for(var y in this._previousActiveHandlers)s[y]||(g[y]=i);this._previousActiveHandlers=s,(Object.keys(g).length||aa(a))&&(this._changes.push([a,o,g]),this._triggerRenderFrame()),(Object.keys(s).length||aa(a))&&this._map._stop(!0),this._updatingCamera=!1;var _=a.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}},{key:"mergeHandlerResult",value:function(t,n,r,i,a){if(r){e.extend(t,r);var o={handlerName:i,originalEvent:r.originalEvent||a};void 0!==r.zoomDelta&&(n.zoom=o),void 0!==r.panDelta&&(n.drag=o),void 0!==r.pitchDelta&&(n.pitch=o),void 0!==r.bearingDelta&&(n.rotate=o)}}},{key:"_applyChanges",value:function(){var t,n={},r={},i={},a=d(this._changes);try{for(a.s();!(t=a.n()).done;){var o=h(t.value,3),s=o[0],l=o[1],u=o[2];s.panDelta&&(n.panDelta=(n.panDelta||new e.pointGeometry(0,0))._add(s.panDelta)),s.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(n.around=s.around),void 0!==s.aroundCoord&&(n.aroundCoord=s.aroundCoord),void 0!==s.pinchAround&&(n.pinchAround=s.pinchAround),s.noInertia&&(n.noInertia=s.noInertia),e.extend(r,l),e.extend(i,u)}}catch(c){a.e(c)}finally{a.f()}this._updateMapTransform(n,r,i),this._changes=[]}},{key:"_updateMapTransform",value:function(t,n,r){var i=this,a=this._map,o=a.transform,s=function(e){return[e.x,e.y,e.z]};if(function(e){var t=i._eventsInProgress.drag;return t&&!i._handlersById[t.handlerName].isActive()}()&&!aa(t)){var l=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",l!==o.zoom&&this._map._update(!0)}if(aa(t)){var u=t.panDelta,c=t.zoomDelta,h=t.bearingDelta,d=t.pitchDelta,f=t.around,p=t.aroundCoord,m=t.pinchAround;void 0!==m&&(f=m),n.drag&&!i._eventsInProgress.drag&&f&&(this._dragOrigin=s(o.pointCoordinate3D(f)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",a._stop(!0),f=f||a.transform.centerPoint,h&&(o.bearing+=h),d&&(o.pitch+=d),o._updateCameraState();var v=[0,0,0];if(u)if("mercator"===o.projection.name){var g=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(f).dir),y=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(f.sub(u)).dir);v[0]=y[0]-g[0],v[1]=y[1]-g[1]}else{var _=o.pointCoordinate(f);if("globe"===o.projection.name){u=u.rotate(-o.angle);var x=o._pixelsPerMercatorPixel/o.worldSize;v[0]=-u.x*e.mercatorScale(e.latFromMercatorY(_.y))*x,v[1]=-u.y*e.mercatorScale(o.center.lat)*x}else{var b=o.pointCoordinate(f.sub(u));_&&b&&(v[0]=b.x-_.x,v[1]=b.y-_.y)}}var w=o.zoom,k=[0,0,0];if(c){var T=s(p||o.pointCoordinate3D(f)),S={dir:e.normalize([],e.sub([],T,o._camera.position))};if(S.dir[2]<0){var E=o.zoomDeltaToMovement(T,c);e.scale$2(k,S.dir,E)}}var C=e.add(v,v,k);o._translateCameraConstrained(C),c&&Math.abs(o.zoom-w)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}else this._fireEvents(n,r,!0)}},{key:"_fireEvents",value:function(t,n,r){var i=this,a=na(this._eventsInProgress),o=na(t),s={};for(var l in t){var u=t[l].originalEvent;this._eventsInProgress[l]||(s["".concat(l,"start")]=u),this._eventsInProgress[l]=t[l]}for(var c in!a&&o&&this._fireEvent("movestart",o.originalEvent),s)this._fireEvent(c,s[c]);for(var h in o&&this._fireEvent("move",o.originalEvent),t){var d=t[h].originalEvent;this._fireEvent(h,d)}var f,p={};for(var m in this._eventsInProgress){var v=this._eventsInProgress[m],g=v.handlerName,y=v.originalEvent;this._handlersById[g].isActive()||(delete this._eventsInProgress[m],f=n[g]||y,p["".concat(m,"end")]=f)}for(var _ in p)this._fireEvent(_,p[_]);var x=na(this._eventsInProgress);if(r&&(a||o)&&!x){this._updatingCamera=!0;var b=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),w=function(e){return 0!==e&&-i._bearingSnap<e&&e<i._bearingSnap};b?(w(b.bearing||this._map.getBearing())&&(b.bearing=0),this._map.easeTo(b,{originalEvent:f})):(this._map.fire(new e.Event("moveend",{originalEvent:f})),w(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){e._frameId=void 0,e.handleEvent(new ra("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),t}(),sa="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.",la=function(t){p(r,t);var n=m(r);function r(t,a){var o;return v(this,r),(o=n.call(this))._moving=!1,o._zooming=!1,o.transform=t,o._bearingSnap=a.bearingSnap,e.bindAll(["_renderFrameCallback"],i(o)),o}return g(r,[{key:"getCenter",value:function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(t,n,r){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}},{key:"panTo",value:function(t,n,r){return this.easeTo(e.extend({center:t},n),r)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}},{key:"resetNorth",value:function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}},{key:"resetNorthPitch",value:function(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(t,n){"globe"===this.transform.projection.name&&e.warnOnce('Globe projection does not support cameraForBounds API, this API may behave unexpectedly."'),t=e.LngLatBounds.convert(t);var r=n&&n.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),r,n)}},{key:"_extendCameraOptions",value:function(t){var n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){var r=t.padding;t.padding={top:r,bottom:r,right:r,left:r}}return t.padding=e.extend(n,t.padding),t}},{key:"_cameraForBoxAndBearing",value:function(t,n,r,i){var a=this._extendCameraOptions(i),o=this.transform,s=o.padding,l=o.project(e.LngLat.convert(t)),u=o.project(e.LngLat.convert(n)),c=new e.pointGeometry(l.x,u.y),h=new e.pointGeometry(u.x,l.y),d=-e.degToRad(r),f=l.rotate(d),p=u.rotate(d),m=c.rotate(d),v=h.rotate(d),g=new e.pointGeometry(Math.max(f.x,p.x,m.x,v.x),Math.max(f.y,p.y,m.y,v.y)),y=new e.pointGeometry(Math.min(f.x,p.x,m.x,v.x),Math.min(f.y,p.y,m.y,v.y)),_=g.sub(y),x=(o.width-((s.left||0)+(s.right||0)+a.padding.left+a.padding.right))/_.x,b=(o.height-((s.top||0)+(s.bottom||0)+a.padding.top+a.padding.bottom))/_.y;if(!(b<0||x<0)){var w=Math.min(o.scaleZoom(o.scale*Math.min(x,b)),a.maxZoom),k="number"==typeof a.offset.x&&"number"==typeof a.offset.y?new e.pointGeometry(a.offset.x,a.offset.y):e.pointGeometry.convert(a.offset),T=new e.pointGeometry((a.padding.left-a.padding.right)/2,(a.padding.top-a.padding.bottom)/2).rotate(r*Math.PI/180),S=k.add(T).mult(o.scale/o.zoomScale(w));return{center:o.unproject(l.add(u).div(2).sub(S)),zoom:w,bearing:r}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"_cameraForBox",value:function(t,n,r,i,a){var o=this._extendCameraOptions(a);r=r||0,i=i||0,t=e.LngLat.convert(t),n=e.LngLat.convert(n);var s=this.transform.clone();s.padding=o.padding;var l=this.getFreeCameraOptions(),u=new e.LngLat(.5*(t.lng+n.lng),.5*(t.lat+n.lat)),c=.5*(r+i);if(!(s._camera.position[2]<e.mercatorZfromAltitude(c,u.lat))){l.lookAtPoint(u),s.setFreeCameraOptions(l);var h,d,f=e.MercatorCoordinate.fromLngLat(t),p=e.MercatorCoordinate.fromLngLat(n),m=s.pointRayIntersection(s.centerPoint,c),v=[(h=s.rayIntersectionCoordinate(m)).x,h.y,h.z],g=s.screenPointToMercatorRay(s.centerPoint),y="globe"!==s.projection.name,_=0;do{var x=Math.floor(s.zoom),b=1<<x,w=Math.min(b*f.x,b*p.x),k=Math.min(b*f.y,b*p.y),T=Math.max(b*f.x,b*p.x),S=Math.max(b*f.y,b*p.y),E=new e.Aabb([w,k,r],[T,S,i]),C=e.Frustum.fromInvProjectionMatrix(s.invProjMatrix,s.worldSize,x,y);if(2!==E.intersects(C)){d&&(s._camera.position=e.scaleAndAdd([],s._camera.position,g.dir,-d),s._updateStateFromCamera());break}var A=e.sub([],s._camera.position,v);d=.5*e.length(A),s._camera.position=e.scaleAndAdd([],s._camera.position,g.dir,d);try{s._updateStateFromCamera()}catch(t){return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++_<10);return{center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}},{key:"fitBounds",value:function(t,n,r){return"globe"===this.transform.projection.name&&e.warnOnce("Globe projection does not support fitBounds API, this API may behave unexpectedly."),this._fitInternal(this.cameraForBounds(t,n),n,r)}},{key:"_raycastElevationBox",value:function(t,n){var r=this.transform.elevation;if(r){var i=new e.pointGeometry(t.x,n.y),a=new e.pointGeometry(n.x,t.y),o=r.pointCoordinate(t);if(o){var s=r.pointCoordinate(n);if(s){var l=r.pointCoordinate(i);if(l){var u=r.pointCoordinate(a);if(u){var c=new e.MercatorCoordinate(o[0],o[1]).toLngLat(),h=new e.MercatorCoordinate(s[0],s[1]).toLngLat(),d=new e.MercatorCoordinate(l[0],l[1]).toLngLat(),f=new e.MercatorCoordinate(u[0],u[1]).toLngLat(),p=Math.min(c.lng,Math.min(h.lng,Math.min(d.lng,f.lng))),m=Math.min(c.lat,Math.min(h.lat,Math.min(d.lat,f.lat))),v=Math.max(c.lng,Math.max(h.lng,Math.max(d.lng,f.lng))),g=Math.max(c.lat,Math.max(h.lat,Math.max(d.lat,f.lat))),y=Math.min(o[3],Math.min(s[3],Math.min(l[3],u[3]))),_=Math.max(o[3],Math.max(s[3],Math.max(l[3],u[3])));return{minLngLat:new e.LngLat(p,m),maxLngLat:new e.LngLat(v,g),minAltitude:y,maxAltitude:_}}}}}}}},{key:"fitScreenCoordinates",value:function(t,n,r,i,a){var o,s,l,u;"globe"===this.transform.projection.name&&e.warnOnce("Globe projection does not support fitScreenCoordinates API, this API may behave unexpectedly.");var c=e.pointGeometry.convert(t),h=e.pointGeometry.convert(n),d=this._raycastElevationBox(c,h);if(d)o=d.minLngLat,s=d.maxLngLat,l=d.minAltitude,u=d.maxAltitude;else{if(this.transform.anyCornerOffEdge(c,h))return this;o=this.transform.pointLocation(c),s=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(e.pointGeometry.convert(t)),this.transform.pointLocation(e.pointGeometry.convert(n)),r,i):this._cameraForBox(o,s,l,u,i),i,a)}},{key:"_fitInternal",value:function(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}},{key:"jumpTo",value:function(t,n){this.stop();var r=t.preloadOnly?this.transform.clone():this.transform,i=!1,a=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(a=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),a&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),o&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}},{key:"getFreeCameraOptions",value:function(){return this.transform.projection.supportsFreeCamera||e.warnOnce(sa),this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(t,n){var r=this.transform;if(!r.projection.supportsFreeCamera)return e.warnOnce(sa),this;this.stop();var i=r.zoom,a=r.pitch,o=r.bearing;r.setFreeCameraOptions(t);var s=i!==r.zoom,l=a!==r.pitch,u=o!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),u&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}},{key:"easeTo",value:function(t,n){var r=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);var i,a,o,s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),h=this.getPadding(),d="zoom"in t?+t.zoom:l,f="bearing"in t?this._normalizeBearing(t.bearing,u):u,p="pitch"in t?+t.pitch:c,m="padding"in t?t.padding:s.padding,v=e.pointGeometry.convert(t.offset);if("globe"===s.projection.name){var g=e.MercatorCoordinate.fromLngLat(s.center),y=v.rotate(-s.angle);g.x+=y.x/s.worldSize,g.y+=y.y/s.worldSize;var _=g.toLngLat(),x=e.LngLat.convert(t.center||_);this._normalizeCenter(x),i=s.centerPoint.add(y),a=new e.pointGeometry(g.x,g.y).mult(s.worldSize),o=new e.pointGeometry(e.mercatorXfromLng(x.lng),e.mercatorYfromLat(x.lat)).mult(s.worldSize).sub(a)}else{i=s.centerPoint.add(v);var b=s.pointLocation(i),w=e.LngLat.convert(t.center||b);this._normalizeCenter(w),a=s.project(b),o=s.project(w).sub(a)}var k,T,S=s.zoomScale(d-l);t.around&&(k=e.LngLat.convert(t.around),T=s.locationPoint(k));var E=this._zooming||d!==l,C=this._rotating||u!==f,A=this._pitching||p!==c,R=!s.isPaddingEqual(m),M=function(s){return function(g){if(E&&(s.zoom=e.number(l,d,g)),C&&(s.bearing=e.number(u,f,g)),A&&(s.pitch=e.number(c,p,g)),R&&(s.interpolatePadding(h,m,g),i=s.centerPoint.add(v)),k)s.setLocationAtPoint(k,T);else{var y=s.zoomScale(s.zoom-l),_=d>l?Math.min(2,S):Math.max(.5,S),x=Math.pow(_,1-g),b=s.unproject(a.add(o.mult(g*x)).mult(y));s.setLocationAtPoint(s.renderWorldCopies?b.wrap():b,i)}return t.preloadOnly||r._fireMoveEvents(n),s}};if(t.preloadOnly){var B=this._emulate(M,t.duration,s);return this._preloadTiles(B),this}var P={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=E,this._rotating=C,this._pitching=A,this._padding=R,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,P),this._ease(M(s),(function(e){s.recenterOnTerrain(),r._afterEase(n,e)}),t),this}},{key:"_prepareEase",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}},{key:"_fireMoveEvents",value:function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}},{key:"_afterEase",value:function(t,n){if(!this._easeId||!n||this._easeId!==n){this._easeId=void 0,this.transform.cameraElevationReference="ground";var r=this._zooming,i=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}}},{key:"flyTo",value:function(t,n){var r=this;if(!t.essential&&e.exported.prefersReducedMotion){var i=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var a=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,a.minZoom,a.maxZoom):o,h="bearing"in t?this._normalizeBearing(t.bearing,s):s,d="pitch"in t?+t.pitch:l,f="padding"in t?t.padding:a.padding,p=a.zoomScale(c-o),m=e.pointGeometry.convert(t.offset),v=a.centerPoint.add(m),g=a.pointLocation(v),y=e.LngLat.convert(t.center||g);this._normalizeCenter(y);var _=a.project(g),x=a.project(y).sub(_),b=t.curve,w=Math.max(a.width,a.height),k=w/p,T=x.mag();if("minZoom"in t){var S=e.clamp(Math.min(t.minZoom,o,c),a.minZoom,a.maxZoom),E=w/a.zoomScale(S-o);b=Math.sqrt(E/T*2)}var C=b*b;function A(e){var t=(k*k-w*w+(e?-1:1)*C*C*T*T)/(2*(e?k:w)*C*T);return Math.log(Math.sqrt(t*t+1)-t)}function R(e){return(Math.exp(e)-Math.exp(-e))/2}function M(e){return(Math.exp(e)+Math.exp(-e))/2}var B=A(0),P=function(e){return M(B)/M(B+b*e)},I=function(e){return w*((M(B)*(R(t=B+b*e)/M(t))-R(B))/C)/T;var t},z=(A(1)-B)/b;if(Math.abs(T)<1e-6||!isFinite(z)){if(Math.abs(w-k)<1e-6)return this.easeTo(t,n);var L=k<w?-1:1;z=Math.abs(Math.log(k/w))/b,I=function(){return 0},P=function(e){return Math.exp(L*b*e)}}t.duration="duration"in t?+t.duration:1e3*z/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);var D=s!==h,O=d!==l,N=!a.isPaddingEqual(f),F=function(i){return function(a){var p=a*z,g=1/P(p);i.zoom=1===a?c:o+i.scaleZoom(g),D&&(i.bearing=e.number(s,h,a)),O&&(i.pitch=e.number(l,d,a)),N&&(i.interpolatePadding(u,f,a),v=i.centerPoint.add(m));var b=1===a?y:i.unproject(_.add(x.mult(I(p))).mult(g));return i.setLocationAtPoint(i.renderWorldCopies?b.wrap():b,v),i._updateCameraOnTerrain(),t.preloadOnly||r._fireMoveEvents(n),i}};if(t.preloadOnly){var j=this._emulate(F,t.duration,a);return this._preloadTiles(j),this}return this._zooming=!0,this._rotating=D,this._pitching=O,this._padding=N,this._prepareEase(n,!1),this._ease(F(a),(function(){return r._afterEase(n)}),t),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){var n=this._onEaseEnd;this._onEaseEnd=void 0,n.call(this,t)}if(!e){var r=this.handlers;r&&r.stop(!1)}return this}},{key:"_ease",value:function(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.maxBounds){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}},{key:"_emulate",value:function(e,t,n){for(var r=Math.ceil(15*t/1e3),i=[],a=e(n.clone()),o=0;o<=r;o++){var s=a(o/r);i.push(s.clone())}return i}}]),r}(e.Evented),ua=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v(this,t),this.options=n,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return g(t,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y("button","mapboxgl-ctrl-attrib-button",this._container),y("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var n=this._map._getUIString("AttributionControl.".concat(t));e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}},{key:"_updateEditLink",value:function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var r=n.reduce((function(e,t,r){return t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(r<n.length-1?"&":"")),e}),"?");t.href="".concat(e.config.FEEDBACK_URL,"/").concat(r,"#").concat(di(this._map,!0)),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style._sourceCaches;for(var r in n){var i=n[r];if(i.used){var a=i.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length})),e=e.filter((function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[].concat(c(this.options.customAttribution),c(e)):e.unshift(this.options.customAttribution));var o=e.join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),t}(),ca=function(){function t(){v(this,t),e.bindAll(["_updateLogo","_updateCompact"],this)}return g(t,[{key:"onAdd",value:function(e){this._map=e,this._container=y("div","mapboxgl-ctrl");var t=y("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(!this._map.style)return!0;var e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(var t in e){var n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}]),t}(),ha=function(){function e(){v(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return g(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,n=this._currentlyRunning,r=n?this._queue.concat(n):this._queue,i=d(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.id===e)return void(a.cancelled=!0)}}catch(o){i.e(o)}finally{i.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._currentlyRunning=this._queue;this._queue=[];var n,r=d(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(e),this._cleared))break}}catch(a){r.e(a)}finally{r.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}();function da(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){var i=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),o=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<o)?t=i:r.locationPoint(a).distSqr(n)<s&&(l||Math.abs(a.lng-r.center.lng)<o)&&(t=a)}for(;Math.abs(t.lng-r.center.lng)>180;){var u=r.locationPoint(t);if(u.x>=0&&u.y>=0&&u.x<=r.width&&u.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}var fa={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},pa=function(t){p(r,t);var n=m(r);function r(t,a){var o;if(v(this,r),o=n.call(this),(t instanceof e.window.HTMLElement||a)&&(t=e.extend({element:t},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],i(o)),o._anchor=t&&t.anchor||"center",o._color=t&&t.color||"#3FB1CE",o._scale=t&&t.scale||1,o._draggable=t&&t.draggable||!1,o._clickTolerance=t&&t.clickTolerance||0,o._isDragging=!1,o._state="inactive",o._rotation=t&&t.rotation||0,o._rotationAlignment=t&&t.rotationAlignment||"auto",o._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",o._updateMoving=function(){return o._update(!0)},t&&t.element)o._element=t.element,o._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{o._defaultMarker=!0,o._element=y("div");var s=41,u=27,c=_("svg",{display:"block",height:s*o._scale+"px",width:u*o._scale+"px",viewBox:"0 0 ".concat(u," ").concat(s)},o._element),h=_("radialGradient",{id:"shadowGradient"},_("defs",{},c));_("stop",{offset:"10%","stop-opacity":.4},h),_("stop",{offset:"100%","stop-opacity":.05},h),_("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c),_("path",{fill:o._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),_("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),_("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),o._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}o._element.hasAttribute("aria-label")||o._element.setAttribute("aria-label","Map marker"),o._element.classList.add("mapboxgl-marker"),o._element.addEventListener("dragstart",(function(e){e.preventDefault()})),o._element.addEventListener("mousedown",(function(e){e.preventDefault()}));var d=o._element.classList;for(var f in fa)d.remove("mapboxgl-marker-anchor-".concat(f));return d.add("mapboxgl-marker-anchor-".concat(o._anchor)),o._popup=null,l(o)}return g(r,[{key:"addTo",value:function(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}},{key:"remove",value:function(){var e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}},{key:"_behindTerrain",value:function(){var e=this._map;if(!e)return!1;var t=e.unproject(this._pos),n=e.getFreeCameraOptions();if(!n.position)return!1;var r=n.position.toLngLat();return r.distanceTo(t)<.9*r.distanceTo(this._lngLat)}},{key:"_evaluateOpacity",value:function(){var t=this._map;if(t){var n=this._pos;if(!n||n.x<0||n.x>t.transform.width||n.y<0||n.y>t.transform.height)this._clearFadeTimer();else{var r,i=t.unproject(n);t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?r=0:(r=1-t._queryFogOpacity(i),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(r*=.2)),this._element.style.opacity="".concat(r),this._element.style.pointerEvents=r>0?"auto":"none",this._popup&&this._popup._setOpacity(r),this._fadeTimer=null}}}},{key:"_clearFadeTimer",value:function(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}},{key:"_updateDOM",value:function(){var e=this._pos;if(e&&this._map){var t=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(e.x,"px,").concat(e.y,"px)\n            ").concat(fa[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(t.x,"px,").concat(t.y,"px)\n        ")}}},{key:"_calculateXYTransform",value:function(){var t=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!t||"map"!==r)return"";if(!n._showingGlobe()){var i=n.getPitch();return i?"rotateX(".concat(i,"deg)"):""}var a=e.radToDeg(e.globeTiltAtLngLat(n.transform,this._lngLat)),o=t.sub(e.globeCenterToScreenPoint(n.transform)),s=Math.abs(o.x)+Math.abs(o.y);if(0===s)return"";var l=a/s;return"rotateX(".concat(-o.y*l,"deg) rotateY(").concat(o.x*l,"deg)")}},{key:"_calculateZTransform",value:function(){var t=this._pos,n=this._map;if(!n||!t)return"";var r=0,i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){var a=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),o=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(a);r=e.radToDeg(Math.atan2(o.y,o.x))-90}else r=-n.getBearing();else if("horizon"===i){var s=e.smoothstep(4,6,n.getZoom()),l=e.globeCenterToScreenPoint(n.transform);l.y+=s*n.transform.height;var u=t.sub(l),c=e.radToDeg(Math.atan2(u.y,u.x));r=(c>90?c-270:c+90)*(1-s)}return(r+=this._rotation)?"rotateZ(".concat(r,"deg)"):""}},{key:"_update",value:function(t){var n=this;e.window.cancelAnimationFrame(this._updateFrameId);var r=this._map;r&&(r.transform.renderWorldCopies&&(this._lngLat=da(this._lngLat,this._pos,r.transform)),this._pos=r.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((function(){n._element&&n._pos&&n._anchor&&(n._pos=n._pos.round(),n._updateDOM())})):this._pos=this._pos.round(),r._requestDomTask((function(){n._map&&(n._element&&n._pos&&n._anchor&&n._updateDOM(),(r._showingGlobe()||r.getTerrain()||r.getFog())&&!n._fadeTimer&&(n._fadeTimer=setTimeout(n._evaluateOpacity.bind(n),60)))})))}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}},{key:"_onMove",value:function(t){var n=this._map;if(n){if(!this._isDragging){var r=this._clickTolerance||n._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=r}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;var t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){var t=this._map;t&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){this._draggable=!!e;var t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e||"auto",this._update(),this}},{key:"getPitchAlignment",value:function(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}}]),r}(e.Evented),ma=function(){function t(e){v(this,t),this.jumpTo(e)}return g(t,[{key:"getValue",value:function(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;var n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}},{key:"isEasing",value:function(e){return e>=this._startTime&&e<=this._endTime}},{key:"jumpTo",value:function(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}},{key:"easeTo",value:function(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}]),t}(),va={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ga={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function ya(e){e.parentNode&&e.parentNode.removeChild(e)}var _a={showCompass:!0,showZoom:!0,visualizePitch:!1},xa=function(){function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];v(this,t),this._clickTolerance=10,this.element=r,this.mouseRotate=new zi({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,i&&(this.mousePitch=new Li({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}return g(t,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),k()}},{key:"move",value:function(e,t){var n=this.map,r=this.mouseRotate.mousemoveWindow(e,t),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){var a=this.mousePitch.mousemoveWindow(e,t),o=a&&a.pitchDelta;o&&n.setPitch(n.getPitch()+o)}}},{key:"off",value:function(){var e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){T(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}},{key:"mousedown",value:function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),C(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,C(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=A(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=A(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),t}(),ba={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},wa={maxWidth:100,unit:"metric"};function ka(e,t,n){var r=this,i=Ta(t),a=i/t,o={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[n];this._map._requestDomTask((function(){r._container.style.width=e*a+"px",r._container.innerHTML="".concat(i,"&nbsp;").concat(o)}))}function Ta(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}var Sa={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ea=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ca(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.pointGeometry(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof t){var r=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.pointGeometry(0,t);case"top-left":return new e.pointGeometry(r,r);case"top-right":return new e.pointGeometry(-r,r);case"bottom":return new e.pointGeometry(0,-t);case"bottom-left":return new e.pointGeometry(r,-r);case"bottom-right":return new e.pointGeometry(-r,-r);case"left":return new e.pointGeometry(t,0);case"right":return new e.pointGeometry(-t,0)}return new e.pointGeometry(0,0)}return t instanceof e.pointGeometry||Array.isArray(t)?e.pointGeometry.convert(t):e.pointGeometry.convert(t[n]||[0,0])}var Aa={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:function(t){p(c,t);var a=m(c);function c(t){var n;if(v(this,c),null!=(t=e.extend({},ga,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),(n=a.call(this,new ui(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t))._interactive=t.interactive,n._minTileCacheSize=t.minTileCacheSize,n._maxTileCacheSize=t.maxTileCacheSize,n._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,n._preserveDrawingBuffer=t.preserveDrawingBuffer,n._antialias=t.antialias,n._trackResize=t.trackResize,n._bearingSnap=t.bearingSnap,n._refreshExpiredTiles=t.refreshExpiredTiles,n._fadeDuration=t.fadeDuration,n._isInitialLoad=!0,n._crossSourceCollisions=t.crossSourceCollisions,n._crossFadingFactor=1,n._collectResourceTiming=t.collectResourceTiming,n._optimizeForTerrain=t.optimizeForTerrain,n._language="auto"===t.language?e.window.navigator.language:t.language,n._worldview=t.worldview,n._renderTaskQueue=new ha,n._domRenderTaskQueue=new ha,n._controls=[],n._markers=[],n._mapId=e.uniqueId(),n._locale=e.extend({},va,t.locale),n._clickTolerance=t.clickTolerance,n._cooperativeGestures=t.cooperativeGestures,n._containerWidth=0,n._containerHeight=0,n._averageElevationLastSampledAt=-1/0,n._averageElevationExaggeration=0,n._averageElevation=new ma(0),n._useExplicitProjection=!1,n._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),n._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(n._container=e.window.document.getElementById(t.container),!n._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");n._container=t.container}if(n._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&n.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],i(n)),n._setupContainer(),n._setupPainter(),void 0===n.painter)throw new Error("Failed to initialize WebGL.");return n.on("move",(function(){return n._update(!1)})),n.on("moveend",(function(){return n._update(!1)})),n.on("zoom",(function(){return n._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",n._onWindowOnline,!1),e.window.addEventListener("resize",n._onWindowResize,!1),e.window.addEventListener("orientationchange",n._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",n._onWindowResize,!1)),n.handlers=new oa(i(n),t),n._localFontFamily=t.localFontFamily,n._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&n.setStyle(t.style,{localFontFamily:n._localFontFamily,localIdeographFontFamily:n._localIdeographFontFamily}),t.projection&&n.setProjection(t.projection),n._hash=t.hash&&new hi("string"==typeof t.hash&&t.hash||void 0).addTo(i(n)),n._hash&&n._hash._onHashChange()||(n.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(n.resize(),n.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),n.resize(),t.attributionControl&&n.addControl(new ua({customAttribution:t.customAttribution})),n._logoControl=new ca,n.addControl(n._logoControl,t.logoPosition),n.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),n.on("data",(function(t){n._update("style"===t.dataType),n.fire(new e.Event("".concat(t.dataType,"data"),t))})),n.on("dataloading",(function(t){n.fire(new e.Event("".concat(t.dataType,"dataloading"),t))})),l(n)}return g(c,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}},{key:"removeControl",value:function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"resize",value:function(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));var n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}},{key:"getBounds",value:function(){return"globe"===this.transform.projection.name&&e.warnOnce('Globe projection does not support getBounds API, this API may behave unexpectedly."'),this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()||null}},{key:"setMaxBounds",value:function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}},{key:"setMinZoom",value:function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this._update()}},{key:"getLanguage",value:function(){return this._language}},{key:"setLanguage",value:function(t){if(this._language="auto"===t?e.window.navigator.language:t,this.style)for(var n in this.style._sourceCaches){var r=this.style._sourceCaches[n]._source;r._setLanguage&&r._setLanguage(this._language)}var i,a=d(this._controls);try{for(a.s();!(i=a.n()).done;){var o=i.value;o._setLanguage&&o._setLanguage(this._language)}}catch(s){a.e(s)}finally{a.f()}return this}},{key:"getWorldview",value:function(){return this._worldview}},{key:"setWorldview",value:function(e){if(this._worldview=e,this.style)for(var t in this.style._sourceCaches){var n=this.style._sourceCaches[t]._source;n._setWorldview&&n._setWorldview(e)}return this}},{key:"getProjection",value:function(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}},{key:"_showingGlobe",value:function(){return"globe"===this.transform.projection.name}},{key:"setProjection",value:function(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}},{key:"_updateProjectionTransition",value:function(){if("globe"===this.getProjection().name){var t,n=this.transform,r=n.projection.name;"globe"===r&&n.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(n.setMercatorFromTransition(),t=!0):"mercator"===r&&n.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(n.setProjection({name:"globe"}),t=!0),t&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}}},{key:"_prioritizeAndUpdateProjection",value:function(e,t){return this._updateProjection(e||t||{name:"mercator"})}},{key:"_updateProjection",value:function(t){var n;if(n="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),n){for(var r in this.painter.clearBackgroundTiles(),this.style._sourceCaches)this.style._sourceCaches[r].clearTiles();this._update(!0)}return this}},{key:"project",value:function(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}},{key:"_createDelegatedListener",value:function(e,t,n){var i=this;if("mouseenter"===e||"mouseover"===e){var a=!1,o=function(r){var o=t.filter((function(e){return i.getLayer(e)})),s=o.length?i.queryRenderedFeatures(r.point,{layers:o}):[];s.length?a||(a=!0,n.call(i,new bi(e,i,r.originalEvent,{features:s}))):a=!1},s=function(){a=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:o,mouseout:s}}}if("mouseleave"===e||"mouseout"===e){var l=!1,u=function(r){var a=t.filter((function(e){return i.getLayer(e)}));(a.length?i.queryRenderedFeatures(r.point,{layers:a}):[]).length?l=!0:l&&(l=!1,n.call(i,new bi(e,i,r.originalEvent)))},c=function(t){l&&(l=!1,n.call(i,new bi(e,i,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:u,mouseout:c}}}var h=function(e){var r=t.filter((function(e){return i.getLayer(e)})),a=r.length?i.queryRenderedFeatures(e.point,{layers:r}):[];a.length&&(e.features=a,n.call(i,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:r({},e,h)}}},{key:"on",value:function(e,t,n){if(void 0===n)return o(s(c.prototype),"on",this).call(this,e,t);Array.isArray(t)||(t=[t]);var r=this._createDelegatedListener(e,t,n);for(var i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r),r.delegates)this.on(i,r.delegates[i]);return this}},{key:"once",value:function(e,t,n){if(void 0===n)return o(s(c.prototype),"once",this).call(this,e,t);Array.isArray(t)||(t=[t]);var r=this._createDelegatedListener(e,t,n);for(var i in r.delegates)this.once(i,r.delegates[i]);return this}},{key:"off",value:function(e,t,n){var r=this;if(void 0===n)return o(s(c.prototype),"off",this).call(this,e,t);t=new Set(Array.isArray(t)?t:[t]);var i=function(e,t){if(e.size!==t.size)return!1;var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!t.has(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0},a=this._delegatedListeners?this._delegatedListeners[e]:void 0;return a&&function(e){for(var a=0;a<e.length;a++){var o=e[a];if(o.listener===n&&i(o.layers,t)){for(var s in o.delegates)r.off(s,o.delegates[s]);return e.splice(a,1),r}}}(a),this}},{key:"queryRenderedFeatures",value:function(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"queryTerrainElevation",value:function(t,n){var r=this.transform.elevation;return r?(n=e.extend({},{exaggerated:!0},n),r.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}},{key:"setStyle",value:function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new pn(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new pn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(t,n){var r=this;if("string"==typeof t){var i=this._requestManager.normalizeStyleURL(t),a=this._requestManager.transformRequest(i,e.ResourceType.Style);e.getJSON(a,(function(t,i){t?r.fire(new e.ErrorEvent(t)):i&&r._updateDiff(i,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}},{key:"_updateDiff",value:function(t,n){try{this.style.setState(t)&&this._update(!0)}catch(u){e.warnOnce("Unable to perform style diff: ".concat(u.message||u.error||u,".  Rebuilding the style from scratch.")),this._updateStyle(t,n)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style._sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.pixelRatio,a=void 0===i?1:i,o=r.sdf,s=void 0!==o&&o,l=r.stretchX,u=r.stretchY,c=r.content;if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){var h=e.exported.getImageData(n),d=h.width,f=h.height,p=h.data;this.style.addImage(t,{data:new e.RGBAImage({width:d,height:f},p),pixelRatio:a,stretchX:l,stretchY:u,content:c,sdf:s,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{var m=n.width,v=n.height,g=n;this.style.addImage(t,{data:new e.RGBAImage({width:m,height:v},new Uint8Array(g.data)),pixelRatio:a,stretchX:l,stretchY:u,content:c,sdf:s,version:0,userImage:g}),g.onAdd&&g.onAdd(this,t)}}},{key:"updateImage",value:function(t,n){var r=this.style.getImage(t);if(r){var i=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,a=i.width,o=i.height;void 0!==a&&void 0!==o?a===r.data.width&&o===r.data.height?(r.data.replace(i.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,r)):this.fire(new e.ErrorEvent(new Error("The width and height of the updated image (".concat(a,", ").concat(o,")\n                must be that same as the previous version of the image\n                (").concat(r.data.width,", ").concat(r.data.height,")")))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}else this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}},{key:"hasImage",value:function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),(function(t,r){n(t,r instanceof e.window.HTMLImageElement?e.exported.getImageData(r):r)}))}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}},{key:"setFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,r),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}},{key:"getTerrain",value:function(){return this.style?this.style.getTerrain():null}},{key:"setFog",value:function(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}},{key:"getFog",value:function(){return this.style?this.style.getFog():null}},{key:"_queryFogOpacity",value:function(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"_updateContainerDimensions",value:function(){if(this._container){for(var t,n,r,i=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300,o=this._container;o&&(!n||!r);){var s=e.window.getComputedStyle(o).transform;s&&"none"!==s&&((t=s.match(/matrix.*\((.+)\)/)[1].split(", "))[0]&&"0"!==t[0]&&"1"!==t[0]&&(n=t[0]),t[3]&&"0"!==t[3]&&"1"!==t[3]&&(r=t[3])),o=o.parentElement}this._containerWidth=n?Math.abs(i/n):i,this._containerHeight=r?Math.abs(a/r):a}}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=y("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=y("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=y("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);var n=this._controlContainer=y("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){r[e]=y("div","mapboxgl-ctrl-".concat(e),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(t,n){var r=e.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(n),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(n,"px")}},{key:"_addMarker",value:function(e){this._markers.push(e)}},{key:"_removeMarker",value:function(e){var t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}},{key:"_setupPainter",value:function(){var t=this,r=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);i?(e.storeAuthState(i,!0),this.painter=new Yr(i,this.transform),this.on("data",(function(e){"source"===e.dataType&&t.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(i)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}},{key:"_contextRestored",value:function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_requestDomTask",value:function(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}},{key:"_render",value:function(t){var n,r=this,i=this.painter.context.extTimerQuery,a=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),!this._removed){this._updateProjectionTransition();var o=!1,s=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var l=this.transform.zoom,u=this.transform.pitch,c=e.exported.now();this.style.zoomHistory.update(l,c);var h=new e.EvaluationParameters(l,{now:c,fadeDuration:s,pitch:u,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),d=h.crossFadingFactor();1===d&&d===this._crossFadingFactor||(o=!0,this._crossFadingFactor=d),this.style.update(h)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);var f=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),f=this._updateAverageElevation(a),this.style._updateSources(this.transform),this._forceMarkerUpdate()):f=this._updateAverageElevation(a),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){var p=e.exported.now()-a;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((function(){var t=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),r.fire(new e.Event("gpu-timing-frame",{cpuTime:p,gpuTime:t})),e.window.performance.mark("frame-gpu",{startTime:a,detail:{gpuTime:t}})}),50)}if(this.listens("gpu-timing-layer")){var m=this.painter.collectGpuTimers();setTimeout((function(){var t=r.painter.queryGpuTimers(m);r.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}if(this.listens("gpu-timing-deferred-render")){var v=this.painter.collectDeferredRenderGpuQueries();setTimeout((function(){var t=r.painter.queryGpuTimeDeferredRender(v);r.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:t}))}),50)}var g=this._sourcesDirty||this._styleDirty||this._placementDirty||f;if(g||this._repaint)this.triggerRepaint();else{var y=!this.isMoving()&&this.loaded();if(y&&(f=this._updateAverageElevation(a,!0)),f)this.triggerRepaint();else if(this._triggerFrame(!1),y&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){var _=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:_})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||g||(this._fullyLoaded=!0,this._authenticate())}}},{key:"_forceMarkerUpdate",value:function(){var e,t=d(this._markers);try{for(t.s();!(e=t.n()).done;)e.value._update()}catch(n){t.e(n)}finally{t.f()}}},{key:"_updateAverageElevation",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(e){return t.transform.averageElevation=e,t._update(!1),!0};if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((n||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){var i=this.transform.averageElevation,a=this.transform.sampleAverageElevation(),o=!1;this.transform.elevation&&(o=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(a)?a=0:this._averageElevationLastSampledAt=e;var s=Math.abs(i-a);if(s>1){if(this._isInitialLoad||o)return this._averageElevation.jumpTo(a),r(a);this._averageElevation.easeTo(a,e,300)}else if(s>1e-4)return this._averageElevation.jumpTo(a),r(a)}return!!this._averageElevation.isEasing(e)&&r(this._averageElevation.getValue(e))}},{key:"_authenticate",value:function(){var t=this;e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(n){if(n&&(n.message===e.AUTH_ERR_MSG||401===n.status)){var r=t.painter.context.gl;e.storeAuthState(r,!1),t._logoControl instanceof ca&&t._logoControl._updateLogo(),r&&r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT),t._silenceAuthErrors||t.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}},{key:"_calculateSpeedIndex",value:function(){var e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());var n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}},{key:"_canvasPixelComparison",value:function(e,t,n){for(var r=n[1]-n[0],i=e.length/4,a=0;a<t.length;a++){for(var o=t[a],s=0,l=0;l<o.length;l+=4)o[l]===e[l]&&o[l+1]===e[l+1]&&o[l+2]===e[l+2]&&o[l+3]===e[l+3]&&(s+=1);r+=(n[a+2]-n[a+1])*(1-s/i)}return r}},{key:"remove",value:function(){this._hash&&this._hash.remove();var t,n=d(this._controls);try{for(n.s();!(t=n.n()).done;)t.value.onRemove(this)}catch(i){n.e(i)}finally{n.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),ya(this._canvasContainer),ya(this._controlContainer),ya(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(t){var n=this;this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((function(e){var t=!!n._renderNextFrame;n._frame=null,n._renderNextFrame=null,t&&n._render(e)})))}},{key:"_preloadTiles",value:function(t){var n=this,r=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(r,(function(e,n){return e._preloadTiles(t,n)}),(function(){n.triggerRepaint()})),this}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"showTerrainWireframe",get:function(){return!!this._showTerrainWireframe},set:function(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"_setCacheLimits",value:function(t,n){e.setCacheLimits(t,n)}},{key:"version",get:function(){return e.version}}]),c}(la),NavigationControl:function(){function t(n){var r=this;v(this,t),this.options=e.extend({},_a,n),this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){r._map&&r._map.zoomIn({},{originalEvent:e})})),y("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){r._map&&r._map.zoomOut({},{originalEvent:e})})),y("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){var t=r._map;t&&(r.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=y("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}return g(t,[{key:"_updateZoomButtons",value:function(){var e=this._map;if(e){var t=e.getZoom(),n=t===e.getMaxZoom(),r=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}}},{key:"_rotateCompassArrow",value:function(){var e=this,t=this._map;if(t){var n=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(t.transform.pitch,"deg) rotateZ(").concat(t.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(t.transform.angle*(180/Math.PI),"deg)");t._requestDomTask((function(){e._compassIcon&&(e._compassIcon.style.transform=n)}))}}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xa(e,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){var e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}},{key:"_createButton",value:function(e,t){var n=y("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},{key:"_setButtonTitle",value:function(e,t){if(this._map){var n=this._map._getUIString("NavigationControl.".concat(t));e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}}}]),t}(),GeolocateControl:function(t){p(r,t);var n=m(r);function r(t){var a;return v(this,r),(a=n.call(this)).options=e.extend({geolocation:e.window.navigator.geolocation},ba,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],i(a)),a._updateMarkerRotationThrottled=ci(a._updateMarkerRotation,20),a._numberOfWatches=0,a}return g(r,[{key:"onAdd",value:function(e){return this._map=e,this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}},{key:"_checkGeolocationSupport",value:function(t){var n=this;void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){n._supportsGeolocation="denied"!==e.state,t(n._supportsGeolocation)})):(this._supportsGeolocation=!!this.options.geolocation,t(this._supportsGeolocation))}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}},{key:"_updateCamera",value:function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),a=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),a,{geolocateSource:!0})}},{key:"_updateMarker",value:function(t){if(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var t=this._map.transform,n=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_updateMarkerRotation",value:function(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}},{key:"_onError",value:function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(t){var n=this;if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=y("button","mapboxgl-ctrl-geolocate",this._container),y("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y("div","mapboxgl-user-location"),this._dotElement.appendChild(y("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(y("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new pa({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=y("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==n._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new e.Event("trackuserlocationend")))}))}},{key:"_onDeviceOrientation",value:function(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}},{key:"trigger",value:function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_addDeviceOrientationListener",value:function(){var t=this,n=function(){e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",t._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e&&n()})).catch(console.error):n()}},{key:"_clearWatch",value:function(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),r}(e.Evented),AttributionControl:ua,ScaleControl:function(){function t(n){v(this,t),this.options=e.extend({},wa,n),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch(e){return!1}}()||(this._setScale=ka.bind(this)),e.bindAll(["_update","_setScale","setUnit"],this)}return g(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_update",value:function(){var e=this.options.maxWidth||100,t=this._map,n=t._containerHeight/2,r=t._containerWidth/2-e/2,i=t.unproject([r,n]),a=t.unproject([r+e,n]),o=i.distanceTo(a);if("imperial"===this.options.unit){var s=3.2808*o;s>5280?this._setScale(e,s/5280,"mile"):this._setScale(e,s,"foot")}else"nautical"===this.options.unit?this._setScale(e,o/1852,"nautical-mile"):o>=1e3?this._setScale(e,o/1e3,"kilometer"):this._setScale(e,o,"meter")}},{key:"_setScale",value:function(e,t,n){var r=this,i=Ta(t),a=i/t;this._map._requestDomTask((function(){r._container.style.width=e*a+"px",r._container.innerHTML="nautical-mile"!==n?new Intl.NumberFormat(r._language,{style:"unit",unitDisplay:"narrow",unit:n}).format(i):"".concat(i,"&nbsp;nm")}))}},{key:"onAdd",value:function(e){return this._map=e,this._language=e.getLanguage(),this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}},{key:"_setLanguage",value:function(e){this._language=e,this._update()}},{key:"setUnit",value:function(e){this.options.unit=e,this._update()}}]),t}(),FullscreenControl:function(){function t(n){v(this,t),this._fullscreen=!1,n&&n.container&&(n.container instanceof e.window.HTMLElement?this._container=n.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}return g(t,[{key:"onAdd",value:function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var t=this._fullscreenButton=y("button","mapboxgl-ctrl-fullscreen",this._controlContainer);y("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),t}(),Popup:function(t){p(r,t);var n=m(r);function r(t){var a;return v(this,r),(a=n.call(this)).options=e.extend(Object.create(Sa),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],i(a)),a._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[]),a}return g(r,[{key:"addTo",value:function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);var t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),this._map=void 0),this.fire(new e.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();var n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){this._trackPointer=!0,this._pos=null,this._update();var e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(t){return this.setDOMContent(e.window.document.createTextNode(t))}},{key:"setHTML",value:function(t){var n,r=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");for(i.innerHTML=t;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){var t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=y("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){var n=this._closeButton=y("button","mapboxgl-popup-close-button",t);n.type="button",n.setAttribute("aria-label","Close popup"),n.setAttribute("aria-hidden","true"),n.innerHTML="&#215;",n.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){return this._classList.add(e),this._updateClassList(),this}},{key:"removeClassName",value:function(e){return this._classList.delete(e),this._updateClassList(),this}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){var t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}},{key:"_onMouseEvent",value:function(e){this._update(e.point)}},{key:"_getAnchor",value:function(e){if(this.options.anchor)return this.options.anchor;var t=this._map,n=this._container,r=this._pos;if(!t||!n||!r)return"bottom";var i=n.offsetWidth,a=n.offsetHeight,o=r.x<i/2,s=r.x>t.transform.width-i/2;if(r.y+e<a)return o?"top-left":s?"top-right":"top";if(r.y>t.transform.height-a){if(o)return"bottom-left";if(s)return"bottom-right"}return o?"left":s?"right":"bottom"}},{key:"_updateClassList",value:function(){var e=this._container;if(e){var t=c(this._classList);t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}}},{key:"_update",value:function(t){var n=this,r=this._map,i=this._content;if(r&&(this._lngLat||this._trackPointer)&&i){var a=this._container;if(a||(a=this._container=y("div","mapboxgl-popup",r.getContainer()),this._tip=y("div","mapboxgl-popup-tip",a),a.appendChild(i)),this.options.maxWidth&&a.style.maxWidth!==this.options.maxWidth&&(a.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=da(this._lngLat,this._pos,r.transform)),!this._trackPointer||t){var o=this._pos=this._trackPointer&&t?t:r.project(this._lngLat),s=Ca(this.options.offset),l=this._anchor=this._getAnchor(s.y),u=Ca(this.options.offset,l),c=o.add(u).round();r._requestDomTask((function(){n._container&&l&&(n._container.style.transform="".concat(fa[l]," translate(").concat(c.x,"px,").concat(c.y,"px)"))}))}if(!this._marker&&r._showingGlobe()){var h=e.isLngLatBehindGlobe(r.transform,this._lngLat)?0:1;this._setOpacity(h)}this._updateClassList()}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(Ea);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}},{key:"_setOpacity",value:function(e){this._container&&(this._container.style.opacity="".concat(e)),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}}]),r}(e.Evented),Marker:pa,Style:pn,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:ti,Evented:e.Evented,config:e.config,prewarm:function(){et().acquire(Qe)},clearPrewarmedResources:function(){var e=Je;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Qe),Je=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return $e.workerCount},set workerCount(e){$e.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return Aa})),n}()},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var z=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=z&&e[z]||e["@@iterator"])?e:null}var D,O=Object.assign;function N(e){if(void 0===D)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var F=!1;function j(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function V(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function Z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case S:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case M:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case B:return null!==(t=e.displayName||null)?t:Z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return Z(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return O({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return O({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ge=O({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Te=null;function Se(e){if(e=_i(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),we(e.stateNode,e.type,t))}}function Ee(e){ke?Te?Te.push(e):Te=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Te;if(Te=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function Re(){}var Me=!1;function Be(e,t,n){if(Me)return e(t,n);Me=!0;try{return Ae(e,t,n)}finally{Me=!1,(null!==ke||null!==Te)&&(Re(),Ce())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ie=!1;if(c)try{var ze={};Object.defineProperty(ze,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",ze,ze),window.removeEventListener("test",ze,ze)}catch(ce){Ie=!1}function Le(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var De=!1,Oe=null,Ne=!1,Fe=null,je={onError:function(e){De=!0,Oe=e}};function Ve(e,t,n,r,i,a,o,s,l){De=!1,Oe=null,Le.apply(je,arguments)}function Ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(Ze(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ke=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,kt,Tt,St,Et=!1,Ct=[],At=null,Rt=null,Mt=null,Bt=new Map,Pt=new Map,It=[],zt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Bt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Dt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ot(e){var t=yi(e.target);if(null!==t){var n=Ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void St(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ft(e,t,n){Nt(e)&&n.delete(t)}function jt(){Et=!1,null!==At&&Nt(At)&&(At=null),null!==Rt&&Nt(Rt)&&(Rt=null),null!==Mt&&Nt(Mt)&&(Mt=null),Bt.forEach(Ft),Pt.forEach(Ft)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function Zt(e){function t(t){return Vt(t,e)}if(0<Ct.length){Vt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==Rt&&Vt(Rt,e),null!==Mt&&Vt(Mt,e),Bt.forEach(t),Pt.forEach(t),n=0;n<It.length;n++)(r=It[n]).blockedOn===e&&(r.blockedOn=null);for(;0<It.length&&null===(n=It[0]).blockedOn;)Ot(n),null===n.blockedOn&&It.shift()}var Ut=x.ReactCurrentBatchConfig,Gt=!0;function Ht(e,t,n,r){var i=_t,a=Ut.transition;Ut.transition=null;try{_t=1,Wt(e,t,n,r)}finally{_t=i,Ut.transition=a}}function qt(e,t,n,r){var i=_t,a=Ut.transition;Ut.transition=null;try{_t=4,Wt(e,t,n,r)}finally{_t=i,Ut.transition=a}}function Wt(e,t,n,r){if(Gt){var i=Kt(e,t,n,r);if(null===i)Gr(e,t,r,Xt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Dt(At,e,t,n,r,i),!0;case"dragenter":return Rt=Dt(Rt,e,t,n,r,i),!0;case"mouseover":return Mt=Dt(Mt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Bt.set(a,Dt(Bt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Dt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<zt.indexOf(e)){for(;null!==i;){var a=_i(i);if(null!==a&&bt(a),null===(a=Kt(e,t,n,r))&&Gr(e,t,r,Xt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Xt=null;function Kt(e,t,n,r){if(Xt=null,null!==(e=yi(e=be(r))))if(null===(t=Ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,$t=null;function en(){if($t)return $t;var e,t,n=Qt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return O(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),hn=O({},un,{view:0,detail:0}),dn=an(hn),fn=O({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),mn=an(O({},fn,{dataTransfer:0})),vn=an(O({},hn,{relatedTarget:0})),gn=an(O({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=O({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(yn),xn=an(O({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Sn(){return Tn}var En=O({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(En),An=an(O({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=an(O({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Mn=an(O({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bn=O({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Bn),In=[9,13,27,32],zn=c&&"CompositionEvent"in window,Ln=null;c&&"documentMode"in document&&(Ln=document.documentMode);var Dn=c&&"TextEvent"in window&&!Ln,On=c&&(!zn||Ln&&8<Ln&&11>=Ln),Nn=String.fromCharCode(32),Fn=!1;function jn(e,t){switch(e){case"keyup":return-1!==In.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Zn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Hn(e,t,n,r){Ee(r),0<(t=qr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qn=null,Wn=null;function Xn(e){Nr(e,0)}function Kn(e){if(W(xi(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(c){var Qn;if(c){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Qn=$n}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){qn&&(qn.detachEvent("onpropertychange",nr),Wn=qn=null)}function nr(e){if("value"===e.propertyName&&Kn(Wn)){var t=[];Hn(t,Wn,e,be(e)),Be(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(qn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Wn)}function ar(e,t){if("click"===e)return Kn(t)}function or(e,t){if("input"===e||"change"===e)return Kn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,_r=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==X(r)||("selectionStart"in(r=vr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=qr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},kr={},Tr={};function Sr(e){if(kr[e])return kr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return kr[e]=n[t];return e}c&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Er=Sr("animationend"),Cr=Sr("animationiteration"),Ar=Sr("animationstart"),Rr=Sr("transitionend"),Mr=new Map,Br="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Mr.set(e,t),l(t,[e])}for(var Ir=0;Ir<Br.length;Ir++){var zr=Br[Ir];Pr(zr.toLowerCase(),"on"+(zr[0].toUpperCase()+zr.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Cr,"onAnimationIteration"),Pr(Ar,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Rr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Or(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(Ve.apply(this,arguments),De){if(!De)throw Error(a(198));var c=Oe;De=!1,Oe=null,Ne||(Ne=!0,Fe=c)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Or(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Or(i,s,u),a=l}}}if(Ne)throw e=Fe,Ne=!1,Fe=null,e}function Fr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function Zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Dr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,jr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Yt(t)){case 1:var i=Ht;break;case 4:i=qt;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Be((function(){var r=a,i=be(n),o=[];e:{var s=Mr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Er:case Cr:case Ar:l=gn;break;case Rr:l=Mn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&c.push(Hr(p,m,f)))),h)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=Ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:xi(l),f=null==u?s:xi(u),(s=new c(m,p+"leave",l,n,i)).target=h,s.relatedTarget=f,m=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Wr(f))p++;for(f=0,m=d;m;m=Wr(m))f++;for(;0<p-f;)c=Wr(c),p--;for(;0<f-p;)d=Wr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Wr(c),d=Wr(d)}c=null}else c=null;null!==l&&Xr(o,s,l,c,!1),null!==u&&null!==h&&Xr(o,h,u,c,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Yn;else if(Gn(s))if(Jn)v=or;else{v=ir;var g=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ar);switch(v&&(v=v(e,r))?Hn(o,v,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?xi(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var y;if(zn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Zn?jn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(On&&"ko"!==n.locale&&(Zn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Zn&&(y=en()):(Qt="value"in(Jt=i)?Jt.value:Jt.textContent,Zn=!0)),0<(g=qr(r,_)).length&&(_=new xn(_,e,null,n,i),o.push({event:_,listeners:g}),y?_.data=y:null!==(y=Vn(n))&&(_.data=y))),(y=Dn?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Zn)return"compositionend"===e||!zn&&jn(e,t)?(e=en(),$t=Qt=Jt=null,Zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return On&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=qr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Nr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Pe(n,a))&&o.unshift(Hr(n,l,s)):i||null!=(l=Pe(n,a))&&o.push(Hr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Kr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Kr,"\n").replace(Yr,"")}function Qr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,vi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[fi]||null}var wi=[],ki=-1;function Ti(e){return{current:e}}function Si(e){0>ki||(e.current=wi[ki],wi[ki]=null,ki--)}function Ei(e,t){ki++,wi[ki]=e.current,e.current=t}var Ci={},Ai=Ti(Ci),Ri=Ti(!1),Mi=Ci;function Bi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ii(){Si(Ri),Si(Ai)}function zi(e,t,n){if(Ai.current!==Ci)throw Error(a(168));Ei(Ai,t),Ei(Ri,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,U(e)||"Unknown",i));return O({},n,r)}function Di(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Mi=Ai.current,Ei(Ai,e),Ei(Ri,Ri.current),!0}function Oi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Mi),r.__reactInternalMemoizedMergedChildContext=e,Si(Ri),Si(Ai),Ei(Ai,e)):Si(Ri),Ei(Ri,n)}var Ni=null,Fi=!1,ji=!1;function Vi(e){null===Ni?Ni=[e]:Ni.push(e)}function Zi(){if(!ji&&null!==Ni){ji=!0;var e=0,t=_t;try{var n=Ni;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ni=null,Fi=!1}catch(i){throw null!==Ni&&(Ni=Ni.slice(e+1)),We($e,Zi),i}finally{_t=t,ji=!1}}return null}var Ui=[],Gi=0,Hi=null,qi=0,Wi=[],Xi=0,Ki=null,Yi=1,Ji="";function Qi(e,t){Ui[Gi++]=qi,Ui[Gi++]=Hi,Hi=e,qi=t}function $i(e,t,n){Wi[Xi++]=Yi,Wi[Xi++]=Ji,Wi[Xi++]=Ki,Ki=e;var r=Yi;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else Yi=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Qi(e,1),$i(e,1,0))}function ta(e){for(;e===Hi;)Hi=Ui[--Gi],Ui[Gi]=null,qi=Ui[--Gi],Ui[Gi]=null;for(;e===Ki;)Ki=Wi[--Xi],Wi[Xi]=null,Ji=Wi[--Xi],Wi[Xi]=null,Yi=Wi[--Xi],Wi[Xi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Bu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ki?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Bu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw da(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ra;e;)e=ui(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ma=x.ReactCurrentBatchConfig;function va(e,t){if(e&&e.defaultProps){for(var n in t=O({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ti(null),ya=null,_a=null,xa=null;function ba(){xa=_a=ya=null}function wa(e){var t=ga.current;Si(ga),e._currentValue=t}function ka(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){ya=e,xa=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(xa!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ya)throw Error(a(308));_a=e,ya.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Ea=null;function Ca(e){null===Ea?Ea=[e]:Ea.push(e)}function Aa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ca(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ra(e,r)}function Ra(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ma=!1;function Ba(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function za(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ra(e,n)}return null===(i=r.interleaved)?(t.next=t,Ca(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ra(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Da(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Oa(e,t,n,r){var i=e.updateQueue;Ma=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(o=0,c=u=l=null,s=a;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=O({},h,d);break e;case 2:Ma=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=h}}function Na(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Fa=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:O({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&Ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,i))&&(nu(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=za(e,a,i))&&(nu(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=za(e,i,r))&&(nu(t,e,r,n),La(t,e,r))}};function Za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function Ua(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Mi:Ai.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Bi(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Fa,Ba(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Mi:Ai.current,i.context=Bi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Oa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Fa&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xa(e){return(0,e._init)(e._payload)}function Ka(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Iu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ou(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Xa(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=zu(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Nu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ou(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=zu(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case w:return(t=Nu(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lu(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?u(e,t,n,r):null;case w:return n.key===i?c(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Wa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,h=a,m=a=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=f(i,h,s[m],l);if(null===g){null===h&&(h=v);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g,h=v}if(m===s.length)return n(i,h),ia&&Qi(i,m),u;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(a=o(h,a,m),null===c?u=h:c.sibling=h,c=h);return ia&&Qi(i,m),u}for(h=r(i,h);m<s.length;m++)null!==(v=p(h,i,m,s[m],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v);return e&&h.forEach((function(e){return t(i,e)})),ia&&Qi(i,m),u}function v(i,s,l,u){var c=L(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var _=f(i,m,y.value,u);if(null===_){null===m&&(m=g);break}e&&m&&null===_.alternate&&t(i,m),s=o(_,s,v),null===h?c=_:h.sibling=_,h=_,m=g}if(y.done)return n(i,m),ia&&Qi(i,v),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=d(i,y.value,u))&&(s=o(y,s,v),null===h?c=y:h.sibling=y,h=y);return ia&&Qi(i,v),c}for(m=r(i,m);!y.done;v++,y=l.next())null!==(y=p(m,i,v,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),ia&&Qi(i,v),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===k){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===P&&Xa(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=qa(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===k?((a=Lu(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=zu(o.type,o.key,o.props,null,r.mode,l)).ref=qa(r,a,o),l.return=r,r=l)}return s(r);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Nu(o,r.mode,l)).return=r,r=a}return s(r);case P:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(L(o))return v(r,a,o,l);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ou(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var Ya=Ka(!0),Ja=Ka(!1),Qa={},$a=Ti(Qa),eo=Ti(Qa),to=Ti(Qa);function no(e){if(e===Qa)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei($a,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si($a),Ei($a,t)}function io(){Si($a),Si(eo),Si(to)}function ao(e){no(to.current);var t=no($a.current),n=le(t,e.type);t!==n&&(Ei(eo,e),Ei($a,n))}function oo(e){eo.current===e&&(Si($a),Si(eo))}var so=Ti(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=x.ReactCurrentDispatcher,fo=x.ReactCurrentBatchConfig,po=0,mo=null,vo=null,go=null,yo=!1,_o=!1,xo=0,bo=0;function wo(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function To(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),_o){o=0;do{if(_o=!1,xo=0,25<=o)throw Error(a(301));o+=1,go=vo=null,t.updateQueue=null,ho.current=us,e=n(r,i)}while(_o)}if(ho.current=os,t=null!==vo&&null!==vo.next,po=0,go=vo=mo=null,yo=!1,t)throw Error(a(300));return e}function So(){var e=0!==xo;return xo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?mo.memoizedState=go=e:go=go.next=e,go}function Co(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?mo.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?mo.memoizedState=go=e:go=go.next=e}return go}function Ao(e,t){return"function"===typeof t?t(e):t}function Ro(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=vo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((po&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,mo.lanes|=h,Dl|=h}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Dl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Mo(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Bo(){}function Po(e,t){var n=mo,r=Co(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,xs=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Fo(9,zo.bind(null,n,r,i,t),void 0,null),null===Rl)throw Error(a(349));0!==(30&po)||Io(n,t,i)}return i}function Io(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function zo(e,t,n,r){t.value=n,t.getSnapshot=r,Do(t)&&Oo(e)}function Lo(e,t,n){return n((function(){Do(t)&&Oo(e)}))}function Do(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Oo(e){var t=Ra(e,1);null!==t&&nu(t,e,1,-1)}function No(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function Fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return Co().memoizedState}function Vo(e,t,n,r){var i=Eo();mo.flags|=e,i.memoizedState=Fo(1|t,n,void 0,void 0===r?null:r)}function Zo(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==vo){var o=vo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Fo(t,n,a,r))}mo.flags|=e,i.memoizedState=Fo(1|t,n,a,r)}function Uo(e,t){return Vo(8390656,8,e,t)}function Go(e,t){return Zo(2048,8,e,t)}function Ho(e,t){return Zo(4,2,e,t)}function qo(e,t){return Zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Zo(4,4,Wo.bind(null,t,e),n)}function Ko(){}function Yo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,Dl|=n,e.baseState=!0),t)}function $o(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function es(){return Co().memoizedState}function ts(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Aa(e,t,n,r))){nu(n,e,r,eu()),as(n,t,r)}}function ns(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ca(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Aa(e,t,i,r))&&(nu(n,e,r,i=eu()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function is(e,t){_o=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Sa,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:No,useDebugValue:Ko,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=$o.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Rl)throw Error(a(349));0!==(30&po)||Io(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Fo(9,zo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Rl.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Go,useImperativeHandle:Xo,useInsertionEffect:Ho,useLayoutEffect:qo,useMemo:Jo,useReducer:Ro,useRef:jo,useState:function(){return Ro(Ao)},useDebugValue:Ko,useDeferredValue:function(e){return Qo(Co(),vo.memoizedState,e)},useTransition:function(){return[Ro(Ao)[0],Co().memoizedState]},useMutableSource:Bo,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1},us={readContext:Sa,useCallback:Yo,useContext:Sa,useEffect:Go,useImperativeHandle:Xo,useInsertionEffect:Ho,useLayoutEffect:qo,useMemo:Jo,useReducer:Mo,useRef:jo,useState:function(){return Mo(Ao)},useDebugValue:Ko,useDeferredValue:function(e){var t=Co();return null===vo?t.memoizedState=e:Qo(t,vo.memoizedState,e)},useTransition:function(){return[Mo(Ao)[0],Co().memoizedState]},useMutableSource:Bo,useSyncExternalStore:Po,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Hl=r),ds(0,t)},n}function ms(e,t,n){(n=Ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Su.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ia(-1,1)).tag=2,za(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _s=x.ReactCurrentOwner,xs=!1;function bs(e,t,n,r){t.child=null===e?Ja(t,null,n,r):Ya(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Ta(t,i),r=To(e,t,n,r,a,i),n=So(),null===e||xs?(ia&&n&&ea(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function ks(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=zu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ts(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Iu(a,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(xs=!0)}}return Cs(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Il,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Il,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Il,Pl),Pl|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Il,Pl),Pl|=r;return bs(e,t,i,n),t.child}function Es(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var a=Pi(n)?Mi:Ai.current;return a=Bi(t,a),Ta(t,i),n=To(e,t,n,r,a,i),r=So(),null===e||xs?(ia&&r&&ea(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function As(e,t,n,r,i){if(Pi(n)){var a=!0;Di(t)}else a=!1;if(Ta(t,i),null===t.stateNode)Us(e,t),Ua(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Sa(u):u=Bi(t,u=Pi(n)?Mi:Ai.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Ga(t,o,r,u),Ma=!1;var d=t.memoizedState;o.state=d,Oa(t,r,o,i),l=t.memoizedState,s!==r||d!==l||Ri.current||Ma?("function"===typeof c&&(ja(t,n,c,r),l=t.memoizedState),(s=Ma||Za(t,n,s,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:va(t.type,s),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Sa(l):l=Bi(t,l=Pi(n)?Mi:Ai.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&Ga(t,o,r,l),Ma=!1,d=t.memoizedState,o.state=d,Oa(t,r,o,i);var p=t.memoizedState;s!==h||d!==p||Ri.current||Ma?("function"===typeof f&&(ja(t,n,f,r),p=t.memoizedState),(u=Ma||Za(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Rs(e,t,n,r,a,i)}function Rs(e,t,n,r,i,a){Es(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Oi(t,n,!1),Gs(e,t,a);r=t.stateNode,_s.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&Oi(t,n,!0),t.child}function Ms(e){var t=e.stateNode;t.pendingContext?zi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&zi(0,t.context,!1),ro(e,t.containerInfo)}function Bs(e,t,n,r,i){return fa(),pa(i),t.flags|=256,bs(e,t,n,r),t.child}var Ps,Is,zs,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Du(l,i,0,null),e=Lu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ds(n),t.memoizedState=Ls,e):Ns(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Du({mode:"visible",children:r.children},i,0,null),(o=Lu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,s),t.child.memoizedState=Ds(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=Rl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ra(e,i),nu(r,e,i,-1))}return mu(),Fs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Xi++]=Yi,Wi[Xi++]=Ji,Wi[Xi++]=Ki,Yi=e.id,Ji=e.overflow,Ki=t),(t=Ns(t,r.children)).flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Iu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Iu(r,s):(s=Lu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ds(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Iu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ns(e,t){return(t=Du({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Ns(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ka(e.return,t,n)}function Vs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,a);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Us(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Iu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Iu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hs(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ws(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return Pi(t.type)&&Ii(),qs(t),null;case 3:return r=t.stateNode,io(),Si(Ri),Si(Ai),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ou(aa),aa=null))),qs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Is(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return qs(t),null}if(e=no($a.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":Y(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":ie(r,o),Fr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":q(r),$(r,o,!0);break;case"textarea":q(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ps(e,t),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),i=r;break;case"iframe":case"object":case"embed":Fr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Fr(Lr[i],e);i=r;break;case"source":Fr("error",e),i=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),i=r;break;case"details":Fr("toggle",e),i=r;break;case"input":Y(e,r),i=K(e,r),Fr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=O({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Fr("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Fr("scroll",e):null!=c&&_(e,o,c,l))}switch(n){case"input":q(e),$(e,r,!1);break;case"textarea":q(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)zs(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return qs(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))da(),fa(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[di]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==aa&&(ou(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===zl&&(zl=3):mu())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return io(),null===e&&Zr(t.stateNode.containerInfo),qs(t),null;case 10:return wa(t.type._context),qs(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Hs(o,!1);else{if(0!==zl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Hs(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Zl&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return qs(t),null}else 2*Je()-o.renderingStartTime>Zl&&1073741824!==n&&(t.flags|=128,r=!0,Hs(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=so.current,Ei(so,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xs(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ii(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ri),Si(Ai),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Is=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=K(e,i),r=K(e,r),o=[];break;case"select":i=O({},i,{value:void 0}),r=O({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Fr("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},zs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Ys=!1,Js="function"===typeof WeakSet?WeakSet:Set,Qs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tu(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Tu(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[vi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||$s(n,t);case 6:var r=cl,i=hl;cl=null,dl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Zt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ys&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tu(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,dl(e,t,n),Ys=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));fl(o,s,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Tu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),gl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(v){Tu(e,e.return,v)}try{nl(5,e,e.return)}catch(v){Tu(e,e.return,v)}}break;case 1:ml(t,e),gl(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(ml(t,e),gl(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(v){Tu(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),_e(l,s);var c=_e(l,o);for(s=0;s<u.length;s+=2){var h=u[s],d=u[s+1];"style"===h?ve(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):_(i,h,d,c)}switch(l){case"input":Q(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(v){Tu(e,e.return,v)}}break;case 6:if(ml(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){Tu(e,e.return,v)}}break;case 3:if(ml(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Zt(t.containerInfo)}catch(v){Tu(e,e.return,v)}break;case 4:default:ml(t,e),gl(e);break;case 13:ml(t,e),gl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Je())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||h,ml(t,e),Ys=c):ml(t,e),gl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Qs=e,h=e.child;null!==h;){for(d=Qs=h;null!==Qs;){switch(p=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:$s(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Tu(r,n,v)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){bl(d);continue}}null!==p?(p.return=f,Qs=p):bl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(v){Tu(e,e.return,v)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Tu(e,e.return,v)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),gl(e),4&r&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(s){Tu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qs=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var i=Qs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ks;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Ks;var u=Ys;if(Ks=o,(Ys=l)&&!u)for(Qs=i;null!==Qs;)l=(o=Qs).child,22===o.tag&&null!==o.memoizedState?wl(i):null!==l?(l.return=o,Qs=l):wl(i);for(;null!==a;)Qs=a,_l(a,t,n),a=a.sibling;Qs=i,Ks=s,Ys=u}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Qs=a):xl(e)}}function xl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:va(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Na(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Na(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Zt(d)}}}break;default:throw Error(a(163))}Ys||512&t.flags&&il(t)}catch(f){Tu(t,t.return,f)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function bl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Tu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tu(t,i,l)}}var a=t.return;try{il(t)}catch(l){Tu(t,a,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Tu(t,o,l)}}}catch(l){Tu(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var kl,Tl=Math.ceil,Sl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,Cl=x.ReactCurrentBatchConfig,Al=0,Rl=null,Ml=null,Bl=0,Pl=0,Il=Ti(0),zl=0,Ll=null,Dl=0,Ol=0,Nl=0,Fl=null,jl=null,Vl=0,Zl=1/0,Ul=null,Gl=!1,Hl=null,ql=null,Wl=!1,Xl=null,Kl=0,Yl=0,Jl=null,Ql=-1,$l=0;function eu(){return 0!==(6&Al)?Je():-1!==Ql?Ql:Ql=Je()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Bl?Bl&-Bl:null!==ma.transition?(0===$l&&($l=mt()),$l):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nu(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(a(185));gt(e,n,r),0!==(2&Al)&&e===Rl||(e===Rl&&(0===(2&Al)&&(Ol|=n),4===zl&&su(e,Bl)),ru(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Zl=Je()+500,Fi&&Zi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=dt(e,e===Rl?Bl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Fi=!0,Vi(e)}(lu.bind(null,e)):Vi(lu.bind(null,e)),oi((function(){0===(6&Al)&&Zi()})),n=null;else{switch(xt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ru(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Ql=-1,$l=0,0!==(6&Al))throw Error(a(327));var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=dt(e,e===Rl?Bl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var i=Al;Al|=2;var o=pu();for(Rl===e&&Bl===t||(Ul=null,Zl=Je()+500,du(e,t));;)try{yu();break}catch(l){fu(e,l)}ba(),Sl.current=o,Al=i,null!==Ml?t=0:(Rl=null,Bl=0,t=zl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=au(e,i))),1===t)throw n=Ll,du(e,0),su(e,r),ru(e,Je()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vu(e,r))&&(0!==(o=pt(e))&&(r=o,t=au(e,o))),1===t))throw n=Ll,du(e,0),su(e,r),ru(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bu(e,jl,Ul);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=Vl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bu.bind(null,e,jl,Ul),t);break}bu(e,jl,Ul);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(bu.bind(null,e,jl,Ul),r);break}bu(e,jl,Ul);break;default:throw Error(a(329))}}}return ru(e,Je()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=vu(e,t))&&(t=jl,jl=n,null!==t&&ou(t)),e}function ou(e){null===jl?jl=e:jl.push.apply(jl,e)}function su(e,t){for(t&=~Nl,t&=~Ol,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Al))throw Error(a(327));wu();var t=dt(e,0);if(0===(1&t))return ru(e,Je()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Ll,du(e,0),su(e,t),ru(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bu(e,jl,Ul),ru(e,Je()),null}function uu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Zl=Je()+500,Fi&&Zi())}}function cu(e){null!==Xl&&0===Xl.tag&&0===(6&Al)&&wu();var t=Al;Al|=1;var n=Cl.transition,r=_t;try{if(Cl.transition=null,_t=1,e)return e()}finally{_t=r,Cl.transition=n,0===(6&(Al=t))&&Zi()}}function hu(){Pl=Il.current,Si(Il)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ml)for(n=Ml.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ii();break;case 3:io(),Si(Ri),Si(Ai),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:wa(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Rl=e,Ml=e=Iu(e.current,null),Bl=Pl=t,zl=0,Ll=null,Nl=Ol=Dl=0,jl=Fl=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function fu(e,t){for(;;){var n=Ml;try{if(ba(),ho.current=os,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=vo=mo=null,_o=!1,xo=0,El.current=null,null===n||null===n.return){zl=1,Ll=t,Ml=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Bl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&vs(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(u),t.updateQueue=v}else m.add(u);break e}if(0===(1&t)){vs(o,c,t),mu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,l,0,t),pa(cs(u,l));break e}}o=u=cs(u,l),4!==zl&&(zl=2),null===Fl?Fl=[o]:Fl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Da(o,ps(0,u,t));break e;case 1:l=u;var y=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===ql||!ql.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Da(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}xu(n)}catch(x){t=x,Ml===n&&null!==n&&(Ml=n=n.return);continue}break}}function pu(){var e=Sl.current;return Sl.current=os,null===e?os:e}function mu(){0!==zl&&3!==zl&&2!==zl||(zl=4),null===Rl||0===(268435455&Dl)&&0===(268435455&Ol)||su(Rl,Bl)}function vu(e,t){var n=Al;Al|=2;var r=pu();for(Rl===e&&Bl===t||(Ul=null,du(e,t));;)try{gu();break}catch(i){fu(e,i)}if(ba(),Al=n,Sl.current=r,null!==Ml)throw Error(a(261));return Rl=null,Bl=0,zl}function gu(){for(;null!==Ml;)_u(Ml)}function yu(){for(;null!==Ml&&!Ke();)_u(Ml)}function _u(e){var t=kl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?xu(e):Ml=t,El.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ws(n,t,Pl)))return void(Ml=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Ml=n);if(null===e)return zl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ml=t);Ml=t=e}while(null!==t);0===zl&&(zl=5)}function bu(e,t,n){var r=_t,i=Cl.transition;try{Cl.transition=null,_t=1,function(e,t,n,r){do{wu()}while(null!==Xl);if(0!==(6&Al))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Rl&&(Ml=Rl=null,Bl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Wl||(Wl=!0,Ru(tt,(function(){return wu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var s=_t;_t=1;var l=Al;Al|=4,El.current=null,function(e,t){if(ei=Gt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=s),f===o&&++h===r&&(u=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:va(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(b){Tu(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=tl,tl=!1}(e,n),vl(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Ye(),Al=l,_t=s,Cl.transition=o}else e.current=n;if(Wl&&(Wl=!1,Xl=e,Kl=i),0===(o=e.pendingLanes)&&(ql=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Hl,Hl=null,e;0!==(1&Kl)&&0!==e.tag&&wu(),0!==(1&(o=e.pendingLanes))?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Zi()}(e,t,n,r)}finally{Cl.transition=i,_t=r}return null}function wu(){if(null!==Xl){var e=xt(Kl),t=Cl.transition,n=_t;try{if(Cl.transition=null,_t=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Kl=0,0!==(6&Al))throw Error(a(331));var i=Al;for(Al|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qs=c;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Qs=d;else for(;null!==Qs;){var f=(h=Qs).sibling,p=h.return;if(al(h),h===c){Qs=null;break}if(null!==f){f.return=p,Qs=f;break}Qs=p}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Qs=y;break e}Qs=o.return}}var _=e.current;for(Qs=_;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=_;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(w){Tu(l,l.return,w)}if(l===s){Qs=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Qs=b;break e}Qs=l.return}}if(Al=i,Zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{_t=n,Cl.transition=t}}return!1}function ku(e,t,n){e=za(e,t=ps(0,t=cs(n,t),1),1),t=eu(),null!==e&&(gt(e,1,t),ru(e,t))}function Tu(e,t,n){if(3===e.tag)ku(e,e,n);else for(;null!==t;){if(3===t.tag){ku(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=za(t,e=ms(t,e=cs(n,e),1),1),e=eu(),null!==t&&(gt(t,1,e),ru(t,e));break}}t=t.return}}function Su(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Bl&n)===n&&(4===zl||3===zl&&(130023424&Bl)===Bl&&500>Je()-Vl?du(e,0):Nl|=n),ru(e,t)}function Eu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Ra(e,t))&&(gt(e,t,n),ru(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Eu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Eu(e,n)}function Ru(e,t){return We(e,t)}function Mu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bu(e,t,n,r){return new Mu(e,t,n,r)}function Pu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Iu(e,t){var n=e.alternate;return null===n?((n=Bu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Pu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Lu(n.children,i,o,t);case T:s=8,i|=8;break;case S:return(e=Bu(12,n,t,2|i)).elementType=S,e.lanes=o,e;case R:return(e=Bu(13,n,t,i)).elementType=R,e.lanes=o,e;case M:return(e=Bu(19,n,t,i)).elementType=M,e.lanes=o,e;case I:return Du(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case C:s=9;break e;case A:s=11;break e;case B:s=14;break e;case P:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Bu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lu(e,t,n,r){return(e=Bu(7,e,r,t)).lanes=n,e}function Du(e,t,n,r){return(e=Bu(22,e,r,t)).elementType=I,e.lanes=n,e.stateNode={isHidden:!1},e}function Ou(e,t,n){return(e=Bu(6,e,null,t)).lanes=n,e}function Nu(e,t,n){return(t=Bu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,r,i,a,o,s,l){return e=new Fu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Bu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ba(a),e}function Vu(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Zu(e){if(!e)return Ci;e:{if(Ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function Uu(e,t,n,r,i,a,o,s,l){return(e=ju(n,r,!0,e,0,a,0,s,l)).context=Zu(null),n=e.current,(a=Ia(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,za(n,a,i),e.current.lanes=i,gt(e,i,r),ru(e,r),e}function Gu(e,t,n,r){var i=t.current,a=eu(),o=tu(i);return n=Zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=za(i,t,o))&&(nu(e,i,o,a),La(e,i,o)),o}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wu(e,t){qu(e,t),(e=e.alternate)&&qu(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ms(t),fa();break;case 5:ao(t);break;case 1:Pi(t.type)&&Di(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Os(e,t,n):(Ei(so,1&so.current),null!==(e=Gs(e,t,n))?e.sibling:null);Ei(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Gs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ia&&0!==(1048576&t.flags)&&$i(t,qi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Us(e,t),e=t.pendingProps;var i=Bi(t,Ai.current);Ta(t,n),i=To(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Di(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ba(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=Rs(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Us(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===B)return 14}return 2}(r),e=va(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=ks(null,t,r,va(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:va(r,i),n);case 1:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:va(r,i),n);case 3:e:{if(Ms(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Oa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Bs(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Bs(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=Gs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Es(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Os(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:va(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ei(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ri.current){t=Gs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Ia(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),ka(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ka(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ta(t,n),r=r(i=Sa(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=va(r=t.type,t.pendingProps),ks(e,t,r,i=va(r.type,i),n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:va(r,i),Us(e,t),t.tag=1,Pi(r)?(e=!0,Di(t)):e=!1,Ta(t,n),Ua(t,r,i),Ha(t,r,i,n),Rs(null,t,r,!0,e,n);case 19:return Zs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Xu="function"===typeof reportError?reportError:function(e){console.error(e)};function Ku(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $u(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hu(o);s.call(e)}}Gu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hu(o);a.call(e)}}var o=Uu(t,r,e,0,null,!1,0,"",$u);return e._reactRootContainer=o,e[pi]=o.current,Zr(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hu(l);s.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",$u);return e._reactRootContainer=l,e[pi]=l.current,Zr(8===e.nodeType?e.parentNode:e),cu((function(){Gu(t,l,n,r)})),l}(n,t,e,i,r);return Hu(o)}Yu.prototype.render=Ku.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gu(e,t,null,null)},Yu.prototype.unmount=Ku.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Gu(null,e,null,null)})),t[pi]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<It.length&&0!==t&&t<It[n].priority;n++);It.splice(n,0,e),0===n&&Ot(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,Je()),0===(6&Al)&&(Zl=Je()+500,Zi()))}break;case 13:cu((function(){var t=Ra(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Wu(e,1)}},wt=function(e){if(13===e.tag){var t=Ra(e,134217728);if(null!==t)nu(t,e,134217728,eu());Wu(e,134217728)}},kt=function(e){if(13===e.tag){var t=tu(e),n=Ra(e,t);if(null!==n)nu(n,e,t,eu());Wu(e,t)}},Tt=function(){return _t},St=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));W(r),Q(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=uu,Re=cu;var tc={usingClientEntryPoint:!1,Events:[_i,xi,bi,Ee,Ce,uu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(t))throw Error(a(200));return Vu(e,t,null,n)},t.createRoot=function(e,t){if(!Ju(e))throw Error(a(299));var n=!1,r="",i=Xu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Zr(8===e.nodeType?e.parentNode:e),new Ku(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Qu(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Ju(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Xu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yu(t)},t.render=function(e,t,n){if(!Qu(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(a(40));return!!e._reactRootContainer&&(cu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},1372:function(e,t){"use strict";var n=60103,r=60106,i=60107,a=60108,o=60114,s=60109,l=60110,u=60112,c=60113,h=60120,d=60115,f=60116,p=60121,m=60122,v=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var _=Symbol.for;n=_("react.element"),r=_("react.portal"),i=_("react.fragment"),a=_("react.strict_mode"),o=_("react.profiler"),s=_("react.provider"),l=_("react.context"),u=_("react.forward_ref"),c=_("react.suspense"),h=_("react.suspense_list"),d=_("react.memo"),f=_("react.lazy"),p=_("react.block"),m=_("react.server.block"),v=_("react.fundamental"),g=_("react.debug_trace_mode"),y=_("react.legacy_hidden")}function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case c:case h:return e;default:switch(e=e&&e.$$typeof){case l:case u:case f:case d:case s:return e;default:return t}}case r:return t}}}t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===o||e===g||e===a||e===c||e===h||e===y||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===d||e.$$typeof===s||e.$$typeof===l||e.$$typeof===u||e.$$typeof===v||e.$$typeof===p||e[0]===m)},t.typeOf=x},7441:function(e,t,n){"use strict";e.exports=n(1372)},6195:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(t,"__esModule",{value:!0});function a(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var o={};["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"].forEach((function(e){o[e]=new a(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=r(e,2),n=t[0],i=t[1];o[n]=new a(n,1,!1,i,null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){o[e]=new a(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){o[e]=new a(e,2,!1,e,null,!1,!1)})),["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach((function(e){o[e]=new a(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){o[e]=new a(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){o[e]=new a(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){o[e]=new a(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){o[e]=new a(e,5,!1,e.toLowerCase(),null,!1,!1)}));var s=/[\-\:]([a-z])/g,l=function(e){return e[1].toUpperCase()};["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach((function(e){var t=e.replace(s,l);o[t]=new a(t,1,!1,e,null,!1,!1)})),["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach((function(e){var t=e.replace(s,l);o[t]=new a(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(s,l);o[t]=new a(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){o[e]=new a(e,1,!1,e.toLowerCase(),null,!1,!1)}));o.xlinkHref=new a("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){o[e]=new a(e,1,!1,e.toLowerCase(),null,!0,!0)}));var u=n(1590),c=u.CAMELCASE,h=u.SAME,d=u.possibleStandardNames,f=RegExp.prototype.test.bind(new RegExp("^(data|aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$")),p=Object.keys(d).reduce((function(e,t){var n=d[t];return n===h?e[t]=t:n===c?e[t.toLowerCase()]=t:e[t]=n,e}),{});t.BOOLEAN=3,t.BOOLEANISH_STRING=2,t.NUMERIC=5,t.OVERLOADED_BOOLEAN=4,t.POSITIVE_NUMERIC=6,t.RESERVED=0,t.STRING=1,t.getPropertyInfo=function(e){return o.hasOwnProperty(e)?o[e]:null},t.isCustomAttribute=f,t.possibleStandardNames=p},1590:function(e,t){t.SAME=0;t.CAMELCASE=1,t.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1}},8459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case d:case f:return e;default:switch(e=e&&e.$$typeof){case c:case u:case h:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},6900:function(e,t,n){"use strict";n(8459)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=_.prototype=new y;x.constructor=_,m(x,g.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!T.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+A(l,0):a,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),R(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",b(e))for(var u=0;u<e.length;u++){var c=a+A(s=e[u],u);l+=R(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=R(s=s.value,t,i,c=a+A(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function M(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function B(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},I={transition:null},z={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:I,ReactCurrentOwner:k};t.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)w.call(t,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function b(e){if(v=!1,x(e),!m)if(null!==r(u))m=!0,I(w);else{var t=r(c);null!==t&&z(b,t.startTime-e)}}function w(e,n){m=!1,v&&(v=!1,y(E),E=-1),p=!0;var a=f;try{for(x(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!R());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),x(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&z(b,h.startTime-n),l=!1}return l}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,T=!1,S=null,E=-1,C=5,A=-1;function R(){return!(t.unstable_now()-A<C)}function M(){if(null!==S){var e=t.unstable_now();A=e;var n=!0;try{n=S(!0,e)}finally{n?k():(T=!1,S=null)}}else T=!1}if("function"===typeof _)k=function(){_(M)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,P=B.port2;B.port1.onmessage=M,k=function(){P.postMessage(null)}}else k=function(){g(M,0)};function I(e){S=e,T||(T=!0,k())}function z(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(v?(y(E),E=-1):v=!0,z(b,a-o))):(e.sortIndex=s,n(u,e),m||p||(m=!0,I(w))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},9613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<a.length;l++){var u=a[l];if(!s(u))return!1;var c=e[u],h=t[u];if(!1===(i=n?n.call(r,c,h,u):void 0)||void 0===i&&c!==h)return!1}return!0}},5792:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var i=r(n(6426)),a=n(9483);t.default=function(e,t){var n={};return e&&"string"===typeof e?((0,i.default)(e,(function(e,r){e&&r&&(n[(0,a.camelCase)(e,t)]=r)})),n):n}},9483:function(e,t){"use strict";t.__esModule=!0,t.camelCase=void 0;var n=/^--[a-zA-Z0-9-]+$/,r=/-([a-z])/g,i=/^[^-]+$/,a=/^-(webkit|moz|ms|o|khtml)-/,o=/^-(ms)-/,s=function(e,t){return t.toUpperCase()},l=function(e,t){return"".concat(t,"-")};t.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||i.test(e)||n.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(o,l):e.replace(a,l)).replace(r,s))}},6426:function(e,t,n){var r=n(1065);e.exports=function(e,t){var n,i=null;if(!e||"string"!==typeof e)return i;for(var a,o,s=r(e),l="function"===typeof t,u=0,c=s.length;u<c;u++)a=(n=s[u]).property,o=n.value,l?t(a,o,n):o&&(i||(i={}),i[a]=o);return i}},1561:function(e,t,n){"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return s((function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})}),[e,n,t]),o((function(){return u(i)&&c({inst:i}),e((function(){u(i)&&c({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},7595:function(e,t,n){"use strict";var r=n(2791),i=n(7248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=u((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,s=n)}var o,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,i]);var f=o(e,h[0],h[1]);return l((function(){d.hasValue=!0,d.value=f}),[f]),c(f),f}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)},9437:function(e,t,n){"use strict";function r(){return new Worker(n.p+"static/js/mapbox-gl-csp-worker.7113372b.worker.js")}n.d(t,{Z:function(){return r}})},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,n){var r=n(6015),i=n(9617);function a(t,n,o){return i()?(e.exports=a=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),a=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),a=n(6116),o=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,n){var r=n(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1589:function(e,t,n){var r=n(5372),i=n(9498),a=n(6116),o=n(2218);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),a=n(6116),o=n(2281);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,n){var r=n(3808),i=n(6015),a=n(6035),o=n(3515);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},885:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(l){s=!0,i=l}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(907);var i=n(181);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/city-bus-tracking/",n.nc=void 0,function(){"use strict";var e=n(2791),t=n(1250),r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o=n(885),s=e.createContext(null);var l=n(181);function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,l.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function p(e,t){var n=t.viewState||t,r=!1;if("longitude"in n&&"latitude"in n){var i=e.center;e.center=new i.constructor(n.longitude,n.latitude),r=r||i!==e.center}if("zoom"in n){var a=e.zoom;e.zoom=n.zoom,r=r||a!==e.zoom}if("bearing"in n){var o=e.bearing;e.bearing=n.bearing,r=r||o!==e.bearing}if("pitch"in n){var s=e.pitch;e.pitch=n.pitch,r=r||s!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}var m=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function v(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;var t,n={},r=u(e.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i.id]=i}}catch(s){r.e(s)}finally{r.f()}var o=e.layers.map((function(e){var t=n[e.ref],r=null;if("interactive"in e&&delete(r=a({},e)).interactive,t){delete(r=r||a({},e)).ref;var i,o=u(m);try{for(o.s();!(i=o.n()).done;){var l=i.value;l in t&&(r[l]=t[l])}}catch(s){o.e(s)}finally{o.f()}}return r||e}));return a(a({},e),{},{layers:o})}function g(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!g(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var a=0,o=r;a<o.length;a++){var s=o[a];if(!t.hasOwnProperty(s))return!1;if(!g(e[s],t[s]))return!1}return!0}return!1}var y={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},_={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},x={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},b=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],w=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"],k=function(){function e(t,n,r){var i=this;c(this,e),this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=function(e){var t=i.props[x[e.type]];t&&t(e)},this._onPointerEvent=function(e){"mousemove"!==e.type&&"mouseout"!==e.type||i._updateHover(e);var t=i.props[y[e.type]];if(t){if(i.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type){var n=i._hoveredFeatures||i._map.queryRenderedFeatures(e.point,{layers:i.props.interactiveLayerIds});e.features=n}t(e),delete e.features}},this._onCameraEvent=function(e){if(!i._internalUpdate){var t=i.props[_[e.type]];t&&t(e)}e.type in i._deferredEvents&&(i._deferredEvents[e.type]=!1)},this._MapClass=t,this.props=n,this._initialize(r)}return d(e,[{key:"map",get:function(){return this._map}},{key:"transform",get:function(){return this._renderTransform}},{key:"setProps",value:function(e){var t=this.props;this.props=e;var n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);var r=this._updateSize(e),i=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||r||i&&!this._map.isMoving())&&this.redraw()}},{key:"_initialize",value:function(e){var t=this,n=this.props,r=a(a(a({},n),n.initialViewState),{},{accessToken:n.mapboxAccessToken||T()||null,container:e,style:v(n.mapStyle)}),i=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),n.gl){var o=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=o,n.gl}}var s=new this._MapClass(r);i.padding&&s.setPadding(i.padding),n.cursor&&(s.getCanvas().style.cursor=n.cursor),this._createShadowTransform(s);var l=s._render;s._render=function(e){t._inRender=!0,l.call(s,e),t._inRender=!1};var u=s._renderTaskQueue.run;s._renderTaskQueue.run=function(e){u.call(s._renderTaskQueue,e),t._onBeforeRepaint()},s.on("render",(function(){return t._onAfterRepaint()}));var c=s.fire;for(var h in s.fire=this._fireEvent.bind(this,c),s.on("resize",(function(){t._renderTransform.resize(s.transform.width,s.transform.height)})),s.on("styledata",(function(){return t._updateStyleComponents(t.props,{})})),s.on("sourcedata",(function(){return t._updateStyleComponents(t.props,{})})),y)s.on(h,this._onPointerEvent);for(var d in _)s.on(d,this._onCameraEvent);for(var f in x)s.on(f,this._onEvent);this._map=s}},{key:"recycle",value:function(){e.savedMaps.push(this)}},{key:"destroy",value:function(){this._map.remove()}},{key:"redraw",value:function(){var e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}},{key:"_createShadowTransform",value:function(e){var t=function(e){var t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t;var n=t.updateElevation;n&&(t.updateElevation=function(r){e.transform.elevation=t.elevation,n.call(t,r),n.call(e.transform,r)}),this._renderTransform=t}},{key:"_updateSize",value:function(e){var t=e.viewState;if(t){var n=this._map;if(t.width!==n.transform.width||t.height!==n.transform.height)return n.resize(),!0}return!1}},{key:"_updateViewState",value:function(e,t){if(this._internalUpdate)return!1;var n=this._map,r=this._renderTransform,i=r.zoom,o=r.pitch,s=r.bearing,l=n.isMoving();l&&(r.cameraElevationReference="sea");var u=p(r,a(a({},f(n.transform)),e));if(l&&(r.cameraElevationReference="ground"),u&&t){var c=this._deferredEvents;c.move=!0,c.zoom||(c.zoom=i!==r.zoom),c.rotate||(c.rotate=s!==r.bearing),c.pitch||(c.pitch=o!==r.pitch)}return l||p(n.transform,e),u}},{key:"_updateSettings",value:function(e,t){var n,r=this._map,i=!1,a=u(b);try{for(a.s();!(n=a.n()).done;){var o=n.value;o in e&&!g(e[o],t[o])&&(i=!0,r["set".concat(o[0].toUpperCase()).concat(o.slice(1))](e[o]))}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"_updateStyle",value:function(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==t.mapStyle){var n={diff:e.styleDiffing};return"localIdeographFontFamily"in e&&(n.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(v(e.mapStyle),n),!0}return!1}},{key:"_updateStyleComponents",value:function(e,t){var n=this._map,r=!1;return n.style.loaded()&&("light"in e&&!g(e.light,t.light)&&(r=!0,n.setLight(e.light)),"fog"in e&&!g(e.fog,t.fog)&&(r=!0,n.setFog(e.fog)),"terrain"in e&&!g(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(r=!0,n.setTerrain(e.terrain)))),r}},{key:"_updateHandlers",value:function(e,t){var n,r=this._map,i=!1,a=u(w);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=e[o];g(s,t[o])||(i=!0,s?r[o].enable(s):r[o].disable())}}catch(l){a.e(l)}finally{a.f()}return i}},{key:"_updateHover",value:function(e){var t,n=this.props;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){var r,i=e.type,a=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0;if("mousemove"===i)try{r=this._map.queryRenderedFeatures(e.point,{layers:n.interactiveLayerIds})}catch(s){r=[]}else r=[];var o=r.length>0;!o&&a&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=r,o&&!a&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=i}else this._hoveredFeatures=null}},{key:"_fireEvent",value:function(e,t,n){var r=this._map,i=r.transform,a="string"===typeof t?t:t.type;return"move"===a&&this._updateViewState(this.props,!1),a in _&&("object"===typeof t&&(t.viewState=f(i)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,t,n),r.transform=i,r):(e.call(r,t,n),r)}},{key:"_onBeforeRepaint",value:function(){var e=this,t=this._map;for(var n in this._internalUpdate=!0,this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;var r=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=function(){e._map.transform=r}}}],[{key:"reuse",value:function(t,n){var r=e.savedMaps.pop();if(!r)return null;var i=r.map,o=i.getContainer();for(n.className=o.className;o.childNodes.length>0;)n.appendChild(o.childNodes[0]);return i._container=n,t.initialViewState&&r._updateViewState(t.initialViewState,!1),i.resize(),r.setProps(a(a({},t),{},{styleDiffing:!1})),i.isStyleLoaded()?i.fire("load"):i.once("styledata",(function(){return i.fire("load")})),r}}]),e}();function T(){var e=null;if("undefined"!==typeof location){var t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.MapboxAccessToken}catch(n){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(r){}return e}k.savedMaps=[];var S=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function E(e,t){if(!e)return null;var n,r=e.map,i={getMap:function(){return r},getCenter:function(){return e.transform.center},getZoom:function(){return e.transform.zoom},getBearing:function(){return e.transform.bearing},getPitch:function(){return e.transform.pitch},getPadding:function(){return e.transform.padding},getBounds:function(){return e.transform.getBounds()},project:function(n){return e.transform.locationPoint(t.LngLat.convert(n))},unproject:function(n){return e.transform.pointLocation(t.Point.convert(n))}},a=u(function(e){var t=new Set,n=e;for(;n;){var r,i=u(Object.getOwnPropertyNames(n));try{for(i.s();!(r=i.n()).done;){var a=r.value;"_"!==a[0]&&"function"===typeof e[a]&&"fire"!==a&&"setEventedParent"!==a&&t.add(a)}}catch(o){i.e(o)}finally{i.f()}n=Object.getPrototypeOf(n)}return Array.from(t)}(r));try{for(a.s();!(n=a.n()).done;){var o=n.value;o in i||S.includes(o)||(i[o]=r[o].bind(r))}}catch(s){a.e(s)}finally{a.f()}return i}var C="undefined"!==typeof document?e.useLayoutEffect:e.useEffect,A=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];var R=e.createContext(null),M={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:function(e){return console.error(e.error)},RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"},B=(0,e.forwardRef)((function(t,r){var i=(0,e.useContext)(s),l=(0,e.useState)(null),c=(0,o.Z)(l,2),h=c[0],d=c[1],f=(0,e.useRef)(),p=(0,e.useRef)({mapLib:null,map:null}).current;(0,e.useEffect)((function(){var e,r=t.mapLib,a=!0;return Promise.resolve(r||Promise.resolve().then(n.t.bind(n,5483,23))).then((function(n){if(a){if(n.Map||(n=n.default),!n||!n.Map)throw new Error("Invalid mapLib");if(!n.supported(t))throw new Error("Map is not supported by this browser");!function(e,t){var n,r=u(A);try{for(r.s();!(n=r.n()).done;){var i=n.value;i in t&&(e[i]=t[i])}}catch(a){r.e(a)}finally{r.f()}t.RTLTextPlugin&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(t.RTLTextPlugin,(function(e){e&&console.error(e)}),!1)}(n,t),t.reuseMaps&&(e=k.reuse(t,f.current)),e||(e=new k(n.Map,t,f.current)),p.map=E(e,n),p.mapLib=n,d(e),null===i||void 0===i||i.onMapMount(p.map,t.id)}})).catch((function(e){t.onError({type:"error",target:null,originalEvent:null,error:e})})),function(){a=!1,e&&(null===i||void 0===i||i.onMapUnmount(t.id),t.reuseMaps?e.recycle():e.destroy())}}),[]),C((function(){h&&h.setProps(t)})),(0,e.useImperativeHandle)(r,(function(){return p.map}),[h]);var m=(0,e.useMemo)((function(){return a({position:"relative",width:"100%",height:"100%"},t.style)}),[t.style]);return e.createElement("div",{id:t.id,ref:f,style:m},h&&e.createElement(R.Provider,{value:p},t.children))}));B.displayName="Map",B.defaultProps=M;var P=B,I=n(4164),z=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function L(e,t){if(e&&t){var n=e.style;for(var r in t){var i=t[r];Number.isFinite(i)&&!z.test(r)?n[r]="".concat(i,"px"):n[r]=i}}}function D(t){var n=(0,e.useContext)(R),r=n.map,i=n.mapLib,o=(0,e.useRef)({props:t});o.current.props=t;var s=(0,e.useMemo)((function(){var n=!1;e.Children.forEach(t.children,(function(e){e&&(n=!0)}));var r=a(a({},t),{},{element:n?document.createElement("div"):null}),l=new i.Marker(r).setLngLat([t.longitude,t.latitude]);return l.getElement().addEventListener("click",(function(e){var t,n;null===(n=(t=o.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:l,originalEvent:e})})),l.on("dragstart",(function(e){var t,n,r=e;r.lngLat=s.getLngLat(),null===(n=(t=o.current.props).onDragStart)||void 0===n||n.call(t,r)})),l.on("drag",(function(e){var t,n,r=e;r.lngLat=s.getLngLat(),null===(n=(t=o.current.props).onDrag)||void 0===n||n.call(t,r)})),l.on("dragend",(function(e){var t,n,r=e;r.lngLat=s.getLngLat(),null===(n=(t=o.current.props).onDragEnd)||void 0===n||n.call(t,r)})),l}),[]);return(0,e.useEffect)((function(){return s.addTo(r.getMap()),function(){s.remove()}}),[]),(0,e.useEffect)((function(){L(s.getElement(),t.style)}),[t.style]),s.getLngLat().lng===t.longitude&&s.getLngLat().lat===t.latitude||s.setLngLat([t.longitude,t.latitude]),t.offset&&!function(e,t){var n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,a=Array.isArray(t)?t[1]:t?t.y:0;return n===i&&r===a}(s.getOffset(),t.offset)&&s.setOffset(t.offset),s.isDraggable()!==t.draggable&&s.setDraggable(t.draggable),s.getRotation()!==t.rotation&&s.setRotation(t.rotation),s.getRotationAlignment()!==t.rotationAlignment&&s.setRotationAlignment(t.rotationAlignment),s.getPitchAlignment()!==t.pitchAlignment&&s.setPitchAlignment(t.pitchAlignment),s.getPopup()!==t.popup&&s.setPopup(t.popup),(0,I.createPortal)(t.children,s.getElement())}D.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"};var O=e.memo(D);function N(e){return new Set(e?e.trim().split(/\s+/):[])}var F=e.memo((function(t){var n=(0,e.useContext)(R),r=n.map,i=n.mapLib,o=(0,e.useMemo)((function(){return document.createElement("div")}),[]),s=(0,e.useRef)({props:t});s.current.props=t;var l=(0,e.useMemo)((function(){var e=a({},t),n=new i.Popup(e).setLngLat([t.longitude,t.latitude]);return n.once("open",(function(e){var t,n;null===(n=(t=s.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,e.useEffect)((function(){var e=function(e){var t,n;null===(n=(t=s.current.props).onClose)||void 0===n||n.call(t,e)};return l.on("close",e),l.setDOMContent(o).addTo(r.getMap()),function(){l.off("close",e),l.isOpen()&&l.remove()}}),[]),(0,e.useEffect)((function(){L(l.getElement(),t.style)}),[t.style]),l.isOpen()&&(l.getLngLat().lng===t.longitude&&l.getLngLat().lat===t.latitude||l.setLngLat([t.longitude,t.latitude]),t.offset&&!g(l.options.offset,t.offset)&&l.setOffset(t.offset),l.options.anchor===t.anchor&&l.options.maxWidth===t.maxWidth||(l.options.anchor=t.anchor,l.setMaxWidth(t.maxWidth)),l.options.className!==t.className)){var c,h=N(l.options.className),d=N(t.className),f=u(h);try{for(f.s();!(c=f.n()).done;){var p=c.value;d.has(p)||l.removeClassName(p)}}catch(_){f.e(_)}finally{f.f()}var m,v=u(d);try{for(v.s();!(m=v.n()).done;){var y=m.value;h.has(y)||l.addClassName(y)}}catch(_){v.e(_)}finally{v.f()}l.options.className=t.className}return(0,I.createPortal)(t.children,o)}));function j(t,n,r){var i=(0,e.useContext)(R),a=(0,e.useMemo)((function(){return t(i)}),[]);return(0,e.useEffect)((function(){var e,t=i.map;return t.hasControl(a)||t.addControl(a,null===(e=r||n)||void 0===e?void 0:e.position),function(){"function"===typeof n&&n(i),t.hasControl(a)&&t.removeControl(a)}}),[]),a}e.memo((function(t){var n=j((function(e){return new e.mapLib.AttributionControl(t)}),{position:t.position});return(0,e.useEffect)((function(){L(n._container,t.style)}),[t.style]),null}));var V=e.memo((function(t){var n=j((function(e){return new e.mapLib.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})}),{position:t.position});return(0,e.useEffect)((function(){L(n._controlContainer,t.style)}),[t.style]),null})),Z=(0,e.forwardRef)((function(t,n){var r=(0,e.useRef)({props:t}),i=j((function(e){var n=new e.mapLib.GeolocateControl(t),i=n._setupUI;return n._setupUI=function(e){n._container.hasChildNodes()||i(e)},n.on("geolocate",(function(e){var t,n;null===(n=(t=r.current.props).onGeolocate)||void 0===n||n.call(t,e)})),n.on("error",(function(e){var t,n;null===(n=(t=r.current.props).onError)||void 0===n||n.call(t,e)})),n.on("outofmaxbounds",(function(e){var t,n;null===(n=(t=r.current.props).onOutOfMaxBounds)||void 0===n||n.call(t,e)})),n.on("trackuserlocationstart",(function(e){var t,n;null===(n=(t=r.current.props).onTrackUserLocationStart)||void 0===n||n.call(t,e)})),n.on("trackuserlocationend",(function(e){var t,n;null===(n=(t=r.current.props).onTrackUserLocationEnd)||void 0===n||n.call(t,e)})),n}),{position:t.position});return r.current.props=t,(0,e.useImperativeHandle)(n,(function(){return{trigger:function(){return i.trigger()}}}),[]),(0,e.useEffect)((function(){L(i._container,t.style)}),[t.style]),null}));Z.displayName="GeolocateControl";var U=e.memo(Z);var G=e.memo((function(t){var n=j((function(e){return new e.mapLib.NavigationControl(t)}),{position:t.position});return(0,e.useEffect)((function(){L(n._container,t.style)}),[t.style]),null}));function H(t){var n=j((function(e){return new e.mapLib.ScaleControl(t)}),{position:t.position});return n.options.unit===t.unit&&n.options.maxWidth===t.maxWidth||(n.options.maxWidth=t.maxWidth,n.setUnit(t.unit)),(0,e.useEffect)((function(){L(n._container,t.style)}),[t.style]),null}H.defaultProps={unit:"metric",maxWidth:100};e.memo(H);function q(e,t){if(!e)throw new Error(t)}var W=0;var X=function(t){var n=(0,e.useContext)(R).map.getMap(),r=(0,e.useRef)(t),i=(0,e.useState)(0),s=(0,o.Z)(i,2)[1],l=(0,e.useMemo)((function(){return t.id||"jsx-source-".concat(W++)}),[]);(0,e.useEffect)((function(){if(n){var e=function(){return s((function(e){return e+1}))};return n.on("styledata",e),e(),function(){var t;if(n.off("styledata",e),n.style&&n.style._loaded&&n.getSource(l)){var r=null===(t=n.getStyle())||void 0===t?void 0:t.layers;if(r){var i,a=u(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.source===l&&n.removeLayer(o.id)}}catch(s){a.e(s)}finally{a.f()}}n.removeSource(l)}}}}),[n]);var c=n&&n.style&&n.getSource(l);return c?function(e,t,n){q(t.id===n.id,"source id changed"),q(t.type===n.type,"source type changed");var r="",i=0;for(var a in t)"children"===a||"id"===a||g(n[a],t[a])||(r=a,i++);if(i){var o=t.type;if("geojson"===o)e.setData(t.data);else if("image"===o)e.updateImage({url:t.url,coordinates:t.coordinates});else if("canvas"!==o&&"video"!==o||1!==i||"coordinates"!==r)if("vector"===o&&"setUrl"in e)switch(r){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles)}else console.warn("Unable to update <Source> prop: ".concat(r));else e.setCoordinates(t.coordinates)}}(c,t,r.current):c=function(e,t,n){if(e.style&&e.style._loaded){var r=a({},n);return delete r.id,delete r.children,e.addSource(t,r),e.getSource(t)}return null}(n,l,t),r.current=t,c&&e.Children.map(t.children,(function(t){return t&&(0,e.cloneElement)(t,{source:l})}))||null};var K=0;var Y=function(t){var n=(0,e.useContext)(R).map.getMap(),r=(0,e.useRef)(t),i=(0,e.useState)(0),s=(0,o.Z)(i,2)[1],l=(0,e.useMemo)((function(){return t.id||"jsx-layer-".concat(K++)}),[]);if((0,e.useEffect)((function(){if(n){var e=function(){return s((function(e){return e+1}))};return n.on("styledata",e),e(),function(){n.off("styledata",e),n.style&&n.style._loaded&&n.getLayer(l)&&n.removeLayer(l)}}}),[n]),n&&n.style&&n.getLayer(l))try{!function(e,t,n,r){if(q(n.id===r.id,"layer id changed"),q(n.type===r.type,"layer type changed"),"custom"!==n.type&&"custom"!==r.type){var i=n.layout,a=void 0===i?{}:i,o=n.paint,s=void 0===o?{}:o,l=n.filter,u=n.minzoom,c=n.maxzoom,h=n.beforeId;if(h!==r.beforeId&&e.moveLayer(t,h),a!==r.layout){var d=r.layout||{};for(var f in a)g(a[f],d[f])||e.setLayoutProperty(t,f,a[f]);for(var p in d)a.hasOwnProperty(p)||e.setLayoutProperty(t,p,void 0)}if(s!==r.paint){var m=r.paint||{};for(var v in s)g(s[v],m[v])||e.setPaintProperty(t,v,s[v]);for(var y in m)s.hasOwnProperty(y)||e.setPaintProperty(t,y,void 0)}g(l,r.filter)||e.setFilter(t,l),u===r.minzoom&&c===r.maxzoom||e.setLayerZoomRange(t,u,c)}}(n,l,t,r.current)}catch(u){console.warn(u)}else!function(e,t,n){if(e.style&&e.style._loaded&&(!("source"in n)||e.getSource(n.source))){var r=a(a({},n),{},{id:t});delete r.beforeId,e.addLayer(r,n.beforeId)}}(n,l,t);return r.current=t,null},J=n(2982),Q=n(7248),$=n(327);var ee=function(e){e()},te=function(){return ee},ne=(0,e.createContext)(null);function re(){return(0,e.useContext)(ne)}var ie=function(){throw new Error("uSES not initialized!")},ae=ie,oe=function(e,t){return e===t};function se(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,n=t===ne?re:function(){return(0,e.useContext)(t)};return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oe;var i=n(),a=i.store,o=i.subscription,s=i.getServerState,l=ae(o.addNestedSub,a.getState,s||a.getState,t,r);return(0,e.useDebugValue)(l),l}}var le=se(),ue=n(2110),ce=n.n(ue);n(6900);var he={notify:function(){},get:function(){return[]}};function de(e,t){var n,r=he;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=te(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=he)},getListeners:function(){return r}};return o}var fe=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?e.useLayoutEffect:e.useEffect;var pe=function(t){var n=t.store,r=t.context,i=t.children,a=t.serverState,o=(0,e.useMemo)((function(){var e=de(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),s=(0,e.useMemo)((function(){return n.getState()}),[n]);fe((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,s]);var l=r||ne;return e.createElement(l.Provider,{value:o},i)};function me(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,n=t===ne?re:function(){return(0,e.useContext)(t)};return function(){return n().store}}var ve=me();function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=e===ne?ve:me(e);return function(){return t().dispatch}}var ye,_e=ge();function xe(e){return xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xe(e)}function be(){be=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(E){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new k(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=x(o,n);if(s){if(s===c)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=l;var c={};function h(){}function d(){}function f(){}var p={};s(p,i,(function(){return this}));var m=Object.getPrototypeOf,v=m&&m(m(T([])));v&&v!==t&&n.call(v,i)&&(p=v);var g=f.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(i,a,o,s){var l=u(e[i],e,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==xe(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return r("throw",e,o,s)}))}s(l.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return c;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,c;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,c):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,c)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function T(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=f,s(g,"constructor",f),s(f,"constructor",d),d.displayName=s(f,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,s(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(_.prototype),s(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(g),s(g,o,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,c):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),c},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},e}function we(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){we(a,r,i,o,s,"next",e)}function s(e){we(a,r,i,o,s,"throw",e)}o(void 0)}))}}!function(e){ae=e}($.useSyncExternalStoreWithSelector),function(e){e}(Q.useSyncExternalStore),ye=I.unstable_batchedUpdates,ee=ye;var Te=[{id:"bus-routes-1",codeBusRoute:"R16",directionRoute:"turn",colorRoute:"#ff1956",lineRoute:[[108.1196,16.135482],[108.1195,16.133065],[108.1195,16.133065],[108.119358,16.129616],[108.119358,16.129616],[108.119291,16.127211],[108.119315,16.12686],[108.119386,16.126535],[108.11949,16.126244],[108.119661,16.12593],[108.120827,16.124153],[108.120827,16.124153],[108.121658,16.122813],[108.123627,16.120004],[108.125239,16.117755],[108.125526,16.117458],[108.125603,16.117289],[108.125696,16.116311],[108.12603,16.115703],[108.128175,16.113204],[108.128175,16.113204],[108.129077,16.111983],[108.129703,16.110402],[108.130192,16.109393],[108.131843,16.106963],[108.132895,16.104982],[108.132895,16.104982],[108.135021,16.100557],[108.135021,16.100557],[108.136745,16.097115],[108.137901,16.095316],[108.138816,16.09438],[108.141957,16.091722],[108.142514,16.090928],[108.142873,16.090063],[108.142873,16.090063],[108.144299,16.086524],[108.144299,16.086524],[108.14578,16.083016],[108.14578,16.083016],[108.147156,16.07954],[108.147156,16.07954],[108.148537,16.076174],[108.148537,16.076174],[108.149973,16.072651],[108.149973,16.072651],[108.150457,16.071464],[108.150457,16.071464],[108.151567,16.068776],[108.151567,16.068776],[108.151957,16.067895],[108.1523,16.067331],[108.152582,16.067003],[108.153185,16.066532],[108.153682,16.066211],[108.153682,16.066211],[108.155761,16.06481],[108.155761,16.06481],[108.159185,16.062518],[108.159185,16.062518],[108.162937,16.060033],[108.162937,16.060033],[108.165252,16.058517],[108.166674,16.057262],[108.166674,16.057262],[108.167117,16.056874],[108.167454,16.056648],[108.16788,16.056465],[108.16788,16.056465],[108.168461,16.056275],[108.168953,16.056168],[108.169649,16.056185],[108.16995,16.056215],[108.170517,16.056341],[108.170992,16.056518],[108.171529,16.056802],[108.171529,16.056802],[108.173449,16.058271],[108.173449,16.058271],[108.175575,16.059647],[108.176674,16.060269],[108.178173,16.061349],[108.178406,16.061444],[108.178662,16.061439],[108.178965,16.061429],[108.179238,16.061554],[108.179421,16.061785],[108.179501,16.06225],[108.179641,16.062497],[108.182251,16.064548],[108.183382,16.06502],[108.184411,16.065391],[108.184411,16.065391],[108.188897,16.065759],[108.188897,16.065759],[108.190608,16.065837],[108.192617,16.065747],[108.192617,16.065747],[108.197442,16.065547],[108.198504,16.065519],[108.198951,16.065541],[108.198951,16.065541],[108.200143,16.065616],[108.20434,16.065851],[108.205541,16.06599],[108.205541,16.06599],[108.206692,16.066079],[108.207027,16.066141],[108.208182,16.066222],[108.208182,16.066222],[108.209028,16.066308],[108.210612,16.066592],[108.210612,16.066592],[108.212638,16.066949],[108.214344,16.067294],[108.214344,16.067294],[108.218022,16.068073],[108.218022,16.068073],[108.220342,16.06862],[108.221855,16.068607],[108.221855,16.068607],[108.223924,16.068613],[108.223747,16.067061],[108.223747,16.067061],[108.223227,16.06201],[108.223227,16.06201],[108.223142,16.060955],[108.230257,16.061166],[108.233623,16.061312],[108.233623,16.061312],[108.234183,16.061331],[108.234287,16.061239],[108.234446,16.060986],[108.23504,16.059044],[108.234946,16.059027],[108.235197,16.0582],[108.235197,16.0582],[108.23636,16.054365],[108.23636,16.054365],[108.236441,16.054102],[108.236529,16.054036],[108.236647,16.053657],[108.236677,16.053359],[108.236669,16.053171],[108.236732,16.053088],[108.236869,16.053033],[108.236998,16.052599],[108.236998,16.052599],[108.237135,16.052174],[108.238455,16.047723],[108.238455,16.047723],[108.23887,16.046373],[108.239312,16.045393],[108.239312,16.045393],[108.239651,16.044721],[108.239547,16.044684],[108.240563,16.042689],[108.240563,16.042689],[108.241744,16.040347],[108.241744,16.040347],[108.241954,16.039933],[108.242173,16.039733],[108.243648,16.036783],[108.243648,16.036783],[108.245815,16.032612],[108.245815,16.032612],[108.247354,16.02963],[108.247354,16.02963],[108.248363,16.027659],[108.248972,16.026414],[108.248977,16.026335],[108.249421,16.025483],[108.249421,16.025483],[108.251464,16.021469],[108.251464,16.021469],[108.253236,16.018012],[108.253236,16.018012],[108.254726,16.015047],[108.255461,16.013478],[108.255461,16.013478],[108.25673,16.010836],[108.258644,16.007102],[108.258644,16.007102],[108.259223,16.005792],[108.25947,16.004635],[108.259614,15.999604],[108.25935,15.998175],[108.25935,15.998175],[108.257218,15.988862],[108.257218,15.988862],[108.256624,15.986044],[108.255848,15.98265],[108.255848,15.98265],[108.255065,15.97923],[108.255065,15.97923],[108.254774,15.977988],[108.250088,15.977987],[108.250105,15.977846],[108.252383,15.977838]]},{id:"bus-routes-2",codeBusRoute:"R16",directionRoute:"return",colorRoute:"#ff1956",lineRoute:[[108.252383,15.977838],[108.254936,15.977824],[108.255198,15.978966],[108.255198,15.978966],[108.255956,15.982148],[108.255956,15.982148],[108.25743,15.988834],[108.25743,15.988834],[108.257476,15.989038],[108.257476,15.989038],[108.259732,15.998979],[108.259808,15.999924],[108.259744,16.001602],[108.259744,16.001602],[108.259648,16.004629],[108.259585,16.005112],[108.259463,16.005619],[108.259209,16.006331],[108.259209,16.006331],[108.257249,16.010279],[108.257249,16.010279],[108.255424,16.014089],[108.254113,16.016668],[108.254113,16.016668],[108.253059,16.018796],[108.250978,16.022831],[108.250978,16.022831],[108.249807,16.025156],[108.249807,16.025156],[108.247813,16.029133],[108.24792,16.029183],[108.24792,16.029183],[108.247813,16.029133],[108.245507,16.033594],[108.245507,16.033594],[108.244077,16.036353],[108.244077,16.036353],[108.242587,16.039229],[108.242588,16.039269],[108.242588,16.039269],[108.242541,16.039502],[108.242192,16.040218],[108.240844,16.042844],[108.240844,16.042844],[108.239173,16.046112],[108.239077,16.046371],[108.239149,16.046393],[108.239149,16.046393],[108.239077,16.046371],[108.238654,16.047833],[108.238654,16.047833],[108.23837,16.04882],[108.238325,16.048808],[108.23745,16.05179],[108.23745,16.05179],[108.237052,16.0531],[108.237115,16.05322],[108.237094,16.053358],[108.236951,16.053473],[108.236784,16.053884],[108.236713,16.054019],[108.235963,16.056545],[108.235963,16.056545],[108.23521,16.059079],[108.23521,16.059079],[108.234634,16.060979],[108.234585,16.061315],[108.234621,16.061408],[108.234592,16.061549],[108.23451,16.061628],[108.234395,16.06166],[108.234276,16.06163],[108.234188,16.061543],[108.23338,16.06147],[108.23338,16.06147],[108.231444,16.061363],[108.224246,16.061131],[108.224065,16.061328],[108.224118,16.061675],[108.224122,16.062226],[108.224122,16.062226],[108.224151,16.064958],[108.224218,16.065226],[108.224871,16.066887],[108.224941,16.068051],[108.224941,16.068051],[108.224976,16.068616],[108.220342,16.06862],[108.219759,16.068476],[108.219759,16.068476],[108.217429,16.067941],[108.217429,16.067941],[108.214664,16.067362],[108.214664,16.067362],[108.212638,16.066949],[108.20999,16.066491],[108.20999,16.066491],[108.209989,16.06649],[108.209989,16.06649],[108.209028,16.066308],[108.207396,16.066163],[108.207396,16.066163],[108.207027,16.066141],[108.206831,16.066185],[108.206794,16.066261],[108.206701,16.066287],[108.206619,16.066224],[108.206399,16.066155],[108.204513,16.06598],[108.202842,16.065862],[108.19935,16.065739],[108.19935,16.065739],[108.198504,16.065701],[108.197565,16.065721],[108.19298,16.065934],[108.19298,16.065934],[108.19049,16.066022],[108.18939,16.065968],[108.18939,16.065968],[108.184191,16.065579],[108.184191,16.065579],[108.183311,16.065502],[108.182972,16.065299],[108.182112,16.064599],[108.181889,16.064509],[108.181628,16.064322],[108.179495,16.062689],[108.179207,16.062614],[108.178902,16.062644],[108.178655,16.062623],[108.17854,16.062578],[108.178305,16.062377],[108.178233,16.062241],[108.1782,16.061955],[108.178106,16.06166],[108.177842,16.061404],[108.17655,16.060463],[108.175761,16.059958],[108.175527,16.059745],[108.174451,16.059067],[108.174451,16.059067],[108.173808,16.058657],[108.171433,16.056883],[108.171433,16.056883],[108.170719,16.056513],[108.169929,16.056328],[108.169552,16.056288],[108.168926,16.056291],[108.168276,16.056434],[108.168276,16.056434],[108.167661,16.056665],[108.167185,16.056957],[108.165337,16.058599],[108.162615,16.060374],[108.162658,16.060441],[108.162658,16.060441],[108.162615,16.060374],[108.158846,16.062889],[108.158846,16.062889],[108.156352,16.06455],[108.156352,16.06455],[108.153426,16.066496],[108.153051,16.066789],[108.153051,16.066789],[108.152652,16.067126],[108.152262,16.067593],[108.152033,16.068026],[108.151848,16.068547],[108.151848,16.068547],[108.151222,16.070175],[108.150748,16.071192],[108.150748,16.071192],[108.150115,16.072659],[108.150115,16.072659],[108.149694,16.073743],[108.149324,16.074547],[108.148462,16.076773],[108.148564,16.076813],[108.148564,16.076813],[108.148462,16.076773],[108.146865,16.080708],[108.146865,16.080708],[108.145933,16.082962],[108.145933,16.082962],[108.144126,16.087281],[108.144126,16.087281],[108.142884,16.090323],[108.142884,16.090323],[108.142498,16.091159],[108.142024,16.091788],[108.139177,16.094218],[108.138035,16.095335],[108.13671,16.09742],[108.135343,16.100168],[108.135343,16.100168],[108.134203,16.102468],[108.133591,16.103842],[108.132923,16.105178],[108.132923,16.105178],[108.132151,16.106661],[108.130295,16.109452],[108.13002,16.10998],[108.129702,16.110722],[108.129702,16.110722],[108.129248,16.111884],[108.128972,16.112364],[108.127854,16.113775],[108.126899,16.114908],[108.126899,16.114908],[108.125892,16.116178],[108.125758,16.116579],[108.125683,16.117337],[108.125022,16.118422],[108.12177,16.122882],[108.119919,16.125734],[108.119919,16.125734],[108.119563,16.126386],[108.119439,16.126846],[108.119412,16.127906],[108.119476,16.129336],[108.119476,16.129336],[108.119625,16.133093],[108.119625,16.133093],[108.119728,16.13538]]},{id:"bus-routes-3",codeBusRoute:"R4A",directionRoute:"turn",colorRoute:"#089669",lineRoute:[[108.223603,16.08261],[108.223593,16.082706],[108.222719,16.082622],[108.222453,16.08268],[108.222428,16.082804],[108.222279,16.082866],[108.222167,16.0828],[108.222141,16.082696],[108.222016,16.082582],[108.220823,16.082372],[108.220823,16.082372],[108.220192,16.082199],[108.219724,16.081957],[108.21924,16.08151],[108.218735,16.080805],[108.218735,16.080805],[108.216392,16.07732],[108.216392,16.07732],[108.214963,16.07508],[108.214963,16.07508],[108.213547,16.073022],[108.213547,16.073022],[108.213196,16.072527],[108.213071,16.072198],[108.214182,16.066718],[108.214182,16.066718],[108.214341,16.066069],[108.214571,16.065463],[108.215325,16.063952],[108.215325,16.063952],[108.216633,16.061224],[108.216633,16.061224],[108.216755,16.060969],[108.216874,16.060829],[108.216692,16.060776],[108.215684,16.060643],[108.215697,16.060542],[108.216055,16.060592],[108.216055,16.060592],[108.216912,16.060662],[108.217006,16.060632],[108.217302,16.060723],[108.217704,16.060752],[108.217704,16.060752],[108.220018,16.060877],[108.223142,16.060955],[108.223351,16.060865],[108.223602,16.06084],[108.223706,16.06079],[108.22378,16.060677],[108.223835,16.060434],[108.223797,16.060149],[108.223719,16.059928],[108.223032,16.058787],[108.223032,16.058787],[108.222497,16.057804],[108.222167,16.056422],[108.222077,16.053783],[108.22215,16.051426],[108.22215,16.051426],[108.222227,16.049828],[108.222219,16.049739],[108.222122,16.049661],[108.222061,16.04949],[108.222088,16.04937],[108.222216,16.049238],[108.22228,16.049012],[108.222476,16.047388],[108.222476,16.047388],[108.222548,16.047167],[108.22261,16.046558],[108.221124,16.046394],[108.221505,16.043194],[108.221505,16.043194],[108.221777,16.040847],[108.218431,16.040512],[108.218431,16.040512],[108.217891,16.040454],[108.217815,16.04047],[108.217593,16.040415],[108.215634,16.040206],[108.214741,16.040092],[108.214741,16.040092],[108.213875,16.039991],[108.213778,16.040013],[108.213702,16.03997],[108.211914,16.039759],[108.210853,16.039652],[108.210751,16.039733],[108.210578,16.039758],[108.210422,16.039679],[108.210369,16.039605],[108.210344,16.039518],[108.210385,16.039346],[108.210375,16.038889],[108.210337,16.038525],[108.209792,16.036246],[108.209792,16.036246],[108.208972,16.032923],[108.208972,16.032923],[108.208838,16.032363],[108.20855,16.031468],[108.208504,16.031295],[108.20858,16.03045],[108.20858,16.03045],[108.208857,16.025417],[108.208717,16.024951],[108.208559,16.024718],[108.208243,16.024488],[108.207511,16.024287],[108.207511,16.024287],[108.204332,16.023417],[108.204332,16.023417],[108.202117,16.02278],[108.202196,16.022664],[108.202359,16.022168],[108.203247,16.020086],[108.203247,16.020086],[108.20466,16.017034],[108.204262,16.01692],[108.204262,16.01692],[108.203039,16.016545],[108.202426,16.016282],[108.201925,16.015997],[108.200621,16.015121],[108.198984,16.014254],[108.19864,16.014105],[108.198362,16.014021],[108.197978,16.013965],[108.197555,16.013953],[108.197217,16.01399],[108.197217,16.01399],[108.196025,16.014138],[108.195714,16.014269],[108.195537,16.014799],[108.195213,16.015066],[108.192889,16.01521],[108.192794,16.014464],[108.192926,16.009937],[108.192784,16.009385],[108.19044,16.003475],[108.190269,16.002906],[108.190234,16.002318],[108.190343,16.002321],[108.190474,16.003264],[108.191111,16.004847],[108.191111,16.004847],[108.1916,16.006066],[108.191498,16.006099],[108.19044,16.003475],[108.190269,16.002906],[108.190234,16.002318],[108.192365,15.994364],[108.192199,15.993942],[108.191992,15.993799],[108.191992,15.993799],[108.191662,15.993572],[108.191251,15.993213],[108.190946,15.992578],[108.190946,15.992578],[108.185784,15.979421],[108.185204,15.976927],[108.184691,15.976296],[108.183396,15.975701],[108.183164,15.97532],[108.181629,15.968773],[108.181629,15.968773],[108.180885,15.966042],[108.180791,15.965812],[108.179817,15.964467],[108.179614,15.96412],[108.17946,15.963633],[108.179408,15.962983],[108.179474,15.962869],[108.179522,15.962567],[108.179522,15.962567],[108.179872,15.960029],[108.179873,15.959531],[108.179873,15.959531],[108.179857,15.958343],[108.179435,15.957027],[108.179265,15.955969],[108.178757,15.953694],[108.178731,15.953208]]},{id:"bus-routes-4",codeBusRoute:"R4A",directionRoute:"return",colorRoute:"#089669",lineRoute:[[108.178746,15.953038],[108.178725,15.953282],[108.178757,15.953694],[108.179265,15.955969],[108.179435,15.957027],[108.179857,15.958343],[108.179873,15.959551],[108.179873,15.959551],[108.179872,15.960029],[108.179711,15.961319],[108.179474,15.962869],[108.179408,15.962983],[108.179313,15.962857],[108.179313,15.962857],[108.179408,15.962983],[108.17946,15.963633],[108.179614,15.96412],[108.179817,15.964467],[108.180754,15.96575],[108.180885,15.966042],[108.181561,15.968525],[108.181561,15.968525],[108.182464,15.971934],[108.183164,15.97532],[108.183396,15.975701],[108.184001,15.976053],[108.184691,15.976296],[108.185094,15.976717],[108.185204,15.976927],[108.185598,15.978903],[108.186543,15.981307],[108.186543,15.981307],[108.191005,15.992727],[108.191366,15.993332],[108.192594,15.994191],[108.192225,15.995218],[108.192225,15.995218],[108.190343,16.002321],[108.190474,16.003264],[108.19111,16.004844],[108.19111,16.004844],[108.192771,16.009084],[108.192771,16.009084],[108.192949,16.009588],[108.193036,16.010027],[108.192962,16.012735],[108.193081,16.012973],[108.193315,16.0131],[108.19382,16.013168],[108.195338,16.013231],[108.195568,16.013373],[108.195705,16.013625],[108.195798,16.013791],[108.195919,16.013907],[108.196261,16.013974],[108.197446,16.013818],[108.197947,16.013805],[108.197947,16.013805],[108.198347,16.013862],[108.198923,16.014071],[108.2006,16.014922],[108.202346,16.016092],[108.202945,16.016363],[108.203686,16.016595],[108.203686,16.016595],[108.204711,16.016898],[108.203395,16.019758],[108.203395,16.019758],[108.202359,16.022168],[108.202196,16.022664],[108.204162,16.023221],[108.204162,16.023221],[108.207046,16.02401],[108.207046,16.02401],[108.209156,16.024576],[108.208974,16.025434],[108.208714,16.029746],[108.208714,16.029746],[108.208724,16.030457],[108.208923,16.031088],[108.209006,16.031161],[108.209058,16.031287],[108.20905,16.031389],[108.208982,16.031504],[108.208951,16.032149],[108.209097,16.032916],[108.209097,16.032916],[108.210294,16.0378],[108.210294,16.0378],[108.21055,16.038754],[108.210794,16.039271],[108.211489,16.039498],[108.211818,16.039553],[108.213746,16.039781],[108.214676,16.039889],[108.214676,16.039889],[108.215547,16.039996],[108.217749,16.040225],[108.21784,16.040199],[108.218303,16.040284],[108.218303,16.040284],[108.221801,16.040647],[108.221438,16.043844],[108.221438,16.043844],[108.221124,16.046394],[108.222719,16.046571],[108.222646,16.047182],[108.222626,16.047694],[108.222626,16.047694],[108.222625,16.0477],[108.222625,16.0477],[108.22247,16.049008],[108.222651,16.049517],[108.222424,16.049932],[108.222203,16.053445],[108.222276,16.056415],[108.222484,16.057457],[108.222987,16.058526],[108.222987,16.058526],[108.223914,16.06001],[108.223986,16.060311],[108.223957,16.060974],[108.224002,16.061128],[108.221172,16.061015],[108.221172,16.061015],[108.219545,16.060972],[108.21795,16.060881],[108.217833,16.060944],[108.217833,16.060944],[108.217314,16.061202],[108.217667,16.062193],[108.21592,16.062694],[108.215825,16.062893],[108.215825,16.062893],[108.214571,16.065463],[108.214323,16.066141],[108.214323,16.066141],[108.213913,16.068016],[108.213913,16.068016],[108.213536,16.069878],[108.21353,16.070079],[108.213071,16.072198],[108.213196,16.072527],[108.213446,16.072882],[108.213446,16.072882],[108.214945,16.075055],[108.214945,16.075055],[108.216593,16.077616],[108.216593,16.077616],[108.218361,16.080237],[108.218361,16.080237],[108.219132,16.081376],[108.219588,16.081846],[108.220039,16.082131],[108.220659,16.082335],[108.220659,16.082335],[108.222186,16.082606],[108.22233,16.082564],[108.222413,16.082608],[108.222453,16.08268],[108.222719,16.082622],[108.223593,16.082706],[108.223604,16.082595]]},{id:"bus-routes-5",codeBusRoute:"R17A",directionRoute:"turn",colorRoute:"#360ec0",lineRoute:[[108.223586,16.08276],[108.223593,16.082706],[108.222719,16.082622],[108.222453,16.08268],[108.222428,16.082804],[108.222318,16.082866],[108.222206,16.082839],[108.222144,16.08275],[108.222186,16.082606],[108.222278,16.082563],[108.222378,16.082582],[108.222603,16.08233],[108.222726,16.081397],[108.222726,16.081397],[108.223221,16.077702],[108.221126,16.077425],[108.221126,16.077425],[108.217585,16.076967],[108.217704,16.076195],[108.217704,16.076195],[108.218006,16.074506],[108.218238,16.073516],[108.21842,16.072376],[108.218322,16.072365],[108.218322,16.072365],[108.21842,16.072376],[108.219202,16.068341],[108.220342,16.06862],[108.221824,16.068607],[108.221824,16.068607],[108.223924,16.068613],[108.223744,16.06704],[108.223744,16.06704],[108.22322,16.061949],[108.22322,16.061949],[108.223142,16.060955],[108.223351,16.060865],[108.223543,16.060847],[108.223543,16.060847],[108.223742,16.060741],[108.223835,16.060434],[108.223719,16.059928],[108.222656,16.058137],[108.222335,16.057312],[108.222167,16.056422],[108.222087,16.054024],[108.22023,16.054026],[108.220338,16.052932],[108.220338,16.052932],[108.221469,16.043534],[108.221469,16.043534],[108.221968,16.039187],[108.221968,16.039187],[108.222445,16.03539],[108.222445,16.03539],[108.222786,16.032895],[108.222785,16.031369],[108.222785,16.031369],[108.222703,16.030355],[108.222599,16.029868],[108.222071,16.028307],[108.221673,16.026736],[108.22131,16.026438],[108.220125,16.025846],[108.220125,16.025846],[108.218469,16.025011],[108.216163,16.023711],[108.214734,16.022958],[108.214734,16.022958],[108.213925,16.022455],[108.212291,16.021155],[108.211666,16.020701],[108.210438,16.019856],[108.20988,16.019587],[108.20988,16.019587],[108.208377,16.018998],[108.205744,16.017417],[108.205234,16.01721],[108.204264,16.016921],[108.204264,16.016921],[108.203039,16.016545],[108.202426,16.016282],[108.201925,16.015997],[108.200621,16.015121],[108.198984,16.014254],[108.19864,16.014105],[108.198362,16.014021],[108.197978,16.013965],[108.197555,16.013953],[108.197223,16.013989],[108.197223,16.013989],[108.192307,16.01428],[108.191189,16.014177],[108.189988,16.01376],[108.187638,16.012108],[108.185697,16.011492],[108.184685,16.011617],[108.182585,16.012605],[108.180722,16.012787],[108.179653,16.012757],[108.177258,16.012159],[108.17457,16.012025],[108.17457,16.012025],[108.173409,16.011798],[108.171762,16.011406],[108.171303,16.011339],[108.170823,16.011323],[108.169997,16.01145],[108.168227,16.012086],[108.167757,16.012163],[108.167757,16.012163],[108.166998,16.012122],[108.166113,16.011846],[108.160516,16.009405],[108.159695,16.009163],[108.158516,16.009009],[108.156085,16.009225],[108.154926,16.00924],[108.153075,16.009114],[108.151811,16.008805],[108.151811,16.008805],[108.150986,16.008446],[108.14987,16.007707],[108.149,16.006899],[108.148395,16.00612],[108.147817,16.005047],[108.146767,16.001817],[108.146578,16.001827],[108.145942,16.00113],[108.145243,16.000156],[108.144784,15.999775],[108.143425,15.99983],[108.142985,15.999745],[108.140609,15.998833],[108.1384,15.998395],[108.138134,15.998241],[108.137535,15.997434],[108.137535,15.997434],[108.137195,15.996984],[108.136465,15.995161],[108.136419,15.994384],[108.136482,15.992907],[108.13651,15.992627],[108.13673,15.992203],[108.136414,15.991095],[108.138243,15.990486],[108.138979,15.989978],[108.137927,15.988556],[108.138888,15.987845],[108.138968,15.987707],[108.139124,15.987668],[108.140249,15.986844],[108.140081,15.986615]]},{id:"bus-routes-6",codeBusRoute:"R17A",directionRoute:"return",colorRoute:"#360ec0",lineRoute:[[108.140081,15.986615],[108.140955,15.987794],[108.14113,15.988973],[108.14,15.989228],[108.140066,15.989628],[108.139559,15.989703],[108.139767,15.99104],[108.13718,15.991908],[108.13673,15.992203],[108.13651,15.992627],[108.136419,15.994384],[108.136465,15.995161],[108.137195,15.996984],[108.137449,15.99732],[108.137449,15.99732],[108.138134,15.998241],[108.1384,15.998395],[108.140609,15.998833],[108.142985,15.999745],[108.143425,15.99983],[108.144784,15.999775],[108.145243,16.000156],[108.145942,16.00113],[108.146578,16.001827],[108.146767,16.001817],[108.147927,16.005006],[108.148266,16.005716],[108.148828,16.006544],[108.149348,16.0071],[108.150187,16.007814],[108.15079,16.008195],[108.15181,16.008674],[108.15181,16.008674],[108.153098,16.008988],[108.15493,16.009112],[108.156077,16.009097],[108.158207,16.008908],[108.159209,16.008969],[108.16053,16.0093],[108.163356,16.010532],[108.163356,16.010532],[108.166163,16.011728],[108.166884,16.011968],[108.167226,16.012031],[108.167576,16.012049],[108.167953,16.012019],[108.168787,16.011763],[108.16994,16.011349],[108.170464,16.01123],[108.17082,16.011195],[108.171455,16.011245],[108.172055,16.011359],[108.174226,16.011864],[108.174226,16.011864],[108.177109,16.012035],[108.17924,16.012567],[108.180475,16.012679],[108.182483,16.012507],[108.184617,16.011509],[108.185606,16.011355],[108.187712,16.011989],[108.189778,16.013491],[108.191218,16.014053],[108.192235,16.014164],[108.195285,16.014062],[108.198028,16.013811],[108.198028,16.013811],[108.1985,16.013905],[108.198923,16.014071],[108.2006,16.014922],[108.202346,16.016092],[108.202945,16.016363],[108.203679,16.016593],[108.203679,16.016593],[108.204947,16.016968],[108.205771,16.017273],[108.208338,16.018824],[108.209845,16.01942],[108.209845,16.01942],[108.210407,16.019667],[108.21109,16.020103],[108.214076,16.02243],[108.214673,16.022803],[108.214673,16.022803],[108.219901,16.025604],[108.219901,16.025604],[108.22106,16.026186],[108.221439,16.026412],[108.221644,16.026583],[108.222071,16.028307],[108.222599,16.029868],[108.222703,16.030355],[108.22277,16.031088],[108.22277,16.031088],[108.222801,16.03267],[108.222688,16.033547],[108.222688,16.033547],[108.22193,16.039514],[108.22193,16.039514],[108.221428,16.043943],[108.221428,16.043943],[108.22092,16.048023],[108.22092,16.048023],[108.220545,16.051253],[108.220545,16.051253],[108.22023,16.054026],[108.220987,16.054024],[108.222203,16.053445],[108.222276,16.056415],[108.222352,16.05698],[108.222729,16.058071],[108.223942,16.060092],[108.223957,16.060974],[108.224118,16.061675],[108.224122,16.062288],[108.224122,16.062288],[108.224151,16.064958],[108.224218,16.065226],[108.224871,16.066887],[108.224943,16.068076],[108.224943,16.068076],[108.224976,16.068616],[108.220342,16.06862],[108.219768,16.068478],[108.219768,16.068478],[108.219202,16.068341],[108.218642,16.07114],[108.21832,16.073003],[108.21832,16.073003],[108.217861,16.075239],[108.217677,16.076369],[108.217677,16.076369],[108.217585,16.076967],[108.221462,16.077467],[108.221462,16.077467],[108.223992,16.077794],[108.223778,16.079721],[108.223778,16.079721],[108.223684,16.080613],[108.223545,16.08143],[108.223549,16.081792],[108.223655,16.082046],[108.223601,16.082624]]},{id:"bus-routes-7",codeBusRoute:"R6A",directionRoute:"turn",colorRoute:"#76a103",lineRoute:[[108.172605,16.056559],[108.172563,16.05674],[108.172018,16.056519],[108.172944,16.05297],[108.173498,16.053163],[108.174083,16.050783],[108.174083,16.050783],[108.174437,16.049278],[108.17651,16.049858],[108.177708,16.050272],[108.178961,16.050649],[108.178961,16.050649],[108.180117,16.051025],[108.180326,16.050711],[108.180507,16.050066],[108.180858,16.049634],[108.181081,16.049241],[108.181355,16.048291],[108.181853,16.046805],[108.182195,16.045991],[108.18225,16.045618],[108.18225,16.045618],[108.182407,16.04499],[108.182813,16.04404],[108.183079,16.042999],[108.183463,16.042021],[108.183519,16.04176],[108.183519,16.04176],[108.183658,16.040334],[108.18394,16.038736],[108.18401,16.037497],[108.184078,16.037085],[108.184078,16.037085],[108.184332,16.036174],[108.186393,16.036707],[108.186393,16.036707],[108.18698,16.036878],[108.187881,16.034185],[108.187881,16.034185],[108.189962,16.027959],[108.190039,16.027998],[108.190922,16.025409],[108.191252,16.024681],[108.193328,16.021899],[108.193328,16.021899],[108.193671,16.021193],[108.193819,16.020586],[108.193849,16.020218],[108.194241,16.020236],[108.195919,16.020438],[108.195919,16.020438],[108.196949,16.020571],[108.197176,16.020631],[108.198959,16.021309],[108.201213,16.022277],[108.201213,16.022277],[108.202196,16.022664],[108.204162,16.023221],[108.204162,16.023221],[108.207051,16.024012],[108.207051,16.024012],[108.209156,16.024576],[108.208974,16.025434],[108.208713,16.029775],[108.208713,16.029775],[108.208724,16.030457],[108.208923,16.031088],[108.209006,16.031161],[108.209058,16.031287],[108.20905,16.031389],[108.208982,16.031504],[108.208951,16.032149],[108.209103,16.032941],[108.209103,16.032941],[108.210316,16.037886],[108.210316,16.037886],[108.21055,16.038754],[108.210794,16.039271],[108.211818,16.039553],[108.213746,16.039781],[108.215547,16.039996],[108.217749,16.040225],[108.221801,16.040647],[108.221967,16.039195],[108.221967,16.039195],[108.222177,16.037551],[108.223675,16.037739],[108.223882,16.035986],[108.223882,16.035986],[108.224182,16.033439],[108.224207,16.032951],[108.228174,16.033774],[108.228174,16.033774],[108.238082,16.035796],[108.239013,16.03604],[108.240234,16.036454],[108.24182,16.037373],[108.24182,16.037373],[108.243139,16.038183],[108.242587,16.039229],[108.242541,16.039502],[108.242109,16.040386],[108.242109,16.040386],[108.240846,16.042839],[108.240846,16.042839],[108.239912,16.044712],[108.239976,16.044783],[108.24144,16.045204],[108.24144,16.045204],[108.242394,16.045485],[108.242394,16.045485],[108.244192,16.045992],[108.245643,16.046237],[108.246527,16.046479],[108.247191,16.045122],[108.247586,16.044111],[108.247866,16.043686],[108.247972,16.043162],[108.249515,16.039704],[108.249515,16.039704],[108.25423,16.029713],[108.25423,16.029713],[108.255215,16.027598],[108.255215,16.027598],[108.259529,16.018337],[108.261132,16.015059]]},{id:"bus-routes-8",codeBusRoute:"R6A",directionRoute:"return",colorRoute:"#76a103",lineRoute:[[108.261132,16.015059],[108.259529,16.018337],[108.255157,16.027723],[108.255157,16.027723],[108.253737,16.030769],[108.253737,16.030769],[108.249472,16.039792],[108.249472,16.039792],[108.247972,16.043162],[108.247866,16.043686],[108.247986,16.044032],[108.249415,16.045944],[108.24957,16.046534],[108.249546,16.047008],[108.249415,16.047515],[108.247606,16.046856],[108.247606,16.046856],[108.246788,16.04656],[108.245932,16.046306],[108.244192,16.045992],[108.239976,16.044783],[108.239864,16.044808],[108.239106,16.046293],[108.239106,16.046293],[108.238754,16.047493],[108.23854,16.047436],[108.23887,16.046373],[108.239318,16.045379],[108.239318,16.045379],[108.241835,16.040408],[108.241835,16.040408],[108.242642,16.038808],[108.242707,16.038517],[108.242676,16.038331],[108.242499,16.037982],[108.241621,16.037381],[108.241621,16.037381],[108.240585,16.036734],[108.239966,16.03645],[108.23872,16.03606],[108.228897,16.034021],[108.2288,16.034776],[108.2288,16.034776],[108.228875,16.03415],[108.22477,16.033296],[108.224537,16.033281],[108.224297,16.033478],[108.223952,16.036355],[108.223952,16.036355],[108.223855,16.037178],[108.22447,16.037719],[108.225697,16.037886],[108.225675,16.038056],[108.225439,16.038029],[108.225439,16.038029],[108.224464,16.037935],[108.223717,16.038361],[108.223292,16.04177],[108.22254,16.041698],[108.222454,16.041655],[108.222411,16.041556],[108.222443,16.041285],[108.222443,16.041285],[108.222487,16.040904],[108.217891,16.040454],[108.217815,16.04047],[108.217593,16.040415],[108.215634,16.040206],[108.214745,16.040093],[108.214745,16.040093],[108.213875,16.039991],[108.213778,16.040013],[108.213702,16.03997],[108.211914,16.039759],[108.210853,16.039652],[108.210751,16.039733],[108.210578,16.039758],[108.210422,16.039679],[108.210369,16.039605],[108.210344,16.039518],[108.210385,16.039346],[108.210375,16.038889],[108.210337,16.038525],[108.209799,16.036273],[108.209799,16.036273],[108.208986,16.03298],[108.208986,16.03298],[108.208838,16.032363],[108.20855,16.031468],[108.208504,16.031295],[108.208578,16.030479],[108.208578,16.030479],[108.208857,16.025417],[108.208717,16.024951],[108.208559,16.024718],[108.208243,16.024488],[108.20752,16.02429],[108.20752,16.02429],[108.204346,16.02342],[108.204346,16.02342],[108.201937,16.022723],[108.201102,16.022382],[108.201102,16.022382],[108.198922,16.021465],[108.197036,16.020744],[108.195833,16.020581],[108.195833,16.020581],[108.194356,16.020418],[108.194093,16.020507],[108.19398,16.020593],[108.193812,16.021222],[108.193585,16.021728],[108.193345,16.022115],[108.193345,16.022115],[108.191713,16.024233],[108.191264,16.024996],[108.188194,16.033977],[108.188194,16.033977],[108.187185,16.036939],[108.186007,16.036612],[108.185993,16.036674],[108.185993,16.036674],[108.186007,16.036612],[108.184332,16.036174],[108.184024,16.03737],[108.18394,16.038736],[108.183658,16.040334],[108.183568,16.041265],[108.183568,16.041265],[108.183463,16.042021],[108.183143,16.042795],[108.182813,16.04404],[108.182569,16.044559],[108.182569,16.044559],[108.182277,16.045474],[108.182195,16.045991],[108.181853,16.046805],[108.181355,16.048291],[108.181081,16.049241],[108.180858,16.049634],[108.180507,16.050066],[108.180326,16.050711],[108.180117,16.051025],[108.179492,16.050815],[108.179492,16.050815],[108.177789,16.050298],[108.17651,16.049858],[108.174532,16.049313],[108.174191,16.050749],[108.174191,16.050749],[108.173598,16.053196],[108.174713,16.053564],[108.173629,16.057097],[108.173357,16.056957],[108.172366,16.056661],[108.172467,16.056306],[108.172657,16.056363],[108.172589,16.056629]]},{id:"bus-routes-9",codeBusRoute:"R15",directionRoute:"turn",colorRoute:"#9340a3",lineRoute:[[108.172815,16.056811],[108.172563,16.05674],[108.172392,16.057441],[108.17326,16.058137],[108.174408,16.058911],[108.174408,16.058911],[108.175575,16.059647],[108.175899,16.05978],[108.176674,16.060269],[108.178173,16.061349],[108.178406,16.061444],[108.178662,16.061439],[108.178965,16.061429],[108.179238,16.061554],[108.179421,16.061785],[108.179501,16.06225],[108.179641,16.062497],[108.181587,16.06399],[108.182251,16.064548],[108.182612,16.064743],[108.183122,16.06493],[108.183334,16.064873],[108.183529,16.06477],[108.183834,16.064069],[108.183834,16.064069],[108.185769,16.059752],[108.185769,16.059752],[108.186,16.05922],[108.187913,16.060008],[108.189332,16.060428],[108.191187,16.061152],[108.191187,16.061152],[108.191751,16.061368],[108.191835,16.061464],[108.191949,16.063298],[108.191998,16.064921],[108.191998,16.064921],[108.192032,16.067883],[108.192869,16.068073],[108.192869,16.068073],[108.193355,16.068176],[108.195388,16.06845],[108.196151,16.06845],[108.198094,16.068164],[108.198573,16.068192],[108.199212,16.068321],[108.199503,16.068345],[108.199503,16.068345],[108.201538,16.068406],[108.20154,16.067104],[108.201734,16.06659],[108.202612,16.06696],[108.202612,16.06696],[108.20503,16.067158],[108.20497,16.068413],[108.20497,16.068413],[108.204989,16.06874],[108.205239,16.069242],[108.205682,16.069804],[108.205933,16.070058],[108.206354,16.070277],[108.206627,16.070362],[108.208787,16.070832],[108.208787,16.070832],[108.211323,16.071334],[108.211323,16.071334],[108.213173,16.071688],[108.213934,16.067904],[108.213934,16.067904],[108.214089,16.067109],[108.214089,16.067109],[108.214341,16.066069],[108.214571,16.065463],[108.214089,16.062803],[108.213987,16.062453],[108.213706,16.061014],[108.213706,16.061014],[108.213579,16.060236],[108.215192,16.060473],[108.215192,16.060473],[108.216579,16.060656],[108.216579,16.060656],[108.216912,16.060662],[108.217006,16.060632],[108.217302,16.060723],[108.217662,16.060749],[108.217662,16.060749],[108.233611,16.061311],[108.233611,16.061311],[108.234183,16.061331],[108.234287,16.061239],[108.234418,16.061216],[108.23454,16.061267],[108.234621,16.061408],[108.23926,16.062186],[108.23926,16.062186],[108.239826,16.062281],[108.24005,16.06221],[108.240202,16.06236],[108.243354,16.063268],[108.243126,16.069256],[108.243126,16.069256],[108.243088,16.070081],[108.243213,16.070132],[108.243258,16.070248],[108.24319,16.070371],[108.243075,16.070402],[108.243011,16.07275],[108.243011,16.07275],[108.242812,16.07816],[108.242842,16.078549],[108.242922,16.078833],[108.242922,16.078833],[108.244175,16.082073],[108.244474,16.082503],[108.244474,16.082503],[108.245868,16.084284],[108.246137,16.084686],[108.246284,16.085139],[108.246356,16.08554],[108.246453,16.086463],[108.246453,16.086463],[108.246495,16.086864],[108.246681,16.087737],[108.2472,16.087663],[108.248655,16.087353],[108.248959,16.088248],[108.24935,16.089132],[108.24935,16.089132],[108.250907,16.091795],[108.252192,16.095434],[108.252936,16.097079],[108.25398,16.098612],[108.255367,16.099926],[108.254919,16.100452],[108.255049,16.100659],[108.254742,16.101117],[108.255903,16.101928],[108.255622,16.102301],[108.255981,16.1025],[108.25577,16.102828]]},{id:"bus-routes-10",codeBusRoute:"R15",directionRoute:"return",colorRoute:"#9340a3",lineRoute:[[108.25577,16.102828],[108.255981,16.1025],[108.256487,16.102763],[108.257453,16.101421],[108.256393,16.100754],[108.254739,16.099389],[108.253497,16.097995],[108.252465,16.096128],[108.250752,16.091458],[108.249606,16.089612],[108.249606,16.089612],[108.249114,16.088617],[108.248687,16.087474],[108.247225,16.087787],[108.246708,16.087856],[108.246495,16.086864],[108.246431,16.086874],[108.246431,16.086874],[108.246495,16.086864],[108.246363,16.08558],[108.246137,16.084686],[108.244175,16.082073],[108.243161,16.079465],[108.243161,16.079465],[108.242878,16.078693],[108.242812,16.07816],[108.243003,16.072996],[108.243003,16.072996],[108.243075,16.070402],[108.242979,16.070361],[108.242924,16.070242],[108.242972,16.070129],[108.243088,16.070081],[108.243146,16.068558],[108.243146,16.068558],[108.243328,16.063441],[108.240167,16.062531],[108.240059,16.062605],[108.239927,16.062604],[108.239809,16.062512],[108.239783,16.062442],[108.239155,16.062334],[108.239155,16.062334],[108.234592,16.061549],[108.23451,16.061628],[108.234395,16.06166],[108.234276,16.06163],[108.234188,16.061543],[108.23343,16.061474],[108.23343,16.061474],[108.221778,16.061036],[108.221194,16.061194],[108.221194,16.061194],[108.2185,16.061939],[108.218337,16.061077],[108.218337,16.061077],[108.218304,16.060898],[108.217128,16.060834],[108.217052,16.060898],[108.216974,16.060903],[108.216865,16.060805],[108.214015,16.060394],[108.214015,16.060394],[108.213595,16.060337],[108.213704,16.061004],[108.213704,16.061004],[108.214571,16.065463],[108.214108,16.067022],[108.213731,16.06893],[108.213731,16.06893],[108.213633,16.069393],[108.213633,16.069393],[108.21353,16.070079],[108.213173,16.071688],[108.211324,16.071334],[108.211324,16.071334],[108.208784,16.070831],[108.208784,16.070831],[108.206627,16.070362],[108.206354,16.070277],[108.205933,16.070058],[108.2054,16.069472],[108.205087,16.068968],[108.204972,16.068639],[108.204983,16.068133],[108.204983,16.068133],[108.20503,16.067158],[108.202983,16.067002],[108.202983,16.067002],[108.202682,16.066982],[108.202451,16.066908],[108.201734,16.06659],[108.20154,16.067104],[108.201538,16.068406],[108.199439,16.068344],[108.199034,16.068285],[108.199034,16.068285],[108.198573,16.068192],[108.197935,16.068171],[108.196151,16.06845],[108.195388,16.06845],[108.193355,16.068176],[108.192923,16.068085],[108.192923,16.068085],[108.192032,16.067883],[108.191967,16.063772],[108.191967,16.063772],[108.191835,16.061464],[108.191751,16.061368],[108.191593,16.061296],[108.190643,16.060937],[108.190643,16.060937],[108.189332,16.060428],[108.187913,16.060008],[108.186,16.05922],[108.185108,16.061256],[108.185108,16.061256],[108.18383,16.064078],[108.18383,16.064078],[108.183435,16.065036],[108.18358,16.065203],[108.183568,16.065354],[108.183464,16.065469],[108.183311,16.065502],[108.183234,16.065483],[108.182112,16.064599],[108.181889,16.064509],[108.181628,16.064322],[108.179495,16.062689],[108.179207,16.062614],[108.178902,16.062644],[108.178655,16.062623],[108.17854,16.062578],[108.178305,16.062377],[108.178233,16.062241],[108.178158,16.061785],[108.177998,16.061534],[108.17655,16.060463],[108.175761,16.059958],[108.175527,16.059745],[108.175282,16.059592],[108.174391,16.060921],[108.174178,16.060789],[108.175145,16.059375],[108.175575,16.059647],[108.175899,16.05978],[108.176482,16.060148],[108.176482,16.060148],[108.176674,16.060269],[108.17679,16.060086],[108.1774,16.058393],[108.174279,16.057391],[108.173357,16.056957],[108.172815,16.056811]]},{id:"bus-routes-11",codeBusRoute:"TMF",directionRoute:"turn",colorRoute:"#f4529d",lineRoute:[[108.232335,16.089449],[108.231857,16.08945],[108.231872,16.089846],[108.231758,16.08984],[108.231741,16.090182],[108.231741,16.090182],[108.231716,16.090691],[108.23176,16.090828],[108.230987,16.09107],[108.232892,16.093075],[108.232755,16.093195],[108.232755,16.093195],[108.232892,16.093075],[108.234364,16.094586],[108.233071,16.095763],[108.233973,16.097662],[108.232828,16.098661],[108.23205,16.100081],[108.23205,16.100081],[108.231751,16.100618],[108.231829,16.100686],[108.231842,16.100805],[108.231753,16.100901],[108.23166,16.100911],[108.231583,16.100874],[108.23138,16.100658],[108.230929,16.10042],[108.230929,16.10042],[108.215812,16.092692],[108.215136,16.091862],[108.214952,16.091298],[108.214879,16.087725],[108.214962,16.087421],[108.21638,16.086873],[108.21638,16.086873],[108.218205,16.08597],[108.219459,16.085395],[108.219899,16.086351],[108.22007,16.087066],[108.220134,16.087047],[108.220134,16.087047],[108.22007,16.087066],[108.219899,16.086351],[108.219459,16.085395],[108.220662,16.084793],[108.220662,16.084793],[108.220948,16.084574],[108.22122,16.08428],[108.222,16.083222],[108.222206,16.082839],[108.222144,16.08275],[108.222186,16.082606],[108.222278,16.082563],[108.222378,16.082582],[108.222603,16.08233],[108.22275,16.081196],[108.22275,16.081196],[108.223221,16.077702],[108.221118,16.077424],[108.221118,16.077424],[108.217585,16.076967],[108.217703,16.076198],[108.217703,16.076198],[108.218006,16.074506],[108.218238,16.073516],[108.218381,16.072617],[108.218381,16.072617],[108.218642,16.07114],[108.217518,16.070995],[108.217518,16.070995],[108.216929,16.07092],[108.215103,16.070542],[108.215847,16.067601],[108.214817,16.067395],[108.214817,16.067395],[108.212638,16.066949],[108.210753,16.066619],[108.210753,16.066619],[108.208597,16.066259],[108.208597,16.066259],[108.207072,16.066142],[108.206831,16.066185],[108.206794,16.066261],[108.206701,16.066287],[108.206619,16.066224],[108.206399,16.066155],[108.205341,16.066071],[108.205341,16.066071],[108.204513,16.06598],[108.204294,16.066018],[108.202254,16.065908],[108.202594,16.065461],[108.202925,16.064732],[108.202925,16.064732],[108.203557,16.063299],[108.20416,16.062186],[108.20416,16.062186],[108.20486,16.061083],[108.205224,16.060423],[108.20572,16.059366],[108.206026,16.058613],[108.207961,16.059314],[108.207961,16.059314],[108.208768,16.059537],[108.210249,16.05974],[108.210249,16.05974],[108.215168,16.06047],[108.215168,16.06047],[108.21648,16.060647],[108.216912,16.060662],[108.217006,16.060632],[108.217302,16.060723],[108.217716,16.060753],[108.217716,16.060753],[108.219522,16.060858],[108.222464,16.060945],[108.222464,16.060945],[108.233638,16.061312],[108.233638,16.061312],[108.234183,16.061331],[108.234287,16.061239],[108.234418,16.061216],[108.23454,16.061267],[108.234621,16.061408],[108.239826,16.062281],[108.239889,16.06223],[108.24005,16.06221],[108.240119,16.062241],[108.240202,16.06236],[108.242307,16.06298],[108.242307,16.06298],[108.245421,16.063871],[108.245529,16.063821],[108.245635,16.063829],[108.245743,16.063908],[108.245782,16.064033],[108.245728,16.064164],[108.245644,16.064221],[108.245545,16.06455],[108.245483,16.065766],[108.245483,16.065766],[108.245367,16.069357],[108.245367,16.069357],[108.245248,16.07236],[108.245508,16.072702],[108.245494,16.073373]]},{id:"bus-routes-12",codeBusRoute:"TMF",directionRoute:"return",colorRoute:"#f4529d",lineRoute:[[108.245349,16.06983],[108.245325,16.070409],[108.245074,16.070399],[108.245089,16.069989],[108.245089,16.069989],[108.245262,16.065019],[108.245262,16.065019],[108.245364,16.064104],[108.244822,16.063879],[108.240167,16.062531],[108.239927,16.062604],[108.239783,16.062442],[108.234592,16.061549],[108.234395,16.06166],[108.234188,16.061543],[108.233394,16.061471],[108.233394,16.061471],[108.221202,16.061016],[108.221202,16.061016],[108.219545,16.060972],[108.21795,16.060881],[108.217849,16.060935],[108.217849,16.060935],[108.21795,16.060881],[108.217128,16.060834],[108.217052,16.060898],[108.216974,16.060903],[108.216865,16.060805],[108.214877,16.060519],[108.214877,16.060519],[108.208821,16.059641],[108.208277,16.059514],[108.208277,16.059514],[108.208126,16.059468],[108.208126,16.059468],[108.206548,16.058941],[108.206238,16.058888],[108.206006,16.058983],[108.205148,16.060858],[108.204099,16.062536],[108.203684,16.063345],[108.202753,16.065476],[108.202793,16.065625],[108.202888,16.065675],[108.204351,16.065778],[108.204561,16.06587],[108.205351,16.065969],[108.205351,16.065969],[108.206692,16.066079],[108.207403,16.066164],[108.207403,16.066164],[108.20713,16.066146],[108.20713,16.066146],[108.209028,16.066308],[108.212638,16.066949],[108.21436,16.067297],[108.21436,16.067297],[108.217611,16.06798],[108.217409,16.068936],[108.217409,16.068936],[108.216638,16.072169],[108.217864,16.072311],[108.217864,16.072311],[108.21842,16.072376],[108.218318,16.073013],[108.218318,16.073013],[108.217861,16.075239],[108.217677,16.076369],[108.217677,16.076369],[108.217585,16.076967],[108.221462,16.077467],[108.221462,16.077467],[108.223992,16.077794],[108.223788,16.079623],[108.223788,16.079623],[108.223684,16.080613],[108.223545,16.08143],[108.222709,16.082426],[108.222439,16.082642],[108.222428,16.082804],[108.222356,16.082857],[108.221402,16.084237],[108.221402,16.084237],[108.221089,16.084602],[108.220711,16.084899],[108.219512,16.0855],[108.219899,16.086351],[108.220059,16.087018],[108.220059,16.087018],[108.219899,16.086351],[108.219512,16.0855],[108.216449,16.08698],[108.216449,16.08698],[108.215321,16.087621],[108.215086,16.088873],[108.215028,16.091033],[108.215243,16.091826],[108.215897,16.092618],[108.230908,16.10029],[108.230908,16.10029],[108.231585,16.100644],[108.231751,16.100618],[108.232552,16.099143],[108.230755,16.098229],[108.231349,16.097143],[108.231815,16.096715],[108.231815,16.096715],[108.234275,16.094496],[108.232596,16.092774],[108.232596,16.092774],[108.230987,16.09107],[108.230984,16.090558],[108.230984,16.090558],[108.230989,16.089452],[108.232335,16.089449]]}],Se=function(){var t=(0,e.useState)([]),n=(0,o.Z)(t,2),r=n[0],i=n[1];return(0,e.useEffect)((function(){var e=function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te;case 2:t=e.sent,[],n=t.map((function(e){return{id:e.id,codeBusRoute:e.codeBusRoute,directionRoute:e.directionRoute,colorRoute:e.colorRoute,lineRoute:e.lineRoute}})),i(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),r},Ee=n(184),Ce=function(){var t,n=Se(),r=(0,e.useState)([]),i=(0,o.Z)(r,2),a=i[0],s=i[1],l=le((function(e){return e.routes.filters}));return(0,e.useEffect)((function(){var e=n.filter((function(e){return-1!==l.indexOf(e.codeBusRoute)&&"turn"===e.directionRoute})).map((function(e){return{type:"Feature",color:e.colorRoute,name:e.codeBusRoute,directionRoute:e.directionRoute,geometry:{type:"LineString",coordinates:e.lineRoute}}})),t={type:"FeatureCollection",features:[].concat((0,J.Z)(e),[e]).pop()};s(t)}),[l,n]),(0,Ee.jsx)(Ee.Fragment,{children:null===a||void 0===a||null===(t=a.features)||void 0===t?void 0:t.map((function(e,t){return(0,Ee.jsx)("div",{className:"polyline",children:(0,Ee.jsx)(X,{id:"polylineLayer",type:"geojson",data:a,children:(0,Ee.jsx)(Y,{id:"lineLayer",type:"line",source:"my-data",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"".concat(null===e||void 0===e?void 0:e.color),"line-width":5}})})},t)}))})},Ae=n(6863),Re=n(3366),Me=n(7462),Be=n(8182),Pe=n(4419),Ie=n(7563),ze=n(9723),Le=n(8956),De=n(8949),Oe=n(5721),Ne=n(2971);var Fe=e.forwardRef((function(t,n){var r=t.children,i=t.container,a=t.disablePortal,s=void 0!==a&&a,l=e.useState(null),u=(0,o.Z)(l,2),c=u[0],h=u[1],d=(0,Ie.Z)(e.isValidElement(r)?r.ref:null,n);return(0,Oe.Z)((function(){s||h(function(e){return"function"===typeof e?e():e}(i)||document.body)}),[i,s]),(0,Oe.Z)((function(){if(c&&!s)return(0,Ne.Z)(n,c),function(){(0,Ne.Z)(n,null)}}),[n,c,s]),s?e.isValidElement(r)?e.cloneElement(r,{ref:d}):r:c?I.createPortal(r,c):c})),je=n(7979);function Ve(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function Ze(e){return parseInt((0,je.Z)(e).getComputedStyle(e).paddingRight,10)||0}function Ue(e){var t=-1!==["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(e.tagName),n="INPUT"===e.tagName&&"hidden"===e.getAttribute("type");return t||n}function Ge(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,a=[t,n].concat((0,J.Z)(r));[].forEach.call(e.children,(function(e){var t=-1===a.indexOf(e),n=!Ue(e);t&&n&&Ve(e,i)}))}function He(e,t){var n=-1;return e.some((function(e,r){return!!t(e)&&(n=r,!0)})),n}function qe(e,t){var n=[],r=e.container;if(!t.disableScrollLock){if(function(e){var t=(0,ze.Z)(e);return t.body===e?(0,je.Z)(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}(r)){var i=function(e){var t=e.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}((0,ze.Z)(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight="".concat(Ze(r)+i,"px");var a=(0,ze.Z)(r).querySelectorAll(".mui-fixed");[].forEach.call(a,(function(e){n.push({value:e.style.paddingRight,property:"padding-right",el:e}),e.style.paddingRight="".concat(Ze(e)+i,"px")}))}var o;if(r.parentNode instanceof DocumentFragment)o=(0,ze.Z)(r).body;else{var s=r.parentElement,l=(0,je.Z)(r);o="HTML"===(null==s?void 0:s.nodeName)&&"scroll"===l.getComputedStyle(s).overflowY?s:r}n.push({value:o.style.overflow,property:"overflow",el:o},{value:o.style.overflowX,property:"overflow-x",el:o},{value:o.style.overflowY,property:"overflow-y",el:o}),o.style.overflow="hidden"}return function(){n.forEach((function(e){var t=e.value,n=e.el,r=e.property;t?n.style.setProperty(r,t):n.style.removeProperty(r)}))}}var We=function(){function e(){c(this,e),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return d(e,[{key:"add",value:function(e,t){var n=this.modals.indexOf(e);if(-1!==n)return n;n=this.modals.length,this.modals.push(e),e.modalRef&&Ve(e.modalRef,!1);var r=function(e){var t=[];return[].forEach.call(e.children,(function(e){"true"===e.getAttribute("aria-hidden")&&t.push(e)})),t}(t);Ge(t,e.mount,e.modalRef,r,!0);var i=He(this.containers,(function(e){return e.container===t}));return-1!==i?(this.containers[i].modals.push(e),n):(this.containers.push({modals:[e],container:t,restore:null,hiddenSiblings:r}),n)}},{key:"mount",value:function(e,t){var n=He(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),r=this.containers[n];r.restore||(r.restore=qe(r,t))}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.modals.indexOf(e);if(-1===n)return n;var r=He(this.containers,(function(t){return-1!==t.modals.indexOf(e)})),i=this.containers[r];if(i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(n,1),0===i.modals.length)i.restore&&i.restore(),e.modalRef&&Ve(e.modalRef,t),Ge(i.container,e.mount,e.modalRef,i.hiddenSiblings,!1),this.containers.splice(r,1);else{var a=i.modals[i.modals.length-1];a.modalRef&&Ve(a.modalRef,!1)}return n}},{key:"isTopModal",value:function(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}]),e}(),Xe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function Ke(e){var t=[],n=[];return Array.from(e.querySelectorAll(Xe)).forEach((function(e,r){var i=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return Number.isNaN(t)?"true"===e.contentEditable||("AUDIO"===e.nodeName||"VIDEO"===e.nodeName||"DETAILS"===e.nodeName)&&null===e.getAttribute("tabindex")?0:e.tabIndex:t}(e);-1!==i&&function(e){return!(e.disabled||"INPUT"===e.tagName&&"hidden"===e.type||function(e){if("INPUT"!==e.tagName||"radio"!==e.type)return!1;if(!e.name)return!1;var t=function(t){return e.ownerDocument.querySelector('input[type="radio"]'.concat(t))},n=t('[name="'.concat(e.name,'"]:checked'));return n||(n=t('[name="'.concat(e.name,'"]'))),n!==e}(e))}(e)&&(0===i?t.push(e):n.push({documentOrder:r,tabIndex:i,node:e}))})),n.sort((function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex})).map((function(e){return e.node})).concat(t)}function Ye(){return!0}var Je=function(t){var n=t.children,r=t.disableAutoFocus,i=void 0!==r&&r,a=t.disableEnforceFocus,o=void 0!==a&&a,s=t.disableRestoreFocus,l=void 0!==s&&s,u=t.getTabbable,c=void 0===u?Ke:u,h=t.isEnabled,d=void 0===h?Ye:h,f=t.open,p=e.useRef(),m=e.useRef(null),v=e.useRef(null),g=e.useRef(null),y=e.useRef(null),_=e.useRef(!1),x=e.useRef(null),b=(0,Ie.Z)(n.ref,x),w=e.useRef(null);e.useEffect((function(){f&&x.current&&(_.current=!i)}),[i,f]),e.useEffect((function(){if(f&&x.current){var e=(0,ze.Z)(x.current);return x.current.contains(e.activeElement)||(x.current.hasAttribute("tabIndex")||x.current.setAttribute("tabIndex",-1),_.current&&x.current.focus()),function(){l||(g.current&&g.current.focus&&(p.current=!0,g.current.focus()),g.current=null)}}}),[f]),e.useEffect((function(){if(f&&x.current){var e=(0,ze.Z)(x.current),t=function(t){var n=x.current;if(null!==n)if(e.hasFocus()&&!o&&d()&&!p.current){if(!n.contains(e.activeElement)){if(t&&y.current!==t.target||e.activeElement!==y.current)y.current=null;else if(null!==y.current)return;if(!_.current)return;var r=[];if(e.activeElement!==m.current&&e.activeElement!==v.current||(r=c(x.current)),r.length>0){var i,a,s=Boolean((null==(i=w.current)?void 0:i.shiftKey)&&"Tab"===(null==(a=w.current)?void 0:a.key)),l=r[0],u=r[r.length-1];s?u.focus():l.focus()}else n.focus()}}else p.current=!1},n=function(t){w.current=t,!o&&d()&&"Tab"===t.key&&e.activeElement===x.current&&t.shiftKey&&(p.current=!0,v.current.focus())};e.addEventListener("focusin",t),e.addEventListener("keydown",n,!0);var r=setInterval((function(){"BODY"===e.activeElement.tagName&&t()}),50);return function(){clearInterval(r),e.removeEventListener("focusin",t),e.removeEventListener("keydown",n,!0)}}}),[i,o,l,d,f,c]);var k=function(e){null===g.current&&(g.current=e.relatedTarget),_.current=!0};return(0,Ee.jsxs)(e.Fragment,{children:[(0,Ee.jsx)("div",{tabIndex:f?0:-1,onFocus:k,ref:m,"data-testid":"sentinelStart"}),e.cloneElement(n,{ref:b,onFocus:function(e){null===g.current&&(g.current=e.relatedTarget),_.current=!0,y.current=e.target;var t=n.props.onFocus;t&&t(e)}}),(0,Ee.jsx)("div",{tabIndex:f?0:-1,onFocus:k,ref:v,"data-testid":"sentinelEnd"})]})},Qe=n(5878),$e=n(1217);function et(e){return(0,$e.Z)("MuiModal",e)}(0,Qe.Z)("MuiModal",["root","hidden"]);var tt=function(e){return"string"===typeof e};function nt(e){if(void 0===e)return{};var t={};return Object.keys(e).filter((function(t){return!(t.match(/^on[A-Z]/)&&"function"===typeof e[t])})).forEach((function(n){t[n]=e[n]})),t}function rt(e){var t=e.getSlotProps,n=e.additionalProps,r=e.externalSlotProps,i=e.externalForwardedProps,a=e.className;if(!t){var o=(0,Be.Z)(null==i?void 0:i.className,null==r?void 0:r.className,a,null==n?void 0:n.className),s=(0,Me.Z)({},null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),l=(0,Me.Z)({},n,i,r);return o.length>0&&(l.className=o),Object.keys(s).length>0&&(l.style=s),{props:l,internalRef:void 0}}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(void 0===e)return{};var n={};return Object.keys(e).filter((function(n){return n.match(/^on[A-Z]/)&&"function"===typeof e[n]&&!t.includes(n)})).forEach((function(t){n[t]=e[t]})),n}((0,Me.Z)({},i,r)),c=nt(r),h=nt(i),d=t(u),f=(0,Be.Z)(null==d?void 0:d.className,null==n?void 0:n.className,a,null==i?void 0:i.className,null==r?void 0:r.className),p=(0,Me.Z)({},null==d?void 0:d.style,null==n?void 0:n.style,null==i?void 0:i.style,null==r?void 0:r.style),m=(0,Me.Z)({},d,n,h,c);return f.length>0&&(m.className=f),Object.keys(p).length>0&&(m.style=p),{props:m,internalRef:d.ref}}function it(e,t){return"function"===typeof e?e(t):e}var at=["elementType","externalSlotProps","ownerState"];function ot(e){var t,n=e.elementType,r=e.externalSlotProps,i=e.ownerState,a=(0,Re.Z)(e,at),o=it(r,i),s=rt((0,Me.Z)({},a,{externalSlotProps:o})),l=s.props,u=s.internalRef,c=(0,Ie.Z)(u,(0,Ie.Z)(null==o?void 0:o.ref,null==(t=e.additionalProps)?void 0:t.ref)),h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return tt(e)?t:(0,Me.Z)({},t,{ownerState:(0,Me.Z)({},t.ownerState,n)})}(n,(0,Me.Z)({},l,{ref:c}),i);return h}var st=["children","classes","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","onTransitionEnter","onTransitionExited"];var lt=new We,ut=e.forwardRef((function(t,n){var r,i=t.children,a=t.classes,s=t.closeAfterTransition,l=void 0!==s&&s,u=t.component,c=void 0===u?"div":u,h=t.components,d=void 0===h?{}:h,f=t.componentsProps,p=void 0===f?{}:f,m=t.container,v=t.disableAutoFocus,g=void 0!==v&&v,y=t.disableEnforceFocus,_=void 0!==y&&y,x=t.disableEscapeKeyDown,b=void 0!==x&&x,w=t.disablePortal,k=void 0!==w&&w,T=t.disableRestoreFocus,S=void 0!==T&&T,E=t.disableScrollLock,C=void 0!==E&&E,A=t.hideBackdrop,R=void 0!==A&&A,M=t.keepMounted,B=void 0!==M&&M,P=t.manager,I=void 0===P?lt:P,z=t.onBackdropClick,L=t.onClose,D=t.onKeyDown,O=t.open,N=t.onTransitionEnter,F=t.onTransitionExited,j=(0,Re.Z)(t,st),V=e.useState(!0),Z=(0,o.Z)(V,2),U=Z[0],G=Z[1],H=e.useRef({}),q=e.useRef(null),W=e.useRef(null),X=(0,Ie.Z)(W,n),K=function(e){return!!e.children&&e.children.props.hasOwnProperty("in")}(t),Y=null==(r=t["aria-hidden"])||r,J=function(){return H.current.modalRef=W.current,H.current.mountNode=q.current,H.current},Q=function(){I.mount(J(),{disableScrollLock:C}),W.current.scrollTop=0},$=(0,Le.Z)((function(){var e=function(e){return"function"===typeof e?e():e}(m)||(0,ze.Z)(q.current).body;I.add(J(),e),W.current&&Q()})),ee=e.useCallback((function(){return I.isTopModal(J())}),[I]),te=(0,Le.Z)((function(e){q.current=e,e&&(O&&ee()?Q():Ve(W.current,Y))})),ne=e.useCallback((function(){I.remove(J(),Y)}),[I,Y]);e.useEffect((function(){return function(){ne()}}),[ne]),e.useEffect((function(){O?$():K&&l||ne()}),[O,ne,K,l,$]);var re=(0,Me.Z)({},t,{classes:a,closeAfterTransition:l,disableAutoFocus:g,disableEnforceFocus:_,disableEscapeKeyDown:b,disablePortal:k,disableRestoreFocus:S,disableScrollLock:C,exited:U,hideBackdrop:R,keepMounted:B}),ie=function(e){var t=e.open,n=e.exited,r=e.classes,i={root:["root",!t&&n&&"hidden"]};return(0,Pe.Z)(i,et,r)}(re),ae={};void 0===i.props.tabIndex&&(ae.tabIndex="-1"),K&&(ae.onEnter=(0,De.Z)((function(){G(!1),N&&N()}),i.props.onEnter),ae.onExited=(0,De.Z)((function(){G(!0),F&&F(),l&&ne()}),i.props.onExited));var oe=d.Root||c,se=ot({elementType:oe,externalSlotProps:p.root,externalForwardedProps:j,additionalProps:{ref:X,role:"presentation",onKeyDown:function(e){D&&D(e),"Escape"===e.key&&ee()&&(b||(e.stopPropagation(),L&&L(e,"escapeKeyDown")))}},className:ie.root,ownerState:re}),le=d.Backdrop,ue=ot({elementType:le,externalSlotProps:p.backdrop,additionalProps:{"aria-hidden":!0,onClick:function(e){e.target===e.currentTarget&&(z&&z(e),L&&L(e,"backdropClick"))},open:O},ownerState:re});return B||O||K&&!U?(0,Ee.jsx)(Fe,{ref:te,container:m,disablePortal:k,children:(0,Ee.jsxs)(oe,(0,Me.Z)({},se,{children:[!R&&le?(0,Ee.jsx)(le,(0,Me.Z)({},ue)):null,(0,Ee.jsx)(Je,{disableEnforceFocus:_,disableAutoFocus:g,disableRestoreFocus:S,isEnabled:ee,open:O,children:e.cloneElement(i,ae)})]}))}):null})),ct=n(8929);function ht(e,t){return ht=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ht(e,t)}function dt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ht(e,t)}var ft=!1,pt=e.createContext(null),mt="unmounted",vt="exited",gt="entering",yt="entered",_t="exiting",xt=function(t){function n(e,n){var r;r=t.call(this,e,n)||this;var i,a=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?a?(i=vt,r.appearStatus=gt):i=yt:i=e.unmountOnExit||e.mountOnEnter?mt:vt,r.state={status:i},r.nextCallback=null,r}dt(n,t),n.getDerivedStateFromProps=function(e,t){return e.in&&t.status===mt?{status:vt}:null};var r=n.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==gt&&n!==yt&&(t=gt):n!==gt&&n!==yt||(t=_t)}this.updateStatus(!1,t)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},r.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===gt){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:I.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===vt&&this.setState({status:mt})},r.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[I.findDOMNode(this),r],a=i[0],o=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||ft?this.safeSetState({status:yt},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:gt},(function(){t.props.onEntering(a,o),t.onTransitionEnd(l,(function(){t.safeSetState({status:yt},(function(){t.props.onEntered(a,o)}))}))})))},r.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:I.findDOMNode(this);t&&!ft?(this.props.onExit(r),this.safeSetState({status:_t},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:vt},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:vt},(function(){e.props.onExited(r)}))},r.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},r.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},r.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:I.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},r.render=function(){var t=this.state.status;if(t===mt)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,(0,Re.Z)(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(pt.Provider,{value:null},"function"===typeof r?r(t,i):e.cloneElement(e.Children.only(r),i))},n}(e.Component);function bt(){}xt.contextType=pt,xt.propTypes={},xt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:bt,onEntering:bt,onEntered:bt,onExit:bt,onExiting:bt,onExited:bt},xt.UNMOUNTED=mt,xt.EXITED=vt,xt.ENTERING=gt,xt.ENTERED=yt,xt.EXITING=_t;var wt=xt,kt=n(886),Tt=n(4205);function St(){return(0,kt.Z)(Tt.Z)}var Et=function(e){return e.scrollTop};function Ct(e,t){var n,r,i=e.timeout,a=e.easing,o=e.style,s=void 0===o?{}:o;return{duration:null!=(n=s.transitionDuration)?n:"number"===typeof i?i:i[t.mode]||0,easing:null!=(r=s.transitionTimingFunction)?r:"object"===typeof a?a[t.mode]:a,delay:s.transitionDelay}}var At=n(7933),Rt=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],Mt={entering:{opacity:1},entered:{opacity:1}},Bt=e.forwardRef((function(t,n){var r=St(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},a=t.addEndListener,o=t.appear,s=void 0===o||o,l=t.children,u=t.easing,c=t.in,h=t.onEnter,d=t.onEntered,f=t.onEntering,p=t.onExit,m=t.onExited,v=t.onExiting,g=t.style,y=t.timeout,_=void 0===y?i:y,x=t.TransitionComponent,b=void 0===x?wt:x,w=(0,Re.Z)(t,Rt),k=e.useRef(null),T=(0,At.Z)(l.ref,n),S=(0,At.Z)(k,T),E=function(e){return function(t){if(e){var n=k.current;void 0===t?e(n):e(n,t)}}},C=E(f),A=E((function(e,t){Et(e);var n=Ct({style:g,timeout:_,easing:u},{mode:"enter"});e.style.webkitTransition=r.transitions.create("opacity",n),e.style.transition=r.transitions.create("opacity",n),h&&h(e,t)})),R=E(d),M=E(v),B=E((function(e){var t=Ct({style:g,timeout:_,easing:u},{mode:"exit"});e.style.webkitTransition=r.transitions.create("opacity",t),e.style.transition=r.transitions.create("opacity",t),p&&p(e)})),P=E(m);return(0,Ee.jsx)(b,(0,Me.Z)({appear:s,in:c,nodeRef:k,onEnter:A,onEntered:R,onEntering:C,onExit:B,onExited:P,onExiting:M,addEndListener:function(e){a&&a(k.current,e)},timeout:_},w,{children:function(t,n){return e.cloneElement(l,(0,Me.Z)({style:(0,Me.Z)({opacity:0,visibility:"exited"!==t||c?void 0:"hidden"},Mt[t],g,l.props.style),ref:S},n))}}))}));function Pt(e){return(0,$e.Z)("MuiBackdrop",e)}(0,Qe.Z)("MuiBackdrop",["root","invisible"]);var It=["children","component","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],zt=(0,Ae.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.invisible&&t.invisible]}})((function(e){var t=e.ownerState;return(0,Me.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})})),Lt=e.forwardRef((function(e,t){var n,r,i=(0,ct.Z)({props:e,name:"MuiBackdrop"}),a=i.children,o=i.component,s=void 0===o?"div":o,l=i.components,u=void 0===l?{}:l,c=i.componentsProps,h=void 0===c?{}:c,d=i.className,f=i.invisible,p=void 0!==f&&f,m=i.open,v=i.transitionDuration,g=i.TransitionComponent,y=void 0===g?Bt:g,_=(0,Re.Z)(i,It),x=(0,Me.Z)({},i,{component:s,invisible:p}),b=function(e){var t=e.classes,n={root:["root",e.invisible&&"invisible"]};return(0,Pe.Z)(n,Pt,t)}(x);return(0,Ee.jsx)(y,(0,Me.Z)({in:m,timeout:v},_,{children:(0,Ee.jsx)(zt,{"aria-hidden":!0,as:null!=(n=u.Root)?n:s,className:(0,Be.Z)(b.root,d),ownerState:(0,Me.Z)({},x,null==(r=h.root)?void 0:r.ownerState),classes:b,ref:t,children:a})}))})),Dt=["BackdropComponent","BackdropProps","closeAfterTransition","children","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","theme"],Ot=(0,Ae.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,!n.open&&n.exited&&t.hidden]}})((function(e){var t=e.theme,n=e.ownerState;return(0,Me.Z)({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!n.open&&n.exited&&{visibility:"hidden"})})),Nt=(0,Ae.ZP)(Lt,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(e,t){return t.backdrop}})({zIndex:-1}),Ft=e.forwardRef((function(t,n){var r,i,a=(0,ct.Z)({name:"MuiModal",props:t}),s=a.BackdropComponent,l=void 0===s?Nt:s,u=a.BackdropProps,c=a.closeAfterTransition,h=void 0!==c&&c,d=a.children,f=a.component,p=a.components,m=void 0===p?{}:p,v=a.componentsProps,g=void 0===v?{}:v,y=a.disableAutoFocus,_=void 0!==y&&y,x=a.disableEnforceFocus,b=void 0!==x&&x,w=a.disableEscapeKeyDown,k=void 0!==w&&w,T=a.disablePortal,S=void 0!==T&&T,E=a.disableRestoreFocus,C=void 0!==E&&E,A=a.disableScrollLock,R=void 0!==A&&A,M=a.hideBackdrop,B=void 0!==M&&M,P=a.keepMounted,I=void 0!==P&&P,z=a.theme,L=(0,Re.Z)(a,Dt),D=e.useState(!0),O=(0,o.Z)(D,2),N=O[0],F=O[1],j={closeAfterTransition:h,disableAutoFocus:_,disableEnforceFocus:b,disableEscapeKeyDown:k,disablePortal:S,disableRestoreFocus:C,disableScrollLock:R,hideBackdrop:B,keepMounted:I},V=(0,Me.Z)({},a,j,{exited:N}),Z=function(e){return e.classes}(V),U=null!=(r=null!=(i=m.Root)?i:f)?r:Ot;return(0,Ee.jsx)(ut,(0,Me.Z)({components:(0,Me.Z)({Root:U,Backdrop:l},m),componentsProps:{root:function(){return(0,Me.Z)({},it(g.root,V),!tt(U)&&{as:f,theme:z})},backdrop:function(){return(0,Me.Z)({},u,it(g.backdrop,V))}},onTransitionEnter:function(){return F(!1)},onTransitionExited:function(){return F(!0)},ref:n},L,{classes:Z},j,{children:d}))})),jt=n(2977),Vt=n(8195),Zt=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function Ut(e,t,n){var r,i=function(e,t,n){var r,i=t.getBoundingClientRect(),a=n&&n.getBoundingClientRect(),o=(0,Vt.Z)(t);if(t.fakeTransform)r=t.fakeTransform;else{var s=o.getComputedStyle(t);r=s.getPropertyValue("-webkit-transform")||s.getPropertyValue("transform")}var l=0,u=0;if(r&&"none"!==r&&"string"===typeof r){var c=r.split("(")[1].split(")")[0].split(",");l=parseInt(c[4],10),u=parseInt(c[5],10)}return"left"===e?"translateX(".concat(a?a.right+l-i.left:o.innerWidth+l-i.left,"px)"):"right"===e?"translateX(-".concat(a?i.right-a.left-l:i.left+i.width-l,"px)"):"up"===e?"translateY(".concat(a?a.bottom+u-i.top:o.innerHeight+u-i.top,"px)"):"translateY(-".concat(a?i.top-a.top+i.height-u:i.top+i.height-u,"px)")}(e,t,"function"===typeof(r=n)?r():r);i&&(t.style.webkitTransform=i,t.style.transform=i)}var Gt=e.forwardRef((function(t,n){var r=St(),i={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},o=t.addEndListener,s=t.appear,l=void 0===s||s,u=t.children,c=t.container,h=t.direction,d=void 0===h?"down":h,f=t.easing,p=void 0===f?i:f,m=t.in,v=t.onEnter,g=t.onEntered,y=t.onEntering,_=t.onExit,x=t.onExited,b=t.onExiting,w=t.style,k=t.timeout,T=void 0===k?a:k,S=t.TransitionComponent,E=void 0===S?wt:S,C=(0,Re.Z)(t,Zt),A=e.useRef(null),R=(0,At.Z)(u.ref,A),M=(0,At.Z)(R,n),B=function(e){return function(t){e&&(void 0===t?e(A.current):e(A.current,t))}},P=B((function(e,t){Ut(d,e,c),Et(e),v&&v(e,t)})),I=B((function(e,t){var n=Ct({timeout:T,style:w,easing:p},{mode:"enter"});e.style.webkitTransition=r.transitions.create("-webkit-transform",(0,Me.Z)({},n)),e.style.transition=r.transitions.create("transform",(0,Me.Z)({},n)),e.style.webkitTransform="none",e.style.transform="none",y&&y(e,t)})),z=B(g),L=B(b),D=B((function(e){var t=Ct({timeout:T,style:w,easing:p},{mode:"exit"});e.style.webkitTransition=r.transitions.create("-webkit-transform",t),e.style.transition=r.transitions.create("transform",t),Ut(d,e,c),_&&_(e)})),O=B((function(e){e.style.webkitTransition="",e.style.transition="",x&&x(e)})),N=e.useCallback((function(){A.current&&Ut(d,A.current,c)}),[d,c]);return e.useEffect((function(){if(!m&&"down"!==d&&"right"!==d){var e=(0,jt.Z)((function(){A.current&&Ut(d,A.current,c)})),t=(0,Vt.Z)(A.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}}),[d,m,c]),e.useEffect((function(){m||N()}),[m,N]),(0,Ee.jsx)(E,(0,Me.Z)({nodeRef:A,onEnter:P,onEntered:z,onEntering:I,onExit:D,onExited:O,onExiting:L,addEndListener:function(e){o&&o(A.current,e)},appear:l,in:m,timeout:T},C,{children:function(t,n){return e.cloneElement(u,(0,Me.Z)({ref:M,style:(0,Me.Z)({visibility:"exited"!==t||m?void 0:"hidden"},w,u.props.style)},n))}}))})),Ht=n(2065);function qt(e){return(0,$e.Z)("MuiPaper",e)}(0,Qe.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var Wt=["className","component","elevation","square","variant"],Xt=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)},Kt=(0,Ae.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t,n=e.theme,r=e.ownerState;return(0,Me.Z)({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&(0,Me.Z)({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,Ht.Fq)("#fff",Xt(r.elevation)),", ").concat((0,Ht.Fq)("#fff",Xt(r.elevation)),")")},n.vars&&{backgroundImage:null==(t=n.vars.overlays)?void 0:t[r.elevation]}))})),Yt=e.forwardRef((function(e,t){var n=(0,ct.Z)({props:e,name:"MuiPaper"}),r=n.className,i=n.component,a=void 0===i?"div":i,o=n.elevation,s=void 0===o?1:o,l=n.square,u=void 0!==l&&l,c=n.variant,h=void 0===c?"elevation":c,d=(0,Re.Z)(n,Wt),f=(0,Me.Z)({},n,{component:a,elevation:s,square:u,variant:h}),p=function(e){var t=e.square,n=e.elevation,r=e.variant,i=e.classes,a={root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]};return(0,Pe.Z)(a,qt,i)}(f);return(0,Ee.jsx)(Kt,(0,Me.Z)({as:a,ownerState:f,className:(0,Be.Z)(p.root,r),ref:t},d))})),Jt=n(9853);function Qt(e){return(0,$e.Z)("MuiDrawer",e)}(0,Qe.Z)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);var $t=["BackdropProps"],en=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],tn=function(e,t){var n=e.ownerState;return[t.root,("permanent"===n.variant||"persistent"===n.variant)&&t.docked,t.modal]},nn=(0,Ae.ZP)(Ft,{name:"MuiDrawer",slot:"Root",overridesResolver:tn})((function(e){var t=e.theme;return{zIndex:(t.vars||t).zIndex.drawer}})),rn=(0,Ae.ZP)("div",{shouldForwardProp:Ae.FO,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:tn})({flex:"0 0 auto"}),an=(0,Ae.ZP)(Yt,{name:"MuiDrawer",slot:"Paper",overridesResolver:function(e,t){var n=e.ownerState;return[t.paper,t["paperAnchor".concat((0,Jt.Z)(n.anchor))],"temporary"!==n.variant&&t["paperAnchorDocked".concat((0,Jt.Z)(n.anchor))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,Me.Z)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===n.anchor&&{left:0},"top"===n.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===n.anchor&&{right:0},"bottom"===n.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===n.anchor&&"temporary"!==n.variant&&{borderRight:"1px solid ".concat((t.vars||t).palette.divider)},"top"===n.anchor&&"temporary"!==n.variant&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider)},"right"===n.anchor&&"temporary"!==n.variant&&{borderLeft:"1px solid ".concat((t.vars||t).palette.divider)},"bottom"===n.anchor&&"temporary"!==n.variant&&{borderTop:"1px solid ".concat((t.vars||t).palette.divider)})})),on={left:"right",right:"left",top:"down",bottom:"up"};var sn=e.forwardRef((function(t,n){var r=(0,ct.Z)({props:t,name:"MuiDrawer"}),i=St(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},o=r.anchor,s=void 0===o?"left":o,l=r.BackdropProps,u=r.children,c=r.className,h=r.elevation,d=void 0===h?16:h,f=r.hideBackdrop,p=void 0!==f&&f,m=r.ModalProps,v=(m=void 0===m?{}:m).BackdropProps,g=r.onClose,y=r.open,_=void 0!==y&&y,x=r.PaperProps,b=void 0===x?{}:x,w=r.SlideProps,k=r.TransitionComponent,T=void 0===k?Gt:k,S=r.transitionDuration,E=void 0===S?a:S,C=r.variant,A=void 0===C?"temporary":C,R=(0,Re.Z)(r.ModalProps,$t),M=(0,Re.Z)(r,en),B=e.useRef(!1);e.useEffect((function(){B.current=!0}),[]);var P=function(e,t){return"rtl"===e.direction&&function(e){return-1!==["left","right"].indexOf(e)}(t)?on[t]:t}(i,s),I=s,z=(0,Me.Z)({},r,{anchor:I,elevation:d,open:_,variant:A},M),L=function(e){var t=e.classes,n=e.anchor,r=e.variant,i={root:["root"],docked:[("permanent"===r||"persistent"===r)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,Jt.Z)(n)),"temporary"!==r&&"paperAnchorDocked".concat((0,Jt.Z)(n))]};return(0,Pe.Z)(i,Qt,t)}(z),D=(0,Ee.jsx)(an,(0,Me.Z)({elevation:"temporary"===A?d:0,square:!0},b,{className:(0,Be.Z)(L.paper,b.className),ownerState:z,children:u}));if("permanent"===A)return(0,Ee.jsx)(rn,(0,Me.Z)({className:(0,Be.Z)(L.root,L.docked,c),ownerState:z,ref:n},M,{children:D}));var O=(0,Ee.jsx)(T,(0,Me.Z)({in:_,direction:on[P],timeout:E,appear:B.current},w,{children:D}));return"persistent"===A?(0,Ee.jsx)(rn,(0,Me.Z)({className:(0,Be.Z)(L.root,L.docked,c),ownerState:z,ref:n},M,{children:O})):(0,Ee.jsx)(nn,(0,Me.Z)({BackdropProps:(0,Me.Z)({},l,v,{transitionDuration:E}),className:(0,Be.Z)(L.root,L.modal,c),open:_,ownerState:z,onClose:g,hideBackdrop:p,ref:n},M,R,{children:O}))})),ln=n(2466),un=n(114),cn=["sx"];function hn(e){var t,n=e.sx,r=function(e){var t={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(n){un.Gc[n]?t.systemProps[n]=e[n]:t.otherProps[n]=e[n]})),t}((0,Re.Z)(e,cn)),i=r.systemProps,a=r.otherProps;return t=Array.isArray(n)?[i].concat((0,J.Z)(n)):"function"===typeof n?function(){var e=n.apply(void 0,arguments);return(0,ln.P)(e)?(0,Me.Z)({},i,e):i}:(0,Me.Z)({},i,n),(0,Me.Z)({},a,{sx:t})}function dn(e){return(0,$e.Z)("MuiTypography",e)}(0,Qe.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var fn=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],pn=(0,Ae.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.variant&&t[n.variant],"inherit"!==n.align&&t["align".concat((0,Jt.Z)(n.align))],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})((function(e){var t=e.theme,n=e.ownerState;return(0,Me.Z)({margin:0},n.variant&&t.typography[n.variant],"inherit"!==n.align&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})})),mn={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},vn={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},gn=e.forwardRef((function(e,t){var n=(0,ct.Z)({props:e,name:"MuiTypography"}),r=function(e){return vn[e]||e}(n.color),i=hn((0,Me.Z)({},n,{color:r})),a=i.align,o=void 0===a?"inherit":a,s=i.className,l=i.component,u=i.gutterBottom,c=void 0!==u&&u,h=i.noWrap,d=void 0!==h&&h,f=i.paragraph,p=void 0!==f&&f,m=i.variant,v=void 0===m?"body1":m,g=i.variantMapping,y=void 0===g?mn:g,_=(0,Re.Z)(i,fn),x=(0,Me.Z)({},i,{align:o,color:r,className:s,component:l,gutterBottom:c,noWrap:d,paragraph:p,variant:v,variantMapping:y}),b=l||(p?"p":y[v]||mn[v])||"span",w=function(e){var t=e.align,n=e.gutterBottom,r=e.noWrap,i=e.paragraph,a=e.variant,o=e.classes,s={root:["root",a,"inherit"!==e.align&&"align".concat((0,Jt.Z)(t)),n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return(0,Pe.Z)(s,dn,o)}(x);return(0,Ee.jsx)(pn,(0,Me.Z)({as:b,ref:t,ownerState:x,className:(0,Be.Z)(w.root,s)},_))})),yn=n(9511),_n=n(2763);function xn(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function bn(t,n){var r=Object.create(null);return t&&e.Children.map(t,(function(e){return e})).forEach((function(t){r[t.key]=function(t){return n&&(0,e.isValidElement)(t)?n(t):t}(t)})),r}function wn(e,t,n){return null!=n[t]?n[t]:e.props[t]}function kn(t,n,r){var i=bn(t.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var u=i[l][r];s[i[l][r]]=n(u)}s[l]=n(l)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(n,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,e.isValidElement)(s)){var l=o in n,u=o in i,c=n[o],h=(0,e.isValidElement)(c)&&!c.props.in;!u||l&&!h?u||!l||h?u&&l&&(0,e.isValidElement)(c)&&(a[o]=(0,e.cloneElement)(s,{onExited:r.bind(null,s),in:c.props.in,exit:wn(s,"exit",t),enter:wn(s,"enter",t)})):a[o]=(0,e.cloneElement)(s,{in:!1}):a[o]=(0,e.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:wn(s,"exit",t),enter:wn(s,"enter",t)})}})),a}var Tn=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},Sn=function(t){function n(e,n){var r,i=(r=t.call(this,e,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}dt(n,t);var r=n.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(t,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=t,i=o,bn(r.children,(function(t){return(0,e.cloneElement)(t,{onExited:i.bind(null,t),in:!0,appear:wn(t,"appear",r),enter:wn(t,"enter",r),exit:wn(t,"exit",r)})}))):kn(t,a,o),firstRender:!1}},r.handleExited=function(e,t){var n=bn(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,Me.Z)({},t.children);return delete n[e.key],{children:n}})))},r.render=function(){var t=this.props,n=t.component,r=t.childFactory,i=(0,Re.Z)(t,["component","childFactory"]),a=this.state.contextValue,o=Tn(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?e.createElement(pt.Provider,{value:a},o):e.createElement(pt.Provider,{value:a},e.createElement(n,i,o))},n}(e.Component);Sn.propTypes={},Sn.defaultProps={component:"div",childFactory:function(e){return e}};var En=Sn,Cn=(n(76),n(9886)),An=n(5438),Rn=n(9140),Mn=n(2561),Bn=(0,Cn.w)((function(t,n){var r=t.styles,i=(0,Rn.O)([r],void 0,(0,e.useContext)(Cn.T)),a=(0,e.useRef)();return(0,Mn.j)((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,o=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==o&&(r=!0,o.setAttribute("data-emotion",e),t.hydrate([o])),a.current=[t,r],function(){t.flush()}}),[n]),(0,Mn.j)((function(){var e=a.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&(0,An.My)(n,i.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",i,t,!1)}}),[n,i.name]),null}));function Pn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,Rn.O)(t)}var In=function(){var e=Pn.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var zn=function(t){var n=t.className,r=t.classes,i=t.pulsate,a=void 0!==i&&i,s=t.rippleX,l=t.rippleY,u=t.rippleSize,c=t.in,h=t.onExited,d=t.timeout,f=e.useState(!1),p=(0,o.Z)(f,2),m=p[0],v=p[1],g=(0,Be.Z)(n,r.ripple,r.rippleVisible,a&&r.ripplePulsate),y={width:u,height:u,top:-u/2+l,left:-u/2+s},_=(0,Be.Z)(r.child,m&&r.childLeaving,a&&r.childPulsate);return c||m||v(!0),e.useEffect((function(){if(!c&&null!=h){var e=setTimeout(h,d);return function(){clearTimeout(e)}}}),[h,c,d]),(0,Ee.jsx)("span",{className:g,style:y,children:(0,Ee.jsx)("span",{className:_})})};var Ln,Dn,On,Nn,Fn,jn,Vn,Zn,Un=(0,Qe.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Gn=["center","classes","className"],Hn=In(Fn||(Fn=Ln||(Ln=xn(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),qn=In(jn||(jn=Dn||(Dn=xn(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Wn=In(Vn||(Vn=On||(On=xn(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),Xn=(0,Ae.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Kn=(0,Ae.ZP)(zn,{name:"MuiTouchRipple",slot:"Ripple"})(Zn||(Zn=Nn||(Nn=xn(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Un.rippleVisible,Hn,550,(function(e){return e.theme.transitions.easing.easeInOut}),Un.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),Un.child,Un.childLeaving,qn,550,(function(e){return e.theme.transitions.easing.easeInOut}),Un.childPulsate,Wn,(function(e){return e.theme.transitions.easing.easeInOut})),Yn=e.forwardRef((function(t,n){var r=(0,ct.Z)({props:t,name:"MuiTouchRipple"}),i=r.center,a=void 0!==i&&i,s=r.classes,l=void 0===s?{}:s,u=r.className,c=(0,Re.Z)(r,Gn),h=e.useState([]),d=(0,o.Z)(h,2),f=d[0],p=d[1],m=e.useRef(0),v=e.useRef(null);e.useEffect((function(){v.current&&(v.current(),v.current=null)}),[f]);var g=e.useRef(!1),y=e.useRef(null),_=e.useRef(null),x=e.useRef(null);e.useEffect((function(){return function(){clearTimeout(y.current)}}),[]);var b=e.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,a=e.cb;p((function(e){return[].concat((0,J.Z)(e),[(0,Ee.jsx)(Kn,{classes:{ripple:(0,Be.Z)(l.ripple,Un.ripple),rippleVisible:(0,Be.Z)(l.rippleVisible,Un.rippleVisible),ripplePulsate:(0,Be.Z)(l.ripplePulsate,Un.ripplePulsate),child:(0,Be.Z)(l.child,Un.child),childLeaving:(0,Be.Z)(l.childLeaving,Un.childLeaving),childPulsate:(0,Be.Z)(l.childPulsate,Un.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},m.current)])})),m.current+=1,v.current=a}),[l]),w=e.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,o=t.center,s=void 0===o?a||t.pulsate:o,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===(null==e?void 0:e.type)&&g.current)g.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(g.current=!0);var c,h,d,f=u?null:x.current,p=f?f.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(s||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(p.width/2),h=Math.round(p.height/2);else{var m=e.touches&&e.touches.length>0?e.touches[0]:e,v=m.clientX,w=m.clientY;c=Math.round(v-p.left),h=Math.round(w-p.top)}if(s)(d=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(d+=1);else{var k=2*Math.max(Math.abs((f?f.clientWidth:0)-c),c)+2,T=2*Math.max(Math.abs((f?f.clientHeight:0)-h),h)+2;d=Math.sqrt(Math.pow(k,2)+Math.pow(T,2))}null!=e&&e.touches?null===_.current&&(_.current=function(){b({pulsate:i,rippleX:c,rippleY:h,rippleSize:d,cb:n})},y.current=setTimeout((function(){_.current&&(_.current(),_.current=null)}),80)):b({pulsate:i,rippleX:c,rippleY:h,rippleSize:d,cb:n})}}),[a,b]),k=e.useCallback((function(){w({},{pulsate:!0})}),[w]),T=e.useCallback((function(e,t){if(clearTimeout(y.current),"touchend"===(null==e?void 0:e.type)&&_.current)return _.current(),_.current=null,void(y.current=setTimeout((function(){T(e,t)})));_.current=null,p((function(e){return e.length>0?e.slice(1):e})),v.current=t}),[]);return e.useImperativeHandle(n,(function(){return{pulsate:k,start:w,stop:T}}),[k,w,T]),(0,Ee.jsx)(Xn,(0,Me.Z)({className:(0,Be.Z)(Un.root,l.root,u),ref:x},c,{children:(0,Ee.jsx)(En,{component:null,exit:!0,children:f})}))})),Jn=Yn;function Qn(e){return(0,$e.Z)("MuiButtonBase",e)}var $n,er=(0,Qe.Z)("MuiButtonBase",["root","disabled","focusVisible"]),tr=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],nr=(0,Ae.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})(($n={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,r.Z)($n,"&.".concat(er.disabled),{pointerEvents:"none",cursor:"default"}),(0,r.Z)($n,"@media print",{colorAdjust:"exact"}),$n)),rr=e.forwardRef((function(t,n){var r=(0,ct.Z)({props:t,name:"MuiButtonBase"}),i=r.action,a=r.centerRipple,s=void 0!==a&&a,l=r.children,u=r.className,c=r.component,h=void 0===c?"button":c,d=r.disabled,f=void 0!==d&&d,p=r.disableRipple,m=void 0!==p&&p,v=r.disableTouchRipple,g=void 0!==v&&v,y=r.focusRipple,_=void 0!==y&&y,x=r.LinkComponent,b=void 0===x?"a":x,w=r.onBlur,k=r.onClick,T=r.onContextMenu,S=r.onDragLeave,E=r.onFocus,C=r.onFocusVisible,A=r.onKeyDown,R=r.onKeyUp,M=r.onMouseDown,B=r.onMouseLeave,P=r.onMouseUp,I=r.onTouchEnd,z=r.onTouchMove,L=r.onTouchStart,D=r.tabIndex,O=void 0===D?0:D,N=r.TouchRippleProps,F=r.touchRippleRef,j=r.type,V=(0,Re.Z)(r,tr),Z=e.useRef(null),U=e.useRef(null),G=(0,At.Z)(U,F),H=(0,_n.Z)(),q=H.isFocusVisibleRef,W=H.onFocus,X=H.onBlur,K=H.ref,Y=e.useState(!1),J=(0,o.Z)(Y,2),Q=J[0],$=J[1];f&&Q&&$(!1),e.useImperativeHandle(i,(function(){return{focusVisible:function(){$(!0),Z.current.focus()}}}),[]);var ee=e.useState(!1),te=(0,o.Z)(ee,2),ne=te[0],re=te[1];e.useEffect((function(){re(!0)}),[]);var ie=ne&&!m&&!f;function ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return(0,yn.Z)((function(r){return t&&t(r),!n&&U.current&&U.current[e](r),!0}))}e.useEffect((function(){Q&&_&&!m&&ne&&U.current.pulsate()}),[m,_,Q,ne]);var oe=ae("start",M),se=ae("stop",T),le=ae("stop",S),ue=ae("stop",P),ce=ae("stop",(function(e){Q&&e.preventDefault(),B&&B(e)})),he=ae("start",L),de=ae("stop",I),fe=ae("stop",z),pe=ae("stop",(function(e){X(e),!1===q.current&&$(!1),w&&w(e)}),!1),me=(0,yn.Z)((function(e){Z.current||(Z.current=e.currentTarget),W(e),!0===q.current&&($(!0),C&&C(e)),E&&E(e)})),ve=function(){var e=Z.current;return h&&"button"!==h&&!("A"===e.tagName&&e.href)},ge=e.useRef(!1),ye=(0,yn.Z)((function(e){_&&!ge.current&&Q&&U.current&&" "===e.key&&(ge.current=!0,U.current.stop(e,(function(){U.current.start(e)}))),e.target===e.currentTarget&&ve()&&" "===e.key&&e.preventDefault(),A&&A(e),e.target===e.currentTarget&&ve()&&"Enter"===e.key&&!f&&(e.preventDefault(),k&&k(e))})),_e=(0,yn.Z)((function(e){_&&" "===e.key&&U.current&&Q&&!e.defaultPrevented&&(ge.current=!1,U.current.stop(e,(function(){U.current.pulsate(e)}))),R&&R(e),k&&e.target===e.currentTarget&&ve()&&" "===e.key&&!e.defaultPrevented&&k(e)})),xe=h;"button"===xe&&(V.href||V.to)&&(xe=b);var be={};"button"===xe?(be.type=void 0===j?"button":j,be.disabled=f):(V.href||V.to||(be.role="button"),f&&(be["aria-disabled"]=f));var we=(0,At.Z)(K,Z),ke=(0,At.Z)(n,we);var Te=(0,Me.Z)({},r,{centerRipple:s,component:h,disabled:f,disableRipple:m,disableTouchRipple:g,focusRipple:_,tabIndex:O,focusVisible:Q}),Se=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=e.classes,a={root:["root",t&&"disabled",n&&"focusVisible"]},o=(0,Pe.Z)(a,Qn,i);return n&&r&&(o.root+=" ".concat(r)),o}(Te);return(0,Ee.jsxs)(nr,(0,Me.Z)({as:xe,className:(0,Be.Z)(Se.root,u),ownerState:Te,onBlur:pe,onClick:k,onContextMenu:se,onFocus:me,onKeyDown:ye,onKeyUp:_e,onMouseDown:oe,onMouseLeave:ce,onMouseUp:ue,onDragLeave:le,onTouchEnd:de,onTouchMove:fe,onTouchStart:he,ref:ke,tabIndex:f?-1:O,type:j},be,V,{children:[l,ie?(0,Ee.jsx)(Jn,(0,Me.Z)({ref:G,center:s},N)):null]}))})),ir=rr;function ar(e){return(0,$e.Z)("MuiIconButton",e)}var or=(0,Qe.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),sr=["edge","children","className","color","disabled","disableFocusRipple","size"],lr=(0,Ae.ZP)(ir,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,Jt.Z)(n.color))],n.edge&&t["edge".concat((0,Jt.Z)(n.edge))],t["size".concat((0,Jt.Z)(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,Me.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ht.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t=e.theme,n=e.ownerState;return(0,Me.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,Me.Z)({color:(t.vars||t).palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,Ht.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},(0,r.Z)({},"&.".concat(or.disabled),{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}))})),ur=e.forwardRef((function(e,t){var n=(0,ct.Z)({props:e,name:"MuiIconButton"}),r=n.edge,i=void 0!==r&&r,a=n.children,o=n.className,s=n.color,l=void 0===s?"default":s,u=n.disabled,c=void 0!==u&&u,h=n.disableFocusRipple,d=void 0!==h&&h,f=n.size,p=void 0===f?"medium":f,m=(0,Re.Z)(n,sr),v=(0,Me.Z)({},n,{edge:i,color:l,disabled:c,disableFocusRipple:d,size:p}),g=function(e){var t=e.classes,n=e.disabled,r=e.color,i=e.edge,a=e.size,o={root:["root",n&&"disabled","default"!==r&&"color".concat((0,Jt.Z)(r)),i&&"edge".concat((0,Jt.Z)(i)),"size".concat((0,Jt.Z)(a))]};return(0,Pe.Z)(o,ar,t)}(v);return(0,Ee.jsx)(lr,(0,Me.Z)({className:(0,Be.Z)(g.root,o),centerRipple:!0,focusRipple:!d,disabled:c,ref:t,ownerState:v},m,{children:a}))})),cr=n(3842),hr=n(104),dr=["className","component"];var fr=n(5902),pr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.defaultTheme,r=t.defaultClassName,i=void 0===r?"MuiBox-root":r,a=t.generateClassName,o=t.styleFunctionSx,s=void 0===o?hr.Z:o,l=(0,cr.ZP)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(s),u=e.forwardRef((function(e,t){var r=(0,kt.Z)(n),o=hn(e),s=o.className,u=o.component,c=void 0===u?"div":u,h=(0,Re.Z)(o,dr);return(0,Ee.jsx)(l,(0,Me.Z)({as:c,ref:t,className:(0,Be.Z)(s,a?a(i):i),theme:r},h))}));return u}({defaultTheme:(0,n(4360).Z)(),defaultClassName:"MuiBox-root",generateClassName:fr.Z.generate}),mr=pr;function vr(e){return(0,$e.Z)("MuiTab",e)}var gr=(0,Qe.Z)("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),yr=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],_r=(0,Ae.ZP)(ir,{name:"MuiTab",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.label&&n.icon&&t.labelIcon,t["textColor".concat((0,Jt.Z)(n.textColor))],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})((function(e){var t,n,i,a=e.theme,o=e.ownerState;return(0,Me.Z)({},a.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},o.label&&{flexDirection:"top"===o.iconPosition||"bottom"===o.iconPosition?"column":"row"},{lineHeight:1.25},o.icon&&o.label&&(0,r.Z)({minHeight:72,paddingTop:9,paddingBottom:9},"& > .".concat(gr.iconWrapper),(0,Me.Z)({},"top"===o.iconPosition&&{marginBottom:6},"bottom"===o.iconPosition&&{marginTop:6},"start"===o.iconPosition&&{marginRight:a.spacing(1)},"end"===o.iconPosition&&{marginLeft:a.spacing(1)})),"inherit"===o.textColor&&(t={color:"inherit",opacity:.6},(0,r.Z)(t,"&.".concat(gr.selected),{opacity:1}),(0,r.Z)(t,"&.".concat(gr.disabled),{opacity:(a.vars||a).palette.action.disabledOpacity}),t),"primary"===o.textColor&&(n={color:(a.vars||a).palette.text.secondary},(0,r.Z)(n,"&.".concat(gr.selected),{color:(a.vars||a).palette.primary.main}),(0,r.Z)(n,"&.".concat(gr.disabled),{color:(a.vars||a).palette.text.disabled}),n),"secondary"===o.textColor&&(i={color:(a.vars||a).palette.text.secondary},(0,r.Z)(i,"&.".concat(gr.selected),{color:(a.vars||a).palette.secondary.main}),(0,r.Z)(i,"&.".concat(gr.disabled),{color:(a.vars||a).palette.text.disabled}),i),o.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},o.wrapped&&{fontSize:a.typography.pxToRem(12)})})),xr=e.forwardRef((function(t,n){var r=(0,ct.Z)({props:t,name:"MuiTab"}),i=r.className,a=r.disabled,o=void 0!==a&&a,s=r.disableFocusRipple,l=void 0!==s&&s,u=r.fullWidth,c=r.icon,h=r.iconPosition,d=void 0===h?"top":h,f=r.indicator,p=r.label,m=r.onChange,v=r.onClick,g=r.onFocus,y=r.selected,_=r.selectionFollowsFocus,x=r.textColor,b=void 0===x?"inherit":x,w=r.value,k=r.wrapped,T=void 0!==k&&k,S=(0,Re.Z)(r,yr),E=(0,Me.Z)({},r,{disabled:o,disableFocusRipple:l,selected:y,icon:!!c,iconPosition:d,label:!!p,fullWidth:u,textColor:b,wrapped:T}),C=function(e){var t=e.classes,n=e.textColor,r=e.fullWidth,i=e.wrapped,a=e.icon,o=e.label,s=e.selected,l=e.disabled,u={root:["root",a&&o&&"labelIcon","textColor".concat((0,Jt.Z)(n)),r&&"fullWidth",i&&"wrapped",s&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return(0,Pe.Z)(u,vr,t)}(E),A=c&&p&&e.isValidElement(c)?e.cloneElement(c,{className:(0,Be.Z)(C.iconWrapper,c.props.className)}):c;return(0,Ee.jsxs)(_r,(0,Me.Z)({focusRipple:!l,className:(0,Be.Z)(C.root,i),ref:n,role:"tab","aria-selected":y,disabled:o,onClick:function(e){!y&&m&&m(e,w),v&&v(e)},onFocus:function(e){_&&!y&&m&&m(e,w),g&&g(e)},ownerState:E,tabIndex:y?0:-1},S,{children:["top"===d||"start"===d?(0,Ee.jsxs)(e.Fragment,{children:[A,p]}):(0,Ee.jsxs)(e.Fragment,{children:[p,A]}),f]}))})),br=e.createContext(null);function wr(t){var n=t.children,r=t.value,i=function(){var t=e.useState(null),n=(0,o.Z)(t,2),r=n[0],i=n[1];return e.useEffect((function(){i("mui-p-".concat(Math.round(1e5*Math.random())))}),[]),r}(),a=e.useMemo((function(){return{idPrefix:i,value:r}}),[i,r]);return(0,Ee.jsx)(br.Provider,{value:a,children:n})}function kr(){return e.useContext(br)}function Tr(e,t){return null===e.idPrefix?null:"".concat(e.idPrefix,"-P-").concat(t)}function Sr(e,t){return null===e.idPrefix?null:"".concat(e.idPrefix,"-T-").concat(t)}var Er;n(8457);function Cr(){if(Er)return Er;var e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),Er="reverse",e.scrollLeft>0?Er="default":(e.scrollLeft=1,0===e.scrollLeft&&(Er="negative")),document.body.removeChild(e),Er}function Ar(e,t){var n=e.scrollLeft;if("rtl"!==t)return n;switch(Cr()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function Rr(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function Mr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},a=r.ease,o=void 0===a?Rr:a,s=r.duration,l=void 0===s?300:s,u=null,c=t[e],h=!1,d=function(){h=!0},f=function r(a){if(h)i(new Error("Animation cancelled"));else{null===u&&(u=a);var s=Math.min(1,(a-u)/l);t[e]=o(s)*(n-c)+c,s>=1?requestAnimationFrame((function(){i(null)})):requestAnimationFrame(r)}};return c===n?(i(new Error("Element already at target position")),d):(requestAnimationFrame(f),d)}var Br=["onChange"],Pr={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};var Ir=n(1245),zr=(0,Ir.Z)((0,Ee.jsx)("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Lr=(0,Ir.Z)((0,Ee.jsx)("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Dr(e){return(0,$e.Z)("MuiTabScrollButton",e)}var Or,Nr,Fr=(0,Qe.Z)("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),jr=["className","direction","orientation","disabled"],Vr=(0,Ae.ZP)(ir,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.orientation&&t[n.orientation]]}})((function(e){var t=e.ownerState;return(0,Me.Z)((0,r.Z)({width:40,flexShrink:0,opacity:.8},"&.".concat(Fr.disabled),{opacity:0}),"vertical"===t.orientation&&{width:"100%",height:40,"& svg":{transform:"rotate(".concat(t.isRtl?-90:90,"deg)")}})})),Zr=e.forwardRef((function(e,t){var n=(0,ct.Z)({props:e,name:"MuiTabScrollButton"}),r=n.className,i=n.direction,a=(0,Re.Z)(n,jr),o="rtl"===St().direction,s=(0,Me.Z)({isRtl:o},n),l=function(e){var t=e.classes,n={root:["root",e.orientation,e.disabled&&"disabled"]};return(0,Pe.Z)(n,Dr,t)}(s);return(0,Ee.jsx)(Vr,(0,Me.Z)({component:"div",className:(0,Be.Z)(l.root,r),ref:t,role:null,ownerState:s,tabIndex:null},a,{children:"left"===i?Or||(Or=(0,Ee.jsx)(zr,{fontSize:"small"})):Nr||(Nr=(0,Ee.jsx)(Lr,{fontSize:"small"}))}))}));function Ur(e){return(0,$e.Z)("MuiTabs",e)}var Gr=(0,Qe.Z)("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Hr=n(5783),qr=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Wr=function(e,t){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild},Xr=function(e,t){return e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild},Kr=function(e,t,n){for(var r=!1,i=n(e,t);i;){if(i===e.firstChild){if(r)return;r=!0}var a=i.disabled||"true"===i.getAttribute("aria-disabled");if(i.hasAttribute("tabindex")&&!a)return void i.focus();i=n(e,i)}},Yr=(0,Ae.ZP)("div",{name:"MuiTabs",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,r.Z)({},"& .".concat(Gr.scrollButtons),t.scrollButtons),(0,r.Z)({},"& .".concat(Gr.scrollButtons),n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile),t.root,n.vertical&&t.vertical]}})((function(e){var t=e.ownerState,n=e.theme;return(0,Me.Z)({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&(0,r.Z)({},"& .".concat(Gr.scrollButtons),(0,r.Z)({},n.breakpoints.down("sm"),{display:"none"})))})),Jr=(0,Ae.ZP)("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:function(e,t){var n=e.ownerState;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})((function(e){var t=e.ownerState;return(0,Me.Z)({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})})),Qr=(0,Ae.ZP)("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:function(e,t){var n=e.ownerState;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})((function(e){var t=e.ownerState;return(0,Me.Z)({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})})),$r=(0,Ae.ZP)("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:function(e,t){return t.indicator}})((function(e){var t=e.ownerState,n=e.theme;return(0,Me.Z)({position:"absolute",height:2,bottom:0,width:"100%",transition:n.transitions.create()},"primary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.primary.main},"secondary"===t.indicatorColor&&{backgroundColor:(n.vars||n).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})})),ei=(0,Ae.ZP)((function(t){var n=t.onChange,r=(0,Re.Z)(t,Br),i=e.useRef(),a=e.useRef(null),o=function(){i.current=a.current.offsetHeight-a.current.clientHeight};return e.useEffect((function(){var e=(0,jt.Z)((function(){var e=i.current;o(),e!==i.current&&n(i.current)})),t=(0,Vt.Z)(a.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}),[n]),e.useEffect((function(){o(),n(i.current)}),[n]),(0,Ee.jsx)("div",(0,Me.Z)({style:Pr,ref:a},r))}),{name:"MuiTabs",slot:"ScrollbarSize"})({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),ti={},ni=e.forwardRef((function(t,n){var i=(0,ct.Z)({props:t,name:"MuiTabs"}),a=St(),s="rtl"===a.direction,l=i["aria-label"],u=i["aria-labelledby"],c=i.action,h=i.centered,d=void 0!==h&&h,f=i.children,p=i.className,m=i.component,v=void 0===m?"div":m,g=i.allowScrollButtonsMobile,y=void 0!==g&&g,_=i.indicatorColor,x=void 0===_?"primary":_,b=i.onChange,w=i.orientation,k=void 0===w?"horizontal":w,T=i.ScrollButtonComponent,S=void 0===T?Zr:T,E=i.scrollButtons,C=void 0===E?"auto":E,A=i.selectionFollowsFocus,R=i.TabIndicatorProps,M=void 0===R?{}:R,B=i.TabScrollButtonProps,P=void 0===B?{}:B,I=i.textColor,z=void 0===I?"primary":I,L=i.value,D=i.variant,O=void 0===D?"standard":D,N=i.visibleScrollbar,F=void 0!==N&&N,j=(0,Re.Z)(i,qr),V="scrollable"===O,Z="vertical"===k,U=Z?"scrollTop":"scrollLeft",G=Z?"top":"left",H=Z?"bottom":"right",q=Z?"clientHeight":"clientWidth",W=Z?"height":"width",X=(0,Me.Z)({},i,{component:v,allowScrollButtonsMobile:y,indicatorColor:x,orientation:k,vertical:Z,scrollButtons:C,textColor:z,variant:O,visibleScrollbar:F,fixed:!V,hideScrollbar:V&&!F,scrollableX:V&&!Z,scrollableY:V&&Z,centered:d&&!V,scrollButtonsHideMobile:!y}),K=function(e){var t=e.vertical,n=e.fixed,r=e.hideScrollbar,i=e.scrollableX,a=e.scrollableY,o=e.centered,s=e.scrollButtonsHideMobile,l=e.classes,u={root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",a&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",s&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]};return(0,Pe.Z)(u,Ur,l)}(X);var Y=e.useState(!1),J=(0,o.Z)(Y,2),Q=J[0],$=J[1],ee=e.useState(ti),te=(0,o.Z)(ee,2),ne=te[0],re=te[1],ie=e.useState({start:!1,end:!1}),ae=(0,o.Z)(ie,2),oe=ae[0],se=ae[1],le=e.useState({overflow:"hidden",scrollbarWidth:0}),ue=(0,o.Z)(le,2),ce=ue[0],he=ue[1],de=new Map,fe=e.useRef(null),pe=e.useRef(null),me=function(){var e,t,n=fe.current;if(n){var r=n.getBoundingClientRect();e={clientWidth:n.clientWidth,scrollLeft:n.scrollLeft,scrollTop:n.scrollTop,scrollLeftNormalized:Ar(n,a.direction),scrollWidth:n.scrollWidth,top:r.top,bottom:r.bottom,left:r.left,right:r.right}}if(n&&!1!==L){var i=pe.current.children;if(i.length>0){var o=i[de.get(L)];0,t=o?o.getBoundingClientRect():null}}return{tabsMeta:e,tabMeta:t}},ve=(0,yn.Z)((function(){var e,t,n=me(),i=n.tabsMeta,a=n.tabMeta,o=0;if(Z)t="top",a&&i&&(o=a.top-i.top+i.scrollTop);else if(t=s?"right":"left",a&&i){var l=s?i.scrollLeftNormalized+i.clientWidth-i.scrollWidth:i.scrollLeft;o=(s?-1:1)*(a[t]-i[t]+l)}var u=(e={},(0,r.Z)(e,t,o),(0,r.Z)(e,W,a?a[W]:0),e);if(isNaN(ne[t])||isNaN(ne[W]))re(u);else{var c=Math.abs(ne[t]-u[t]),h=Math.abs(ne[W]-u[W]);(c>=1||h>=1)&&re(u)}})),ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.animation,r=void 0===n||n;r?Mr(U,fe.current,e,{duration:a.transitions.duration.standard}):fe.current[U]=e},ye=function(e){var t=fe.current[U];Z?t+=e:(t+=e*(s?-1:1),t*=s&&"reverse"===Cr()?-1:1),ge(t)},_e=function(){for(var e=fe.current[q],t=0,n=Array.from(pe.current.children),r=0;r<n.length;r+=1){var i=n[r];if(t+i[q]>e){0===r&&(t=e);break}t+=i[q]}return t},xe=function(){ye(-1*_e())},be=function(){ye(_e())},we=e.useCallback((function(e){he({overflow:null,scrollbarWidth:e})}),[]),ke=(0,yn.Z)((function(e){var t=me(),n=t.tabsMeta,r=t.tabMeta;if(r&&n)if(r[G]<n[G]){var i=n[U]+(r[G]-n[G]);ge(i,{animation:e})}else if(r[H]>n[H]){var a=n[U]+(r[H]-n[H]);ge(a,{animation:e})}})),Te=(0,yn.Z)((function(){if(V&&!1!==C){var e,t,n=fe.current,r=n.scrollTop,i=n.scrollHeight,o=n.clientHeight,l=n.scrollWidth,u=n.clientWidth;if(Z)e=r>1,t=r<i-o-1;else{var c=Ar(fe.current,a.direction);e=s?c<l-u-1:c>1,t=s?c>1:c<l-u-1}e===oe.start&&t===oe.end||se({start:e,end:t})}}));e.useEffect((function(){var e,t=(0,jt.Z)((function(){fe.current&&(ve(),Te())})),n=(0,Vt.Z)(fe.current);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t),Array.from(pe.current.children).forEach((function(t){e.observe(t)}))),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}}),[ve,Te]);var Se=e.useMemo((function(){return(0,jt.Z)((function(){Te()}))}),[Te]);e.useEffect((function(){return function(){Se.clear()}}),[Se]),e.useEffect((function(){$(!0)}),[]),e.useEffect((function(){ve(),Te()})),e.useEffect((function(){ke(ti!==ne)}),[ke,ne]),e.useImperativeHandle(c,(function(){return{updateIndicator:ve,updateScrollButtons:Te}}),[ve,Te]);var Ce=(0,Ee.jsx)($r,(0,Me.Z)({},M,{className:(0,Be.Z)(K.indicator,M.className),ownerState:X,style:(0,Me.Z)({},ne,M.style)})),Ae=0,Ie=e.Children.map(f,(function(t){if(!e.isValidElement(t))return null;var n=void 0===t.props.value?Ae:t.props.value;de.set(n,Ae);var r=n===L;return Ae+=1,e.cloneElement(t,(0,Me.Z)({fullWidth:"fullWidth"===O,indicator:r&&!Q&&Ce,selected:r,selectionFollowsFocus:A,onChange:b,textColor:z,value:n},1!==Ae||!1!==L||t.props.tabIndex?{}:{tabIndex:0}))})),ze=function(){var e={};e.scrollbarSizeListener=V?(0,Ee.jsx)(ei,{onChange:we,className:(0,Be.Z)(K.scrollableX,K.hideScrollbar)}):null;var t=oe.start||oe.end,n=V&&("auto"===C&&t||!0===C);return e.scrollButtonStart=n?(0,Ee.jsx)(S,(0,Me.Z)({orientation:k,direction:s?"right":"left",onClick:xe,disabled:!oe.start},P,{className:(0,Be.Z)(K.scrollButtons,P.className)})):null,e.scrollButtonEnd=n?(0,Ee.jsx)(S,(0,Me.Z)({orientation:k,direction:s?"left":"right",onClick:be,disabled:!oe.end},P,{className:(0,Be.Z)(K.scrollButtons,P.className)})):null,e}();return(0,Ee.jsxs)(Yr,(0,Me.Z)({className:(0,Be.Z)(K.root,p),ownerState:X,ref:n,as:v},j,{children:[ze.scrollButtonStart,ze.scrollbarSizeListener,(0,Ee.jsxs)(Jr,{className:K.scroller,ownerState:X,style:(0,r.Z)({overflow:ce.overflow},Z?"margin".concat(s?"Left":"Right"):"marginBottom",F?void 0:-ce.scrollbarWidth),ref:fe,onScroll:Se,children:[(0,Ee.jsx)(Qr,{"aria-label":l,"aria-labelledby":u,"aria-orientation":"vertical"===k?"vertical":null,className:K.flexContainer,ownerState:X,onKeyDown:function(e){var t=pe.current,n=(0,Hr.Z)(t).activeElement;if("tab"===n.getAttribute("role")){var r="horizontal"===k?"ArrowLeft":"ArrowUp",i="horizontal"===k?"ArrowRight":"ArrowDown";switch("horizontal"===k&&s&&(r="ArrowRight",i="ArrowLeft"),e.key){case r:e.preventDefault(),Kr(t,n,Xr);break;case i:e.preventDefault(),Kr(t,n,Wr);break;case"Home":e.preventDefault(),Kr(t,null,Wr);break;case"End":e.preventDefault(),Kr(t,null,Xr)}}},ref:pe,role:"tablist",children:Ie}),Q&&Ce]}),ze.scrollButtonEnd]}))})),ri=ni,ii=["children"],ai=e.forwardRef((function(t,n){var r=t.children,i=(0,Re.Z)(t,ii),a=kr();if(null===a)throw new TypeError("No TabContext provided");var o=e.Children.map(r,(function(t){return e.isValidElement(t)?e.cloneElement(t,{"aria-controls":Tr(a,t.props.value),id:Sr(a,t.props.value)}):null}));return(0,Ee.jsx)(ri,(0,Me.Z)({},i,{ref:n,value:a.value,children:o}))}));function oi(e){return(0,$e.Z)("MuiTabPanel",e)}(0,Qe.Z)("MuiTabPanel",["root"]);var si=["children","className","value"],li=(0,Ae.ZP)("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){return{padding:e.theme.spacing(3)}})),ui=e.forwardRef((function(e,t){var n=(0,ct.Z)({props:e,name:"MuiTabPanel"}),r=n.children,i=n.className,a=n.value,o=(0,Re.Z)(n,si),s=(0,Me.Z)({},n),l=function(e){var t=e.classes;return(0,Pe.Z)({root:["root"]},oi,t)}(s),u=kr();if(null===u)throw new TypeError("No TabContext provided");var c=Tr(u,a),h=Sr(u,a);return(0,Ee.jsx)(li,(0,Me.Z)({"aria-labelledby":h,className:(0,Be.Z)(l.root,i),hidden:a!==u.value,id:c,ref:t,role:"tabpanel",ownerState:s},o,{children:a===u.value&&r}))})),ci=(0,Ir.Z)((0,Ee.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");function hi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function di(e){return!!e&&!!e[ta]}function fi(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===na}(e)||Array.isArray(e)||!!e[ea]||!!e.constructor[ea]||xi(e)||bi(e))}function pi(e,t,n){void 0===n&&(n=!1),0===mi(e)?(n?Object.keys:ra)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function mi(e){var t=e[ta];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:xi(e)?2:bi(e)?3:0}function vi(e,t){return 2===mi(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function gi(e,t){return 2===mi(e)?e.get(t):e[t]}function yi(e,t,n){var r=mi(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function _i(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function xi(e){return Yi&&e instanceof Map}function bi(e){return Ji&&e instanceof Set}function wi(e){return e.o||e.t}function ki(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ia(e);delete t[ta];for(var n=ra(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Ti(e,t){return void 0===t&&(t=!1),Ei(e)||di(e)||!fi(e)||(mi(e)>1&&(e.set=e.add=e.clear=e.delete=Si),Object.freeze(e),t&&pi(e,(function(e,t){return Ti(t,!0)}),!0)),e}function Si(){hi(2)}function Ei(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Ci(e){var t=aa[e];return t||hi(18,e),t}function Ai(e,t){aa[e]||(aa[e]=t)}function Ri(){return Xi}function Mi(e,t){t&&(Ci("Patches"),e.u=[],e.s=[],e.v=t)}function Bi(e){Pi(e),e.p.forEach(zi),e.p=null}function Pi(e){e===Xi&&(Xi=e.l)}function Ii(e){return Xi={p:[],l:Xi,h:e,m:!0,_:0}}function zi(e){var t=e[ta];0===t.i||1===t.i?t.j():t.O=!0}function Li(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.g||Ci("ES5").S(t,e,r),r?(n[ta].P&&(Bi(t),hi(4)),fi(e)&&(e=Di(t,e),t.l||Ni(t,e)),t.u&&Ci("Patches").M(n[ta].t,e,t.u,t.s)):e=Di(t,n,[]),Bi(t),t.u&&t.v(t.u,t.s),e!==$i?e:void 0}function Di(e,t,n){if(Ei(t))return t;var r=t[ta];if(!r)return pi(t,(function(i,a){return Oi(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Ni(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=ki(r.k):r.o;pi(3===r.i?new Set(i):i,(function(t,a){return Oi(e,r,i,t,a,n)})),Ni(e,i,!1),n&&e.u&&Ci("Patches").R(r,n,e.u,e.s)}return r.o}function Oi(e,t,n,r,i,a){if(di(i)){var o=Di(e,i,a&&t&&3!==t.i&&!vi(t.D,r)?a.concat(r):void 0);if(yi(n,r,o),!di(o))return;e.m=!1}if(fi(i)&&!Ei(i)){if(!e.h.F&&e._<1)return;Di(e,i),t&&t.A.l||Ni(e,i)}}function Ni(e,t,n){void 0===n&&(n=!1),e.h.F&&e.m&&Ti(t,n)}function Fi(e,t){var n=e[ta];return(n?wi(n):e)[t]}function ji(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Vi(e){e.P||(e.P=!0,e.l&&Vi(e.l))}function Zi(e){e.o||(e.o=ki(e.t))}function Ui(e,t,n){var r=xi(t)?Ci("MapSet").N(t,n):bi(t)?Ci("MapSet").T(t,n):e.g?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Ri(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=oa;n&&(i=[r],a=sa);var o=Proxy.revocable(i,a),s=o.revoke,l=o.proxy;return r.k=l,r.j=s,l}(t,n):Ci("ES5").J(t,n);return(n?n.A:Ri()).p.push(r),r}function Gi(e){return di(e)||hi(22,e),function e(t){if(!fi(t))return t;var n,r=t[ta],i=mi(t);if(r){if(!r.P&&(r.i<4||!Ci("ES5").K(r)))return r.t;r.I=!0,n=Hi(t,i),r.I=!1}else n=Hi(t,i);return pi(n,(function(t,i){r&&gi(r.t,t)===i||yi(n,t,e(i))})),3===i?new Set(n):n}(e)}function Hi(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ki(e)}function qi(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[ta];return oa.get(t,e)},set:function(t){var n=this[ta];oa.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][ta];if(!i.P)switch(i.i){case 5:r(i)&&Vi(i);break;case 4:n(i)&&Vi(i)}}}function n(e){for(var t=e.t,n=e.k,r=ra(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==ta){var o=t[a];if(void 0===o&&!vi(t,a))return!0;var s=n[a],l=s&&s[ta];if(l?l.t!==o:!_i(s,o))return!0}}var u=!!t[ta];return r.length!==ra(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};Ai("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=ia(n);delete a[ta];for(var o=ra(a),s=0;s<o.length;s++){var l=o[s];a[l]=e(l,t||!!a[l].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:Ri(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,ta,{value:a,writable:!0}),i},S:function(e,n,i){i?di(n)&&n[ta].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[ta];if(n){var i=n.t,a=n.k,o=n.D,s=n.i;if(4===s)pi(a,(function(t){t!==ta&&(void 0!==i[t]||vi(i,t)?o[t]||e(a[t]):(o[t]=!0,Vi(n)))})),pi(i,(function(e){void 0!==a[e]||vi(a,e)||(o[e]=!1,Vi(n))}));else if(5===s){if(r(n)&&(Vi(n),o.length=!0),a.length<i.length)for(var l=a.length;l<i.length;l++)o[l]=!1;else for(var u=i.length;u<a.length;u++)o[u]=!0;for(var c=Math.min(a.length,i.length),h=0;h<c;h++)a.hasOwnProperty(h)||(o[h]=!0),void 0===o[h]&&e(a[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}var Wi,Xi,Ki="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),Yi="undefined"!=typeof Map,Ji="undefined"!=typeof Set,Qi="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,$i=Ki?Symbol.for("immer-nothing"):((Wi={})["immer-nothing"]=!0,Wi),ea=Ki?Symbol.for("immer-draftable"):"__$immer_draftable",ta=Ki?Symbol.for("immer-state"):"__$immer_state",na=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),ra="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ia=Object.getOwnPropertyDescriptors||function(e){var t={};return ra(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},aa={},oa={get:function(e,t){if(t===ta)return e;var n=wi(e);if(!vi(n,t))return function(e,t,n){var r,i=ji(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!fi(r)?r:r===Fi(e.t,t)?(Zi(e),e.o[t]=Ui(e.A.h,r,e)):r},has:function(e,t){return t in wi(e)},ownKeys:function(e){return Reflect.ownKeys(wi(e))},set:function(e,t,n){var r=ji(wi(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Fi(wi(e),t),a=null==i?void 0:i[ta];if(a&&a.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(_i(n,i)&&(void 0!==n||vi(e.t,t)))return!0;Zi(e),Vi(e)}return e.o[t]===n&&"number"!=typeof n&&(void 0!==n||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==Fi(e.t,t)||t in e.t?(e.D[t]=!1,Zi(e),Vi(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=wi(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){hi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){hi(12)}},sa={};pi(oa,(function(e,t){sa[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),sa.deleteProperty=function(e,t){return sa.set.call(this,e,t,void 0)},sa.set=function(e,t,n){return oa.set.call(this,e[0],t,n,e[0])};var la=function(){function e(e){var t=this;this.g=Qi,this.F=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&hi(6),void 0!==r&&"function"!=typeof r&&hi(7),fi(e)){var s=Ii(t),l=Ui(t,e,void 0),u=!0;try{o=n(l),u=!1}finally{u?Bi(s):Pi(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Mi(s,r),Li(e,s)}),(function(e){throw Bi(s),e})):(Mi(s,r),Li(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===$i&&(o=void 0),t.F&&Ti(o,!0),r){var c=[],h=[];Ci("Patches").M(e,o,c,h),r(c,h)}return o}hi(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){fi(e)||hi(8),di(e)&&(e=Gi(e));var t=Ii(this),n=Ui(this,e,void 0);return n[ta].C=!0,Pi(t),n},t.finishDraft=function(e,t){var n=(e&&e[ta]).A;return Mi(n,t),Li(void 0,n)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!Qi&&hi(20),this.g=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=Ci("Patches").$;return di(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),ua=new la,ca=ua.produce,ha=(ua.produceWithPatches.bind(ua),ua.setAutoFreeze.bind(ua),ua.setUseProxies.bind(ua),ua.applyPatches.bind(ua),ua.createDraft.bind(ua),ua.finishDraft.bind(ua),ca);function da(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var fa="function"===typeof Symbol&&Symbol.observable||"@@observable",pa=function(){return Math.random().toString(36).substring(7).split("").join(".")},ma={INIT:"@@redux/INIT"+pa(),REPLACE:"@@redux/REPLACE"+pa(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+pa()}};function va(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function ga(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(da(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(da(1));return n(ga)(e,t)}if("function"!==typeof e)throw new Error(da(2));var i=e,a=t,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function c(){if(l)throw new Error(da(3));return a}function h(e){if("function"!==typeof e)throw new Error(da(4));if(l)throw new Error(da(5));var t=!0;return u(),s.push(e),function(){if(t){if(l)throw new Error(da(6));t=!1,u();var n=s.indexOf(e);s.splice(n,1),o=null}}}function d(e){if(!va(e))throw new Error(da(7));if("undefined"===typeof e.type)throw new Error(da(8));if(l)throw new Error(da(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}function f(e){if("function"!==typeof e)throw new Error(da(10));i=e,d({type:ma.REPLACE})}function p(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(da(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[fa]=function(){return this},e}return d({type:ma.INIT}),(r={dispatch:d,subscribe:h,getState:c,replaceReducer:f})[fa]=p,r}function ya(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:ma.INIT}))throw new Error(da(12));if("undefined"===typeof n(void 0,{type:ma.PROBE_UNKNOWN_ACTION()}))throw new Error(da(13))}))}(n)}catch(s){a=s}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var l=o[s],u=n[l],c=e[l],h=u(c,t);if("undefined"===typeof h){t&&t.type;throw new Error(da(14))}i[l]=h,r=r||h!==c}return(r=r||o.length!==Object.keys(e).length)?i:e}}function _a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function xa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(da(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=_a.apply(void 0,o)(n.dispatch),a(a({},n),{},{dispatch:r})}}}function ba(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var wa=ba();wa.withExtraArgument=ba;var ka=wa,Ta=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sa=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Ea=Object.defineProperty,Ca=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),Aa=Object.prototype.hasOwnProperty,Ra=Object.prototype.propertyIsEnumerable,Ma=function(e,t,n){return t in e?Ea(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Ba=function(e,t){for(var n in t||(t={}))Aa.call(t,n)&&Ma(e,n,t[n]);if(Ca)for(var r=0,i=Ca(t);r<i.length;r++){n=i[r];Ra.call(t,n)&&Ma(e,n,t[n])}return e},Pa="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?_a:_a.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Ia(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var za=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Ta(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Sa([void 0],e[0].concat(this)))):new(t.bind.apply(t,Sa([void 0],e.concat(this))))},t}(Array);function La(e){return fi(e)?ha(e,(function(){})):e}function Da(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new za);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(ka.withExtraArgument(n.extraArgument)):r.push(ka));0;return r}(e)}}function Oa(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Ba(Ba({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Na(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function Fa(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:La(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},s={},l={};function u(){var t="function"===typeof e.extraReducers?Na(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,l=t[2],u=void 0===l?void 0:l,c=Ba(Ba({},i),s);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?Na(t):[t,n,r],o=a[0],s=a[1],l=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return La(e())};else{var u=La(e);i=function(){return u}}function c(e,t){void 0===e&&(e=i());var n=Sa([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[l]),n.reduce((function(e,n){if(n){var r;if(di(e))return void 0===(r=n(e,t))?e:r;if(fi(e))return ha(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return c.getInitialState=i,c}(r,c,o,u)}return a.forEach((function(e){var n,r,a=i[e],u=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,s[u]=n,l[e]=r?Oa(u,r):Oa(u)})),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:l,caseReducers:o,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}Object.assign;var ja="listenerMiddleware";Oa(ja+"/add"),Oa(ja+"/removeAll"),Oa(ja+"/remove");qi();var Va=Fa({name:"form",initialState:{sidebarTravel:{isShowSidebar:!1,idTravelLocation:""},sidebarBusStopInLine:{isShowSidebar:!1}},reducers:{setShowSidebarTravel:function(e,t){e.sidebarTravel=t.payload},setShowSidebarBusStopInLine:function(e,t){e.sidebarBusStopInLine=t.payload}}}),Za=Va.actions,Ua=Za.setShowSidebarTravel,Ga=Za.setShowSidebarBusStopInLine,Ha=Va.reducer,qa=(0,Ae.ZP)("div")((function(e){var t=e.theme;return a({display:"flex",alignItems:"center",justifyContent:"space-between",padding:t.spacing(0,1)},t.mixins.toolbar)})),Wa=function(t){var n=t.name,r=t.tabLeft,i=t.tabRight,a=t.compLeft,s=t.compRight,l=t.show,u=(0,e.useState)(l),c=(0,o.Z)(u,2),h=c[0],d=c[1],f=(0,e.useState)("1"),p=(0,o.Z)(f,2),m=p[0],v=p[1],g=_e();return(0,Ee.jsxs)(sn,{variant:"persistent",sx:{overflowY:"none"},hideBackdrop:!0,open:h,children:[(0,Ee.jsxs)(qa,{sx:{overflowY:"none",position:"relative",backgroundColor:"#3597E4"},children:[(0,Ee.jsx)(gn,{style:{fontSize:"15px",fontWeight:"600",color:"#fff"},children:n}),(0,Ee.jsx)(ur,{onClick:function(){d(!1),g(Ga({isShowSidebar:!1}))},children:(0,Ee.jsx)(ci,{fontSize:"medium",sx:{color:"#fff"}})})]}),(0,Ee.jsx)(mr,{sx:{width:400,height:"100%",p:3,overflow:"hidden"},children:(0,Ee.jsx)(mr,{style:{width:"100%",color:"#3597E4",backgroundColor:"inherit",fontSize:"1.5rem"},children:(0,Ee.jsxs)(wr,{value:m,children:[(0,Ee.jsx)(mr,{children:(0,Ee.jsxs)(ai,{onChange:function(e,t){v(t)},"aria-label":"lab",children:[(0,Ee.jsx)(xr,{style:{width:"50%",textTransform:"none"},label:r,value:"1"}),(0,Ee.jsx)(xr,{style:{width:"50%",textTransform:"none"},label:i,value:"2"})]})}),(0,Ee.jsxs)(mr,{children:[(0,Ee.jsx)(ui,{style:{padding:"12px 0px 10px 0px"},value:"1",children:a}),(0,Ee.jsx)(ui,{style:{padding:"12px 0px 10px 0px"},value:"2",children:s})]})]})})})]})},Xa=[{id:"41676731701",nameBusStop:"S\u1ed1 171(Kim Li\xean) Nguy\u1ec5n V\u0103n C\u1eeb",codeBusRoute:"R16",directionRoute:"turn",travelTime:0,location:{lng:"108.11956612202619",lat:"16.13548288580201"}},{id:"29632809171",nameBusStop:"101 Nguy\u1ec5n V\u0103n C\u1eeb",codeBusRoute:"R16",directionRoute:"turn",travelTime:1,location:{lng:"108.11943246536552",lat:"16.1330679589498"}},{id:"53438980726",nameBusStop:"S\u1ed1 913 - 915 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.11930183932864",lat:"16.129617645548674"}},{id:"13261972499",nameBusStop:"19 Nguy\u1ec5n V\u0103n C\u1eeb",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.12076170018832",lat:"16.12411291753288"}},{id:"31270191841",nameBusStop:"957 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:5,location:{lng:"108.12813319223163",lat:"16.113172832903878"}},{id:"81066036158",nameBusStop:"817 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:5,location:{lng:"108.13286592134278",lat:"16.10496845723984"}},{id:"5510081972",nameBusStop:"S\u1ed1 767 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:4,location:{lng:"108.13502538849755",lat:"16.100559049857242"}},{id:"46231575149",nameBusStop:"S\u1ed1 495 - 497 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:5,location:{lng:"108.14283634199731",lat:"16.090049322991707"}},{id:"94928953045",nameBusStop:"421 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.14430889603847",lat:"16.08652784640827"}},{id:"93057959639",nameBusStop:"339 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.14576615827266",lat:"16.083010841022624"}},{id:"83972586719",nameBusStop:"B\u1ec7nh vi\u1ec7n t\xe2m th\u1ea7n",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.14718256545261",lat:"16.079550289432646"}},{id:"4097270553",nameBusStop:"Tr\u01b0\u1eddng Cao \u0111\u1eb3ng k\u1ebf ho\u1ea1ch",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.14856333524123",lat:"16.076183245107273"}},{id:"33283047093",nameBusStop:"THCS Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.14997593480217",lat:"16.07265158955931"}},{id:"80216016485",nameBusStop:"755-757 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"turn",travelTime:1,location:{lng:"108.15044654790096",lat:"16.071460640131072"}},{id:"90522510881",nameBusStop:"657 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.15160502991218",lat:"16.06879111285614"}},{id:"69204961942",nameBusStop:"Khu vui ch\u01a1i tr\u1ebb em T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.15368239852161",lat:"16.066210917274432"}},{id:"82235724744",nameBusStop:"B\u1ec7nh vi\u1ec7n \u0111a khoa Li\xean Chi\u1ec3u",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.1557597458739",lat:"16.06480733201605"}},{id:"2507896143",nameBusStop:"459 - 461 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"turn",travelTime:5,location:{lng:"108.15918458017227",lat:"16.062517217613777"}},{id:"14560376168",nameBusStop:"Showroom Tr\u01b0\u1eddng H\u1ea3i",codeBusRoute:"R16",directionRoute:"turn",travelTime:5,location:{lng:"108.16293456797649",lat:"16.060029568036004"}},{id:"99835005384",nameBusStop:"341 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"turn",travelTime:6,location:{lng:"108.16663084854403",lat:"16.05721701505328"}},{id:"42981263177",nameBusStop:"321-323 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"turn",travelTime:1,location:{lng:"108.16785224436086",lat:"16.056399740975724"}},{id:"1732068935",nameBusStop:"219-221 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.17156815178656",lat:"16.056752479019856"}},{id:"47345524206",nameBusStop:"137-139 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.17353822118451",lat:"16.05815482711118"}},{id:"14307816902",nameBusStop:"559 \u0110i\u1ec7n Bi\xean Ph\u1ee7",codeBusRoute:"R16",directionRoute:"turn",travelTime:7,location:{lng:"108.18443206071548",lat:"16.06531725496157"}},{id:"2768131448",nameBusStop:"407 \u0110i\u1ec7n Bi\xean Ph\u1ee7",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.18889948560606",lat:"16.06571373878797"}},{id:"56105380180",nameBusStop:"311 \u0110i\u1ec7n Bi\xean Ph\u1ee7",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.19261595462079",lat:"16.06571987858083"}},{id:"20450427753",nameBusStop:"135 \u0110i\u1ec7n Bi\xean Ph\u1ee7",codeBusRoute:"R16",directionRoute:"turn",travelTime:4,location:{lng:"108.198956789357",lat:"16.065451341801396"}},{id:"80890846647",nameBusStop:"\u0110\u1ed1i di\u1ec7n 36-38 \u0110i\u1ec7n Bi\xean Ph\u1ee7",codeBusRoute:"R16",directionRoute:"turn",travelTime:4,location:{lng:"108.20554552103773",lat:"16.065948404370776"}},{id:"69834623702",nameBusStop:"85 L\xfd Th\xe1i T\u1ed5",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.20818666467244",lat:"16.06617381074443"}},{id:"36040062889",nameBusStop:"Nh\xe0 th\u1edd con G\xe0",codeBusRoute:"R16",directionRoute:"turn",travelTime:2,location:{lng:"108.21061748697342",lat:"16.06655732264574"}},{id:"16123558917",nameBusStop:"253 H\xf9ng V\u01b0\u01a1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:4,location:{lng:"108.2143623108899",lat:"16.067216379289228"}},{id:"71718856816",nameBusStop:"103 H\xf9ng V\u01b0\u01a1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.21802419064903",lat:"16.06806363675924"}},{id:"74034539200",nameBusStop:"C\xf4ng vi\xean H\xf9ng V\u01b0\u01a1ng",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.22185444676832",lat:"16.06853163858333"}},{id:"1130860509",nameBusStop:"\u0110D 151 Tr\u1ea7n Ph\xfa",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.22366291157324",lat:"16.067069408678766"}},{id:"4763853999",nameBusStop:"UBND qu\u1eadn H\u1ea3i Ch\xe2u",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.22316873828835",lat:"16.06201652169169"}},{id:"62395937589",nameBusStop:"C\xe2\u0300u R\xf4\u0300ng (Vo\u0303 V\u0103n Ki\xea\u0323t)",codeBusRoute:"R16",directionRoute:"turn",travelTime:6,location:{lng:"108.23362603960751",lat:"16.0612211977039"}},{id:"15955064606",nameBusStop:"BV Qu\u1eadn S\u01a1n Tr\xe0",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.2352356061066",lat:"16.058210689752826"}},{id:"10088024323",nameBusStop:"\u0110\u1ed1i di\u1ec7n 1187 Ng\xf4 Quy\u1ec1n",codeBusRoute:"R16",directionRoute:"turn",travelTime:5,location:{lng:"108.23640435593668",lat:"16.05437724498843"}},{id:"55823419640",nameBusStop:"S\u1ed1 34 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.23698155498312",lat:"16.052593892650563"}},{id:"45991064962",nameBusStop:"180 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R16",directionRoute:"turn",travelTime:6,location:{lng:"108.23843515512749",lat:"16.047717526062446"}},{id:"9171890447",nameBusStop:"S\u1ed1 240 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.23929240084374",lat:"16.04538395543759"}},{id:"15450055374",nameBusStop:"310A Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.24056921979812",lat:"16.04269150637289"}},{id:"91398561601",nameBusStop:"370 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.24178308931015",lat:"16.040365103273437"}},{id:"38963561433",nameBusStop:"\u0110\u1ed1i di\u1ec7n 40 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.24360637369601",lat:"16.036762818002703"}},{id:"13953554355",nameBusStop:"160 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.24575742606396",lat:"16.03258417569197"}},{id:"93406165171",nameBusStop:"256 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.24728405078287",lat:"16.02959699316708"}},{id:"93976290957",nameBusStop:"376 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"turn",travelTime:5,location:{lng:"108.24936655066908",lat:"16.025458113763925"}},{id:"76579547966",nameBusStop:"402 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.25141745647258",lat:"16.021446201530225"}},{id:"59552601959",nameBusStop:"470A L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.25320435969822",lat:"16.017997676571692"}},{id:"8053450406",nameBusStop:"542 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.25544269233824",lat:"16.013469827365384"}},{id:"48855306667",nameBusStop:"618 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"turn",travelTime:5,location:{lng:"108.25858691929429",lat:"16.007074987947718"}},{id:"74793147223",nameBusStop:"758 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"turn",travelTime:5,location:{lng:"108.25931412296185",lat:"15.998183275891124"}},{id:"97856490250",nameBusStop:"\u0110\u1ed1i di\u1ec7n S\xe2n T\u1eadp L\xe1i Xe \xd4 T\xf4",codeBusRoute:"R16",directionRoute:"turn",travelTime:5,location:{lng:"108.2571568409417",lat:"15.98887492076652"}},{id:"66781014593",nameBusStop:"E152 Tr\u1ea7n \u0110\u1ea1i Ngh\u0129a",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.2557789360975",lat:"15.982664253652796"}},{id:"96052165091",nameBusStop:"K\u1ebf VLXD T\u1ea5n Danh Tr\u1ea7n \u0110\u1ea1i Ngh\u0129a",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.25504300799523",lat:"15.979234489563416"}},{id:"42991095455",nameBusStop:"Tr\u01b0\u1eddng Cao \u0110\u1eb3ng Vi\u1ec7t H\xe0n",codeBusRoute:"R16",directionRoute:"turn",travelTime:3,location:{lng:"108.2523825106433",lat:"15.977785017951515"}},{id:"61728855973",nameBusStop:"Tr\u01b0\u1eddng Cao \u0110\u1eb3ng Vi\u1ec7t H\xe0n",codeBusRoute:"R16",directionRoute:"return",travelTime:0,location:{lng:"108.2523825106433",lat:"15.977785017951515"}},{id:"27539133550",nameBusStop:"K\u1ebf C\u1eeda H\xe0ng Th\xe0nh T\xedn H\u1ee3p",codeBusRoute:"R16",directionRoute:"return",travelTime:2,location:{lng:"108.25528311453743",lat:"15.978946535249877"}},{id:"17829743257",nameBusStop:"\u0110\u1ed1i Di\u1ec7n C\u1eeda H\xe0ng Thi\xean \u0110\u1ea1i Ph\xfac Tr\u1ea7n \u0110\u1ea1i Ngh\u0129a",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.25601582421558",lat:"15.982135221646194"}},{id:"53841883061",nameBusStop:"V\u01b0\u1eddn \u01b0\u01a1m c\xe2y xanh",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.25750440762585",lat:"15.988818316410084"}},{id:"33425813124",nameBusStop:"S\xe2n t\u1eadp l\xe1i \xf4 t\xf4 Tr\u1ea7n \u0110\u1ea1i Ngh\u0129a",codeBusRoute:"R16",directionRoute:"return",travelTime:1,location:{lng:"108.25755685860983",lat:"15.989020788561273"}},{id:"44879816236",nameBusStop:"527 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"return",travelTime:7,location:{lng:"108.2598358826321",lat:"16.00160530322441"}},{id:"87873268848",nameBusStop:"415 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"return",travelTime:5,location:{lng:"108.25929677344821",lat:"16.006366877017168"}},{id:"41116889656",nameBusStop:"307 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.25730216701777",lat:"16.010303979794397"}},{id:"93772239098",nameBusStop:"\u0110\u1ed1i Di\u1ec7n TTHC Qu\u1eadn Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R16",directionRoute:"return",travelTime:4,location:{lng:"108.25427254912104",lat:"16.01673949816027"}},{id:"45944436405",nameBusStop:"127 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"return",travelTime:5,location:{lng:"108.25104161718339",lat:"16.022860356737205"}},{id:"49730763261",nameBusStop:"\u0110\u1ed1i Di\u1ec7n 384 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.2499148626708",lat:"16.025205351468152"}},{id:"26911198567",nameBusStop:"K\u1ebf 81B L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"return",travelTime:4,location:{lng:"108.2479137141275",lat:"16.029195778765065"}},{id:"57185266267",nameBusStop:"Doanh tr\u1ea1i qu\xe2n \u0111\u1ed9i \u0111\u01b0\u1eddng L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"return",travelTime:4,location:{lng:"108.24558233887281",lat:"16.033630924778116"}},{id:"87381075630",nameBusStop:"\u0110\u1ed1i Di\u1ec7n 48 L\xea V\u0103n Hi\u1ebfn",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.24417161092119",lat:"16.03639766629436"}},{id:"27845805792",nameBusStop:"175 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R16",directionRoute:"return",travelTime:4,location:{lng:"108.24269273776413",lat:"16.039267980391422"}},{id:"84336197502",nameBusStop:"133 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R16",directionRoute:"return",travelTime:5,location:{lng:"108.24081970838753",lat:"16.042832723761766"}},{id:"52008284660",nameBusStop:"Tr\u01b0\u1eddng trung c\u1ea5p ngh\u1ec1 s\u1ed1 5",codeBusRoute:"R16",directionRoute:"return",travelTime:5,location:{lng:"108.23914371375542",lat:"16.046409842831526"}},{id:"93221601453",nameBusStop:"\u0110\u1ea1i h\u1ecdc Kinh T\u1ebf",codeBusRoute:"R16",directionRoute:"return",travelTime:2,location:{lng:"108.23864826341214",lat:"16.047831351519566"}},{id:"60569441637",nameBusStop:"29 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.2374687610848",lat:"16.051795385002077"}},{id:"60938803919",nameBusStop:"1093 Ng\xf4 Quy\u1ec1n",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.23596967118698",lat:"16.056546596467292"}},{id:"113160183",nameBusStop:"1041 Ng\xf4 Quy\u1ec1n",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.23521413301363",lat:"16.059080611091073"}},{id:"75615411272",nameBusStop:"C\xe2\u0300u R\xf4\u0300ng (s\u1ed1 l\u1ebd \u0111\u01b0\u01a1\u0300ng Vo\u0303 V\u0103n Ki\xea\u0323t)",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.23337367661787",lat:"16.061547643585026"}},{id:"74397801072",nameBusStop:"\u0110\xe0i DRT",codeBusRoute:"R16",directionRoute:"return",travelTime:7,location:{lng:"108.22418154571895",lat:"16.062225998670506"}},{id:"70595935149",nameBusStop:"\u0110\u1ed1i Di\u1ec7n Ch\u1ee3 H\xe0n",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.22505282365555",lat:"16.068044699825915"}},{id:"67843805168",nameBusStop:"\u0110\u1ed1i di\u1ec7n 59 H\xf9ng V\u01b0\u01a1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:4,location:{lng:"108.21974747888261",lat:"16.06851859096782"}},{id:"518628154",nameBusStop:"192 H\xf9ng V\u01b0\u01a1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.21741182319265",lat:"16.068016981544414"}},{id:"33949453181",nameBusStop:"Ch\u1ee3 C\u1ed3n",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.21463722946298",lat:"16.06747745758302"}},{id:"48402907664",nameBusStop:"10 L\xfd Th\xe1i T\u1ed5",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.20997834512136",lat:"16.066550421874894"}},{id:"72183841801",nameBusStop:"S\u1ed1 14-16 L\xfd Th\xe1i T\u1ed5",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.20997698081376",lat:"16.066553111656326"}},{id:"8921197898",nameBusStop:"130 L\xfd Th\xe1i T\u1ed5",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.20739171149656",lat:"16.066230361801473"}},{id:"72116802951",nameBusStop:"130 \u0110i\u1ec7n Bi\xean Ph\u1ee7",codeBusRoute:"R16",directionRoute:"return",travelTime:6,location:{lng:"108.19934642887499",lat:"16.065790588557025"}},{id:"1627251237",nameBusStop:"336 Dien Bien Phu",codeBusRoute:"R16",directionRoute:"return",travelTime:4,location:{lng:"108.19298386072211",lat:"16.066008524369792"}},{id:"78305396975",nameBusStop:"S\u1ed1 412 \u0110i\u1ec7n Bi\xean Ph\u1ee7",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.18938647677336",lat:"16.066026819887053"}},{id:"58387183632",nameBusStop:"570 \u0110i\u1ec7n Bi\xean Ph\u1ee7",codeBusRoute:"R16",directionRoute:"return",travelTime:5,location:{lng:"108.18418540896684",lat:"16.06564047162372"}},{id:"36959527696",nameBusStop:"128 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"return",travelTime:11,location:{lng:"108.17443186308077",lat:"16.059094783578992"}},{id:"69314526452",nameBusStop:"210 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.17140503578477",lat:"16.056918657023267"}},{id:"13184302936",nameBusStop:"294 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.16828799015995",lat:"16.056472157983634"}},{id:"26624030570",nameBusStop:"422 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"return",travelTime:5,location:{lng:"108.16259227747018",lat:"16.0604808300658"}},{id:"51701714878",nameBusStop:"552 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.1588978340965",lat:"16.06296035431722"}},{id:"49910955155",nameBusStop:"640 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.15641694044808",lat:"16.064640588035267"}},{id:"34955299107",nameBusStop:"758 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"return",travelTime:4,location:{lng:"108.15311494705684",lat:"16.06686431208779"}},{id:"53847728152",nameBusStop:"806 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.15191053145458",lat:"16.06856784996234"}},{id:"8966151605",nameBusStop:"900 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.15080992942696",lat:"16.07122222081146"}},{id:"54971808840",nameBusStop:"50 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:2,location:{lng:"108.1502324692913",lat:"16.072703094968304"}},{id:"15440934249",nameBusStop:"138 Nguy\u1ec5n L\u01b0\u01a1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:5,location:{lng:"108.14853636339204",lat:"16.076877264440945"}},{id:"26634594712",nameBusStop:"234 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.14693498683692",lat:"16.08073493405139"}},{id:"10362929838",nameBusStop:"290 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.14601475919088",lat:"16.082993153100066"}},{id:"3588025760",nameBusStop:"396 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:5,location:{lng:"108.14414723834219",lat:"16.087288466292577"}},{id:"40619766688",nameBusStop:"438 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.14296086642372",lat:"16.090352775241932"}},{id:"71248161860",nameBusStop:"546 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:7,location:{lng:"108.1353780100409",lat:"16.100182516489177"}},{id:"96800441871",nameBusStop:"636 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:4,location:{lng:"108.13289700411802",lat:"16.105166546800323"}},{id:"20274740579",nameBusStop:"788 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:5,location:{lng:"108.12971616629946",lat:"16.110726592257993"}},{id:"41959909310",nameBusStop:"922 Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng",codeBusRoute:"R16",directionRoute:"return",travelTime:4,location:{lng:"108.12690586319908",lat:"16.114912963638453"}},{id:"63696236446",nameBusStop:"52 Nguy\u1ec5n V\u0103n C\u1eeb",codeBusRoute:"R16",directionRoute:"return",travelTime:8,location:{lng:"108.11990593830097",lat:"16.125726521072025"}},{id:"58772588367",nameBusStop:"S\u1ed1 126 Nguy\u1ec5n V\u0103n C\u1eeb",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.1195137338104",lat:"16.12933410894816"}},{id:"26394518915",nameBusStop:"S\u1ed1 230 Nguy\u1ec5n V\u0103n C\u1eeb",codeBusRoute:"R16",directionRoute:"return",travelTime:3,location:{lng:"108.1196697291987",lat:"16.133090917661086"}},{id:"95050441416",nameBusStop:"274 Nguy\u1ec5n V\u0103n C\u1eeb",codeBusRoute:"R16",directionRoute:"return",travelTime:2,location:{lng:"108.11980751312127",lat:"16.13537674376428"}},{id:"16738996829",nameBusStop:"C\u1ea3ng S\xf4ng H\xe0n",codeBusRoute:"R4A",directionRoute:"turn",travelTime:0,location:{lng:"108.22373539714997",lat:"16.082622488559792"}},{id:"96534531693",nameBusStop:"20 \u0110\u1ed1ng \u0110a",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.22080749112735",lat:"16.082442262480814"}},{id:"66874241697",nameBusStop:"104-106 \u0110\u1ed1ng \u0110a",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21866622578328",lat:"16.080846681098016"}},{id:"90091923291",nameBusStop:"240 \u0110\u1ed1ng \u0110a",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21634214523567",lat:"16.07735109250178"}},{id:"69356868879",nameBusStop:"322 \u0110\u1ed1ng \u0110a",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21486006875192",lat:"16.075146363593603"}},{id:"30866566611",nameBusStop:"Ch\u1ee3 Tam Gi\xe1c",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21350920202813",lat:"16.07304754472222"}},{id:"43954804335",nameBusStop:"Si\xeau th\u1ecb BigC",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21414968927846",lat:"16.06671067943846"}},{id:"24224554343",nameBusStop:"522-524 \xd4ng \xcdch Khi\xeam",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21524217769469",lat:"16.063914638901146"}},{id:"85012725359",nameBusStop:"618 \xd4ng \xcdch Khi\xeam",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21659304984732",lat:"16.06120650364192"}},{id:"11211852261",nameBusStop:"11-15 Nguy\u1ec5n V\u0103n Linh",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21606974429214",lat:"16.060495515557168"}},{id:"6201917869",nameBusStop:"\u0110\u1ed1i Di\u1ec7n Ch\xf9a Ph\u01b0\u1edbc Ninh",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21770742471998",lat:"16.060701218906388"}},{id:"98459035487",nameBusStop:"C\xf4ng vi\xean Apec",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.22297389483775",lat:"16.05881971533636"}},{id:"40466335018",nameBusStop:"152A-154 \u0110\u01b0\u1eddng 2/9",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.2220825286856",lat:"16.051422409087756"}},{id:"62964668698",nameBusStop:"214-216 \u0110\u01b0\u1eddng 2/9",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.22244333000998",lat:"16.047377717355666"}},{id:"40675849120",nameBusStop:"264-266 Nui Thanh 48",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.22145177653864",lat:"16.0431885951292"}},{id:"75222735090",nameBusStop:"N\xfat giao L\xea Thanh Ngh\u1ecb - \u0111\u01b0\u1eddng 30/4",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21842312380464",lat:"16.04057989123785"}},{id:"26802440723",nameBusStop:"Tr\u01b0\u1edbc C\xf4ng Ty Ki\u1ec3m To\xe1n & K\u1ebf to\xe1n AAC",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.21473525105212",lat:"16.040135250027227"}},{id:"59621625940",nameBusStop:"300-302 Nguy\u1ec5n H\u1eefu Th\u1ecd",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.20973178755769",lat:"16.03626088661962"}},{id:"21936158344",nameBusStop:"432-434 Nguy\u1ec5n H\u1eefu Th\u1ecd",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.2088633935457",lat:"16.03294622570042"}},{id:"51083822769",nameBusStop:"Viettronimex-Nguy\u1ec5n H\u1eefu Th\u1ecd",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.20847814481236",lat:"16.03044399142489"}},{id:"52047590015",nameBusStop:"40-42 L\xea \u0110\u1ea1i H\xe0nh",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.20750088310731",lat:"16.02432236373561"}},{id:"34109196786",nameBusStop:"Ban ngh\u0129a trang TP",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.20432685227635",lat:"16.02343559925508"}},{id:"68582728863",nameBusStop:"D\u1ec7t may H\xf2a Th\u1ecd",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.20320561865236",lat:"16.02006834748365"}},{id:"42426829559",nameBusStop:"307-309 \u0111\u01b0\u1eddng CMT8",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.20425967895206",lat:"16.016929092832047"}},{id:"61531415022",nameBusStop:"492 \u0111\u01b0\u1eddng CMT8",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.1972225081628",lat:"16.01403691032848"}},{id:"18523528372",nameBusStop:"Tr\u01b0\u1edbc Trung T\xe2m GDTX S\u1ed1 3",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.19116550241041",lat:"16.004826844508724"}},{id:"52274489356",nameBusStop:"Ng\xe3 ba DT605 giao Qu\u1ed1c l\u1ed9 1A",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.1919671582678",lat:"15.993832228125905"}},{id:"74348139509",nameBusStop:"\u0110\u1ed1i Di\u1ec7n Tr\u1ee5 \u0110i\u1ec7n 238",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.19088323683629",lat:"15.992601168621881"}},{id:"97018882414",nameBusStop:"Tr\u01b0\u1eddng ti\u1ec3u h\u1ecdc S\u1ed1 2 H\xf2a Ti\u1ebfn",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.18147451549397",lat:"15.968812373973853"}},{id:"93856378022",nameBusStop:"G\u1ea7n ki\u1ec7t 12 th\xf4n L\u1ec7 S\u01a1n B\u1eafc",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.17954650785964",lat:"15.962571010356013"}},{id:"65595071565",nameBusStop:"G\u1ea7n nh\xe0 thu\u1ed1c s\u1ed1 1 th\xf4n L\u1ec7 S\u01a1n B\u1eafc",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.17981410434453",lat:"15.959531241800514"}},{id:"916017829",nameBusStop:"H\xf2a Ti\u1ebfn (Ngh\u0129a trang x\xe3 H\xf2a Ti\u1ebfn)",codeBusRoute:"R4A",directionRoute:"turn",travelTime:3,location:{lng:"108.17859432663842",lat:"15.953196751501668"}},{id:"39502269135",nameBusStop:"H\xf2a Ti\u1ebfn (Ngh\u0129a trang x\xe3 H\xf2a Ti\u1ebfn)",codeBusRoute:"R4A",directionRoute:"return",travelTime:0,location:{lng:"108.1785849944503",lat:"15.953024841906258"}},{id:"59183290313",nameBusStop:"\u0110\u1ed1i di\u1ec7n nh\xe0 thu\u1ed1c s\u1ed1 1 th\xf4n L\u1ec7 S\u01a1n Bac",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.17981572954609",lat:"15.959550497127543"}},{id:"50821777216",nameBusStop:"\u0110\u1ed1i di\u1ec7n khu v\u1ef1c g\u1ea7n ki\u1ec7t 12 th\xf4n L\u1ec7 S\u01a1n B\u1eafc",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.17937971106028",lat:"15.96281073928896"}},{id:"65235173933",nameBusStop:"\u0110\u1ed1i Di\u1ec7n Tr\u01b0\u1eddng Trung H\u1ecdc S\u1ed1 2 H\xf2a Ti\u1ebfn",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.18159780648445",lat:"15.968515596310892"}},{id:"45182862034",nameBusStop:"H\xf2a Ti\u1ebfn (Tr\u1ee5 \u0111i\u1ec7n CS 44 238)",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.18649664631646",lat:"15.981324255982063"}},{id:"23573396196",nameBusStop:"Caf\xe9 Relax",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.19226468002928",lat:"15.99522894515921"}},{id:"10442517034",nameBusStop:"Trung t\xe2m GDTX S\u1ed1 3-Tr\u01b0\u1eddng Ch\u1ec9nh",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.19115160965633",lat:"16.00482826753445"}},{id:"46631063044",nameBusStop:"Tr\u1ee5 \u0111i\u1ec7n 25-2 Tr\u01b0\u1eddng Chinh",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.19281791224451",lat:"16.009067227563087"}},{id:"65740096867",nameBusStop:"417 \u0111\u01b0\u1eddng CMT 8",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.19794941445075",lat:"16.013771323427193"}},{id:"72946597275",nameBusStop:"C\xf4ng an Q.C\u1ea9m L\u1ec7/294-296 \u0111\u01b0\u1eddng CMT8",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.20370568053289",lat:"16.016533502551955"}},{id:"30746043510",nameBusStop:"THPT H\xf2a Vang-\xd4ng \xcdch \u0110\u01b0\u1eddng",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.20344151529726",lat:"16.019777704709146"}},{id:"71805043217",nameBusStop:"117 L\xea \u0110\u1ea1i H\xe0nh",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.20414181640025",lat:"16.02318930225438"}},{id:"76585981816",nameBusStop:"\u0110\u1ed1i di\u1ec7n 60 L\xea \u0110\u1ea1i H\xe0nh",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.20705440180673",lat:"16.023983349301385"}},{id:"43959961846",nameBusStop:"\u0110\u1ed1i di\u1ec7n Viettronimex-Nguy\u1ec5n H\u1eefu Th\u1ecd",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.20881673369276",lat:"16.02975116638614"}},{id:"26714586206",nameBusStop:"513-515 Nguy\u1ec5n H\u1eefu Th\u1ecd",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.20918073473719",lat:"16.03289697574084"}},{id:"25813586770",nameBusStop:"B\u1ec7nh vi\u1ec7n Vinmex/325-327 Nguy\u1ec5n H\u1eefu Th\u1ecd",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.21033251457489",lat:"16.03779095377293"}},{id:"24990088647",nameBusStop:"Tr\u1ee5 CS20 \u0110\u01b0\u1eddng 30/4",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.21468337710034",lat:"16.03983428608088"}},{id:"66251272726",nameBusStop:"N\xfat giao L\xea Thanh Ngh\u1ecb - \u0111\u01b0\u1eddng 30/4",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.21830219164812",lat:"16.040287936821386"}},{id:"13405869733",nameBusStop:"255-257 N\xfai Th\xe0nh",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.22146472827737",lat:"16.043814069232823"}},{id:"31966810005",nameBusStop:"Nha hang Phi LO-\u0111\u1ed1i di\u1ec7n 200-202 \u0110\u01b0\u1eddng 2/9",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.22263263175323",lat:"16.047694302125862"}},{id:"44267836766",nameBusStop:"\u0110\u1ed1i di\u1ec7n 154 \u0110\u01b0\u1eddng 2/9",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.22265081850765",lat:"16.04770255031273"}},{id:"68629737419",nameBusStop:"C\xf4ng vi\xean Apec-\u0110\u1ed1i di\u1ec7n 22 \u0110\u01b0\u1eddng 2/9",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.22306927843742",lat:"16.058478413344766"}},{id:"34148814047",nameBusStop:"C\xf4ng vi\xean Nguy\u1ec5n V\u0103n Linh-\u0110\u1ed1i di\u1ec7n 31 NVL",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.22117175660793",lat:"16.061029768670707"}},{id:"43087418776",nameBusStop:"Ch\xf9a Ph\u01b0\u1edbc Ninh",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.21783788102859",lat:"16.06095194321419"}},{id:"86368011311",nameBusStop:"415-417 \xd4ng \xcdch Khi\xeam",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.21583759948186",lat:"16.062898640496833"}},{id:"50628616350",nameBusStop:"X\xed nghi\u1ec7p c\u1ea5p n\u01b0\u1edbc-295-297 \xd4ng \xcdch Khi\xeam",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.214410263921",lat:"16.066160907311897"}},{id:"16717795879",nameBusStop:"Ch\u1ee3 C\u1ed3n",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.21396493740754",lat:"16.06802467172978"}},{id:"79829950838",nameBusStop:"301 \u0110\u1ed1ng \u0110a",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.21350074037333",lat:"16.072845950841625"}},{id:"7791359401",nameBusStop:"251-253 \u0110\u1ed1ng \u0110a",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.21497894044268",lat:"16.075032656747055"}},{id:"52872741819",nameBusStop:"163-165 \u0110\u1ed1ng \u0110a",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.21664201807722",lat:"16.077585498881337"}},{id:"84047252630",nameBusStop:"75 \u0110\u1ed1ng \u0110a",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.21839618274556",lat:"16.080214328808108"}},{id:"66602540268",nameBusStop:"\u0110\u1ed1i di\u1ec7n 22 \u0110\u1ed1ng \u0110a",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.22067333992871",lat:"16.082281149450832"}},{id:"17287841895",nameBusStop:"C\u1ea3ng S\xf4ng H\xe0n",codeBusRoute:"R4A",directionRoute:"return",travelTime:3,location:{lng:"108.22371496489367",lat:"16.082605881476137"}},{id:"4677255836",nameBusStop:"C\u1ea3ng S\xf4ng H\xe0n",codeBusRoute:"R17A",directionRoute:"turn",travelTime:0,location:{lng:"108.22370549433006",lat:"16.082773958349943"}},{id:"61604132497",nameBusStop:"06 Tr\u1ea7n Ph\xfa",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22271153886453",lat:"16.081395860117937"}},{id:"7095512634",nameBusStop:"Tr\u01b0\u1eddng Ti\u1ebfu h\u1ecdc L\xfd T\u1ef1 Tr\u1ecdng",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22111824390869",lat:"16.077480452392216"}},{id:"58961103332",nameBusStop:"08-10 Nguy\u1ec5n Th\u1ecb Minh Khai",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.21765676769978",lat:"16.076188474540192"}},{id:"36774102806",nameBusStop:"100-102 Nguy\u1ec5n Th\u1ecb Minh Khai",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.21832462537047",lat:"16.072344140583418"}},{id:"19814627094",nameBusStop:"C\xf4ng vi\xean H\xf9ng V\u01b0\u01a1ng",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22182417199608",lat:"16.068642366461734"}},{id:"79200303425",nameBusStop:"Nh\xe0 th\u1edd Con G\xe0",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22365484024257",lat:"16.06704833435161"}},{id:"19421612098",nameBusStop:"TTHC Qu\u1eadn H\u1ea3i Ch\xe2u",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22311443091253",lat:"16.061960199089512"}},{id:"34349760361",nameBusStop:"C\u1ed5 Vi\u1ec7n Ch\xe0m",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22354659653496",lat:"16.060872850102175"}},{id:"74661387957",nameBusStop:"60 N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22029129285603",lat:"16.052927353829574"}},{id:"85564921607",nameBusStop:"256-258 N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22145836954671",lat:"16.043532953500577"}},{id:"63374886775",nameBusStop:"382 N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22188772844409",lat:"16.03917816749815"}},{id:"89274406862",nameBusStop:"484 N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.2223002676993",lat:"16.035375205437436"}},{id:"57521471073",nameBusStop:"582 N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22279948858281",lat:"16.031388897749853"}},{id:"27689504605",nameBusStop:"\u0110\u1ed1i di\u1ec7n Metro",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.22006370786733",lat:"16.025959640177753"}},{id:"2021107817",nameBusStop:"8V T\xe2m Tr\xed-54 \u0111\u01b0\u1eddng CMT8",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.21459783673527",lat:"16.023181943361312"}},{id:"51554716863",nameBusStop:"178 CMT 8",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.2098120388637",lat:"16.01976135974883"}},{id:"68831466670",nameBusStop:"307-309 CMT 8",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.20426743727874",lat:"16.016910178878508"}},{id:"67413619436",nameBusStop:"492 CMT 8",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.19722599306887",lat:"16.014011998066742"}},{id:"54703590857",nameBusStop:"172 Tr\u01b0\u1eddng S\u01a1n",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.17454093275921",lat:"16.012202390414718"}},{id:"14197004235",nameBusStop:"\u0110\u1ed1i di\u1ec7n tr\u01b0\u1eddng Qu\xe2n s\u1ef1 QK5-Tr\u01b0\u1eddng S\u01a1n",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.16776686480158",lat:"16.01227838886498"}},{id:"3215075884",nameBusStop:"B\u1ec7nh vi\u1ec7n H\xf2a Vang-Tr\u01b0\u1eddng S\u01a1n",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.15177714912119",lat:"16.008900160061106"}},{id:"35389166354",nameBusStop:"Tr\u01b0\u1eddng TH L\xe2m Quang Th\u1ef1-Qu\u1ea3ng X\u01b0\u01a1ng",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.13748431593731",lat:"15.997469827027116"}},{id:"41999854086",nameBusStop:"TTHC huy\u1ec7n H\xf2a Vang-Tr\u01b0\u1eddng S\u01a1n",codeBusRoute:"R17A",directionRoute:"turn",travelTime:3,location:{lng:"108.13998505467812",lat:"15.986683592142883"}},{id:"55793403782",nameBusStop:"TTHC Huy\u1ec7n h\xf2a Vang",codeBusRoute:"R17A",directionRoute:"return",travelTime:0,location:{lng:"108.13998505467812",lat:"15.986683592142883"}},{id:"40516563760",nameBusStop:"\u0110\u1ed1i di\u1ec7n Tr\u01b0\u1eddng TH L\xe2m Quang Th\u1ef1- Qu\u1ea3ng X\u01b0\u01a1ng",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.13749496249625",lat:"15.997288490875231"}},{id:"92751490323",nameBusStop:"\u0110\u1ed1i di\u1ec7n B\u1ec7nh vi\u1ec7n H\xf2a Vang-Tr\u01b0\u1eddng S\u01a1n",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.15185197819635",lat:"16.008556176372267"}},{id:"7081971696",nameBusStop:"\u0110\u1ed1i di\u1ec7n 399 Tr\u01b0\u1eddng S\u01a1n",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.16340611665899",lat:"16.010423308084633"}},{id:"55961800941",nameBusStop:"\u0110\u1ed1i di\u1ec7n 172 Tr\u01b0\u1eddng S\u01a1n",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.17423525617426",lat:"16.011820552249905"}},{id:"23911866279",nameBusStop:"417 \u0111\u01b0\u1eddng CMT 8",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.19803741136677",lat:"16.013821510527222"}},{id:"61882344428",nameBusStop:"C\xf4ng an Q.C\u1ea9m L\u1ec7-294-296 \u0111\u01b0\u1eddng CMT-8",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.20369439047685",lat:"16.016543336576326"}},{id:"18526132259",nameBusStop:"151 CMT 8",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.20983446954644",lat:"16.019446947754705"}},{id:"97353290422",nameBusStop:"\u0110\u1ed1i di\u1ec7n BV T\xe2m Tr\xed-25 CMT8",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.21474470520941",lat:"16.022689695393453"}},{id:"22758430561",nameBusStop:"Metro",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.21994316254656",lat:"16.02552738536685"}},{id:"95582325615",nameBusStop:"569 N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.22280137840015",lat:"16.031086542765298"}},{id:"44986223320",nameBusStop:"Tr\u1ea1m Y T\u1ebf H\xf2a C\u01b0\u1eddng Nam-499 N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.22272051347235",lat:"16.03355123482309"}},{id:"70529170858",nameBusStop:"\u0110\u1ed1i di\u1ec7n 378 N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.22197578518251",lat:"16.039519097611326"}},{id:"88223681897",nameBusStop:"257-259 N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.22157063886398",lat:"16.0439561531718"}},{id:"99036189111",nameBusStop:"THPT T\xe2y S\u01a1n-N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.22098028682488",lat:"16.04802962803331"}},{id:"76437930018",nameBusStop:"21 N\xfai Th\xe0nh",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.22053546397083",lat:"16.051258890299472"}},{id:"98749031442",nameBusStop:"\u0110\xe0i DRT-\u0110\u1ed1i di\u1ec7n 256 B\u1ea1ch \u0110\u1eb1ng",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.22417100027464",lat:"16.062288900699265"}},{id:"7390936277",nameBusStop:"\u0110\u1ed1i di\u1ec7n ch\u1ee3 H\xe0n",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.22503843311276",lat:"16.068070841766207"}},{id:"41628433821",nameBusStop:"\u0110\u1ed1i di\u1ec7n 57-59 H\xf9ng V\u01b0\u01a1ng",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.21975415318367",lat:"16.068528832155213"}},{id:"95110471169",nameBusStop:"Tr\u01b0\u1eddng Tr\u1ea7n Ph\xfa-49-51 Nguy\u1ec5n Th\u1ecb Minh Khai",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.21835869259584",lat:"16.07300840645708"}},{id:"66371749636",nameBusStop:"\u0110\u1ed1i di\u1ec7n 04 Nguy\u1ec5n Th\u1ecb Minh Khai",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.2177408262392",lat:"16.076377898486523"}},{id:"97032148221",nameBusStop:"07 L\xfd T\u1ef1 Tr\u1ecdng",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.22146544492753",lat:"16.07744137952605"}},{id:"43443609063",nameBusStop:"\u0110\u1ed1i di\u1ec7n 12 B\u1ea1ch \u0110\u1eb1ng",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.2238613010832",lat:"16.079729219300837"}},{id:"67258236053",nameBusStop:"C\u1ea3ng S\xf4ng H\xe0n",codeBusRoute:"R17A",directionRoute:"return",travelTime:3,location:{lng:"108.22372981864719",lat:"16.082635973507056"}},{id:"74185081170",nameBusStop:"B\u1ebfn Xe Trung T\xe2m \u0110\xe0 N\u1eb5ng",codeBusRoute:"R6A",directionRoute:"turn",travelTime:0,location:{lng:"108.17255076349097",lat:"16.056546707526298"}},{id:"90970909221",nameBusStop:"44-46 \u0110\u1ecbnh Li\u1ec7t",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.17407051888388",lat:"16.050780443734883"}},{id:"36280109037",nameBusStop:"\u0110\u1ed1i Di\u1ec7n 36-38 Nguy\u1ec5n \u0110\xecnh T\u1ee9",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.17897394070707",lat:"16.05060919602556"}},{id:"3584305759",nameBusStop:"396 T\xf4n \u0110\u1ea3n",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.18223062074273",lat:"16.04561575174085"}},{id:"54313275708",nameBusStop:"Tr\u01b0\u1edbc THCS Nguy\u1ec5n C\xf4ng T\u1ee9",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.1834760638913",lat:"16.041761460005684"}},{id:"6425632807",nameBusStop:"618 T\xf4n \u0110\u1ea3n",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.18403992852737",lat:"16.037076749017444"}},{id:"26684790324",nameBusStop:"43-45 L\xea Tr\u1ecdng T\u1ea5n",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.18640952853627",lat:"16.036646470831215"}},{id:"45964210225",nameBusStop:"862 Tr\u01b0\u1eddng Ch\u1ec9nh",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.18783127249087",lat:"16.03416893458896"}},{id:"91358449416",nameBusStop:"\u0110\u1ed1i Di\u1ec7n 591-593 Tr\u01b0\u1eddng Ch\u1ec9nh",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.19328083351927",lat:"16.02186968465581"}},{id:"81427850044",nameBusStop:"303-305 L\xea \xd0",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.19593058350954",lat:"16.020348910443243"}},{id:"32724856645",nameBusStop:"203-205 L\xea \xd0",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.20127284104092",lat:"16.02214480384408"}},{id:"78935140120",nameBusStop:"117 L\xea \u0110\u1ea1i H\xe0nh",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.20413987820609",lat:"16.023196663821288"}},{id:"59477450033",nameBusStop:"\u0110\u1ed1i Di\u1ec7n 60 L\xea \u0110\u1ea1i H\xe0nh",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.20704728545141",lat:"16.024024153354"}},{id:"69335729775",nameBusStop:"\u0110\u1ed1i Di\u1ec7n Vietronimex",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.20881901638086",lat:"16.029780558977258"}},{id:"58654954787",nameBusStop:"513-515 Nguy\u1ec5n H\u1eefu Th\u1ecd",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.2091708322403",lat:"16.032925112304987"}},{id:"96160267484",nameBusStop:"B\u1ec7nh Vi\u1ec7n Vinmec",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.21032037170467",lat:"16.037885218062495"}},{id:"17490760532",nameBusStop:"382 N\xfai Th\xe0nh",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.22193149454841",lat:"16.03919168636934"}},{id:"98226209917",nameBusStop:"\u0110\u1ed1i Di\u1ec7n Helio Center",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.22381925114794",lat:"16.035979595840683"}},{id:"86852012881",nameBusStop:"\u0110\u1ed1i Di\u1ec7n Si\xeau Th\u1ecb Lotte",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.2281800661835",lat:"16.03374798746548"}},{id:"78945214121",nameBusStop:"\u0110\u1ed1i Di\u1ec7n Ch\xf9a B\xe0 \u0110a",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.24187511914056",lat:"16.037294345116663"}},{id:"56971553182",nameBusStop:"177 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.24223794038508",lat:"16.040445446244036"}},{id:"29637134925",nameBusStop:"310-312 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.24082996852063",lat:"16.042831542582434"}},{id:"3448077026",nameBusStop:"T\u01b0\u1eddng R\xe0o C\u1ed9ng \u0110o\xe0n TI",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.24143278027668",lat:"16.04521550367426"}},{id:"49781267181",nameBusStop:"\u0110\u1ed1i Di\u1ec7n 31-93 Phan T\u1ee9",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.24241287655195",lat:"16.04542476878549"}},{id:"18636664358",nameBusStop:"Pullman Resort",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.2494749499536",lat:"16.039685781613255"}},{id:"26290786726",nameBusStop:"0lalani Resort",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.25429102858155",lat:"16.029739784191015"}},{id:"28486828726",nameBusStop:"\u0110\u1ed1i Di\u1ec7n Crowne Plaza",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.25521496414669",lat:"16.027597560634092"}},{id:"77195537461",nameBusStop:"B\xe3i T\u1eafm S\u01a1n Th\u1ee7y",codeBusRoute:"R6A",directionRoute:"turn",travelTime:3,location:{lng:"108.2612770720921",lat:"16.015122781766966"}},{id:"45798943743",nameBusStop:"B\xe3i t\u1eafm S\u01a1n Th\u1ee7y",codeBusRoute:"R6A",directionRoute:"return",travelTime:0,location:{lng:"108.2612770720921",lat:"16.015122781766966"}},{id:"45825542054",nameBusStop:"Crowne plaza",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.2552588601655",lat:"16.027766721262175"}},{id:"66669219044",nameBusStop:"Fusion maia resort",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.25388840037341",lat:"16.030833827865607"}},{id:"27166697600",nameBusStop:"Pullman Resort",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.24956688759082",lat:"16.039835810191605"}},{id:"83181516244",nameBusStop:"121 Phan T\u1ee9",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.24758021291514",lat:"16.04691551055902"}},{id:"70315632457",nameBusStop:"T\u01b0\u1eddng r\xe0o tr\u01b0\u1eddng Trung c\u1ea5p ngh\u1ec1 s\u1ed1 5",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.23916766481852",lat:"16.04631418838364"}},{id:"51890019942",nameBusStop:"135-137 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.23929111170031",lat:"16.045366697136547"}},{id:"50589824213",nameBusStop:"370 Ng\u0169 H\xe0nh S\u01a1n",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.24178983829844",lat:"16.04038713769116"}},{id:"44788036001",nameBusStop:"Ch\xf9a B\xe0 \u0110a",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.2415984203066",lat:"16.037412090343746"}},{id:"13719452430",nameBusStop:"Si\xeau th\u1ecb Lotte",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.22880491832095",lat:"16.03477686497518"}},{id:"47016421851",nameBusStop:"Helio center",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.2240278698016",lat:"16.036362781966044"}},{id:"32604356680",nameBusStop:"C\xf4ng vi\xean Ch\xe2u \xc1",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.22542943055957",lat:"16.038105194061654"}},{id:"94539843020",nameBusStop:"Qu\u1ea3ng tr\u01b0\u1eddng 2 Th\xe1ng 9",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.2226891886166",lat:"16.041311739309428"}},{id:"7272978660",nameBusStop:"Tr\u01b0\u1edbc C\xf4ng ty TNHH Ki\u1ec3m to\xe1n v\xe0 K\u1ebf to\xe1n AAC",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.21473709951198",lat:"16.04015465219853"}},{id:"626027827",nameBusStop:"300-302 Nguy\u1ec5n H\u1eefu Th\u1ecd",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.20978387780943",lat:"16.036277051641694"}},{id:"8624634469",nameBusStop:"430-432 Nguy\u1ec5n H\u1eefu Th\u1ecd",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.20883097273669",lat:"16.033013092331796"}},{id:"51200246064",nameBusStop:"Viettronimex",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.20844317297122",lat:"16.0304704441411"}},{id:"24997171155",nameBusStop:"40-42 L\xea \u0110\u1ea1i H\xe0nh",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.20751315821",lat:"16.024312674874658"}},{id:"25940070414",nameBusStop:"86 L\xea \u0110\u1ea1i H\xe0nh",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.20434284715418",lat:"16.023430461922842"}},{id:"97004575857",nameBusStop:"172-174 L\xea \u0110\u1ea1i H\xe0nh",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.20106373315022",lat:"16.022470809935378"}},{id:"70690368124",nameBusStop:"328-330 L\xea \u0110\u1ea1i H\xe0nh",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.19582307393559",lat:"16.020656584379388"}},{id:"92946957192",nameBusStop:"591-593 Tr\u01b0\u1eddng Chinh",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.19342197043777",lat:"16.022170950662794"}},{id:"7659391428",nameBusStop:"517-519 Tr\u01b0\u1eddng Ch\u1ec9nh",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.18827656308136",lat:"16.03400265520137"}},{id:"8255542105",nameBusStop:"64-66 L\xea Tr\u1ecdng T\u1ea5n",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.18597315353632",lat:"16.03666980102886"}},{id:"77125021650",nameBusStop:"489 T\xf4n \u0110\u1eb3n",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.18359900045432",lat:"16.041267823703212"}},{id:"38368178717",nameBusStop:"413-415 T\xf4n \u0110\u1ea3n",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.18255655273518",lat:"16.04455428371741"}},{id:"21217248760",nameBusStop:"14-16 Nguy\u1ec5n \u0110\xecnh T\u1ee9",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.17948135756792",lat:"16.050846602107583"}},{id:"49043958507",nameBusStop:"\u0110\u1ed1i di\u1ec7n 44-46 \u0110\u1ec9nh Li\u1ec7t",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.17421863820776",lat:"16.050754876658385"}},{id:"49842891889",nameBusStop:"B\u1ebfn xe Trung t\xe2m \u0110\xe0 N\u1eb5ng",codeBusRoute:"R6A",directionRoute:"return",travelTime:3,location:{lng:"108.17254904465618",lat:"16.056620217918223"}},{id:"92537656386",nameBusStop:"B\u1ebfn xe Trung T\xe2m \u0110\xe0 N\u1eb5ng",codeBusRoute:"R15",directionRoute:"turn",travelTime:0,location:{lng:"108.17281361795985",lat:"16.056814766688944"}},{id:"86116568073",nameBusStop:"139-141 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.17438461534329",lat:"16.058944628076326"}},{id:"44886024148",nameBusStop:"32-34 Hu\u1ef3nh Ng\u1ecdc Hu\u1ec7",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.18388689503526",lat:"16.064090811809084"}},{id:"76255538017",nameBusStop:"142-144 Hu\u1ef3nh Ng\u1ecdc Hu\u1ec7",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.18594323515403",lat:"16.059821630705596"}},{id:"82308340194",nameBusStop:"\u0110\u1ed1i di\u1ec7n 224 H\xe0 Huy T\u1eadp",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.19122769282565",lat:"16.06113070962569"}},{id:"32358993576",nameBusStop:"133-135 H\xe0 Huy T\u1eadp",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.19204372590026",lat:"16.064920115847144"}},{id:"12055787191",nameBusStop:"257-259 Th\xe1i Th\u1ecb B\xf4i",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.19286232994187",lat:"16.06810087903795"}},{id:"64677543361",nameBusStop:"65-67 Th\xe1i Th\u1ecb B\xf4i",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.19949837007948",lat:"16.068544872784788"}},{id:"2371180908",nameBusStop:"09 V\xf5 V\u0103n T\xe2n",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.20261067563168",lat:"16.06696363528391"}},{id:"68440475157",nameBusStop:"461 H\u1ea3i Ph\xf2ng",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.20504210175947",lat:"16.068416516411386"}},{id:"85539117539",nameBusStop:"Ga \u0110\xe0 N\u1eb5ng",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.2087848126892",lat:"16.07084310436931"}},{id:"98858001194",nameBusStop:"231 H\u1ea3i Ph\xf2ng",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.21131725676015",lat:"16.071362396653267"}},{id:"45508765147",nameBusStop:"248 - 250 \xd4ng \xcdch Khi\xeam",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.21390619891525",lat:"16.067899473420763"}},{id:"12930656759",nameBusStop:"Si\xeau th\u1ecb Big C",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.21409925604962",lat:"16.067110622995642"}},{id:"95077375739",nameBusStop:"162-164 Nguy\u1ec5n Ho\xe0ng",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.21373869930876",lat:"16.061009432483672"}},{id:"84317773434",nameBusStop:"155-157 Nguy\u1ec5n V\u0103n Linh",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.21519324494503",lat:"16.060464341370025"}},{id:"13783641504",nameBusStop:"11-15 Nguy\u1ec5n V\u0103n Linh",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.21658125234805",lat:"16.060627260397577"}},{id:"48166599730",nameBusStop:"\u0110\u1ed1i di\u1ec7n ch\xf9a Ph\u01b0\u1edbc Ninh",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.21766429231151",lat:"16.060720230173324"}},{id:"70512678558",nameBusStop:"\u0110\u1ea7u c\u1ea7u R\u1ed3ng \u0111\u01b0\u1eddng V\xf5 V\u0103n Ki\u1ec7t",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.2336147579985",lat:"16.061212128206023"}},{id:"73673096959",nameBusStop:"Tr\u1ee5 \u0111i\u1ec7n CS 08T3 VVK",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.23927143988699",lat:"16.062121983848314"}},{id:"24618054156",nameBusStop:"G\u1ea7n ng\xe3 t\u01b0 H\u1ed3 Nghinh ~ D\u01b0\u01a1ng \u0110\xecnh Ngh\u1ec7",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.24319626651571",lat:"16.069257965915266"}},{id:"43525170902",nameBusStop:"\u0110\u1ed1i di\u1ec7n qu\xe1n HaiYan \u0111\u01b0\u1eddng H\u1ed3 Nghinh",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.24305812283299",lat:"16.07275133911638"}},{id:"33976955017",nameBusStop:"\u0110\u1ed1i di\u1ec7n tr\u01b0\u1eddng Ch\xednh tr\u1ecb",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.24297373679327",lat:"16.07881589301855"}},{id:"44845207665",nameBusStop:"Motel H\u01b0\u01a1ng Vi\u1ec7t \u0111\u01b0\u1eddng H\xe0 K\u1ef3 Ng\u1ed9",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.2445471700796",lat:"16.082456223225332"}},{id:"17105041922",nameBusStop:"\u0110\u1ed1i di\u1ec7n 78 Nguy\u1ec5n S\xe1ng",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.24652164569733",lat:"16.08645669080271"}},{id:"6399052588",nameBusStop:"B\xe3i t\u1eafm M\xe2n Th\xe1i",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.24944247871629",lat:"16.089092233884315"}},{id:"75082605952",nameBusStop:"Th\u1ecd Quang",codeBusRoute:"R15",directionRoute:"turn",travelTime:3,location:{lng:"108.25580184257181",lat:"16.102846282608617"}},{id:"12302050934",nameBusStop:"Th\u1ecd Quang",codeBusRoute:"R15",directionRoute:"return",travelTime:0,location:{lng:"108.25580184257181",lat:"16.102846282608617"}},{id:"22906703510",nameBusStop:"\u0110\u1ed1i di\u1ec7n b\xe3i t\u1eafm M\xe2n Th\xe1i",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.24958272481612",lat:"16.08962421497768"}},{id:"52358201690",nameBusStop:"\u0110\u1ed1i di\u1ec7n 75 Nguy\u1ec5n S\xe1ng",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.24643337007961",lat:"16.08689070710179"}},{id:"58153209857",nameBusStop:"Tr\u01b0\u1eddng Ch\xednh tr\u1ecb",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.24303110175947",lat:"16.079512573234176"}},{id:"73004104654",nameBusStop:"148-150 H\u1ed3 Nghinh",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.24306801425864",lat:"16.07299896295162"}},{id:"57828676579",nameBusStop:"\u0110\u1ed1i di\u1ec7n Golden Light Hotel",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.24304008172129",lat:"16.068554634046123"}},{id:"35607638666",nameBusStop:"Tr\u1ee5 \u0111i\u1ec7n CS49T1 \u0111\u01b0\u1eddng V\xf5 V\u0103n Ki\u1ec7t",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.23914341937743",lat:"16.062398193833534"}},{id:"75443160026",nameBusStop:"\u0110\u1ea7u c\u1ea7u R\u1ed3ng \u0111\u01b0\u1eddng V\xf5 V\u0103n Ki\u1ec7t",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.23341988550607",lat:"16.061602632340048"}},{id:"9805423952",nameBusStop:"C\xf4ng vi\xean Nguy\u1ec5n V\u0103n Linh + L\xea \u0110\xecnh D\u01b0\u01a1ng",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.22121699990872",lat:"16.061271666210708"}},{id:"49031956067",nameBusStop:"Ch\xf9a Ph\u01b0\u1edbc Ninh",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.21828815334159",lat:"16.061085195929504"}},{id:"11411501923",nameBusStop:"102-104 Nguy\u1ec5n V\u0103n Linh",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.21400763359591",lat:"16.060442371875514"}},{id:"23874569540",nameBusStop:"153-155 Nguy\u1ec5n Ho\xe0ng",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.21373613139498",lat:"16.06099977066448"}},{id:"96307260788",nameBusStop:"293 \xd4ng \xcdch Khi\xeam",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.21366870804562",lat:"16.068917893168248"}},{id:"59545139789",nameBusStop:"239-241 \xd4ng \xcdch Khi\xeam",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.21356915527501",lat:"16.069380067228117"}},{id:"37915889333",nameBusStop:"196 H\u1ea3i Ph\xf2ng",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.21131514715765",lat:"16.071376243733095"}},{id:"38495511168",nameBusStop:"Ga \u0110\xe0 N\u1eb5ng",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.20878226569181",lat:"16.07083699113692"}},{id:"60943340003",nameBusStop:"354 H\u1ea3i Ph\xf2ng",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.20495421676767",lat:"16.068132150037908"}},{id:"91858796144",nameBusStop:"78-80 V\xf5 V\u0103n T\xe2n",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.20297718261132",lat:"16.06707871581367"}},{id:"74504109497",nameBusStop:"96-98 Th\xe1i Th\u1ecb B\xf4i",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.19902274604908",lat:"16.068337575316537"}},{id:"32486759065",nameBusStop:"304 -306 Th\xe1i Thi B\xf4i",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.1929241927722",lat:"16.068077959291408"}},{id:"21921815530",nameBusStop:"Tr\u01b0\u1eddng Ti\u1ec3u h\u1ecdc Hu\u1ef3nh Ng\u1ecdc Hu\u1ec7",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.19193264028002",lat:"16.063773448083477"}},{id:"61067471996",nameBusStop:"238-240 H\xe0 Huy T\u1eadp",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.1906497272138",lat:"16.060920570217267"}},{id:"99406080068",nameBusStop:"145-145b Hu\u1ef3nh Ng\u1ecdc Hu\u1ec7",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.18511695269814",lat:"16.061259258484476"}},{id:"8716625312",nameBusStop:"37-39 Hu\u1ef3nh Ng\u1ecdc Hu\u1ec7",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.1838792823056",lat:"16.06409754770248"}},{id:"47347092055",nameBusStop:"128 T\xf4n \u0110\u1ee9c Th\u1eafng",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.176540736519",lat:"16.060062648905962"}},{id:"76833318550",nameBusStop:"B\u1ebfn xe Trung T\xe2m \u0110\xe0 N\u1eb5ng",codeBusRoute:"R15",directionRoute:"return",travelTime:3,location:{lng:"108.17281361795985",lat:"16.056814766688944"}},{id:"54081045721",nameBusStop:"B\xe3i \u0111\u1ed7 xe P&R B\xf9i D\u01b0\u01a1ng L\u1ecbch",codeBusRoute:"TMF",directionRoute:"turn",travelTime:0,location:{lng:"108.23233528172148",lat:"16.089596452027948"}},{id:"2364011826",nameBusStop:"L\xf4 113 D\u01b0\u01a1ng V\xe2n Nga",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.23170445604995",lat:"16.09018038297482"}},{id:"53830511511",nameBusStop:"210 Kh\xfac H\u1ea1o",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.23283006584099",lat:"16.09327339881682"}},{id:"8877441930",nameBusStop:"\u0110\u1ed1i di\u1ec7n chung c\u01b0 4A Chu Huy M\xe2n",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.2319829985396",lat:"16.100049134307707"}},{id:"20203022422",nameBusStop:"Ch\xe2n c\u1ea7u Thu\u1eadn Ph\u01b0\u1edbc (\u0111\u01b0\u1eddng L\xea \u0110\u1ee9c Th\u1ecd)",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.23087227107288",lat:"16.100525238489954"}},{id:"69026667540",nameBusStop:"S\u1ed1 159 \u0111\u01b0\u1eddng 3/2",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.21636823906881",lat:"16.0868505062171"}},{id:"56070147100",nameBusStop:"Tr\u1ea1m xe bu\xfdt Xu\xe2n Di\u1ec7u",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.22011896375302",lat:"16.086999684624722"}},{id:"97247880364",nameBusStop:"S\u1ed1 49 \u0111\u01b0\u1eddng 3/2",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.22060873231248",lat:"16.08472026484445"}},{id:"60963280421",nameBusStop:"S\u1ed1 6A Tr\u1ea7n Ph\xfa",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.2227316137544",lat:"16.081194297568082"}},{id:"1127029287",nameBusStop:"S\u1ed1 12 L\xfd T\u1ef1 Tr\u1ecdng",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.22111102851912",lat:"16.077478086956436"}},{id:"73111337888",nameBusStop:"S\u1ed1 08 Nguy\u1ec5n Th\u1ecb Minh Khai",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.21763531055706",lat:"16.076188474539133"}},{id:"69824385997",nameBusStop:"B\u1ec7nh vi\u1ec7n C \u0110\xe0 N\u1eb5ng",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.21830362724623",lat:"16.072605718194655"}},{id:"42165248347",nameBusStop:"S\u1ed1 29 Ng\xf4 Gia T\u1ef1",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.2175443486467",lat:"16.070805189691914"}},{id:"14979932836",nameBusStop:"Ch\u1ee3 C\u1ed3n",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.21468171497818",lat:"16.067980985813527"}},{id:"17717925892",nameBusStop:"S\u1ed1 331 H\xf9ng V\u01b0\u01a1ng",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.2107167259004",lat:"16.066778972305134"}},{id:"35055415273",nameBusStop:"S\u1ed1 85 L\xfd Th\xe1i T\u1ed5",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.20859256584069",lat:"16.066298124006618"}},{id:"29208024612",nameBusStop:"C\xf4ng vi\xean 29/3",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.20533927107289",lat:"16.066076801988924"}},{id:"29542146191",nameBusStop:"UBND ph\u01b0\u1eddng Ch\xednh Gi\xe1n",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.20275850502051",lat:"16.06466381031177"}},{id:"42008343276",nameBusStop:"S\u1ed1 88 Nguy\u1ec5n Tri Ph\u01b0\u01a1ng",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.20408398172111",lat:"16.062143499123433"}},{id:"18500922565",nameBusStop:"S\u1ed1 387-389 Nguy\u1ec5n V\u0103n Linh",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.2080105235123",lat:"16.059178541339158"}},{id:"13083220178",nameBusStop:"B\u1ec7nh vi\u1ec7n Ho\xe0n M\u1ef9",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.21025813115794",lat:"16.059675050583994"}},{id:"40811109785",nameBusStop:"S\u1ed1 153-155 Nguy\u1ec5n V\u0103n Linh",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.21516454124362",lat:"16.060494850414624"}},{id:"49333626050",nameBusStop:"\u0110\u1ed1i di\u1ec7n ch\u1ee7a Ph\u01b0\u1edbc Ninh",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.2177193868208",lat:"16.060707931097703"}},{id:"58857259154",nameBusStop:"S\u1ed1 11 Nguy\u1ec5n V\u0103n Linh (tr\u01b0\u1edbc \u1ea8m th\u1ef1c Tr\u1ea7n)",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.22246362351218",lat:"16.06097580039456"}},{id:"54759445506",nameBusStop:"C\u1ea7u R\u1ed3ng (\u0111\u1ea7u c\u1ea7u R\u1ed3ng \u0111\u01b0\u1eddng V\xf5 V\u0103n Ki\u1ec7t)",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.23364302697073",lat:"16.06118181278639"}},{id:"55855132036",nameBusStop:"Tr\u1ee5 \u0111i\u1ec7n CS 08T3 VWK (G\u1ea7n White Sand Hotel)",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.24229179706441",lat:"16.06303028818767"}},{id:"36126878977",nameBusStop:"Nh\xe0 h\xe0ng M\u1ef9 H\u1ea1nh",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.2455055536616",lat:"16.065766888384157"}},{id:"50720770897",nameBusStop:"G\u1ea7n C\xf4ng vi\xean Bi\u1ec3n \u0110\xf4ng",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.24539691463528",lat:"16.069358473241"}},{id:"39435663688",nameBusStop:"C\xf4ng vi\xean Bi\u1ec3n \u0110\xf4ng (b\xe3i t\u1eafm s\u1ed1 3)",codeBusRoute:"TMF",directionRoute:"turn",travelTime:3,location:{lng:"108.24570336992453",lat:"16.073377262187385"}},{id:"45910068255",nameBusStop:"C\xf4ng vi\xean Bi\u1ec3n \u0110\xf4ng",codeBusRoute:"TMF",directionRoute:"return",travelTime:0,location:{lng:"108.24534581841353",lat:"16.069870570409137"}},{id:"72731004573",nameBusStop:"\xd0/d C\xf4ng vi\xean Bi\u1ec3n \u0110\xf4ng",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.24504445758036",lat:"16.069987798847112"}},{id:"40952978766",nameBusStop:"Qu\xe1n A.H\u1ea1nh (\u0111\u1ed5i di\u1ec7n nh\xe0 h\xe0ng M\u1ef9 H\u1ea1nh)",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.2451660715857",lat:"16.06501606984501"}},{id:"41412736196",nameBusStop:"C\u1ea7u R\u1ed3ng (\u0111\u1ea7u c\u1ea7u R\u1ed3ng \u0111\u01b0\u1eddng V\xf5 V\u0103n Ki\u1ec7t)",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.2333865167005",lat:"16.06156006312343"}},{id:"62243148018",nameBusStop:"\u0110\u1ed1i di\u1ec7n 31 Nguy\u1ec5n V\u0103n Linh",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.22120061781818",lat:"16.061067553367664"}},{id:"49340348861",nameBusStop:"Ch\xf9a Ph\u01b0\u1edbc Ninh",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.21785569130134",lat:"16.06094568797249"}},{id:"48552454098",nameBusStop:"S\u1ed1 102 Nguy\u1ec5n V\u0103n Linh",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.21486843083582",lat:"16.060570120513376"}},{id:"28503131718",nameBusStop:"S\u1ed1 248 Nguy\u1ec5n V\u0103n Linh",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.20825848043214",lat:"16.059568437502918"}},{id:"85112145854",nameBusStop:"S\u1ed1 336-338 Nguy\u1ec5n V\u0103n Linh",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.2081398793331",lat:"16.059485261403953"}},{id:"81912355890",nameBusStop:"C\xf4ng vi\xean 29/3",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.2053558901375",lat:"16.065925749788946"}},{id:"45519730315",nameBusStop:"S\u1ed1 130 L\xfd Th\xe1i T\u1ed5",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.20740176017873",lat:"16.06617723980762"}},{id:"96728724810",nameBusStop:"S\u1ed1 10 L\xfd Th\xe1i T\u1ed5",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.2071322303662",lat:"16.066112105979837"}},{id:"97148964723",nameBusStop:"\u0110\u1ed1i di\u1ec7n ch\u1ee3 C\u1ed3n",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.21437180363968",lat:"16.067245634853055"}},{id:"43226985925",nameBusStop:"S\u1ed1 38 Ng\xf4 Gia T\u1ef1",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.21755453330331",lat:"16.068963801360802"}},{id:"56325263618",nameBusStop:"S\u1ed1 39-41 H\u1ea3i Ph\xf2ng",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.21786867184434",lat:"16.072274397074214"}},{id:"21569062908",nameBusStop:"T\u01b0\u1eddng r\xe0o THPT Tr\u1ea7n Ph\xfa",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.2183568498475",lat:"16.07301839813329"}},{id:"35951809297",nameBusStop:"\xd0/d 04 Nguy\u1ec5n Th\u1ecb Minh Khai",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.2177408262392",lat:"16.076377898486523"}},{id:"74609573555",nameBusStop:"S\u1ed1 07 L\xfd T\u1ef1 Tr\u1ecdng",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.22146544492753",lat:"16.07744137952605"}},{id:"15226395063",nameBusStop:"\u0110\u1ed1i di\u1ec7n 12 B\u1ea1ch \u0110\u1eb1ng",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.22386807543666",lat:"16.079630442089805"}},{id:"17275955160",nameBusStop:"S\u1ed1 24 \u0111\u01b0\u1eddng 3/2",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.22146916035234",lat:"16.084284258869403"}},{id:"3791454796",nameBusStop:"B\xe3i \u0111\u1ed7 xe Xu\xe2n Di\u1ec7u",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.2200964927403",lat:"16.08701083235654"}},{id:"59439629766",nameBusStop:"S\u1ed1 192 \u0111\u01b0\u1eddng 3/2",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.2164932269446",lat:"16.08706437171103"}},{id:"16034454369",nameBusStop:"Ch\xe2n c\u1ea7u Thu\u1eadn Ph\u01b0\u1edbc",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.2309313868278",lat:"16.100247727287464"}},{id:"8056955304",nameBusStop:"Chung c\u01b0 Chu Huy M\xe2n",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.23174034797788",lat:"16.096638374779165"}},{id:"75614658139",nameBusStop:"S\u1ed1 281 Kh\xfac H\u1ea1o",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.23256463286097",lat:"16.09280173245668"}},{id:"95917873560",nameBusStop:"\u0110\u1ed1i di\u1ec7n l\xf4 113 D\u01b0\u01a1ng V\xe2n Nga",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.23094614874866",lat:"16.090558355564852"}},{id:"38157354033",nameBusStop:"B\xe3i \u0111\u1ed7 xe P&R B\xf9i D\u01b0\u01a1ng L\u1ecbch",codeBusRoute:"TMF",directionRoute:"return",travelTime:3,location:{lng:"108.23233528172148",lat:"16.089462440418036"}}],Ka=function(){var t=(0,e.useState)([]),n=(0,o.Z)(t,2),r=n[0],i=n[1];return(0,e.useEffect)((function(){var e=function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xa;case 2:t=e.sent,[],n=t.map((function(e){return{id:e.id,nameBusStop:e.nameBusStop,codeBusRoute:e.codeBusRoute,directionRoute:e.directionRoute,travelTime:e.travelTime,location:{lng:e.location.lng,lat:e.location.lat}}})),i(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),r},Ya=[{id:"time-bus-start-1",codeBusRoute:"R16",directionRoute:"turn",startingTime:["6:00","6:15","6:30","6:45","7:00","7:30","8:00","8:30","9:00","9:30","10:00","10:30","10:55","11:10","11:25","11:40","12:00","12:20","12:35","12:50","13:05","13:30","14:00","14:30","15:00","15:30","16:00","16:30","16:55","17:10","17:30","18:00","18:20","18:35","19:00"]},{id:"time-bus-start-2",codeBusRoute:"R16",directionRoute:"return",startingTime:["6:00","6:15","6:30","6:45","7:00","7:30","8:00","8:30","9:00","9:30","10:00","10:30","10:55","11:10","11:25","11:40","12:00","12:20","12:35","12:50","13:05","13:30","14:00","14:30","15:00","15:30","16:00","16:30","16:55","17:10","17:30","18:00","18:20","18:35","19:00"]},{id:"time-bus-start-3",codeBusRoute:"TMF",directionRoute:"turn",startingTime:["6:00","6:40","7:10","7:40","8:10","8:40","9:10","9:40","10:10","10:40","11:10","11:40","12:10","12:40","13:10","13:40","14:10","14:40","15:10","15:40","16:10","16:40","17:10","17:40","18:10","18:40","19:00"]},{id:"time-bus-start-4",codeBusRoute:"TMF",directionRoute:"return",startingTime:["6:00","6:30","7:10","7:30","8:10","8:30","9:10","9:30","10:10","10:30","11:10","11:30","12:10","12:30","13:10","13:30","14:10","14:30","15:10","15:30","16:10","16:30","17:10","17:30","18:10","18:30","19:00"]},{id:"time-bus-start-5",codeBusRoute:"R4A",directionRoute:"turn",startingTime:["6:10","6:40","7:10","7:40","8:10","8:40","9:10","9:40","10:10","10:40","11:10","11:40","12:10","12:40","13:10","13:40","14:10","14:40","15:10","15:40","16:10","16:40","17:10","17:40","18:10","18:40","19:00"]},{id:"time-bus-start-6",codeBusRoute:"R4A",directionRoute:"return",startingTime:["6:00","6:30","7:10","7:30","8:10","8:30","9:10","9:30","10:10","10:30","11:10","11:30","12:10","12:30","13:10","13:30","14:10","14:30","15:10","15:30","16:10","16:30","17:10","17:30","18:10","18:30","19:00"]},{id:"time-bus-start-7",codeBusRoute:"R15",directionRoute:"turn",startingTime:["6:10","6:40","7:10","7:40","8:10","8:40","9:10","9:40","10:10","10:40","11:10","11:40","12:10","12:40","13:10","13:40","14:10","14:40","15:10","15:40","16:10","16:40","17:10","17:40","18:10","18:40","19:00"]},{id:"time-bus-start-8",codeBusRoute:"R15",directionRoute:"return",startingTime:["6:00","6:30","7:10","7:30","8:10","8:30","9:10","9:30","10:10","10:30","11:10","11:30","12:10","12:30","13:10","13:30","14:10","14:30","15:10","15:30","16:10","16:30","17:10","17:30","18:10","18:30","19:00"]},{id:"time-bus-start-9",codeBusRoute:"R17A",directionRoute:"turn",startingTime:["6:00","6:15","6:30","6:50","7:10","7:30","8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:15","11:30","11:50","12:05","12:20","12:40","12:55","13:10","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:15","17:30","17:50","18:05","18:20","18:40","19:00"]},{id:"time-bus-start-10",codeBusRoute:"R17A",directionRoute:"return",startingTime:["6:00","6:15","6:30","6:50","7:10","7:30","8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:15","11:30","11:50","12:05","12:20","12:40","12:55","13:10","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:15","17:30","17:50","18:05","18:20","18:40","19:00"]},{id:"time-bus-start-11",codeBusRoute:"R6A",directionRoute:"turn",startingTime:["6:00","6:40","7:10","7:40","8:10","8:40","9:10","9:40","10:10","10:40","11:10","11:40","12:10","12:40","13:10","13:40","14:10","14:40","15:10","15:40","16:10","16:40","17:10","17:40","18:10","18:40","19:00"]},{id:"time-bus-start-12",codeBusRoute:"R6A",directionRoute:"return",startingTime:["6:00","6:30","7:10","7:30","8:10","8:30","9:10","9:30","10:10","10:30","11:10","11:30","12:10","12:30","13:10","13:30","14:10","14:30","15:10","15:30","16:10","16:30","17:10","17:30","18:10","18:30","19:00"]}],Ja=function(){var t=(0,e.useState)([]),n=(0,o.Z)(t,2),r=n[0],i=n[1];return(0,e.useEffect)((function(){var e=function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ya;case 2:t=e.sent,[],n=t.map((function(e){return{id:e.id,codeBusRoute:e.codeBusRoute,directionRoute:e.directionRoute,startingTime:e.startingTime}})),i(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),r},Qa=n(2007);function $a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function to(e,t,n){return t&&eo(e.prototype,t),n&&eo(e,n),e}function no(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&io(e,t)}function ro(e){return ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ro(e)}function io(e,t){return io=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},io(e,t)}function ao(e,t){return!t||"object"!==typeof t&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oo(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ro(e);if(t){var i=ro(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ao(this,n)}}function so(e){return function(e){if(Array.isArray(e))return lo(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=String(e);if(0===t)return n;var r=n.match(/(.*?)([0-9]+)(.*)/),i=r?r[1]:"",a=r?r[3]:"",o=r?r[2]:n,s=o.length>=t?o:(so(Array(t)).map((function(){return"0"})).join("")+o).slice(-1*t);return"".concat(i).concat(s).concat(a)}var co={daysInHours:!1,zeroPadTime:2};function ho(e,t){var n=e.days,r=e.hours,i=e.minutes,a=e.seconds,o=Object.assign(Object.assign({},co),t),s=o.daysInHours,l=o.zeroPadTime,u=o.zeroPadDays,c=void 0===u?l:u,h=Math.min(2,l),d=s?uo(r+24*n,l):uo(r,h);return{days:s?"":uo(n,c),hours:d,minutes:uo(i,h),seconds:uo(a,h)}}var fo=function(t){no(r,t);var n=oo(r);function r(){var e;return $a(this,r),(e=n.apply(this,arguments)).state={count:e.props.count||3},e.startCountdown=function(){e.interval=window.setInterval((function(){0===e.state.count-1?(e.stopCountdown(),e.props.onComplete&&e.props.onComplete()):e.setState((function(e){return{count:e.count-1}}))}),1e3)},e.stopCountdown=function(){clearInterval(e.interval)},e.addTime=function(t){e.stopCountdown(),e.setState((function(e){return{count:e.count+t}}),e.startCountdown)},e}return to(r,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?(0,e.cloneElement)(this.props.children,{count:this.state.count}):null}}]),r}(e.Component);fo.propTypes={count:Qa.number,children:Qa.element,onComplete:Qa.func};var po=function(t){no(r,t);var n=oo(r);function r(t){var i;if($a(this,r),(i=n.call(this,t)).mounted=!1,i.initialTimestamp=i.calcOffsetStartTimestamp(),i.offsetStartTimestamp=i.props.autoStart?0:i.initialTimestamp,i.offsetTime=0,i.legacyMode=!1,i.legacyCountdownRef=(0,e.createRef)(),i.tick=function(){var e=i.calcTimeDelta(),t=e.completed&&!i.props.overtime?void 0:i.props.onTick;i.setTimeDeltaState(e,void 0,t)},i.start=function(){if(!i.isStarted()){var e=i.offsetStartTimestamp;i.offsetStartTimestamp=0,i.offsetTime+=e?i.calcOffsetStartTimestamp()-e:0;var t=i.calcTimeDelta();i.setTimeDeltaState(t,"STARTED",i.props.onStart),i.props.controlled||t.completed&&!i.props.overtime||(i.clearTimer(),i.interval=window.setInterval(i.tick,i.props.intervalDelay))}},i.pause=function(){i.isPaused()||(i.clearTimer(),i.offsetStartTimestamp=i.calcOffsetStartTimestamp(),i.setTimeDeltaState(i.state.timeDelta,"PAUSED",i.props.onPause))},i.stop=function(){i.isStopped()||(i.clearTimer(),i.offsetStartTimestamp=i.calcOffsetStartTimestamp(),i.offsetTime=i.offsetStartTimestamp-i.initialTimestamp,i.setTimeDeltaState(i.calcTimeDelta(),"STOPPED",i.props.onStop))},i.isStarted=function(){return i.isStatus("STARTED")},i.isPaused=function(){return i.isStatus("PAUSED")},i.isStopped=function(){return i.isStatus("STOPPED")},i.isCompleted=function(){return i.isStatus("COMPLETED")},i.handleOnComplete=function(e){i.props.onComplete&&i.props.onComplete(e)},t.date){var a=i.calcTimeDelta();i.state={timeDelta:a,status:a.completed?"COMPLETED":"STOPPED"}}else i.legacyMode=!0;return i}return to(r,[{key:"componentDidMount",value:function(){this.legacyMode||(this.mounted=!0,this.props.onMount&&this.props.onMount(this.calcTimeDelta()),this.props.autoStart&&this.start())}},{key:"componentDidUpdate",value:function(e){this.legacyMode||this.props.date!==e.date&&(this.initialTimestamp=this.calcOffsetStartTimestamp(),this.offsetStartTimestamp=this.initialTimestamp,this.offsetTime=0,this.setTimeDeltaState(this.calcTimeDelta()))}},{key:"componentWillUnmount",value:function(){this.legacyMode||(this.mounted=!1,this.clearTimer())}},{key:"calcTimeDelta",value:function(){var e=this.props,t=e.date,n=e.now,r=e.precision,i=e.controlled,a=e.overtime;return function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.now,i=void 0===r?Date.now:r,a=n.precision,o=void 0===a?0:a,s=n.controlled,l=n.offsetTime,u=void 0===l?0:l,c=n.overtime;t="string"===typeof e?new Date(e).getTime():e instanceof Date?e.getTime():e,s||(t+=u);var h=s?t:t-i(),d=Math.min(20,Math.max(0,o)),f=Math.round(1e3*parseFloat(((c?h:Math.max(0,h))/1e3).toFixed(d))),p=Math.abs(f)/1e3;return{total:f,days:Math.floor(p/86400),hours:Math.floor(p/3600%24),minutes:Math.floor(p/60%60),seconds:Math.floor(p%60),milliseconds:Number((p%1*1e3).toFixed()),completed:f<=0}}(t,{now:n,precision:r,controlled:i,offsetTime:this.offsetTime,overtime:a})}},{key:"calcOffsetStartTimestamp",value:function(){return Date.now()}},{key:"addTime",value:function(e){this.legacyCountdownRef.current.addTime(e)}},{key:"clearTimer",value:function(){window.clearInterval(this.interval)}},{key:"isStatus",value:function(e){return this.state.status===e}},{key:"setTimeDeltaState",value:function(e,t,n){var r=this;if(this.mounted){var i;!this.state.timeDelta.completed&&e.completed&&(this.props.overtime||this.clearTimer(),i=this.handleOnComplete);return this.setState((function(n){var i=t||n.status;return e.completed&&!r.props.overtime?i="COMPLETED":t||"COMPLETED"!==i||(i="STOPPED"),{timeDelta:e,status:i}}),(function(){n&&n(r.state.timeDelta),i&&i(r.state.timeDelta)}))}}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,stop:this.stop,isStarted:this.isStarted,isPaused:this.isPaused,isStopped:this.isStopped,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var e=this.props,t=e.daysInHours,n=e.zeroPadTime,r=e.zeroPadDays,i=this.state.timeDelta;return Object.assign(Object.assign({},i),{api:this.getApi(),props:this.props,formatted:ho(i,{daysInHours:t,zeroPadTime:n,zeroPadDays:r})})}},{key:"render",value:function(){if(this.legacyMode){var t=this.props,n=t.count,r=t.children,i=t.onComplete;return(0,e.createElement)(fo,{ref:this.legacyCountdownRef,count:n,onComplete:i},r)}var a=this.props,o=a.className,s=a.overtime,l=a.children,u=a.renderer,c=this.getRenderProps();if(u)return u(c);if(l&&this.state.timeDelta.completed&&!s)return(0,e.cloneElement)(l,{countdown:c});var h=c.formatted,d=h.days,f=h.hours,p=h.minutes,m=h.seconds;return(0,e.createElement)("span",{className:o},c.total<0?"-":"",d,d?":":"",f,":",p,":",m)}}]),r}(e.Component);po.defaultProps=Object.assign(Object.assign({},co),{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0}),po.propTypes={date:(0,Qa.oneOfType)([(0,Qa.instanceOf)(Date),Qa.string,Qa.number]),daysInHours:Qa.bool,zeroPadTime:Qa.number,zeroPadDays:Qa.number,controlled:Qa.bool,intervalDelay:Qa.number,precision:Qa.number,autoStart:Qa.bool,overtime:Qa.bool,className:Qa.string,children:Qa.element,renderer:Qa.func,now:Qa.func,onMount:Qa.func,onStart:Qa.func,onPause:Qa.func,onStop:Qa.func,onTick:Qa.func,onComplete:Qa.func};var mo=po,vo=function(t){var n=t.idBusStop,r=(0,e.useState)(""),i=(0,o.Z)(r,2),a=i[0],s=i[1],l=(0,e.useState)(1e3),u=(0,o.Z)(l,2),c=u[0],h=u[1],d=Ka(),f=Ja(),p=function(e){return e<10?"0"+e:e};(0,e.useEffect)((function(){var e=setInterval((function(){var e=new Date,t=p(e.getHours())+":"+p(e.getMinutes());s(t)}),1e3);return function(){return setInterval(e)}}),[]),(0,e.useEffect)((function(){if(0!==d.length&&0!==f.length){var e=d.filter((function(e){return e.id===n}))[0],t=e.codeBusRoute,r=e.directionRoute,i=f.filter((function(e){return e.codeBusRoute===t&&e.directionRoute===r}))[0].startingTime,o=60*e.travelTime*1e3;h(o),a>="06:00"||a<="21:00"?-1!==i.indexOf(a)&&h(o):h(0)}}),[a,n,d,f]);return(0,Ee.jsx)("div",{className:"bus-location-time-countdown",children:(0,Ee.jsx)(mo,{date:Date.now()+c,renderer:function(e){var t=e.hours,n=e.minutes,r=e.seconds;if(e.completed)return(0,Ee.jsx)("span",{style:{fontSize:"20px",color:"#000"},children:"Xe \u0111\xe3 \u0111\u1ebfn b\u1ebfn"});var i="".concat(p(t),":").concat(p(n),":").concat(p(r));return(0,Ee.jsx)("span",{style:{fontSize:"20px",color:"#000"},children:"00:00:00"===i?"Xe ch\u01b0a xu\u1ea5t b\u1ebfn":"Xe c\xf2n ".concat(i," s\u1ebd t\u1edbi b\u1ebfn")})},intervalDelay:0,precision:3})})};function go(e){return e&&e.stopPropagation&&e.stopPropagation(),e&&e.preventDefault&&e.preventDefault(),!1}function yo(e){return null==e?[]:Array.isArray(e)?e.slice():[e]}function _o(e){return null!==e&&1===e.length?e[0]:e.slice()}function xo(e){Object.keys(e).forEach((function(t){"undefined"!=typeof document&&document.addEventListener(t,e[t],!1)}))}function bo(e,t){return wo(function(e,t){var n=e;return n<=t.min&&(n=t.min),n>=t.max&&(n=t.max),n}(e,t),t)}function wo(e,t){var n=(e-t.min)%t.step,r=e-n;return 2*Math.abs(n)>=t.step&&(r+=n>0?t.step:-t.step),parseFloat(r.toFixed(5))}var ko=function(t){function n(n){var r;(r=t.call(this,n)||this).onKeyUp=function(){r.onEnd()},r.onMouseUp=function(){r.onEnd(r.getMouseEventMap())},r.onTouchEnd=function(){r.onEnd(r.getTouchEventMap())},r.onBlur=function(){r.setState({index:-1},r.onEnd(r.getKeyDownEventMap()))},r.onMouseMove=function(e){r.setState({pending:!0});var t=r.getMousePosition(e),n=r.getDiffPosition(t[0]),i=r.getValueFromPosition(n);r.move(i)},r.onTouchMove=function(e){if(!(e.touches.length>1)){r.setState({pending:!0});var t=r.getTouchPosition(e);if(void 0===r.isScrolling){var n=t[0]-r.startPosition[0],i=t[1]-r.startPosition[1];r.isScrolling=Math.abs(i)>Math.abs(n)}if(r.isScrolling)r.setState({index:-1});else{var a=r.getDiffPosition(t[0]),o=r.getValueFromPosition(a);r.move(o)}}},r.onKeyDown=function(e){if(!(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey))switch(r.setState({pending:!0}),e.key){case"ArrowLeft":case"ArrowDown":case"Left":case"Down":e.preventDefault(),r.moveDownByStep();break;case"ArrowRight":case"ArrowUp":case"Right":case"Up":e.preventDefault(),r.moveUpByStep();break;case"Home":e.preventDefault(),r.move(r.props.min);break;case"End":e.preventDefault(),r.move(r.props.max);break;case"PageDown":e.preventDefault(),r.moveDownByStep(r.props.pageFn(r.props.step));break;case"PageUp":e.preventDefault(),r.moveUpByStep(r.props.pageFn(r.props.step))}},r.onSliderMouseDown=function(e){if(!r.props.disabled&&2!==e.button){if(r.setState({pending:!0}),!r.props.snapDragDisabled){var t=r.getMousePosition(e);r.forceValueFromPosition(t[0],(function(e){r.start(e,t[0]),xo(r.getMouseEventMap())}))}go(e)}},r.onSliderClick=function(e){if(!r.props.disabled&&r.props.onSliderClick&&!r.hasMoved){var t=r.getMousePosition(e),n=bo(r.calcValue(r.calcOffsetFromPosition(t[0])),r.props);r.props.onSliderClick(n)}},r.createOnKeyDown=function(e){return function(t){r.props.disabled||(r.start(e),xo(r.getKeyDownEventMap()),go(t))}},r.createOnMouseDown=function(e){return function(t){if(!r.props.disabled&&2!==t.button){r.setState({pending:!0});var n=r.getMousePosition(t);r.start(e,n[0]),xo(r.getMouseEventMap()),go(t)}}},r.createOnTouchStart=function(e){return function(t){if(!(r.props.disabled||t.touches.length>1)){r.setState({pending:!0});var n=r.getTouchPosition(t);r.startPosition=n,r.isScrolling=void 0,r.start(e,n[0]),xo(r.getTouchEventMap()),function(e){e.stopPropagation&&e.stopPropagation()}(t)}}},r.handleResize=function(){var e=window.setTimeout((function(){r.pendingResizeTimeouts.shift(),r.resize()}),0);r.pendingResizeTimeouts.push(e)},r.renderThumb=function(e,t){var n=r.props.thumbClassName+" "+r.props.thumbClassName+"-"+t+" "+(r.state.index===t?r.props.thumbActiveClassName:""),i={ref:function(e){r["thumb"+t]=e},key:r.props.thumbClassName+"-"+t,className:n,style:e,onMouseDown:r.createOnMouseDown(t),onTouchStart:r.createOnTouchStart(t),onFocus:r.createOnKeyDown(t),tabIndex:0,role:"slider","aria-orientation":r.props.orientation,"aria-valuenow":r.state.value[t],"aria-valuemin":r.props.min,"aria-valuemax":r.props.max,"aria-label":Array.isArray(r.props.ariaLabel)?r.props.ariaLabel[t]:r.props.ariaLabel,"aria-labelledby":Array.isArray(r.props.ariaLabelledby)?r.props.ariaLabelledby[t]:r.props.ariaLabelledby},a={index:t,value:_o(r.state.value),valueNow:r.state.value[t]};return r.props.ariaValuetext&&(i["aria-valuetext"]="string"==typeof r.props.ariaValuetext?r.props.ariaValuetext:r.props.ariaValuetext(a)),r.props.renderThumb(i,a)},r.renderTrack=function(e,t,n){var i={key:r.props.trackClassName+"-"+e,className:r.props.trackClassName+" "+r.props.trackClassName+"-"+e,style:r.buildTrackStyle(t,r.state.upperBound-n)},a={index:e,value:_o(r.state.value)};return r.props.renderTrack(i,a)};var i=yo(n.value);i.length||(i=yo(n.defaultValue)),r.pendingResizeTimeouts=[];for(var a=[],o=0;o<i.length;o+=1)i[o]=bo(i[o],n),a.push(o);return r.resizeObserver=null,r.resizeElementRef=e.createRef(),r.state={index:-1,upperBound:0,sliderLength:0,value:i,zIndices:a},r}dt(n,t);var r=n.prototype;return r.componentDidMount=function(){"undefined"!=typeof window&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.resizeElementRef.current),this.resize())},n.getDerivedStateFromProps=function(e,t){var n=yo(e.value);return n.length?t.pending?null:{value:n.map((function(t){return bo(t,e)}))}:null},r.componentDidUpdate=function(){0===this.state.upperBound&&this.resize()},r.componentWillUnmount=function(){this.clearPendingResizeTimeouts(),this.resizeObserver&&this.resizeObserver.disconnect()},r.onEnd=function(e){e&&function(e){Object.keys(e).forEach((function(t){"undefined"!=typeof document&&document.removeEventListener(t,e[t],!1)}))}(e),this.hasMoved&&this.fireChangeEvent("onAfterChange"),this.setState({pending:!1}),this.hasMoved=!1},r.getValue=function(){return _o(this.state.value)},r.getClosestIndex=function(e){for(var t=Number.MAX_VALUE,n=-1,r=this.state.value,i=r.length,a=0;a<i;a+=1){var o=this.calcOffset(r[a]),s=Math.abs(e-o);s<t&&(t=s,n=a)}return n},r.getMousePosition=function(e){return[e["page"+this.axisKey()],e["page"+this.orthogonalAxisKey()]]},r.getTouchPosition=function(e){var t=e.touches[0];return[t["page"+this.axisKey()],t["page"+this.orthogonalAxisKey()]]},r.getKeyDownEventMap=function(){return{keydown:this.onKeyDown,keyup:this.onKeyUp,focusout:this.onBlur}},r.getMouseEventMap=function(){return{mousemove:this.onMouseMove,mouseup:this.onMouseUp}},r.getTouchEventMap=function(){return{touchmove:this.onTouchMove,touchend:this.onTouchEnd}},r.getValueFromPosition=function(e){var t=e/(this.state.sliderLength-this.state.thumbSize)*(this.props.max-this.props.min);return bo(this.state.startValue+t,this.props)},r.getDiffPosition=function(e){var t=e-this.state.startPosition;return this.props.invert&&(t*=-1),t},r.resize=function(){var e=this.slider,t=this.thumb0;if(e&&t){var n=this.sizeKey(),r=e.getBoundingClientRect(),i=e[n],a=r[this.posMaxKey()],o=r[this.posMinKey()],s=t.getBoundingClientRect()[n.replace("client","").toLowerCase()],l=i-s,u=Math.abs(a-o);this.state.upperBound===l&&this.state.sliderLength===u&&this.state.thumbSize===s||this.setState({upperBound:l,sliderLength:u,thumbSize:s})}},r.calcOffset=function(e){var t=this.props.max-this.props.min;return 0===t?0:(e-this.props.min)/t*this.state.upperBound},r.calcValue=function(e){return e/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},r.calcOffsetFromPosition=function(e){var t=this.slider.getBoundingClientRect(),n=t[this.posMaxKey()],r=t[this.posMinKey()],i=e-(window["page"+this.axisKey()+"Offset"]+(this.props.invert?n:r));return this.props.invert&&(i=this.state.sliderLength-i),i-=this.state.thumbSize/2},r.forceValueFromPosition=function(e,t){var n=this,r=this.calcOffsetFromPosition(e),i=this.getClosestIndex(r),a=bo(this.calcValue(r),this.props),o=this.state.value.slice();o[i]=a;for(var s=0;s<o.length-1;s+=1)if(o[s+1]-o[s]<this.props.minDistance)return;this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0,this.setState({value:o},(function(){t(i),n.fireChangeEvent("onChange")}))},r.clearPendingResizeTimeouts=function(){do{var e=this.pendingResizeTimeouts.shift();clearTimeout(e)}while(this.pendingResizeTimeouts.length)},r.start=function(e,t){var n=this["thumb"+e];n&&n.focus();var r=this.state.zIndices;r.splice(r.indexOf(e),1),r.push(e),this.setState((function(n){return{startValue:n.value[e],startPosition:void 0!==t?t:n.startPosition,index:e,zIndices:r}}))},r.moveUpByStep=function(e){void 0===e&&(e=this.props.step);var t=bo(this.state.value[this.state.index]+e,this.props);this.move(Math.min(t,this.props.max))},r.moveDownByStep=function(e){void 0===e&&(e=this.props.step);var t=bo(this.state.value[this.state.index]-e,this.props);this.move(Math.max(t,this.props.min))},r.move=function(e){var t=this.state,n=t.index,r=t.value,i=r.length,a=r[n];if(e!==a){this.hasMoved||this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0;var o=this.props,s=o.pearling,l=o.max,u=o.min,c=o.minDistance;if(!s){if(n>0){var h=r[n-1];e<h+c&&(e=h+c)}if(n<i-1){var d=r[n+1];e>d-c&&(e=d-c)}}r[n]=e,s&&i>1&&(e>a?(this.pushSucceeding(r,c,n),function(e,t,n,r){for(var i=0;i<e;i+=1){var a=r-i*n;t[e-1-i]>a&&(t[e-1-i]=a)}}(i,r,c,l)):e<a&&(this.pushPreceding(r,c,n),function(e,t,n,r){for(var i=0;i<e;i+=1){var a=r+i*n;t[i]<a&&(t[i]=a)}}(i,r,c,u))),this.setState({value:r},this.fireChangeEvent.bind(this,"onChange"))}},r.pushSucceeding=function(e,t,n){var r,i;for(i=e[r=n]+t;null!==e[r+1]&&i>e[r+1];i=e[r+=1]+t)e[r+1]=wo(i,this.props)},r.pushPreceding=function(e,t,n){for(var r=n,i=e[r]-t;null!==e[r-1]&&i<e[r-1];i=e[r-=1]-t)e[r-1]=wo(i,this.props)},r.axisKey=function(){return"vertical"===this.props.orientation?"Y":"X"},r.orthogonalAxisKey=function(){return"vertical"===this.props.orientation?"X":"Y"},r.posMinKey=function(){return"vertical"===this.props.orientation?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},r.posMaxKey=function(){return"vertical"===this.props.orientation?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},r.sizeKey=function(){return"vertical"===this.props.orientation?"clientHeight":"clientWidth"},r.fireChangeEvent=function(e){this.props[e]&&this.props[e](_o(this.state.value),this.state.index)},r.buildThumbStyle=function(e,t){var n={position:"absolute",touchAction:"none",willChange:this.state.index>=0?this.posMinKey():void 0,zIndex:this.state.zIndices.indexOf(t)+1};return n[this.posMinKey()]=e+"px",n},r.buildTrackStyle=function(e,t){var n={position:"absolute",willChange:this.state.index>=0?this.posMinKey()+","+this.posMaxKey():void 0};return n[this.posMinKey()]=e,n[this.posMaxKey()]=t,n},r.buildMarkStyle=function(e){var t;return(t={position:"absolute"})[this.posMinKey()]=e,t},r.renderThumbs=function(e){for(var t=e.length,n=[],r=0;r<t;r+=1)n[r]=this.buildThumbStyle(e[r],r);for(var i=[],a=0;a<t;a+=1)i[a]=this.renderThumb(n[a],a);return i},r.renderTracks=function(e){var t=[],n=e.length-1;t.push(this.renderTrack(0,0,e[0]));for(var r=0;r<n;r+=1)t.push(this.renderTrack(r+1,e[r],e[r+1]));return t.push(this.renderTrack(n+1,e[n],this.state.upperBound)),t},r.renderMarks=function(){var e=this,t=this.props.marks,n=this.props.max-this.props.min+1;return"boolean"==typeof t?t=Array.from({length:n}).map((function(e,t){return t})):"number"==typeof t&&(t=Array.from({length:n}).map((function(e,t){return t})).filter((function(e){return e%t==0}))),t.map(parseFloat).sort((function(e,t){return e-t})).map((function(t){var n=e.calcOffset(t),r={key:t,className:e.props.markClassName,style:e.buildMarkStyle(n)};return e.props.renderMark(r)}))},r.render=function(){for(var t=this,n=[],r=this.state.value,i=r.length,a=0;a<i;a+=1)n[a]=this.calcOffset(r[a],a);var o=this.props.withTracks?this.renderTracks(n):null,s=this.renderThumbs(n),l=this.props.marks?this.renderMarks():null;return e.createElement("div",{ref:function(e){t.slider=e,t.resizeElementRef.current=e},style:{position:"relative"},className:this.props.className+(this.props.disabled?" disabled":""),onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},o,s,l)},n}(e.Component);ko.displayName="ReactSlider",ko.defaultProps={min:0,max:100,step:1,pageFn:function(e){return 10*e},minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",thumbClassName:"thumb",thumbActiveClassName:"active",trackClassName:"track",markClassName:"mark",withTracks:!0,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1,marks:[],renderThumb:function(t){return e.createElement("div",t)},renderTrack:function(t){return e.createElement("div",t)},renderMark:function(t){return e.createElement("span",t)}};var To=ko,So=n(6854),Eo=(So.domToReact,So.htmlToDOM,So.attributesToProps,So.Element,So),Co=n(7670),Ao=n(1283),Ro=n(8078),Mo=[{id:"bus-routes-1",codeBusRoute:"R16",nameRoute:"R16: Kim Li\xean-\u0110\u1ea1i h\u1ecdc Vi\u1ec7t H\xe0n",directionRoute:"turn",drivingJourney:"<strong>Kim Li\xean</strong> - Nguy\u1ec5n V\u0103n C\u1eeb - C\u1ea7u Nam \xd4 - Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng - T\xf4n \u0110\u1ee9c Th\u1eafng -\n    C\u1ea7u v\u01b0\u1ee3t ng\xe3 3 Hu\u1ebf (t\u1ea7ng 3) - \u0110i\u1ec7n Bi\xean Ph\u1ee7 - L\xfd Th\xe1i T\u1ed5 - H\xf9ng V\u01b0\u01a1ng - Tr\u1ea7n Ph\xfa - \n    C\u1ea7u R\u1ed3ng - Ng\xf4 Quy\u1ec1n - Ng\u0169 H\xe0nh S\u01a1n - L\xea V\u0103n Hi\u1ebfn - Tr\u1ea7n \u0110\u1ea1i Ngh\u0129a - <strong>\u0110\u1ea1i h\u1ecdc Vi\u1ec7t H\xe0n (Nam K\u1ef3 Kh\u1edfi Ngh\u0129a).</strong>",lineDistance:"31,63km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 21h00 (15 ph\xfat/chuy\u1ebfn)",colorRoute:"#ff1956"},{id:"bus-routes-2",codeBusRoute:"R16",nameRoute:"R16: Kim Li\xean-\u0110\u1ea1i h\u1ecdc Vi\u1ec7t H\xe0n",directionRoute:"return",drivingJourney:"<strong>\u0110\u1ea1i h\u1ecdc Vi\u1ec7t H\xe0n (Nam K\u1ef3 Kh\u1edfi Ngh\u0129a)</strong> - Tr\u1ea7n \u0110\u1ea1i Ngh\u0129a - L\xea V\u0103n Hi\u1ebfn -\n    Ng\u0169 H\xe0nh S\u01a1n - Ng\xf4 Quy\u1ec1n - C\u1ea7u R\u1ed3ng - B\u1ea1ch \u0110\u1eb1ng - H\xf9ng V\u01b0\u01a1ng - L\xfd Th\xe1i T\u1ed5 - \u0110i\u1ec7n Bi\xean Ph\u1ee7 - \n    C\u1ea7u v\u01b0\u1ee3t ng\xe3 3 Hu\u1ebf (t\u1ea7ng 3) - T\xf4n \u0110\u1ee9c Th\u1eafng - Nguy\u1ec5n L\u01b0\u01a1ng B\u1eb1ng - C\u1ea7u Nam \xd4 - Nguy\u1ec5n V\u0103n C\u1eeb - \n    <strong>Kim Li\xean</strong>",lineDistance:"31,53km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 21h00 (15 ph\xfat/chuy\u1ebfn)",colorRoute:"#ff1956"},{id:"bus-routes-3",codeBusRoute:"R4A",nameRoute:"R4A: C\u1ea3ng S\xf4ng H\xe0n-H\xf2a Ti\u1ebfn",directionRoute:"turn",drivingJourney:"<strong>C\u1ea3ng S\xf4ng H\xe0n (b\xe3i \u0111\u1ed7 xe \u0111\u1ea7u \u0111\u01b0\u1eddng Nh\u01b0 Nguy\u1ec7t) </strong>- \n    \u0110\u1ed1ng \u0110a - \xd4ng \xcdch Khi\xeam - Nguy\u1ec5n V\u0103n Linh - \u0110\u01b0\u1eddng 2/9 - Ti\u1ec3u La - N\xfai Th\xe0nh - \u0110\u01b0\u1eddng 30/4 -\n    Nguy\u1ec5n H\u1eefu Th\u1ecd - L\xea \u0110\u1ea1i H\xe0nh - \xd4ng \xcdch \u0110\u01b0\u1eddng - CMT8 - Tr\u01b0\u1eddng Chinh - C\u1ea7u \u0110\u1ecf - QL1A - \u0110T605 - \n    Ch\u1ee3 L\u1ec7 Tr\u1ea1ch -<strong>H\xf2a Ti\u1ebfn (Khu \u0111\u1ea5t \u0111\u1ed1i di\u1ec7n Ngh\u0129a trang x\xe3 H\xf2a Ti\u1ebfn)</strong>",lineDistance:"20,00 km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 19h00 (30p/chuy\u1ebfn)",colorRoute:"#089669"},{id:"bus-routes-4",codeBusRoute:"R4A",nameRoute:"R4A: C\u1ea3ng S\xf4ng H\xe0n-H\xf2a Ti\u1ebfn",directionRoute:"return",drivingJourney:"<strong>H\xf2a Ti\u1ebfn (DT605, \u0111\u1ed1i di\u1ec7n Ngh\u0129a trang x\xe3 H\xf2a Ti\u1ebfn) </strong>-\n    Ch\u1ee3 L\u1ec7 Tr\u1ea1ch - \u0110T605 - QL1A - C\u1ea7u \u0110\u1ecf - Tr\u01b0\u1eddng Chinh - CMT8 - \xd4ng \xcdch \u0110\u01b0\u1eddng - L\xea \u0110\u1ea1i H\xe0nh -\n    Nguy\u1ec5n H\u1eefu Th\u1ecd - \u0110\u01b0\u1eddng 30/4 - N\xfai  Th\xe0nh - Ti\u1ec3u  La - \n    \u0110\u01b0\u1eddng 2/9 - Nguy\u1ec5n V\u0103n Linh - \xd4ng \xcdch Khi\xeam - \u0110\u1ed1ng \u0110a - \n    <strong>C\u1ea3ng S\xf4ng H\xe0n (b\xe3i \u0111\u1ed7 xe \u0111\u1ea7u \u0111\u01b0\u1eddng Nh\u01b0 Nguy\u1ec7t.</strong>",lineDistance:"20,00 km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 19h00 (30p/chuy\u1ebfn)",colorRoute:"#089669"},{id:"bus-routes-5",codeBusRoute:"R17A",nameRoute:"R17A: C\u1ea3ng S\xf4ng H\xe0n-TTHC huy\u1ec7n H\xf2a Vang",directionRoute:"turn",drivingJourney:"<strong>C\u1ea3ng S\xf4ng H\xe0n (b\xe3i \u0111\u1ed7 xe \u0111\u1ea7u \u0111\u01b0\u1eddng Nh\u01b0 Nguy\u1ec7t) </strong>- Tr\u1ea7n Ph\xfa - L\xfd T\u1ef1 Tr\u1ecdng -\n    Nguy\u1ec5n Th\u1ecb Minh Khai - H\xf9ng V\u01b0\u01a1ng - Tr\u1ea7n Ph\xfa - Tr\u01b0ng N\u1eef V\u01b0\u01a1ng - N\xfai Th\xe0nh - C\xe1ch M\u1ea1ng Th\xe1ng 8 - \n    C\u1ea7u V\u01b0\u1ee3t H\xf2a C\u1ea7m - Tr\u01b0\u1eddng S\u01a1n - Qu\u1ed1c l\u1ed9 14B - Qu\u1ea3ng X\u01b0\u01a1ng - <strong> TTHC Huy\u1ec7n H\xf2a Vang.</strong>",lineDistance:"20,00 km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 19h00 (15 ph\xfat/chuy\u1ebfn)",colorRoute:"#360ec0"},{id:"bus-routes-6",codeBusRoute:"R17A",nameRoute:"R17A: C\u1ea3ng S\xf4ng H\xe0n-TTHC huy\u1ec7n H\xf2a Vang",directionRoute:"return",drivingJourney:"<strong>TTHC Huy\u1ec7n H\xf2a Vang</strong> - Qu\u1ea3ng X\u01b0\u01a1ng - Qu\u1ed1c l\u1ed9 14B - Tr\u01b0\u1eddng S\u01a1n - \n    C\u1ea7u V\u01b0\u1ee3t H\xf2a C\u1ea7m - CMT8 - N\xfai Th\xe0nh - Phan Th\xe0nh T\xe0i- \u0110\u01b0\u1eddng 2/9 - B\u1ea1ch \u0110\u1eb1ng - H\xf9ng V\u01b0\u01a1ng - \n    Nguy\u1ec5n Th\u1ecb Minh Khai - L\xfd T\u1ef1 Tr\u1ecdng - B\u1ea1ch \u0110\u1eb1ng - <strong>C\u1ea3ng S\xf4ng H\xe0n (b\xe3i \u0111\u1ed7 xe \u0111\u1ea7u \u0111\u01b0\u1eddng Nh\u01b0 Nguy\u1ec7t).</strong>",lineDistance:"20,20 km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 19h00 (15 ph\xfat/chuy\u1ebfn)",colorRoute:"#360ec0"},{id:"bus-routes-7",codeBusRoute:"R6A",nameRoute:"R6A: B\u1ebfn xe Trung t\xe2m-Khu du l\u1ecbch Non N\u01b0\u1edbc",directionRoute:"turn",drivingJourney:"<strong>B\u1ebfn xe Trung T\xe2m \u0110\xe0 N\u1eb5ng</strong> - Cao S\u01a1n Ph\xe1o - L\xea Th\u1ea1ch - T\xfa M\u1ee1 - \u0110inh Li\u1ec7t - \n    Nguy\u1ec5n \u0110\xecnh T\u1ee9 - T\xf4n \u0110\u1ea3n - L\xea Tr\u1ecdng T\u1ea5n - Tr\u01b0\u1eddng Chinh - L\xea \u0110\u1ea1i H\xe0nh - Nguy\u1ec5n H\u1eefu Th\u1ecd - \n    \u0110\u01b0\u1eddng 30 Th\xe1ng 4 - N\xfai Th\xe0nh - Phan \u0110\u0103ng L\u01b0u - \u0110\u01b0\u1eddng 2 Th\xe1ng 9 - C\u1ea7u Ti\xean S\u01a1n - Ng\u0169 H\xe0nh S\u01a1n - \n    Phan T\u1ee9 - V\xf5 Nguy\xean Gi\xe1p - Tr\u01b0\u1eddng Sa - Non N\u01b0\u1edbc - <strong>KDL Non N\u01b0\u1edbc.</strong>",lineDistance:"21,80 km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 19h00 (30 ph\xfat/chuy\u1ebfn)",colorRoute:"#76a103"},{id:"bus-routes-8",codeBusRoute:"R6A",nameRoute:"R6A: B\u1ebfn xe Trung t\xe2m-Khu du l\u1ecbch Non N\u01b0\u1edbc",directionRoute:"return",drivingJourney:"<strong>KDL Non N\u01b0\u1edbc</strong> - Non N\u01b0\u1edbc - Tr\u01b0\u1eddng Sa - V\xf5 Nguy\xean Gi\xe1p - Phan T\u1ee9 - \n    Ng\u0169 H\xe0nh S\u01a1n - C\u1ea7u Ti\xean S\u01a1n - \u0110\u01b0\u1eddng 2 Th\xe1ng 9 - Phan \u0110\u0103ng L\u01b0u - N\xfai Th\xe0nh - \u0110\u01b0\u1eddng 30 Th\xe1ng 4 - \n    Nguy\u1ec5n H\u1eefu Th\u1ecd - L\xea \u0110\u1ea1i H\xe0nh - Tr\u01b0\u1eddng Chinh - L\xea Tr\u1ecdng T\u1ea5n - T\xf4n \u0110\u1ea3n - Nguy\u1ec5n \u0110\xecnh T\u1ee9 - \u0110inh Li\u1ec7t - \n    T\xfa M\u1ee1 - Nguy\u1ec5n V\u0103n T\u1ea1o - Cao S\u01a1n Ph\xe1o - <strong>B\u1ebfn Xe Trung T\xe2m \u0110\xe0 N\u1eb5ng.</strong>",lineDistance:"21,40 km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 19h00 (30 ph\xfat/chuy\u1ebfn)",colorRoute:"#76a103"},{id:"bus-routes-9",codeBusRoute:"R15",nameRoute:"R15: B\u1ebfn xe Trung t\xe2m-Th\u1ecd Quang",directionRoute:"turn",drivingJourney:"<strong>B\u1ebfn xe Trung t\xe2m \u0110\xe0 N\u1eb5ng</strong> - T\xf4n \u0110\u1ee9c Th\u1eafng - C\u1ea7u v\u01b0\u1ee3t ng\xe3 Ba Hu\u1ebf (t\u1ea7ng 3) - \n    \u0110i\u1ec7n Bi\xean Ph\u1ee7 - Hu\u1ef3nh Ng\u1ecdc Hu\u1ec7 - H\xe0 Huy T\u1eadp - Th\xe1i Th\u1ecb B\xf4i - L\xea \u0110\u1ed9 - V\xf5 V\u0103n T\u1ea7n - H\u1ea3i Ph\xf2ng - \n    \xd4ng \xcdch Khi\xeam - Nguy\u1ec5n Ho\xe0ng - Nguy\u1ec5n V\u0103n Linh -  C\u1ea7u R\u1ed3ng - V\xf5 V\u0103n Ki\u1ec7t - H\u1ed3 Nghinh - H\xe0 K\u1ef3 Ng\u1ed9 -\n     Nguy\u1ec5n S\xe1ng - Nguy\u1ec5n Huy Ch\u01b0\u01a1ng - Ho\xe0ng Sa - <strong>Th\u1ecd Quang</strong>",lineDistance:"16,16 km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 19h00 (30 ph\xfat/chuy\u1ebfn)",colorRoute:"#9340a3"},{id:"bus-routes-10",codeBusRoute:"R15",nameRoute:"R15: B\u1ebfn xe Trung t\xe2m-Th\u1ecd Quang",directionRoute:"return",drivingJourney:"<strong>Th\u1ecd Quang</strong> - Ho\xe0ng Sa - Nguy\u1ec5n Huy Ch\u01b0\u01a1ng - Nguy\u1ec5n S\xe1ng - H\xe0 K\u1ef3 Ng\u1ed9 - \n    H\u1ed3 Nghinh - V\xf5 V\u0103n Ki\u1ec7t - C\u1ea7u R\u1ed3ng - Nguy\u1ec5n V\u0103n Linh - Nguy\u1ec5n Ho\xe0ng - \xd4ng \xcdch Khi\xeam - \n    H\u1ea3i Ph\xf2ng - V\xf5 V\u0103n T\u1ea7n - L\xea \u0110\u1ed9 - Th\xe1i Th\u1ecb B\xf4i - H\xe0 Huy T\u1eadp - Hu\u1ef3nh Ng\u1ecdc Hu\u1ec7 - \u0110i\u1ec7n Bi\xean Ph\u1ee7 - \n    C\u1ea7u v\u01b0\u1ee3t ng\xe3 Ba Hu\u1ebf (t\u1ea7ng 3) - T\xf4n \u0110\u1ee9c Th\u1eafng - <strong>B\u1ebfn xe Trung t\xe2m \u0110\xe0 N\u1eb5ng</strong>",lineDistance:"16,16 km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 19h00 (30 ph\xfat/chuy\u1ebfn)",colorRoute:"#9340a3"},{id:"bus-routes-11",codeBusRoute:"TMF",nameRoute:"TMF: V\u0169ng Th\xf9ng-C\xf4ng Vi\xean 29/3-CV Bi\u1ec3n \u0110\xf4ng",directionRoute:"turn",drivingJourney:"<strong>BX B\xf9i D\u01b0\u01a1ng L\u1ecbch </strong>- B\xf9i D\u01b0\u01a1ng L\u1ecbch - D\u01b0\u01a1ng V\xe2n Nga - Kh\xfac H\u1ea1o - H\u1ed3 H\xe1n Th\u01b0\u01a1ng - \n    Chu Huy M\xe2n - C\u1ea7u Thu\u1eadn Ph\u01b0\u1edbc - \u0110\u01b0\u1eddng 3/2 - Xu\xe2n Di\u1ec7u - Tr\u1ea1m xe bu\xfdt Xu\xe2n Di\u1ec7u - Xu\xe2n Di\u1ec7u - \n    \u0110\u01b0\u1eddng 3/2 - Tr\u1ea7n Ph\xfa - L\xfd T\u1ef1 Tr\u1ecdng - Nguy\u1ec5n Th\u1ecb Minh Khai - H\u1ea3i Ph\xf2ng - Ng\xf4 Gia T\u1ef1 - H\xf9ng V\u01b0\u01a1ng - \n    L\xfd Th\xe1i T\u1ed5 - \u0110i\u1ec7n Bi\xean Ph\u1ee7 - Nguy\u1ec5n Tri Ph\u01b0\u01a1ng - Nguy\u1ec5n V\u0103n Linh - C\u1ea7u R\u1ed3ng - V\xf5 V\u0103n Ki\u1ec7t - \n    V\xf5 Nguy\xean Gi\xe1p - <strong>CV Bi\u1ec3n \u0110\xf4ng</strong>",lineDistance:"16,1 km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 19h00 (30 ph\xfat/chuy\u1ebfn)",colorRoute:"#f4529d"},{id:"bus-routes-12",codeBusRoute:"TMF",nameRoute:"TMF: V\u0169ng Th\xf9ng-C\xf4ng Vi\xean 29/3-CV Bi\u1ec3n \u0110\xf4ng",directionRoute:"return",drivingJourney:"<strong>CV Bi\u1ec3n \u0110\xf4ng</strong> - V\xf5 Nguy\xean Gi\xe1p - V\xf5 V\u0103n Ki\u1ec7t - C\u1ea7u R\u1ed3ng - Nguy\u1ec5n V\u0103n Linh - \n    Nguy\u1ec5n Tri Ph\u01b0\u01a1ng - \u0110i\u1ec7n Bi\xean Ph\u1ee7 - L\xfd Th\xe1i T\u1ed5 - H\xf9ng V\u01b0\u01a1ng - Ng\xf4 Gia T\u1ef1 - H\u1ea3i Ph\xf2ng -\n     Nguy\u1ec5n Th\u1ecb Minh Khai - L\xfd T\u1ef1 Tr\u1ecdng - B\u1ea1ch \u0110\u1eb1ng - \u0110\u01b0\u1eddng 3/2  - Xu\xe2n Di\u1ec7u - Tr\u1ea1m xe bu\xfdt Xu\xe2n Di\u1ec7u - \n     Xu\xe2n Di\u1ec7u - \u0110\u01b0\u1eddng 3/2 -  C\u1ea7u Thu\u1eadn Ph\u01b0\u1edbc - Chu Huy M\xe2n - H\u1ed3 H\xe1n Th\u01b0\u01a1ng - Kh\xfac H\u1ea1o - D\u01b0\u01a1ng V\xe2n Nga \n     - B\xf9i D\u01b0\u01a1ng L\u1ecbch - <strong>BX B\xf9i D\u01b0\u01a1ng L\u1ecbch</strong>",lineDistance:"16,5 km",operatingTime:"T\u1eeb 06h00 \u0111\u1ebfn 19h00 (30 ph\xfat/chuy\u1ebfn)",colorRoute:"#f4529d"}],Bo=function(){var t=(0,e.useState)([]),n=(0,o.Z)(t,2),r=n[0],i=n[1];return(0,e.useEffect)((function(){var e=function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mo;case 2:t=e.sent,[],n=t.map((function(e){return{id:e.id,codeBusRoute:e.codeBusRoute,nameRoute:e.nameRoute,directionRoute:e.directionRoute,drivingJourney:e.drivingJourney,lineDistance:e.lineDistance,operatingTime:e.operatingTime,colorRoute:e.colorRoute}})),i(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),r},Po={ticketPrice:["6.000 \u0111\u1ed3ng/l\u01b0\u1ee3t","65.000 \u0111\u1ed3ng/th\xe1ng","130.000 \u0111\u1ed3ng/th\xe1ng"],linkMonthlyTicket:"https://www.danangbus.vn/thu-tuc-lam-ve-thang.html",linkOnline:"https://www.danangbus.vn/tin-tuc/tin-tuc/huong-dan-dang-ky-the-ve-thang-truc-tuyen-1135.html",busName:"Xe bu\xfdt TRACOMECO (B40)",busCapacity:"18 ch\u1ed7 ng\u1ed3i + 01 ch\xf4\u0303 xe l\u0103n v\xe0 21 ch\u1ed7 \u0111\u1ee9ng",busOperation:"C\xf4ng ty C\u1ed5 ph\u1ea7n C\xf4ng nghi\u1ec7p Qu\u1ea3ng An 1, \u0110T: 1900969677"},Io=function(t){var n=t.nameCodeRoute,r=t.turnRoute,i=Bo(),a=function(){var t=(0,e.useState)([]),n=(0,o.Z)(t,2),r=n[0],i=n[1];return(0,e.useEffect)((function(){var e=function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Po;case 2:t=e.sent,(n={}).ticketPrice=t.ticketPrice,n.linkMonthlyTicket=t.linkMonthlyTicket,n.linkOnline=t.linkOnline,n.busName=t.busName,n.busCapacity=t.busCapacity,n.busOperation=t.busOperation,i(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),r}(),s=(0,e.useState)([]),l=(0,o.Z)(s,2),u=l[0],c=l[1],h=(0,e.useState)({}),d=(0,o.Z)(h,2),f=d[0],p=d[1];return(0,e.useEffect)((function(){var e=i.filter((function(e){return e.codeBusRoute===n&&e.directionRoute===r}))[0];c(e),p(a)}),[n,r,i,a]),(0,Ee.jsxs)("div",{className:"info-bus-route",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("h1",{className:"header-info",children:[(0,Ee.jsx)(Co.Z,{}),"Th\xf4ng tin tuy\u1ebfn:"]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"M\xe3 s\u1ed1 tuy\u1ebfn:"}),(0,Ee.jsx)("span",{children:null===u||void 0===u?void 0:u.nameBusRouter})]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"T\xean tuy\u1ebfn: "}),(0,Ee.jsx)("span",{children:null===u||void 0===u?void 0:u.name})]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"Tuy\u1ebfn: "}),(0,Ee.jsx)("span",{children:u.drivingJourney&&Eo(u.drivingJourney)})]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"Th\u1eddi gian ho\u1ea1t \u0111\u1ed9ng: "}),(0,Ee.jsx)("span",{children:null===u||void 0===u?void 0:u.operatingTime})]}),(0,Ee.jsx)("hr",{})]}),(0,Ee.jsxs)("h1",{className:"header-info",children:[(0,Ee.jsx)(Ao.Z,{}),"Th\xf4ng tin xe:"]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"Nha\u0303n hi\xea\u0323u: "}),(0,Ee.jsx)("span",{children:null===f||void 0===f?void 0:f.busName})]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"S\u1ee9c ch\u1ee9a: "}),(0,Ee.jsx)("span",{children:null===f||void 0===f?void 0:f.busCapacity})]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"\u0110\u01a1n v\u1ecb v\u1eadn h\xe0nh: "}),(0,Ee.jsx)("span",{children:null===f||void 0===f?void 0:f.busOperation})]}),(0,Ee.jsx)("hr",{}),(0,Ee.jsxs)("h1",{className:"header-info",children:[(0,Ee.jsx)(Ro.Z,{}),"Th\xf4ng tin v\xe9:"]}),(null===f||void 0===f?void 0:f.ticketPrice)&&(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"V\xe9 l\u01b0\u1ee3t: "}),(0,Ee.jsx)("span",{children:null===f||void 0===f?void 0:f.ticketPrice[0]})]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"V\xe9 th\xe1ng \u01b0u ti\xean: "}),(0,Ee.jsx)("span",{children:null===f||void 0===f?void 0:f.ticketPrice[1]})]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"V\xe9 th\xe1ng kh\xf4ng \u01b0u ti\xean:"}),(0,Ee.jsx)("span",{children:null===f||void 0===f?void 0:f.ticketPrice[2]})]})]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"\u0110\u0103ng k\xed v\xe9 th\xe1ng t\u1ea1i: "}),(0,Ee.jsx)("a",{href:null===f||void 0===f?void 0:f.linkOnline,children:"\u0110\xe2y."})]})]})},zo=function(t){var n,r=t.nameCodeRoute,i=t.turnRoute,a=Ka(),s=Se(),l=(0,e.useState)({}),u=(0,o.Z)(l,2),c=u[0],h=u[1],d=(0,e.useState)([]),f=(0,o.Z)(d,2),p=f[0],m=f[1];return(0,e.useEffect)((function(){var e=s.filter((function(e){return e.codeBusRoute===r&&e.directionRoute===i})).map((function(e){return{type:"Feature",color:e.colorRoute,name:e.codeBusRoute,directionRoute:e.directionRoute,geometry:{type:"LineString",coordinates:e.lineRoute}}})),t={type:"FeatureCollection",features:[].concat((0,J.Z)(e),[e]).pop()};h(t);var n=a.filter((function(e){return e.codeBusRoute===r&&e.directionRoute===i}));m(n)}),[r,i,a,s]),(0,Ee.jsxs)(Ee.Fragment,{children:[c&&(null===c||void 0===c||null===(n=c.features)||void 0===n?void 0:n.map((function(e,t){return(0,Ee.jsx)("div",{className:"polyline-list-bus-stop",children:(0,Ee.jsx)(X,{id:"polylineLayer",type:"geojson",data:c,children:(0,Ee.jsx)(Y,{id:"lineLayer",type:"line",source:"my-data",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"".concat(null===e||void 0===e?void 0:e.color),"line-width":5}})})},t)}))),null===p||void 0===p?void 0:p.map((function(e){return(0,Ee.jsx)(Ho,{idBusStop:e.id,nameBusStop:e.nameBusStop,locationBusStop:e.location})}))]})},Lo=Fa({name:"routes",initialState:{filters:[""],checkboxTravel:!1,idBusStop:"",idTravel:"",direction:{id:"",location:[]}},reducers:{setFilterRoutes:function(e,t){e.filters=t.payload},setCheckboxTravel:function(e,t){e.checkboxTravel=t.payload},setIDBusStop:function(e,t){e.idBusStop=t.payload},setIDTravel:function(e,t){e.idTravel=t.payload},setSearchLocation:function(e,t){e.direction=t.payload}}}),Do=Lo.actions,Oo=Do.setFilterRoutes,No=Do.setCheckboxTravel,Fo=Do.setIDBusStop,jo=Do.setIDTravel,Vo=Do.setSearchLocation,Zo=Lo.reducer,Uo=function(t){var n=t.nameCodeRoute,r=t.turnRoute,i=Ka(),s=(0,e.useState)([]),l=(0,o.Z)(s,2),u=l[0],c=l[1];(0,e.useEffect)((function(){var e=i.filter((function(e){return e.codeBusRoute===n&&e.directionRoute===r}));c(e)}),[n,r,i]);var h=_e(),d=(0,e.useState)(0),f=(0,o.Z)(d,2),p=f[0],m=f[1],v=(0,e.useState)(""),g=(0,o.Z)(v,2),y=g[0],_=g[1];(0,e.useEffect)((function(){h(Fo(y))}),[y]);var x=(0,e.useState)("1"),b=(0,o.Z)(x,2),w=b[0],k=b[1],T=le((function(e){return e.form.sidebarBusStopInLine.isShowSidebar}));return(0,Ee.jsxs)("div",{className:"list-bus-station",children:[(0,Ee.jsxs)(wr,{value:w,children:[(0,Ee.jsxs)(ai,{onChange:function(e,t){k(t)},"aria-label":"lab",children:[(0,Ee.jsx)(xr,{style:{width:"50%",textTransform:"none"},label:"Tr\u1ea1m d\u1eebng",value:"1"}),(0,Ee.jsx)(xr,{style:{width:"50%",textTransform:"none"},label:"Th\xf4ng tin",value:"2"})]}),(0,Ee.jsx)("div",{className:"scroll-list-bus-stop-content",children:(0,Ee.jsx)(ui,{style:{padding:"12px 0px 10px 0px"},value:"1",children:(0,Ee.jsxs)("div",{className:"list-bus-stop",children:[(0,Ee.jsx)(To,{className:"vertical-slider",markClassName:"example-mark",onChange:function(e){m(e)},trackClassName:"example-track",defaultValue:0,value:p,min:0,max:(null===u||void 0===u?void 0:u.length)-1,marks:!0,renderMark:function(e){return e.key<p?e.className="example-mark example-mark-completed":e.key===p&&(e.className="example-mark example-mark-active"),(0,Ee.jsx)("span",a({},e))},orientation:"vertical"}),(0,Ee.jsx)("div",{className:"steps-container",children:null===u||void 0===u?void 0:u.map((function(e,t){var n=p===t?"#8fbc8f":"#000";return(0,Ee.jsx)("div",{className:"steps-item",onClick:function(e){return function(e,t){var n=e.currentTarget.id;_(n),m(t)}(e,t)},id:e.id,children:(0,Ee.jsx)("h3",{style:{margin:0,color:n,fontSize:"16px",fontWeight:600,cursor:"pointer"},children:e.nameBusStop})},t)}))})]})})}),(0,Ee.jsx)(ui,{style:{padding:"12px 0px 10px 0px"},value:"2",children:(0,Ee.jsx)(Io,{nameCodeRoute:n,turnRoute:r})})]}),T&&(0,Ee.jsx)(zo,{nameCodeRoute:n,turnRoute:r})]})},Go=function(t){var n=t.idBusStop,r=Ka(),i=Bo(),a=(0,e.useState)([]),s=(0,o.Z)(a,2),l=s[0],u=s[1];(0,e.useEffect)((function(){if(0!==r.length){var e=r.filter((function(e){return e.id===n}))[0],t=e.codeBusRoute,a=e.directionRoute,o=i.filter((function(e){return e.codeBusRoute===t&&e.directionRoute===a}))[0];u(o)}}),[n,i,r]);var c=(0,e.useState)(!1),h=(0,o.Z)(c,2),d=h[0],f=h[1];return(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"route-through",children:(0,Ee.jsx)("div",{className:"scroll-content",children:(0,Ee.jsxs)("div",{style:{cursor:"pointer"},className:"row align-items-center h-100",onClick:function(){f((function(e){return!e}))},children:[(0,Ee.jsx)("div",{className:"small-3",children:(0,Ee.jsx)("div",{className:"route-no text-center",style:{background:"".concat(l.colorRoute)},children:(0,Ee.jsx)("span",{children:null===l||void 0===l?void 0:l.codeBusRoute})})}),(0,Ee.jsxs)("div",{className:"small-7",children:[(0,Ee.jsx)("p",{className:"code-route",children:null===l||void 0===l?void 0:l.nameRoute}),(0,Ee.jsx)("p",{className:"code-desc",style:{fontSize:"14.5px",color:"#1F8BAE"},children:"turn"===(null===l||void 0===l?void 0:l.directionRoute)?"Chi\u1ec1u \u0111i":"Chi\u1ec1u v\u1ec1"})]}),(0,Ee.jsx)("hr",{})]})})}),d&&(0,Ee.jsx)(Wa,{show:!0,name:null===l||void 0===l?void 0:l.nameRoute,tabLeft:"Xem l\u01b0\u1ee3t \u0111i",tabRight:"Xem l\u01b0\u1ee3t v\u1ec1",compLeft:(0,Ee.jsx)(Uo,{nameCodeRoute:null===l||void 0===l?void 0:l.codeBusRoute,turnRoute:"turn"}),compRight:(0,Ee.jsx)(Uo,{nameCodeRoute:null===l||void 0===l?void 0:l.codeBusRoute,turnRoute:"return"})})]})},Ho=function(t){var n=t.nameBusStop,r=t.locationBusStop,i=t.idBusStop,a=(0,e.useState)(!1),s=(0,o.Z)(a,2),l=s[0],u=s[1],c=(0,e.useState)(!1),h=(0,o.Z)(c,2),d=h[0],f=h[1],p=(0,e.useState)(""),m=(0,o.Z)(p,2),v=m[0],g=m[1];return(0,Ee.jsxs)("div",{className:"marker-bus-stop",children:[(0,Ee.jsxs)(O,{latitude:null===r||void 0===r?void 0:r.lat,longitude:null===r||void 0===r?void 0:r.lng,anchor:"bottom",children:[(0,Ee.jsx)("img",{style:{height:45,width:30,cursor:"pointer"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAwCAYAAABwrHhvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABnpJREFUeNrMmFtsFNcZx3/nzOza3t14bePYsbnJaxRjByhUS0vtqLWDBMLCQVFTtUG1RNrSVtC6wulTRShym4c+1Agl5aFppbQ8JFVfAlimogl2G9kxYQkUW3hBeCkOAXtrry/4urszpw+dAd+9eJ3CJ412d/ac//8/3znf5YxQSvE4TTzi+I3WVQKsAXKs+2GgG7gGtFvXsgl4BvgWsBnwJYgbAq4AfwV6khFwCHjR/lFZWektLy/3+v3+9MLCQldubm4qQG9v70RXV9dYIBAYbm5uHmpsbByagnEaOPaoS1MAvAk0CSGaampqrgWDwfsqQQsGg/dramquCSGagCYLqyBRDxQArwMFpaWlnpMnTxb7fD43QO35Oj4MtTA4NoihzGmTNCHJcGWw3VdG/QtH/rcOodBodXV1Z2tr6whwC/iV9TmvgAfku3fv9p45c2YLwMFzhzl7o4moEU3IfU7Nya5nK/jdjl8DUFVVdbmhoWFoLhEzBbwJbJhKvu2dPdwZurukEFvlzadt36mZIjqAn84l4BDwYmlpqaelpcUPsOntHUTGBpKK8yxXJlf3nwOgrKwsYC3Hg40ppoTau0IIbt68udXn87lnPvnRr9fygy2vJET6h8vvcvSf9bM8EQqFRtetW3fRSn6vAD2aNeZVoLimpiZ37969+QfPHebinStLIgf4ct5G0lOeovn2xwAMT96na7ib7/q/6YxEIuMXLlwYBSTwibTmbAY4cODAaoCzN5qmAT4K+XxzbEybw+bUrdTqq6ys9BYVFXlqz9fNu9v/0nuW1947siDxb79Tx7dzd826HzWi1J6vo/6FI57KykpvY2OjD9goLQGUl5d7AT4MtcwLvhj5YmNsbJvLFlAC4Pf70wEGxwa/sMpnY9tcQIm0qhqFhYUuYFaGW06zsW0uYI1ul1S7sCxkd352cVmETOHKkTxmk1YzQW9v78Rig31vlbHq+Nb5U+/xrQv+b9sUrrC0Ohm6urrG7Ko2n6XozqSe1sa2uYBu3WqjygKBwHBFRUV2hiuD/tHInACdP25Kao9kuDIACAQCw9ata9Lu35qbm4cAtvvKvrD1trFtLqDdLkZ/BHzBYNBfVFTk8b1VNi0bTq0F9W2/p/7C23MS1H51P7XbfjhnQXJqTkI/aeH69esj69evD1h94/ftBb8CcOLEic8Adj1bMQ14KlCiNnOOjWlz2JwJl+NkbKFybHugBzitlKK6uroToG3fKbJcmUmTZ7kyH3RF1dXVnRb5abtdnxpzx4CO1tbWkaqqqssAV/efY5U3P6knt7uhqqqqy1Y31DG1TZ8Z9PXArYaGhiFbRNu+U+wp3olTSzwHODUne4p3ztUP3rI4npy2/Ik8mPxfj2ZP/OF0zuO5O03brLszNw719UlAerOz40N9fZeWcjxfsv3iT39+3lrfJuv7kvuBx2r6Yq9oLn36cz74h0m47TYd6SuJRzW2VWyYNU4pxY5Dv2FNejaR0V42FPfz8t2TbHo9vLCAxRS+/IYXgY7L7SMz9hlCxGn4e5DdOzdNG1f8vV+SakJf7+dMCElHRPK+/hJXF/PAYgLShInDGSNFjSOE0E2ZmilN9I7OvrX2mPZgeK1TiZBDlzFNaQNKqXiKUyAT6LAXFWDHiZRG9qTuXqmUcJgqNiTEwwiSaIKY8ghNeNFVnjC5q6BPLMcmFEIgNXJESsxnGkpJoWKr8tKeK1jtKX2QNle7nl+Zl1YkBJNxZQqnQxRqSuSIBKJ8UQ+40/QU4TBWGoaafDorZa1/Y+ZrWRmOMrcrTQeaAUrWpf9oTZ7j1YHh2EeX2gePhyMT3Q7pzpemHASiSXlAOnADmqYJ7WtbVryRm536DaWEPjb+EHd8IgYIZ+6K1O1f+VJmnaYJaSqhm9L9VNIeMDUlhDlbsGmaHHv/nXIAwzAeAmoyVSCEwkQJQyW9B7T4+IhAGXFDGRfbI0f7B6Ifa5owHQ6Jrgt0XeBwSDRN0D8Q/aTtX/2HDUMZQmCasdhY0h4w+rRJ4VH3dI9cey88cf1vH/UcfObplJLMdOdzUogcwDCV+s/g/diNe+GJjmjMjDl04YpOqtuT446J5JcgLtFj9MQnTVM6RL5hKK378/H2f98Z+xSwfa9JKR1S4nRoQmdS3jKNeNhUcvnygGkQFjI2APoKXRcehUwR4ARQEJdGdMxpGmGHEY2MGNnRRGuBeNyv6/87AMgFOrHy91IdAAAAAElFTkSuQmCC",id:i,onClick:function(e){return function(e){g(e.target.id),f(!0)}(e)},alt:"marker",onMouseEnter:function(e){e.preventDefault(),u(!0)},onMouseLeave:function(e){e.preventDefault(),u(!1)}}),l&&(0,Ee.jsx)(F,{className:"popup-form",latitude:null===r||void 0===r?void 0:r.lat,longitude:null===r||void 0===r?void 0:r.lng,anchor:"top",closeOnClick:!1,closeButton:!1,children:"Tr\u1ea1m d\u1eebng: ".concat(n)})]}),v&&(0,Ee.jsx)(Wa,{show:d,name:"Tr\u1ea1m d\u1eebng: ".concat(n),tabLeft:"Xe s\u1eafp t\u1edbi tr\u1ea1m",tabRight:"Tuy\u1ebfn \u0111i qua",compLeft:(0,Ee.jsx)(vo,{idBusStop:v}),compRight:(0,Ee.jsx)(Go,{idBusStop:v})})]})},qo=function(){var t=Ka(),n=Bo(),r=(0,e.useState)([]),i=(0,o.Z)(r,2),a=i[0],s=i[1],l=le((function(e){return e.routes.filters}));return(0,e.useEffect)((function(){var e=n.filter((function(e){return-1!==l.indexOf(e.codeBusRoute)&&"turn"===e.directionRoute})),r=e.map((function(e){return e.codeBusRoute})),i=e.map((function(e){return e.directionRoute})),a=t.filter((function(e){return-1!==i.indexOf(e.directionRoute)&&-1!==r.indexOf(e.codeBusRoute)}));s(a)}),[l,n,t]),(0,Ee.jsx)(Ee.Fragment,{children:a.map((function(e,t){return(0,Ee.jsx)("div",{className:"marker-bus-stop",children:(0,Ee.jsx)(Ho,{nameBusStop:e.nameBusStop,locationBusStop:e.location,idBusStop:e.id})},t)}))})},Wo=n(4938);var Xo=e.createContext();function Ko(){return e.useContext(Xo)}function Yo(e){return(0,$e.Z)("PrivateSwitchBase",e)}(0,Qe.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var Jo=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Qo=(0,Ae.ZP)(ir)((function(e){var t=e.ownerState;return(0,Me.Z)({padding:9,borderRadius:"50%"},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12})})),$o=(0,Ae.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),es=e.forwardRef((function(e,t){var n=e.autoFocus,r=e.checked,i=e.checkedIcon,a=e.className,s=e.defaultChecked,l=e.disabled,u=e.disableFocusRipple,c=void 0!==u&&u,h=e.edge,d=void 0!==h&&h,f=e.icon,p=e.id,m=e.inputProps,v=e.inputRef,g=e.name,y=e.onBlur,_=e.onChange,x=e.onFocus,b=e.readOnly,w=e.required,k=e.tabIndex,T=e.type,S=e.value,E=(0,Re.Z)(e,Jo),C=(0,Wo.Z)({controlled:r,default:Boolean(s),name:"SwitchBase",state:"checked"}),A=(0,o.Z)(C,2),R=A[0],M=A[1],B=Ko(),P=l;B&&"undefined"===typeof P&&(P=B.disabled);var I="checkbox"===T||"radio"===T,z=(0,Me.Z)({},e,{checked:R,disabled:P,disableFocusRipple:c,edge:d}),L=function(e){var t=e.classes,n=e.checked,r=e.disabled,i=e.edge,a={root:["root",n&&"checked",r&&"disabled",i&&"edge".concat((0,Jt.Z)(i))],input:["input"]};return(0,Pe.Z)(a,Yo,t)}(z);return(0,Ee.jsxs)(Qo,(0,Me.Z)({component:"span",className:(0,Be.Z)(L.root,a),centerRipple:!0,focusRipple:!c,disabled:P,tabIndex:null,role:void 0,onFocus:function(e){x&&x(e),B&&B.onFocus&&B.onFocus(e)},onBlur:function(e){y&&y(e),B&&B.onBlur&&B.onBlur(e)},ownerState:z,ref:t},E,{children:[(0,Ee.jsx)($o,(0,Me.Z)({autoFocus:n,checked:r,defaultChecked:s,className:L.input,disabled:P,id:I&&p,name:g,onChange:function(e){if(!e.nativeEvent.defaultPrevented){var t=e.target.checked;M(t),_&&_(e,t)}},readOnly:b,ref:v,required:w,ownerState:z,tabIndex:k,type:T},"checkbox"===T&&void 0===S?{}:{value:S},m)),R?i:f]}))})),ts=(0,Ir.Z)((0,Ee.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),ns=(0,Ir.Z)((0,Ee.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),rs=(0,Ir.Z)((0,Ee.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function is(e){return(0,$e.Z)("MuiCheckbox",e)}var as=(0,Qe.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),os=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],ss=(0,Ae.ZP)(es,{shouldForwardProp:function(e){return(0,Ae.FO)(e)||"classes"===e},name:"MuiCheckbox",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.indeterminate&&t.indeterminate,"default"!==n.color&&t["color".concat((0,Jt.Z)(n.color))]]}})((function(e){var t,n=e.theme,i=e.ownerState;return(0,Me.Z)({color:(n.vars||n).palette.text.secondary},!i.disableRipple&&{"&:hover":{backgroundColor:n.vars?"rgba(".concat("default"===i.color?n.vars.palette.action.activeChannel:n.vars.palette.primary.mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,Ht.Fq)("default"===i.color?n.palette.action.active:n.palette[i.color].main,n.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==i.color&&(t={},(0,r.Z)(t,"&.".concat(as.checked,", &.").concat(as.indeterminate),{color:(n.vars||n).palette[i.color].main}),(0,r.Z)(t,"&.".concat(as.disabled),{color:(n.vars||n).palette.action.disabled}),t))})),ls=(0,Ee.jsx)(ns,{}),us=(0,Ee.jsx)(ts,{}),cs=(0,Ee.jsx)(rs,{}),hs=e.forwardRef((function(t,n){var r,i,a=(0,ct.Z)({props:t,name:"MuiCheckbox"}),o=a.checkedIcon,s=void 0===o?ls:o,l=a.color,u=void 0===l?"primary":l,c=a.icon,h=void 0===c?us:c,d=a.indeterminate,f=void 0!==d&&d,p=a.indeterminateIcon,m=void 0===p?cs:p,v=a.inputProps,g=a.size,y=void 0===g?"medium":g,_=(0,Re.Z)(a,os),x=f?m:h,b=f?m:s,w=(0,Me.Z)({},a,{color:u,indeterminate:f,size:y}),k=function(e){var t=e.classes,n=e.indeterminate,r=e.color,i={root:["root",n&&"indeterminate","color".concat((0,Jt.Z)(r))]},a=(0,Pe.Z)(i,is,t);return(0,Me.Z)({},t,a)}(w);return(0,Ee.jsx)(ss,(0,Me.Z)({type:"checkbox",inputProps:(0,Me.Z)({"data-indeterminate":f},v),icon:e.cloneElement(x,{fontSize:null!=(r=x.props.fontSize)?r:y}),checkedIcon:e.cloneElement(b,{fontSize:null!=(i=b.props.fontSize)?i:y}),ownerState:w,ref:n},_,{classes:k}))})),ds=n(6189),fs=n(3981),ps=["onChange","maxRows","minRows","style","value"];function ms(e,t){return parseInt(e[t],10)||0}var vs={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"};function gs(e){return void 0===e||null===e||0===Object.keys(e).length}var ys=e.forwardRef((function(t,n){var r=t.onChange,i=t.maxRows,a=t.minRows,s=void 0===a?1:a,l=t.style,u=t.value,c=(0,Re.Z)(t,ps),h=e.useRef(null!=u).current,d=e.useRef(null),f=(0,Ie.Z)(n,d),p=e.useRef(null),m=e.useRef(0),v=e.useState({}),g=(0,o.Z)(v,2),y=g[0],_=g[1],x=e.useCallback((function(){var e=d.current,n=(0,je.Z)(e).getComputedStyle(e);if("0px"===n.width)return{};var r=p.current;r.style.width=n.width,r.value=e.value||t.placeholder||"x","\n"===r.value.slice(-1)&&(r.value+=" ");var a=n["box-sizing"],o=ms(n,"padding-bottom")+ms(n,"padding-top"),l=ms(n,"border-bottom-width")+ms(n,"border-top-width"),u=r.scrollHeight;r.value="x";var c=r.scrollHeight,h=u;return s&&(h=Math.max(Number(s)*c,h)),i&&(h=Math.min(Number(i)*c,h)),{outerHeightStyle:(h=Math.max(h,c))+("border-box"===a?o+l:0),overflow:Math.abs(h-u)<=1}}),[i,s,t.placeholder]),b=function(e,t){var n=t.outerHeightStyle,r=t.overflow;return m.current<20&&(n>0&&Math.abs((e.outerHeightStyle||0)-n)>1||e.overflow!==r)?(m.current+=1,{overflow:r,outerHeightStyle:n}):e},w=e.useCallback((function(){var e=x();gs(e)||_((function(t){return b(t,e)}))}),[x]);e.useEffect((function(){var e,t=(0,fs.Z)((function(){m.current=0,d.current&&function(){var e=x();gs(e)||(0,I.flushSync)((function(){_((function(t){return b(t,e)}))}))}()})),n=(0,je.Z)(d.current);return n.addEventListener("resize",t),"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(t)).observe(d.current),function(){t.clear(),n.removeEventListener("resize",t),e&&e.disconnect()}})),(0,Oe.Z)((function(){w()})),e.useEffect((function(){m.current=0}),[u]);return(0,Ee.jsxs)(e.Fragment,{children:[(0,Ee.jsx)("textarea",(0,Me.Z)({value:u,onChange:function(e){m.current=0,h||w(),r&&r(e)},ref:f,rows:s,style:(0,Me.Z)({height:y.outerHeightStyle,overflow:y.overflow?"hidden":null},l)},c)),(0,Ee.jsx)("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:p,tabIndex:-1,style:(0,Me.Z)({},vs,l,{padding:0})})]})}));var _s=n(3026);function xs(e){var t=e.styles,n=e.defaultTheme,r=void 0===n?{}:n,i="function"===typeof t?function(e){return t(void 0===(n=e)||null===n||0===Object.keys(n).length?r:e);var n}:t;return(0,Ee.jsx)(Bn,{styles:i})}var bs=function(e){return(0,Ee.jsx)(xs,(0,Me.Z)({},e,{defaultTheme:Tt.Z}))};function ws(e){return null!=e&&!(Array.isArray(e)&&0===e.length)}function ks(e){return(0,$e.Z)("MuiInputBase",e)}var Ts=(0,Qe.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Ss=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],Es=(0,Ae.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,"small"===n.size&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t["color".concat((0,Jt.Z)(n.color))],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]}})((function(e){var t=e.theme,n=e.ownerState;return(0,Me.Z)({},t.typography.body1,(0,r.Z)({color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(Ts.disabled),{color:(t.vars||t).palette.text.disabled,cursor:"default"}),n.multiline&&(0,Me.Z)({padding:"4px 0 5px"},"small"===n.size&&{paddingTop:1}),n.fullWidth&&{width:"100%"})})),Cs=(0,Ae.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:function(e,t){var n=e.ownerState;return[t.input,"small"===n.size&&t.inputSizeSmall,n.multiline&&t.inputMultiline,"search"===n.type&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]}})((function(e){var t,n=e.theme,i=e.ownerState,a="light"===n.palette.mode,o=(0,Me.Z)({color:"currentColor"},n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:a?.42:.5},{transition:n.transitions.create("opacity",{duration:n.transitions.duration.shorter})}),s={opacity:"0 !important"},l=n.vars?{opacity:n.vars.opacity.inputPlaceholder}:{opacity:a?.42:.5};return(0,Me.Z)((t={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,r.Z)(t,"label[data-shrink=false] + .".concat(Ts.formControl," &"),{"&::-webkit-input-placeholder":s,"&::-moz-placeholder":s,"&:-ms-input-placeholder":s,"&::-ms-input-placeholder":s,"&:focus::-webkit-input-placeholder":l,"&:focus::-moz-placeholder":l,"&:focus:-ms-input-placeholder":l,"&:focus::-ms-input-placeholder":l}),(0,r.Z)(t,"&.".concat(Ts.disabled),{opacity:1,WebkitTextFillColor:(n.vars||n).palette.text.disabled}),(0,r.Z)(t,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),t),"small"===i.size&&{paddingTop:1},i.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===i.type&&{MozAppearance:"textfield"})})),As=(0,Ee.jsx)(bs,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Rs=e.forwardRef((function(t,n){var r=(0,ct.Z)({props:t,name:"MuiInputBase"}),i=r["aria-describedby"],a=r.autoComplete,s=r.autoFocus,l=r.className,u=r.components,c=void 0===u?{}:u,h=r.componentsProps,d=void 0===h?{}:h,f=r.defaultValue,p=r.disabled,m=r.disableInjectingGlobalStyles,v=r.endAdornment,g=r.fullWidth,y=void 0!==g&&g,_=r.id,x=r.inputComponent,b=void 0===x?"input":x,w=r.inputProps,k=void 0===w?{}:w,T=r.inputRef,S=r.maxRows,E=r.minRows,C=r.multiline,A=void 0!==C&&C,R=r.name,M=r.onBlur,B=r.onChange,P=r.onClick,I=r.onFocus,z=r.onKeyDown,L=r.onKeyUp,D=r.placeholder,O=r.readOnly,N=r.renderSuffix,F=r.rows,j=r.startAdornment,V=r.type,Z=void 0===V?"text":V,U=r.value,G=(0,Re.Z)(r,Ss),H=null!=k.value?k.value:U,q=e.useRef(null!=H).current,W=e.useRef(),X=e.useCallback((function(e){0}),[]),K=(0,At.Z)(k.ref,X),Y=(0,At.Z)(T,K),J=(0,At.Z)(W,Y),Q=e.useState(!1),$=(0,o.Z)(Q,2),ee=$[0],te=$[1],ne=Ko();var re=function(e){var t=e.props,n=e.states,r=e.muiFormControl;return n.reduce((function(e,n){return e[n]=t[n],r&&"undefined"===typeof t[n]&&(e[n]=r[n]),e}),{})}({props:r,muiFormControl:ne,states:["color","disabled","error","hiddenLabel","size","required","filled"]});re.focused=ne?ne.focused:ee,e.useEffect((function(){!ne&&p&&ee&&(te(!1),M&&M())}),[ne,p,ee,M]);var ie=ne&&ne.onFilled,ae=ne&&ne.onEmpty,oe=e.useCallback((function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e&&(ws(e.value)&&""!==e.value||t&&ws(e.defaultValue)&&""!==e.defaultValue)}(e)?ae&&ae():ie&&ie()}),[ie,ae]);(0,_s.Z)((function(){q&&oe({value:H})}),[H,oe,q]);e.useEffect((function(){oe(W.current)}),[]);var se=b,le=k;A&&"input"===se&&(le=F?(0,Me.Z)({type:void 0,minRows:F,maxRows:F},le):(0,Me.Z)({type:void 0,maxRows:S,minRows:E},le),se=ys);e.useEffect((function(){ne&&ne.setAdornedStart(Boolean(j))}),[ne,j]);var ue=(0,Me.Z)({},r,{color:re.color||"primary",disabled:re.disabled,endAdornment:v,error:re.error,focused:re.focused,formControl:ne,fullWidth:y,hiddenLabel:re.hiddenLabel,multiline:A,size:re.size,startAdornment:j,type:Z}),ce=function(e){var t=e.classes,n=e.color,r=e.disabled,i=e.error,a=e.endAdornment,o=e.focused,s=e.formControl,l=e.fullWidth,u=e.hiddenLabel,c=e.multiline,h=e.readOnly,d=e.size,f=e.startAdornment,p=e.type,m={root:["root","color".concat((0,Jt.Z)(n)),r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",s&&"formControl","small"===d&&"sizeSmall",c&&"multiline",f&&"adornedStart",a&&"adornedEnd",u&&"hiddenLabel",h&&"readOnly"],input:["input",r&&"disabled","search"===p&&"inputTypeSearch",c&&"inputMultiline","small"===d&&"inputSizeSmall",u&&"inputHiddenLabel",f&&"inputAdornedStart",a&&"inputAdornedEnd",h&&"readOnly"]};return(0,Pe.Z)(m,ks,t)}(ue),he=c.Root||Es,de=d.root||{},fe=c.Input||Cs;return le=(0,Me.Z)({},le,d.input),(0,Ee.jsxs)(e.Fragment,{children:[!m&&As,(0,Ee.jsxs)(he,(0,Me.Z)({},de,!tt(he)&&{ownerState:(0,Me.Z)({},ue,de.ownerState)},{ref:n,onClick:function(e){W.current&&e.currentTarget===e.target&&W.current.focus(),P&&P(e)}},G,{className:(0,Be.Z)(ce.root,de.className,l),children:[j,(0,Ee.jsx)(Xo.Provider,{value:null,children:(0,Ee.jsx)(fe,(0,Me.Z)({ownerState:ue,"aria-invalid":re.error,"aria-describedby":i,autoComplete:a,autoFocus:s,defaultValue:f,disabled:re.disabled,id:_,onAnimationStart:function(e){oe("mui-auto-fill-cancel"===e.animationName?W.current:{value:"x"})},name:R,placeholder:D,readOnly:O,required:re.required,rows:F,value:H,onKeyDown:z,onKeyUp:L,type:Z},le,!tt(fe)&&{as:se,ownerState:(0,Me.Z)({},ue,le.ownerState)},{ref:J,className:(0,Be.Z)(ce.input,le.className),onBlur:function(e){M&&M(e),k.onBlur&&k.onBlur(e),ne&&ne.onBlur?ne.onBlur(e):te(!1)},onChange:function(e){if(!q){var t=e.target||W.current;if(null==t)throw new Error((0,ds.Z)(1));oe({value:t.value})}for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];k.onChange&&k.onChange.apply(k,[e].concat(r)),B&&B.apply(void 0,[e].concat(r))},onFocus:function(e){re.disabled?e.stopPropagation():(I&&I(e),k.onFocus&&k.onFocus(e),ne&&ne.onFocus?ne.onFocus(e):te(!0))}}))}),v,N?N((0,Me.Z)({},re,{startAdornment:j})):null]}))]})})),Ms=Rs,Bs=function(t){var n=(0,e.useState)(t.type),r=(0,o.Z)(n,1)[0],i=(0,e.useState)(t.placeholder),a=(0,o.Z)(i,1)[0],s=(0,e.useState)(""),l=(0,o.Z)(s,2),u=l[0],c=l[1];return(0,Ee.jsx)(Ms,{sx:{ml:1,flex:1},placeholder:a,inputProps:{"aria-label":"T\xecm tuy\u1ebfn xe bu\xfdt"},value:u,onChange:function(e){c(e.target.value),t.onChange&&t.onChange(u)},type:r,className:"input-class",name:"input-form",autoComplete:"off"})};function Ps(e){return(0,$e.Z)("MuiImageList",e)}(0,Qe.Z)("MuiImageList",["root","masonry","quilted","standard","woven"]);var Is=e.createContext({}),zs=["children","className","cols","component","rowHeight","gap","style","variant"],Ls=(0,Ae.ZP)("ul",{name:"MuiImageList",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant]]}})((function(e){var t=e.ownerState;return(0,Me.Z)({display:"grid",overflowY:"auto",listStyle:"none",padding:0,WebkitOverflowScrolling:"touch"},"masonry"===t.variant&&{display:"block"})})),Ds=e.forwardRef((function(t,n){var r=(0,ct.Z)({props:t,name:"MuiImageList"}),i=r.children,a=r.className,o=r.cols,s=void 0===o?2:o,l=r.component,u=void 0===l?"ul":l,c=r.rowHeight,h=void 0===c?"auto":c,d=r.gap,f=void 0===d?4:d,p=r.style,m=r.variant,v=void 0===m?"standard":m,g=(0,Re.Z)(r,zs),y=e.useMemo((function(){return{rowHeight:h,gap:f,variant:v}}),[h,f,v]);e.useEffect((function(){0}),[]);var _="masonry"===v?(0,Me.Z)({columnCount:s,columnGap:f},p):(0,Me.Z)({gridTemplateColumns:"repeat(".concat(s,", 1fr)"),gap:f},p),x=(0,Me.Z)({},r,{component:u,gap:f,rowHeight:h,variant:v}),b=function(e){var t=e.classes,n={root:["root",e.variant]};return(0,Pe.Z)(n,Ps,t)}(x);return(0,Ee.jsx)(Ls,(0,Me.Z)({as:u,className:(0,Be.Z)(b.root,b[v],a),ref:n,style:_,ownerState:x},g,{children:(0,Ee.jsx)(Is.Provider,{value:y,children:i})}))})),Os=n(6258);function Ns(e){return(0,$e.Z)("MuiImageListItem",e)}var Fs=(0,Qe.Z)("MuiImageListItem",["root","img","standard","woven","masonry","quilted"]),js=["children","className","cols","component","rows","style"],Vs=(0,Ae.ZP)("li",{name:"MuiImageListItem",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[(0,r.Z)({},"& .".concat(Fs.img),t.img),t.root,t[n.variant]]}})((function(e){var t=e.ownerState;return(0,Me.Z)({display:"block",position:"relative"},"standard"===t.variant&&{display:"flex",flexDirection:"column"},"woven"===t.variant&&{height:"100%",alignSelf:"center","&:nth-of-type(even)":{height:"70%"}},(0,r.Z)({},"& .".concat(Fs.img),(0,Me.Z)({objectFit:"cover",width:"100%",height:"100%",display:"block"},"standard"===t.variant&&{height:"auto",flexGrow:1})))})),Zs=e.forwardRef((function(t,n){var r=(0,ct.Z)({props:t,name:"MuiImageListItem"}),i=r.children,a=r.className,o=r.cols,s=void 0===o?1:o,l=r.component,u=void 0===l?"li":l,c=r.rows,h=void 0===c?1:c,d=r.style,f=(0,Re.Z)(r,js),p=e.useContext(Is),m=p.rowHeight,v=void 0===m?"auto":m,g=p.gap,y=p.variant,_="auto";"woven"===y?_=void 0:"auto"!==v&&(_=v*h+g*(h-1));var x=(0,Me.Z)({},r,{cols:s,component:u,gap:g,rowHeight:v,rows:h,variant:y}),b=function(e){var t=e.classes,n={root:["root",e.variant],img:["img"]};return(0,Pe.Z)(n,Ns,t)}(x);return(0,Ee.jsx)(Vs,(0,Me.Z)({as:u,className:(0,Be.Z)(b.root,b[y],a),ref:n,style:(0,Me.Z)({height:_,gridColumnEnd:"masonry"!==y?"span ".concat(s):void 0,gridRowEnd:"masonry"!==y?"span ".concat(h):void 0,marginBottom:"masonry"===y?g:void 0},d),ownerState:x},f,{children:e.Children.map(i,(function(t){return e.isValidElement(t)?"img"===t.type||(0,Os.Z)(t,["Image"])?e.cloneElement(t,{className:(0,Be.Z)(b.img,t.props.className)}):t:null}))}))}));function Us(e){return(0,$e.Z)("MuiImageListItemBar",e)}(0,Qe.Z)("MuiImageListItemBar",["root","positionBottom","positionTop","positionBelow","titleWrap","titleWrapBottom","titleWrapTop","titleWrapBelow","titleWrapActionPosLeft","titleWrapActionPosRight","title","subtitle","actionIcon","actionIconActionPosLeft","actionIconActionPosRight"]);var Gs=["actionIcon","actionPosition","className","subtitle","title","position"],Hs=(0,Ae.ZP)("div",{name:"MuiImageListItemBar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["position".concat((0,Jt.Z)(n.position))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,Me.Z)({position:"absolute",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",fontFamily:t.typography.fontFamily},"bottom"===n.position&&{bottom:0},"top"===n.position&&{top:0},"below"===n.position&&{position:"relative",background:"transparent",alignItems:"normal"})})),qs=(0,Ae.ZP)("div",{name:"MuiImageListItemBar",slot:"TitleWrap",overridesResolver:function(e,t){var n=e.ownerState;return[t.titleWrap,t["titleWrap".concat((0,Jt.Z)(n.position))],n.actionIcon&&t["titleWrapActionPos".concat((0,Jt.Z)(n.actionPosition))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,Me.Z)({flexGrow:1,padding:"12px 16px",color:(t.vars||t).palette.common.white,overflow:"hidden"},"below"===n.position&&{padding:"6px 0 12px",color:"inherit"},n.actionIcon&&"left"===n.actionPosition&&{paddingLeft:0},n.actionIcon&&"right"===n.actionPosition&&{paddingRight:0})})),Ws=(0,Ae.ZP)("div",{name:"MuiImageListItemBar",slot:"Title",overridesResolver:function(e,t){return t.title}})((function(e){return{fontSize:e.theme.typography.pxToRem(16),lineHeight:"24px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),Xs=(0,Ae.ZP)("div",{name:"MuiImageListItemBar",slot:"Subtitle",overridesResolver:function(e,t){return t.subtitle}})((function(e){return{fontSize:e.theme.typography.pxToRem(12),lineHeight:1,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"}})),Ks=(0,Ae.ZP)("div",{name:"MuiImageListItemBar",slot:"ActionIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.actionIcon,t["actionIconActionPos".concat((0,Jt.Z)(n.actionPosition))]]}})((function(e){var t=e.ownerState;return(0,Me.Z)({},"left"===t.actionPosition&&{order:-1})})),Ys=e.forwardRef((function(e,t){var n=(0,ct.Z)({props:e,name:"MuiImageListItemBar"}),r=n.actionIcon,i=n.actionPosition,a=void 0===i?"right":i,o=n.className,s=n.subtitle,l=n.title,u=n.position,c=void 0===u?"bottom":u,h=(0,Re.Z)(n,Gs),d=(0,Me.Z)({},n,{position:c,actionPosition:a}),f=function(e){var t=e.classes,n=e.position,r=e.actionIcon,i=e.actionPosition,a={root:["root","position".concat((0,Jt.Z)(n))],titleWrap:["titleWrap","titleWrap".concat((0,Jt.Z)(n)),r&&"titleWrapActionPos".concat((0,Jt.Z)(i))],title:["title"],subtitle:["subtitle"],actionIcon:["actionIcon","actionIconActionPos".concat((0,Jt.Z)(i))]};return(0,Pe.Z)(a,Us,t)}(d);return(0,Ee.jsxs)(Hs,(0,Me.Z)({ownerState:d,className:(0,Be.Z)(f.root,o),ref:t},h,{children:[(0,Ee.jsxs)(qs,{ownerState:d,className:f.titleWrap,children:[(0,Ee.jsx)(Ws,{className:f.title,children:l}),s?(0,Ee.jsx)(Xs,{className:f.subtitle,children:s}):null]}),r?(0,Ee.jsx)(Ks,{ownerState:d,className:f.actionIcon,children:r}):null]}))})),Js=[{id:"79574076363",title:"B\xe3i t\u1eafm bi\u1ec3n M\u1ef9 Kh\xea",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bai-tam-my-khe.jpg",imageDesc:"B\xe3i t\u1eafm bi\u1ec3n M\u1ef9 Kh\xea \u0110\xe0 N\u1eb5ng",description:"Bi\u1ec3n M\u1ef9 Kh\xea l\xe0 1 trong 6 b\xe3i bi\u1ec3n \u0111\u01b0\u1ee3c m\u1ec7nh danh \u0111\u1eb9p nh\u1ea5t h\xe0nh tinh, v\u1edbi bi\u1ec3n xanh, c\xe1t v\xe0ng c\xf9ng nh\u1eefng h\xe0ng d\u1eeba xanh m\xe1t. \n    Th\xeam \u0111\xf3 l\xe0 nhi\u1ec1u d\u1ecbch v\u1ee5 du l\u1ecbch, ho\u1ea1t \u0111\u1ed9ng gi\u1ea3i tr\xed \u0111\u01b0\u1ee3c t\xedch h\u1ee3p gi\xfap n\xf3 thu h\xfat \u0111\xf4ng \u0111\u1ea3o du kh\xe1ch.",locationLink:"https://www.google.com/maps/place/B%C3%A3i+bi%E1%BB%83n+M%E1%BB%B9+Kh%C3%AA/@16.0619421,108.247174,16z/data=!3m1!4b1!4m5!3m4!1s0x31421782f7fa0ee3:0xeafb8ba272ee55ac!8m2!3d16.0616944!4d108.2469346?hl=vi-VN",locationName:"d\u1ecdc \u0111\u01b0\u1eddng V\xf5 Nguy\xean Gi\xe1p, Ph\u01b0\u1edbc M\u1ef9, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.247174",lat:"16.0619421"}},{id:"65250801297",title:"B\xe3i t\u1eafm Ph\u1ea1m V\u0103n \u0110\u1ed3ng",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bai-bien-pham-van-dong-dep-nhat-da-nang.jpg",imageDesc:"B\xe3i bi\u1ec3n Ph\u1ea1m V\u0103n \u0110\u1ed3ng t\u1ea1i \u0110\xe0 N\u1eb5ng t\u1ea1i Ph\u1ea1m V\u0103n \u0110\u1ed3ng, Ph\u01b0\u1edbc M\u1ef9, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",description:"T\u1ecda l\u1ea1c \u1edf m\u1ed9t v\u1ecb tr\xed l\xfd t\u01b0\u1edfng v\u1edbi s\xf4ng n\xfai bao quanh, thu\u1eadn ti\u1ec7n cho vi\u1ec7c di chuy\u1ec3n. N\u01a1i \u0111\xe2y \u0111\u01b0\u1ee3c thi\xean nhi\xean ban t\u1eb7ng c\xe1c c\u1ea3nh s\u1eafc \u0111\u1eb9p, \n    \u0111\u1ed3ng th\u1eddi tr\u1edf th\xe0nh m\u1ed9t trong nh\u1eefng <strong>\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng </strong>\u0111\u01b0\u1ee3c nhi\u1ec1u du kh\xe1ch y\xeau th\xedch.",locationLink:"https://www.google.com/maps/place/B%C3%A3i+t%E1%BA%AFm+Ph%E1%BA%A1m+V%C4%83n+%C4%90%E1%BB%93ng/@16.0851616,108.2549248,14z/data=!3m1!4b1!4m5!3m4!1s0x3142178599738b33:0xf208a358691762b3!8m2!3d16.0732782!4d108.2468342?hl=vi-VN",locationName:"Ph\u1ea1m V\u0103n \u0110\u1ed3ng, Ph\u01b0\u1edbc M\u1ef9, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",location:{lng:"108.24681113596368",lat:"16.07341219682571"}},{id:"33384981461",title:"B\xe3i t\u1eafm B\u1eafc M\u1ef9 An",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/da-nang-bai-tam-my-an.jpg",imageDesc:"B\xe3i t\u1eafm B\u1eafc M\u1ef9 An - \u0110\xe0 N\u1eb5ng",description:"M\u1ef9 An n\u1ed5i ti\u1ebfng v\u1edbi b\u1edd c\xe1t tr\u1eafng m\u1ecbn tr\u1ea3i d\xe0i, l\xe0n n\u01b0\u1edbc trong v\u1eaft c\xf9ng nhi\u1ec7t \u0111\u1ed9 \u1ed5n \u0111\u1ecbnh v\xe0 khung c\u1ea3nh huy\u1ec1n \u1ea3o, l\xe3ng m\u1ea1n m\u1ed7i khi ho\xe0ng h\xf4n bu\xf4ng xu\u1ed1ng.\n     Ngo\xe0i t\u1eafm bi\u1ec3n ra, du kh\xe1ch c\xf2n c\xf3 th\u1ec3 t\u1eadn h\u01b0\u1edfng c\u1ea3m gi\xe1c c\xf9ng l\xe0n gi\xf3 bi\u1ec3n m\xe1t l\u1ea1nh v\xe0 tham gia nh\u1eefng tr\xf2 ch\u01a1i th\u1ec3 thao tr\xean bi\u1ec3n hay khu ngh\u1ec9 d\u01b0\u1ee1ng g\u1ea7n \u0111\xf3 nh\u01b0 Lifestyle, Furama, \n     Crowne Plaza,.. \u0111\u1ec3 t\u1eadn h\u01b0\u1edfng c\xf9ng ng\u01b0\u1eddi th\xe2n, b\u1ea1n b\xe8.",locationLink:"https://www.google.com/maps/place/B%C3%A3i+bi%E1%BB%83n+M%E1%BB%B9+Kh%C3%AA/@16.0619421,108.247174,16z/data=!4m5!3m4!1s0x31421782f7fa0ee3:0xeafb8ba272ee55ac!8m2!3d16.0616944!4d108.2469346?hl=vi-VN",locationName:"B\u1eafc M\u1ef9, Ng\u0169 H\xe0nh S\u01a1n, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.247174",lat:"16.0619421"}},{id:"11463867833",title:"B\xe3i bi\u1ec3n Xu\xe2n Thi\u1ec1u",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bai-bien-xuan-thieu-da-nang.jpg",imageDesc:"B\xe3i bi\u1ec3n Xu\xe2n Thi\u1ec1u \u0110\xe0 N\u1eb5ng",description:"N\u1ebfu b\u1ea1n mu\u1ed1n vui ch\u01a1i t\u1ea1i b\xe3i bi\u1ec3n nh\u01b0ng l\u1ea1i kh\xf4ng th\xedch qu\xe1 \u0111\xf4ng \u0111\xfac th\xec h\xe3y \u0111\u1ebfn v\u1edbi b\xe3i bi\u1ec3n Xu\xe2n Thi\u1ec1u. Kh\xe1c bi\u1ec7t v\u1edbi c\xe1c b\xe3i bi\u1ec3n kh\xe1c, \n    Xu\xe2n thi\u1ec1u h\u1ea5p d\u1eabn du kh\xe1ch b\u1edfi v\u1ebb \u0111\u1eb9p hoang s\u01a1, ch\u01b0a ch\u1ecbu nhi\u1ec1u t\xe1c \u0111\u1ed9ng c\u1ee7a con ng\u01b0\u1eddi. Ngo\xe0i ra, b\xe3i bi\u1ec3n Xu\xe2n Thi\u1ec1u c\xf2n c\xf3 m\u1ed9t t\xean g\u1ecdi kh\xe1c l\xe0 bi\u1ec3n \u0110\u1ecf, \n    v\xec l\xfac b\xecnh minh hay ho\xe0ng h\xf4n bu\xf4ng xu\u1ed1ng, \xe1nh s\xe1ng m\u1eb7t tr\u1eddi s\u1ebd chi\u1ebfu l\xean m\u1eb7t bi\u1ec3n m\u1ed9t m\xe0u \u0111\u1ecf r\u1ef1c \u0111\u1ea7y m\xea ho\u1eb7c.",locationLink:"https://www.google.com/maps/place/Khu+du+l%E1%BB%8Bch+Xu%C3%A2n+Thi%E1%BB%81u/@16.093323,108.1423384,17z/data=!3m1!4b1!4m5!3m4!1s0x314219688b89d5f3:0x7dbc59291183491e!8m2!3d16.0933179!4d108.1445271?hl=vi-VN",locationName:"\u0111\u01b0\u1eddng Nguy\u1ec5n T\u1ea5t Th\xe0nh, H\xf2a hi\u1ec7p Nam, Li\xean Chi\u1ec3u, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.1423384",lat:"16.093323"}},{id:"44190397535",title:"B\xe3i bi\u1ec3n Nam \xd4 hay R\u1ea1n Nam \xd4",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bai-bien-nam-o.jpg",imageDesc:"B\xe3i bi\u1ec3n Nam \xd4 - \u0110\xe0 N\u1eb5ng",description:"T\u1edbi v\u1edbi b\xe3i Nam \xd4, du kh\xe1ch s\u1ebd t\u1eadn m\u1eaft chi\xeam ng\u01b0\u1ee1ng nh\u1eefng r\u1ea1n san h\xf4 h\u1ebft s\u1ee9c phong ph\xfa v\xe0 \u0111a d\u1ea1ng, \u0111\u01b0\u1ee3c h\xf2a m\xecnh v\xe0o d\xf2ng n\u01b0\u1edbc bi\u1ec3n m\xe1t l\u1ea1nh v\xe0 \n    tham gia c\xe1c ho\u1ea1t \u0111\u1ed9ng c\xe2u c\xe1, \n    check in \u0111\u1eb9p h\u1ebft s\u1ea3y, \u0111\u01b0\u1ee3c th\u01b0\u1edfng th\u1ee9c c\xe1c lo\u1ea1i m\u1eafm v\xe0 m\xf3n g\u1ecfi c\xe1 Nam \xd4 n\u1ed5i ti\u1ebfng nh\u01b0 c\xe1 thu, c\xe1 nh\xe1m, \n    c\xe1 nh\u1ed3ng\u2026Ng\u01b0\u1eddi ta hay g\u1ecdi Nam \xd4 l\xe0 \u201cThi\xean \u0111\u01b0\u1eddng du l\u1ecbch\u201d b\u1edfi v\u1ebb \u0111\u1eb9p hoang s\u01a1 v\xe0 n\xe9t \u0111\u1ed9c \u0111\xe1o kh\xf3 qu\xean.",locationLink:"https://www.google.com/maps/place/R%E1%BA%A1n+Nam+%C3%94/@16.1177177,108.128796,17z/data=!4m9!1m2!2m1!1zYsOjaSBiaeG7g24gbmFtIMO0!3m5!1s0x31421f581f4c250b:0x90b2dcadf1d415f0!8m2!3d16.1177177!4d108.1309847!15sChJiw6NpIGJp4buDbiBuYW0gw7RaFCISYsOjaSBiaeG7g24gbmFtIMO0kgESdG91cmlzdF9hdHRyYWN0aW9umgEjQ2haRFNVaE5NRzluUzBWSlEwRm5TVVJaTUdWTFMyWkJFQUU?hl=vi-VN",locationName:"Nam \xd4 1, Li\xean Chi\u1ec3u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.128796",lat:"16.1177177"}},{id:"62305724060",title:"H\u1ed3 Xanh",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/ho-xanh.jpg",imageDesc:"H\u1ed3 Xanh, \u0110\xe0 N\u1eb5ng",description:"\u0110\u01b0\u1ee3c v\xed nh\u01b0 m\u1ed9t \u0110\xe0 L\u1ea1t m\u1ed9ng m\u01a1 thu nh\u1ecf hay m\u1ed9t b\xe1n \u0111\u1ea3o Non N\u01b0\u1edbc H\u1eefu t\xecnh say \u0111\u1eafm l\xf2ng ng\u01b0\u1eddi, \n    n\u01a1i \u0111\xe2y \u1ea5n t\u01b0\u1ee3ng v\xe0 \u0111\u1ec3 l\u1ea1i cho du kh\xe1ch h\xecnh \u1ea3nh, m\u1ed9t t\u1ea5m g\u01b0\u01a1ng ph\u1eb3ng kh\u1ed5ng l\u1ed3 soi chi\u1ebfu m\u1ecdi c\u1ea3nh v\u1eadt \n    xung quanh, v\xec th\u1ebf m\xe0 h\u1ed3 c\xf2n c\xf3 t\xean g\u1ecdi kh\xe1c l\xe0 h\u1ed3 B\xe3i B\u1ee5t. T\u1ea5t c\u1ea3 c\u1ea3nh s\u1eafc n\u01a1i \u0111\xe2y \u0111\u1ec1u c\xf3 v\u1ebb t\u0129nh l\u1eb7ng \n    c\xf9ng nh\u1eefng \xe1ng m\xe2y tr\xf4i h\u1eefng h\u1edd, c\u1ea3nh n\xfai non m\u1edd \u1ea3o v\xe0 l\xe0n gi\xf3 nh\u1eb9 phi\xeau phi\xeau, mu\u1ed1n ng\u1eafm nh\xecn c\u1ea3nh s\u1eafc \n    \u1ea5y v\u1eady th\xec b\u1ea1n h\xe3y \u0111\u1ebfn ngay v\u1edbi h\u1ed3 Xanh nh\xe9!",locationLink:"https://www.google.com/maps/place/H%E1%BB%93+Xanh+%C4%90%C3%A0+N%E1%BA%B5ng/@16.0986692,108.2680636,17z/data=!3m1!4b1!4m5!3m4!1s0x314217dbf8ec4287:0xa5a20948363ade!8m2!3d16.0986692!4d108.2680636?hl=vi-VN",locationName:"Ho\xe0ng Sa, Th\u1ecd Quang, S\u01a1n Tr\xe0 \u0110\xe0 N\u1eb5ng",location:{lng:"108.2680636",lat:"16.0986692"}},{id:"83669998895",title:"L\xe0ng b\xedch h\u1ecda Tam Thanh",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/Lang-bich-hoa-tam-thanh-da-nang.jpg",imageDesc:"L\xe0ng B\xedch H\u1ecda Tam Thanh \u0110\xe0 N\u1eb5ng",description:"V\u1ed1n l\xe0 m\u1ed9t ng\xf4i l\xe0ng ch\xe0i ven bi\u1ec3n, sau khi \u0111\u01b0\u1ee3c v\u1ebb b\u1edfi b\xe0n tay t\xe0i hoa \n    c\u1ee7a nh\u1eefng h\u1ecda s\u0129 Vi\u1ec7t Nam v\xe0 H\xe0n Qu\u1ed1c \u0111\xe3 t\u1ea1o n\xean m\u1ed9t di\u1ec7n m\u1ea1o m\u1edbi cho n\u01a1i \u0111\xe2y v\u1edbi nh\u1eefng gam \n    m\xe0u r\u1ef1c r\u1ee1 tr\xean nh\u1eefng b\u1ee9c t\u01b0\u1eddng t\xe1i hi\u1ec7n cu\u1ed9c s\u1ed1ng c\u1ee7a ng\u01b0 d\xe2n mi\u1ec1n bi\u1ec3n, Tam Thanh ch\xednh th\u1ee9c\n     tr\u1edf th\xe0nh c\xe1i t\xean n\u1eb1m trong top t\xecm ki\u1ebfm <strong>\u201c\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng\u201d</strong> c\u1ee7a c\xe1c b\u1ea1n tr\u1ebb. ",locationLink:"https://www.google.com/maps/place/L%C3%A0ng+b%C3%ADch+h%E1%BB%8Da+Tam+Thanh/@15.6030913,108.5348098,15z/data=!4m9!1m2!2m1!1zTMOgbmcgYsOtY2ggaOG7jWEgVGFtIFRoYW5o!3m5!1s0x3169db944cfa9265:0x178f0a22c6deb046!8m2!3d15.6030913!4d108.5435645!15sChtMw6BuZyBiw61jaCBo4buNYSBUYW0gVGhhbmiSARJ0b3VyaXN0X2F0dHJhY3Rpb24?hl=vi-VN",locationName:"Thanh Ni\xean, Tp. Tam K\u1ef3, Qu\u1ea3ng Nam, Vi\u1ec7t Nam",location:{lng:"108.22003100773817",lat:"16.06073174838991"}},{id:"45308854910",title:"R\u1ea1n Nam \xd4",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/ran-nam-o-da-nang.jpg",imageDesc:"R\u1ea1n Nam \xd4 \u0110\xe0 N\u1eb5ng",description:"V\u1edbi nh\u1eefng h\xf2n \u0111\xe1 ph\u1ee7 \u0111\u1ea7y r\xeau xanh, l\xe0n n\u01b0\u1edbc trong veo ph\u1eb3ng l\u1eb7ng, r\u1ea5t \u0111\u1ed7i h\u1eefu \n    t\xecnh v\xe0 th\u01a1 m\u1ed9ng, \u0111\xe2y l\xe0 m\u1ed9t thi\xean \u0111\u01b0\u1eddng du l\u1ecbch khi\u1ebfn b\u1ea1n kh\xf4ng kh\u1ecfi ng\u1ee1 ng\xe0ng khi \u0111\u1eb7t ch\xe2n \u0111\u1ebfn.\n    <br/>\n    \u0110\u1ebfn \u0111\xe2y, b\u1ea1n c\xf2n c\xf3 th\u1ec3 \u0111\u1ec3 c\u1eafm tr\u1ea1i l\u1ea1i qua \u0111\xeam \u0111\u1ec3 ng\u1eafm nh\xecn b\xecnh minh t\u1ea1i b\xe3i bi\u1ec3n r\u1ed9ng l\u1edbn, \n    c\xe2u c\xe1 v\xe0 tha h\u1ed3 ch\u1ebf bi\u1ebfn \u0111\u1ee7 m\xf3n \u0103n v\u1edbi chi\u1ebfn l\u1ee3i ph\u1ea9m c\u1ee7a m\xecnh, v\xec th\u1ebf h\xe3y x\xe1ch balo l\xean v\xe0 \u0111i th\xf4i!!!",locationLink:"https://www.google.com/maps/place/R%E1%BA%A1n+Nam+%C3%94/@16.1177177,108.1309847,17z/data=!3m1!4b1!4m5!3m4!1s0x31421f581f4c250b:0x90b2dcadf1d415f0!8m2!3d16.1177177!4d108.1309847?hl=vi-VN",locationName:"Nam \xd4 1, qu\u1eadn Li\xean Chi\u1ec3u, th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng",location:{lng:"108.1309847",lat:"16.1177177"}},{id:"22176237266",title:"Gi\u1ebfng Tr\u1eddi",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/gieng-troi-da-nang.jpg",imageDesc:"Gi\u1ebfng tr\u1eddi \u0110\xe0 N\u1eb5ng",description:"Nh\u1eefng b\u1ea1n th\xedch phi\xeau l\u01b0u v\xe0 m\u1ea1o hi\u1ec3m \u0111\u1eebng b\u1ecf qua Gi\u1ebfng Tr\u1eddi nh\xe9! V\xec \u0111\xe2y l\xe0 \u0111\u1ecba \u0111i\u1ec3m \n    n\u1eb1m trong c\xe1nh r\u1eebng nguy\xean sinh thu\u1ed9c huy\u1ec7n H\xf2a Vang. T\u1edbi \u0111\xe2y, b\u1ea1n s\u1ebd nghe th\u1ea5y ti\u1ebfng su\u1ed1i ch\u1ea3y r\xf3c r\xe1ch,\n     ti\u1ebfng chim h\xf3t l\xedu lo, l\xe0m \u0111ang \u0111i m\u1ecdi lo toan, m\u1ec7t m\u1ecfi c\u1ee7a b\u1ea1n.",locationLink:"https://www.google.com/maps/place/Gi%E1%BA%BFng+Tr%E1%BB%9Di/@16.0347599,107.9909156,17z/data=!3m1!4b1!4m5!3m4!1s0x3141f6831262b307:0xa64c6ed6f98b579b!8m2!3d16.0347599!4d107.9909156?hl=vi-VN",locationName:"x\xe3 H\xf2a Ninh, huy\u1ec7n H\xf2a Vang, \u0110\xe0 N\u1eb5ng",location:{lng:"107.9909156",lat:"16.0347599"}},{id:"41215850540",title:"R\u1eebng th\xf4ng B\u1ed3 B\u1ed3",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/rung-thong-bo-bo-da-nang.jpg",imageDesc:"R\u1eebng th\xf4ng B\u1ed3 B\u1ed3 \u0110\xe0 N\u1eb5ng",description:"Th\u1eadt l\xe0 ti\u1ec7n l\u1ee3i v\u1eeba \u0111i \u0110\xe0 N\u1eb5ng m\xe0 v\u1eeba c\xf3 th\u1ec3 c\u1ea3m nh\u1eadn \u0111\u01b0\u1ee3c khung c\u1ea3nh \n    gi\u1ed1ng nh\u01b0 \u0110\xe0 L\u1ea1t. \u0110\u1ecba \u0111i\u1ec3m n\xe0y n\u1eb1m \u1edf v\xf9ng ngo\u1ea1i \xf4 t\u0129nh l\u1eb7ng c\xf3 kh\xf4ng kh\xed y\xean b\xecnh th\xe1ng m\u1ea5y \n    v\xe0 mang m\u1ed9t v\u1ebb \u0111\u1eb9p hoang s\u01a1 quy\u1ebfn r\u0169. \u0110\u01b0\u1ee3c xem l\xe0 \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i th\xedch h\u1ee3p \u0111\u1ec3 d\xe3 ngo\u1ea1i, c\u1eafm tr\u1ea1i, \n    t\u1ed5 ch\u1ee9c picnic b\xean h\u1ed9i b\u1ea1n th\xe2n hay gia \u0111\xecnh.",locationLink:"https://www.google.com/maps/place/%C4%91%E1%BB%93i+B%E1%BB%93+B%E1%BB%93/@15.9186608,108.1481266,14z/data=!4m9!1m2!2m1!1zUuG7q25nIHRow7RuZyBC4buTIELhu5MgxJDDoCBO4bq1bmc!3m5!1s0x314204b88efc7637:0xbd0df21b76b8b108!8m2!3d15.9186608!4d108.1656361!15sCiNS4burbmcgdGjDtG5nIELhu5MgQuG7kyDEkMOgIE7hurVuZ1olIiNy4burbmcgdGjDtG5nIGLhu5MgYuG7kyDEkcOgIG7hurVuZ5IBBHBlYWuaASRDaGREU1VoTk1HOW5TMFZKUTBGblNVTkJiSEppWVhkM1JSQUI?hl=vi-VN",locationName:"x\xe3 \u0110i\u1ec7n Ti\u1ebfn, \u0110i\u1ec7n B\xe0n, Qu\u1ea3ng Nam (c\xe1ch th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng 25 km)",location:{lng:"108.1481266",lat:"15.9186608"}},{id:"37281954950",title:"L\xe0ng c\u1ed5 Phong Nam",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/lang-co-phong-nam.jpg",imageDesc:"L\xe0ng c\u1ed5 Phong Nam",description:"H\xe3y gh\xe9 th\u0103m n\u01a1i ch\xf4n rau c\u1eaft r\u1ed1n c\u1ee7a c\u1ee5 \xf4ng \xedch Khi\xeam - m\u1ed9t t\xe0i n\u0103ng trong l\u1ecbch s\u1eed Vi\u1ec7t Nam\n     h\u01a1n 100 tu\u1ed5i n\xe0y, b\u1ea1n s\u1ebd c\xf3 c\u1ea3m gi\xe1c nh\u01b0 \u0111ang quay ng\u01b0\u1ee3c v\u1ec1 th\u1eddi gian trong qu\xe1 kh\u1ee9. Ng\xf4i l\xe0ng ch\xe0o \u0111\xf3n \n     b\u1ea1n b\u1edfi khung c\u1ea3nh y\xean b\xecnh v\u1edbi nh\u1eefng h\xecnh \u1ea3nh h\u1ebft s\u1ee9c quen thu\u1ed9c t\u1ef1a m\u1ed9t b\u1ee9c tranh h\u1ed3n qu\xea. \n     T\u1edbi \u0111\xe2y \u0111\u1eebng qu\xean check in \u0110\xe0 N\u1eb5ng nh\u1eefng b\u1ee9c h\xecnh so deep nh\xe9!",locationLink:"https://www.google.com/maps/place/L%C3%A0ng+c%E1%BB%95+Phong+Nam/@15.9865505,108.1933323,17z/data=!3m1!4b1!4m5!3m4!1s0x31421b3a022c381d:0xf1091f8a1ae04521!8m2!3d15.9865258!4d108.1932907?hl=vi-VN",locationName:"X5PV+J8G, Phong L\u1ec7, H\xf2a Vang, \u0110\xe0 N\u1eb5ng",location:{lng:"108.1933323",lat:"15.9865505"}},{id:"33630923969",title:"Su\u1ed1i M\u01a1",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/suoi-mo-da-nang.jpg",imageDesc:"Su\u1ed1i M\u01a1 \u0110\xe0 N\u1eb5ng \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0111\xe0 n\u1eb5ng",description:"B\u1ea1n l\xe0 m\u1ed9t ng\u01b0\u1eddi y\xeau thi\xean nhi\xean v\xe0 mu\u1ed1n \u0111\u1eafm ch\xecm trong th\u1ebf gi\u1edbi ch\u1ec9 c\xf3 n\xfai r\u1eebng, \n    s\xf4ng su\u1ed1i? V\u1edbi su\u1ed1i m\u01a1, n\u01a1i mang \u0111\u1ebfn cho b\u1ea1n m\u1ed9t kh\xf4ng gian m\xe1t m\u1ebb, trong l\xe0nh c\xf9ng d\xf2ng th\xe1c n\u01b0\u1edbc \n    tung b\u1ecdt tr\u1eafng x\xf3a b\xean c\u1ea1nh h\u1ed3 khi\u1ebfn b\u1ea1n kh\xf4ng kh\u1ecfi \u1ea5n t\u01b0\u1ee3ng.",locationLink:"https://www.google.com/maps/place/Suoi+Mo+Garden/@15.9964899,107.9953379,17z/data=!3m1!4b1!4m5!3m4!1s0x3141f6fe85b389ed:0x495a965ec813f08f!8m2!3d15.9964899!4d107.9953379?hl=vi-VN",locationName:"x\xe3 H\xf2a Ninh, huy\u1ec7n H\xf2a Vang, \u0110\xe0 N\u1eb5ng",location:{lng:"107.9953379",lat:"15.9964899"}},{id:"49492376663",title:"Ch\u1ee3 c\u1ed3n \u0110\xe0 N\u1eb5ng",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/Cho-con-da-nang.jpg",imageDesc:"Ch\u1ee3 C\u1ed3n \u0110\xe0 N\u1eb5ng",description:"\u0110\xe2y l\xe0 khu ch\u1ee3 c\xf3 th\u1ec3 n\xf3i l\xe0 l\u1edbn v\xe0 n\u1ed5i ti\u1ebfng nh\u1ea5t \u0110\xe0 N\u1eb5ng v\xe0 \u0111\u01b0\u1ee3c m\u1ec7nh danh \n    l\xe0 thi\xean \u0111\u01b0\u1eddng \u1ea9m th\u1ef1c, \n    thi\xean \u0111\u01b0\u1eddng mua s\u1eafm. B\u1ea1n h\xe3y \u0111\u1ebfn Ch\u1ee3 C\u1ed3n v\xe0 tr\u1ea3i nghi\u1ec7m ngay nh\xe9!",locationLink:"https://www.google.com/maps/place/Ch%E1%BB%A3+C%E1%BB%93n/@16.0680564,108.2121195,17z/data=!4m9!1m2!2m1!1zQ0jhu6IgQ-G7kk4gxJDDgCBO4bq0Tmc!3m5!1s0x314218358f50a1bb:0x4b451504a6ccd4df!8m2!3d16.0680269!4d108.2141621!15sChdDSOG7oiBD4buSTiDEkMOAIE7hurROZ1oZIhdjaOG7oyBj4buTbiDEkcOgIG7hurVuZ5IBBm1hcmtldA?hl=vi-VN",locationName:"290 \u0111\u01b0\u1eddng H\xf9ng V\u01b0\u01a1ng, H\u1ea3i Ch\xe2u 2, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2121195",lat:"16.0680564"}},{id:"5766846537",title:"B\xe1n \u0111\u1ea3o S\u01a1n Tr\xe0",typeLocation:"discover",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/ban-dao-son-tra-da-nang.jpg",imageDesc:"B\xe1n \u0111\u1ea3o S\u01a1n Tr\xe0 \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i t\u1ea1i \u0110\xe0 N\u1eb5ng \u0111\u1eb9p hoang s\u01a1 v\xe0 h\xf9ng v\u0129.",description:"B\u1ea1n kh\xf4ng n\xean b\u1ecf l\u1ee1 \u0111\u1ecba \u0111i\u1ec3m du l\u1ecbch \u0110\xe0 N\u1eb5ng mi\u1ec5n ph\xed n\xe0y nh\xe9! B\xe1n \u0111\u1ea3o S\u01a1n Tr\xe0 n\u1eb1m c\xe1ch \n    trung t\xe2m th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng ch\u1ec9 kho\u1ea3ng 10km, s\u1edf h\u1eefu khu r\u1eebng nguy\xean sinh xanh m\xe1t v\u1edbi ki\u1ec3u kh\xed h\u1eadu trong \n    l\xe0nh \u0111\u01b0\u1ee3c thi\xean nhi\xean ban t\u1eb7ng. Ngo\xe0i ra, b\xe1n \u0111\u1ea3o S\u01a1n Tr\xe0 c\xf2n thu h\xfat r\u1ea5t nhi\u1ec1u kh\xe1ch du l\u1ecbch nh\u1edd c\xf3 nh\u1eefng\n     c\u1ea3nh quan nh\u01b0 ng\xf4i ch\xf9a Linh \u1ee8ng v\u1edbi b\u1ee9c t\u01b0\u1ee3ng Ph\u1eadt l\u1edbn nh\u1ea5t khu v\u1ef1c \u0110\xf4ng Nam \xe1, b\xe3i R\u1ea1ng, m\u0169i Ngh\xea, \n     h\u1ed3 Xanh,\u2026\n     <br/>\n    Nh\u1edd \u0111\u1eb7c \u0111i\u1ec3m kh\xed h\u1eadu m\xe1t m\u1ebb quanh n\u0103m, khi\u1ebfn n\u01a1i \u0111\xe2y l\xe0 \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i th\xedch h\u1ee3p v\u1edbi c\xe1c ho\u1ea1t \u0111\u1ed9ng \n    ngh\u1ec9 d\u01b0\u1ee1ng v\xe0 tham quan cho du kh\xe1ch. B\xe3i R\u1ea1ng v\xe0 b\xe3i B\u1ee5t n\u1eb1m trong b\xe1n \u0111\u1ea3o S\u01a1n Tr\xe0 l\xe0 nh\u1eefng b\xe3i bi\u1ec3n \n    \u0111\u1eb9p nh\u1ea5t \u0110\xe0 N\u1eb5ng, mang l\u1ea1i cho du kh\xe1ch nh\u1eefng ph\xfat gi\xe2y th\u01b0 gi\xe3n, h\xf2a m\xecnh v\xe0o l\xe0n n\u01b0\u1edbc m\xe1t l\u1ea1nh. \u1ede \u0111\xe2y, \n    c\xf2n c\xf3 d\u1ecbch v\u1ee5 cho thu\xea ch\xf2i, gh\u1ebf n\u1eb1m tr\xean b\xe3i bi\u1ec3n v\xe0 d\u1ecbch v\u1ee5 l\u1eb7n ng\u1eafm san h\xf4 r\u1ea5t th\xfa v\u1ecb.",locationLink:"https://www.google.com/maps/place/B%C3%A1n+%C4%91%E1%BA%A3o+S%C6%A1n+Tr%C3%A0/@16.1266563,108.2756956,12z/data=!3m1!4b1!4m5!3m4!1s0x31423d72d1be522d:0x1e7339a6534e4e7!8m2!3d16.1159837!4d108.273341?hl=vi-VN",locationName:"qu\u1eadn S\u01a1n Tr\xe0, Th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng",location:{lng:"108.2756956",lat:"16.1266563"}},{id:"73779568661",title:"Ng\u0169 H\xe0nh S\u01a1n",typeLocation:"cultural",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/Nui-Ngu-Hanh-Son-Da-Nang.png",imageDesc:"N\xfai Ng\u0169 H\xe0nh S\u01a1n - \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i check in n\u1ed5i ti\u1ebfng \u1edf \u0110\xe0 N\u1eb5ng",description:"\u0110\u01b0\u1ee3c xem l\xe0 \u201cNam Thi\xean Thanh Th\u1eafng\u201d v\u1edbi 5 ng\u1ecdn n\xfai Kim, M\u1ed9c, Th\u1ee7y, H\u1ecfa, Th\u1ed5, \n    n\u01a1i \u0111\xe2y thu\u1ed9c danh s\xe1ch nh\u1eefng \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng mang n\xe9t t\xe2m linh. \u0110\u1ebfn v\u1edbi n\u01a1i \u0111\xe2y, \n    du kh\xe1ch kh\xf4ng ch\u1ec9 chinh ph\u1ee5c \u0111\u01b0\u1ee3c c\xe1c ng\u1ecdn n\xfai c\u1ee7a th\u1eafng c\u1ea3nh Ng\u0169 H\xe0nh S\u01a1n, m\xe0 c\xf2n \u0111\u01b0\u1ee3c tham quan \n    c\xe1c \u0111\u1ecba \u0111i\u1ec3m h\u1ea5p d\u1eabn kh\xe1c nh\u01b0 \u0111\u1ecba \u0111\u1ea1o n\xfai \u0111\xe1 ch\u1ed3ng, \u0111\u1ed9ng Huy\u1ec1n Kh\xf4ng, v\u1ecdng Giang \u0110\xe0i, \u0111\u1ed9ng \xc2m Ph\u1ee7,\u2026",locationLink:"https://www.google.com/maps/place/N%C3%BAi+Ng%C5%A9+H%C3%A0nh+S%C6%A1n+%C4%90%C3%A0+N%E1%BA%B5ng/@16.0034977,108.2636607,17z/data=!3m1!4b1!4m5!3m4!1s0x31420dd4e14b2edb:0xbc6e1faf738be4c5!8m2!3d16.0034977!4d108.2636607?hl=vi-VN",locationName:"s\u1ed1 81 \u0111\u01b0\u1eddng Huy\u1ec1n Tr\xe2n C\xf4ng Ch\xfaa, Ng\u0169 H\xe0nh S\u01a1n, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2636607",lat:"16.0034977"}},{id:"87976900632",title:"B\u1ea3o t\xe0ng \u0111i\xeau kh\u1eafc Ch\u0103m",typeLocation:"cultural",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bao-tang-dieu-khac-cham-da-nang.jpg",imageDesc:"B\u1ea3o t\xe0ng \u0111i\xeau kh\u1eafc Ch\u0103m",description:"B\u1ea3o t\xe0ng \u0111i\xeau kh\u1eafc ch\u0103m hay c\xf2n \u0111\u01b0\u1ee3c g\u1ecdi l\xe0 b\u1ea3o t\xe0ng ch\u0103m \u0111\u01b0\u1ee3c xem l\xe0 \u0111\u1ecba \u0111i\u1ec3m tham quan\n     n\u1ed5i b\u1eadt t\u1ea1i th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng. N\u01a1i n\xe0y g\xe2y \u1ea5n t\u01b0\u1ee3ng b\u1edfi kh\xf4ng gian b\xean trong v\u1edbi nhi\u1ec1u khung c\u1eeda s\u1ed5 \u0111\xf3n\n      \xe1nh s\xe1ng t\u1ef1 nhi\xean t\u1eeb b\xean ngo\xe0i v\u1edbi ki\u1ec3u ki\u1ebfn tr\xfac theo phong c\xe1ch Gothic Ph\xe1p. L\xe0 n\u01a1i tr\u01b0ng b\xe0y h\u01a1n 2000 \n      hi\u1ec7n v\u1eadt l\u1edbn nh\u1ecf t\u1eeb c\xe1c n\u1ec1n v\u0103n h\xf3a Ch\u0103m v\xe0 \u0111\u01b0\u1ee3c chia theo t\u1eebng khu v\u1ef1c nh\u01b0 ph\xf2ng M\u1ef9 S\u01a1n, ph\xf2ng Tr\xe0 Ki\u1ec7u, \n      ph\xf2ng \u0110\u1ed3ng D\u01b0\u01a1ng,\u2026 ",locationLink:"https://www.google.com/maps/place/B%E1%BA%A3o+t%C3%A0ng+%C4%90i%C3%AAu+kh%E1%BA%AFc+Ch%C4%83m+%C4%90%C3%A0+N%E1%BA%B5ng/@16.060681,108.2235363,17z/data=!3m1!4b1!4m5!3m4!1s0x314219cdb3006a2d:0x62ca993f60c3a12c!8m2!3d16.0606844!4d108.2235306?hl=vi-VN",locationName:"s\u1ed1 02 \u0111\u01b0\u1eddng 2 th\xe1ng 9, B\xecnh Hi\xean, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2235363",lat:"16.060681"}},{id:"78033227944",title:"B\u1ea3o t\xe0ng tranh 3D",typeLocation:"cultural",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bao-tang-tranh-3d.jpg",imageDesc:"B\u1ea3o t\xe0ng tranh 3D, \u0110\xe0 N\u1eb5ng",description:"B\u1ea3o t\xe0ng tranh 3D l\xe0 s\u1ef1 k\u1ebft h\u1ee3p tinh t\u1ebf gi\u1eefa h\xecnh \u1ea3nh, \xe2m thanh v\xe0 \xe1nh s\xe1ng, t\u1ea1o n\xean nh\u1eefng khung c\u1ea3nh s\u1ed1ng \u0111\u1ed9ng nh\u01b0 th\u1eadt. C\xe1c b\u1ee9c tranh \u0111\u01b0\u1ee3c v\u1ebd l\xean t\u01b0\u1eddng, s\xe0n nh\xe0 v\xe0 tr\u1ea7n nh\xe0. B\u1ea1n c\xf3 th\u1ec3 th\u1ecfa s\u1ee9c t\u1ea1o d\xe1ng c\xf9ng ng\u01b0\u1eddi th\xe2n v\xe0 b\u1ea1n b\xe8, c\xf9ng \u0111\u1eafm ch\xecm trong th\u1ebf gi\u1edbi c\u1ee7a nh\u1eefng m\u1ed9ng m\u01a1 v\xe0 tr\xed t\u01b0\u1edfng t\u01b0\u1ee3ng. Nh\u1eefng \u0111i\u1ec1u \u0111\xf3 ch\xednh l\xe0 l\xfd do khi\u1ebfn cho b\u1ea3o t\xe0ng tranh 3D \u0110\xe0 N\u1eb5ng l\xe0 m\u1ed9t trong nh\u1eefng \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng \u0111\u01b0\u1ee3c nhi\u1ec1u ng\u01b0\u1eddi s\u0103n \u0111\xf3n.",locationLink:"https://www.google.com/maps/place/B%E1%BA%A3o+t%C3%A0ng+3D+Art+In+Paradise+%C4%90%C3%A0+N%E1%BA%B5ng/@16.0956067,108.2428156,17z/data=!3m1!4b1!4m5!3m4!1s0x314217f750645271:0x91c392fc753f0fb0!8m2!3d16.0956067!4d108.2428156?hl=vi-VN",locationName:"C2 - 10 Tr\u1ea7n Nh\xe2n t\xf4ng, qu\u1eadn S\u01a1n Tr\xe0, Th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng  ",location:{lng:"108.2428156",lat:"16.0956067"}},{id:"47557823325",title:"B\u1ea3o t\xe0ng \u0110\xe0 N\u1eb5ng",typeLocation:"cultural",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bao-tang-da-nang.jpg",imageDesc:"B\u1ea3o t\xe0ng \u0110\xe0 N\u1eb5ng",description:"B\u1ea3o t\xe0ng \u0110\xe0 N\u1eb5ng l\xe0 n\u01a1i l\u01b0u gi\u1eef nh\u1eefng hi\u1ec7n v\u1eadt l\u1ecbch s\u1eed, nh\u1eefng m\u1eabu v\u1eadt \u0111\u1ecba ch\u1ea5t v\xe0 b\u1ed9 s\u01b0u t\u1eadp v\u0103n h\xf3a Sa Hu\u1ef3nh, \u0111\u1ed3 g\u1ed1m s\u1ee9, hi\u1ec7n v\u1eadt v\u0103n h\xf3a bi\u1ec3n. H\u01a1n th\u1ebf n\u1eefa, \u0111\xe2y l\xe0 n\u01a1i mang t\xednh gi\xe1o d\u1ee5c truy\u1ec1n th\u1ed1ng y\xeau n\u01b0\u1edbc v\xe0 l\xe0 n\u01a1i gi\u1edbi thi\u1ec7u h\xecnh \u1ea3nh Vi\u1ec7t Nam \u0111\u1ebfn b\u1ea1n b\xe8 qu\u1ed1c t\u1ebf.",locationLink:"https://www.google.com/maps/place/B%E1%BA%A3o+t%C3%A0ng+%C4%90%C3%A0+N%E1%BA%B5ng/@16.0763364,108.2216104,17z/data=!3m1!4b1!4m5!3m4!1s0x3142183691882913:0xc9180a3982a9ef58!8m2!3d16.0763364!4d108.2216104?hl=vi-VN",locationName:"24 \u0111\u01b0\u1eddng Tr\u1ea7n Ph\xfa Th\u1ea1ch Thang, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2216104",lat:"16.0763364"}},{id:"4176434353",title:"B\u1ea3o t\xe0ng Ho\xe0ng Sa",typeLocation:"cultural",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bao-tang-hoang-sa.jpg",imageDesc:"B\u1ea3o t\xe0ng Ho\xe0ng Sa \u0110\xe0 N\u1eb5ng",description:"B\u1ea3o t\xe0ng Ho\xe0ng Sa l\xe0 m\u1ed9t \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng m\xe0 du kh\xe1ch kh\xf4ng n\xean b\u1ecf qua, n\u01a1i \u0111\xe2y nh\u01b0 m\u1ed9t qu\u1ea7n \u0111\u1ea3o Ho\xe0ng Sa thu nh\u1ecf. L\xe0 m\u1ed9t kho t\xe0ng ch\u1ee9ng minh kh\u1eb3ng \u0111\u1ecbnh ch\u1ee7 quy\u1ec1n qu\u1ea7n \u0111\u1ea3o thi\xeang li\xeang c\u1ee7a t\u1ed5 qu\u1ed1c. T\u1ea1i \u0111\xe2y c\xf3 c\u1ea3 h\u1ec7 th\u1ed1ng t\u01b0 li\u1ec7u h\xecnh \u1ea3nh sinh \u0111\u1ed9ng gi\xfap kh\xe1ch t\u1edbi tham quan c\xf3 th\u1ec3 hi\u1ec3u r\xf5 v\u1ec1 l\u1ecbch s\u1eed qu\u1ea7n \u0111\u1ea3o Ho\xe0ng Sa.",locationLink:"https://www.google.com/maps/place/Nh%C3%A0+Tr%C6%B0ng+b%C3%A0y+Ho%C3%A0ng+Sa/@16.0934606,108.2512793,17z/data=!3m1!4b1!4m5!3m4!1s0x314217efb90f57a3:0xa8ad6d500dfd2d46!8m2!3d16.0934695!4d108.2512505?hl=vi-VN",locationName:"Ho\xe0ng Sa, Th\u1ecd Quang, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2512793",lat:"16.0934606"}},{id:"81131312099",title:"L\xe0ng \u0111\xe1 m\u1ef9 ngh\u1ec7 Non N\u01b0\u1edbc",typeLocation:"cultural",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/lang-da-my-nghe-non-nuoc-da-nang.jpg",imageDesc:"L\xe0ng \u0111\xe1 M\u1ef9 Ngh\u1ec7 non n\u01b0\u1edbc \u0110\xe0 N\u1eb5ng",description:"N\u1eb1m trong top c\xe1c <strong>\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng </strong>\u0111\u01b0\u1ee3c kh\xe1ch du l\u1ecbch k\xfd tham d\u1ef1 \u0111\xf4ng nh\u1ea5t, ng\xf4i l\xe0ng v\u1edbi l\u1ecbch s\u1eed h\xecnh th\xe0nh v\xe0 ph\xe1t tri\u1ec3n h\u01a1n 400 n\u0103m, \u0111\u01b0\u1ee3c c\xf4ng nh\u1eadn l\xe0 di s\u1ea3n v\u0103n h\xf3a phi v\u1eadt th\u1ec3 c\u1ea5p qu\u1ed1c gia. \u0110\u1ebfn n\u01a1i \u0111\xe2y du kh\xe1ch kh\xf4ng ch\u1ec9 tham quan m\xe0 c\xf2n c\xf3 th\u1ec3 mua nh\u1eefng s\u1ea3n ph\u1ea9m b\u1eb1ng \u0111\xe1 v\u1ec1 l\xe0m qu\xe0, \u0111\u1eb7c bi\u1ec7t l\xe0ng \u0111\xe1 m\u1ef9 ngh\u1ec7 Non N\u01b0\u1edbc n\u1eb1m r\u1ea5t g\u1ea7n Danh Th\u1eafng Ng\u0169 H\xe0nh S\u01a1n \u0111\u1ea5y nh\xe9!",locationLink:"https://www.google.com/maps/place/%C4%90%C3%A1+m%E1%BB%B9+ngh%E1%BB%87+non+n%C6%B0%E1%BB%9Bc+%C4%91%C3%A0+n%E1%BA%B5ng/@16.0036074,108.26569,17z/data=!3m1!4b1!4m5!3m4!1s0x314210c89e165af1:0xf261627b81df12d0!8m2!3d16.0036294!4d108.2656766?hl=vi-VN",locationName:"ch\xe2n n\xfai Ng\u0169 H\xe0nh S\u01a1n, H\xf2a H\u1ea3i, Ng\u0169 H\xe0nh S\u01a1n, \u0110\xe0 N\u1eb5ng",location:{lng:"108.26569",lat:"16.0036074"}},{id:"75816154809",title:"Cung V\u0103n h\xf3a th\u1ec3 thao Ti\xean S\u01a1n",typeLocation:"cultural",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cung-van-hoa-the-thao-tien-son.jpg",imageDesc:"Cung V\u0103n h\xf3a th\u1ec3 thao Ti\xean S\u01a1n",description:"N\u1ebfu k\u1ec3 t\xean nh\u1eefng c\xf4ng tr\xecnh ki\u1ebfn tr\xfac \u0111\u1ed9c l\u1ea1 \u1edf th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng, ph\u1ea3i k\u1ec3 \u0111\u1ebfn cung th\u1ec3 thao Ti\xean S\u01a1n hay c\xf2n g\u1ecdi l\xe0 \u0111\u0129a bay kh\u1ed5ng l\u1ed3. Kh\xf4ng ch\u1ec9 v\u1eady, cung th\u1ec3 thao Ti\xean S\u01a1n c\xf2n \u0111\u01b0\u1ee3c nhi\u1ec1u b\u1ea1n tr\u1ebb th\u01b0\u1eddng xuy\xean lui t\u1edbi \u0111\u1ec3 c\xf9ng nhau h\xe1t h\xf2 v\xe0 \u0103n u\u1ed1ng, \u0111\u1eb7c bi\u1ec7t \u0111\xe2y l\xe0 thi\xean \u0111\u01b0\u1eddng s\u1ed1ng \u1ea3o c\u1ee7a c\xe1c t\xedn \u0111\u1ed3, b\u1edfi n\xf3 c\xf3 nhi\u1ec1u g\xf3c ch\u1ee5p \u0111\u1eb9p v\xe0 ngh\u1ec7 thu\u1eadt.",locationLink:"https://www.google.com/maps/place/Cung+th%E1%BB%83+thao+Ti%C3%AAn+S%C6%A1n/@16.0368435,108.2263914,17z/data=!3m1!4b1!4m5!3m4!1s0x314219e91ac18ded:0x62fbb8d47ec96199!8m2!3d16.0368435!4d108.2263914?hl=vi-VN",locationName:"Phan \u0110\u0103ng L\u01b0u, H\xf2a C\u01b0\u1eddng, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2263914",lat:"16.0368435"}},{id:"70293316167",title:"C\u1ea7u V\xe0ng",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cau-vang-da-nang.png",imageDesc:"C\u1ea7u V\xe0ng \u0110\xe0 N\u1eb5ng - \u0111\u1ecba \u0111i\u1ec3m check in n\u1ed5i ti\u1ebfng c\u1ee7a \u0110\xe0 N\u1eb5ng",description:"C\u1ea7u v\xe0ng l\xe0 <strong>\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng </strong>\u0111\u01b0\u1ee3c r\u1ea5t nhi\u1ec1u du kh\xe1ch quan t\xe2m trong th\u1eddi gian g\u1ea7n \u0111\xe2y, s\u1edf h\u1eefu ki\u1ebfn tr\xfac \u0111\u1ed9c l\u1ea1 v\u1edbi \u0111\xf4i b\xe0n tay kh\u1ed5ng l\u1ed3 n\xe2ng \u0111\u1ee1 to\xe0n b\u1ed9 c\xe2y c\u1ea7u tr\u1ea3i d\xe0i nh\u01b0 m\u1ed9t d\u1ea3i l\u1ee5a. \u1ede tr\xean c\u1ea7u, b\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c ng\u1eafm nh\xecn th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng t\u1eeb xa v\xe0 c\u1ea3m gi\xe1c nh\u01b0 l\xe0 m\xecnh l\u1ea1c trong ch\u1ed1n b\u1ed3ng lai ti\xean c\u1ea3nh, th\u1eadt tuy\u1ec7t ph\u1ea3i kh\xf4ng n\xe0o?",locationLink:"https://www.google.com/maps/place/C%E1%BA%A7u+V%C3%A0ng+-+B%C3%A0+N%C3%A0+Hills/@15.9950734,107.9963662,17z/data=!3m1!4b1!4m5!3m4!1s0x3141f7f503abc03b:0x9d023df40751a196!8m2!3d15.994992!4d107.9963497?hl=vi-VN",locationName:"x\xe3 H\xf2a Vang, huy\u1ec7n H\xf2a Vang, \u0110\xe0 N\u1eb5ng",location:{lng:"107.9963662",lat:"15.9950734"}},{id:"77713653030",title:"B\xe3i c\u1ecf ch\xe1y",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bai-co-chay-da-nang-5.jpg",imageDesc:"B\xe3i c\u1ecf ch\xe1y - \u0111i\u1ec3m check in l\xe3ng m\u1ea1n t\u1ea1i \u0110\xe0 N\u1eb5ng",description:"\u0110\xe2y l\xe0 <strong>\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng </strong>thu h\xfat r\u1ea5t nhi\u1ec1u b\u1ea1n tr\u1ebb \u0111\u1ebfn \u0111\xe2y tham quan v\xe0 ch\u1ee5p h\xecnh. N\u01a1i \u0111\xe2y \u0111\u1eb9p nh\u1ea5t v\xe0o cu\u1ed1i h\xe8 ho\u1eb7c \u0111\u1ea7u thu v\xec hoa n\u1edf r\u1ef1c r\u1ee1 v\xe0 \u0111\u1eb9p nh\u1ea5t. \u0110\u1ee9ng gi\u1eefa m\u1ed9t kh\xf4ng gian th\u01a1 m\u1ed9ng, ng\u1eafm nh\xecn h\u1ed3 Xanh r\u1ed9ng l\u1edbn v\xe0 bi\u1ec3n S\u01a1n Tr\xe0, b\u1ea1n s\u1ebd c\xf3 ngay c\u1ea3m gi\xe1c y\xean b\xecnh \u0111\u1ebfn l\u1ea1 th\u01b0\u1eddng\u2026",locationLink:"https://www.google.com/maps/place/B%C3%A3i+Ch%C3%A1y/@16.1009412,108.2687841,17z/data=!3m1!4b1!4m5!3m4!1s0x314217d915f40f77:0x3ddd2ed4a988a1ed!8m2!3d16.1009412!4d108.2687841?hl=vi-VN",locationName:"g\u1ea7n ch\xf9a Linh \u1ee8ng, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2687841",lat:"16.1009412"}},{id:"95210618094",title:"B\xe3i \u0111\xe1 Obama",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bai-da-obamo-da-nang-8.jpg",imageDesc:"B\xe3i \u0111\xe1 Obama - \u0110\xe0 N\u1eb5ng",description:"L\xe0 m\u1ed9t b\xe3i \u0111\xe1 hoang s\u01a1 thu\u1ed9c b\xe1n \u0111\u1ea3o S\u01a1n Tr\xe0, Obama \u0111\xe3 v\xe0 \u0111ang l\xe0 \u0111\u1ecba \u0111i\u1ec3m g\xe2y s\u1ed1t c\u1ee7a c\xe1c t\xedn \u0111\u1ed3 du l\u1ecbch. N\u01a1i \u0111\xe2y mang l\u1ea1i c\u1ea3m gi\xe1c b\xecnh y\xean v\xe0 trong veo v\u1edbi b\u1ea7u kh\xf4ng kh\xed d\u1ecbu d\xe0ng, mang l\u1ea1i s\u1ef1 tho\u1ea3i m\xe1i cho b\u1ea1n. \u0110\xe2y c\xf2n l\xe0 \u0111\u1ecba \u0111i\u1ec3m \u0111\u01b0\u1ee3c nhi\u1ec1u c\u1eb7p \u0111\xf4i ch\u1ecdn \u0111\u1ec3 l\xe0m n\xean b\u1ed9 \u1ea3nh c\u01b0\u1edbi \u0111\u1ea7y \xfd ngh\u0129a c\u1ee7a m\xecnh. Ngo\xe0i ra, du kh\xe1ch c\xf3 th\u1ec3 tho\u1ea3i m\xe1i ngh\u1ec9 ng\u01a1i b\u1eb1ng c\xe1ch thu\xea ch\xf2i v\xe0 c\xf9ng nhau \u0103n u\u1ed1ng, t\u1eafm bi\u1ec3n th\u1ea3 ga t\u1ea1i \u0111\xe2y.",locationLink:"Th\u1ecd Quang, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",locationName:"Th\u1ecd Quang, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",location:{lng:"108.30077082687228",lat:"16.09916622425755"}},{id:"29708546086",title:"Thu\u1eadn Ph\u01b0\u1edbc Field",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/thuan-phuoc-field-1.jpg",imageDesc:"Thu\u1eadn Ph\u01b0\u1edbc Field",description:"L\xe0 m\u1ed9t \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng, ch\u1ee5p \u1ea3nh \u0111\u1eb9p m\xe0 b\u1ea1n kh\xf4ng th\u1ec3 b\u1ecf qua. Nh\u01b0 m\u1ed9t H\xe0 Lan thu nh\u1ecf gi\u1eefa l\xf2ng th\xe0nh ph\u1ed1 \u0111\xe1ng s\u1ed1ng, \u0111\u1ebfn n\u01a1i \u0111\xe2y, b\u1ea1n s\u1ebd c\xf3 c\u1ea3m gi\xe1c nh\u01b0 s\u1ed1ng trong m\u1ed9t th\u1ebf gi\u1edbi c\u1ed5 t\xedch Ch\xe2u \xc2u xinh \u0111\u1eb9p, d\u01b0\u1edbi nh\u1eefng \xe1nh n\u1eafng chi\u1ec1u nh\u1eb9 nh\xe0ng, c\u1ea3m gi\xe1c th\u1eadt l\xe0 c\u1ed5 \u0111i\u1ec3n v\xe0 th\xfa v\u1ecb bi\u1ebft bao. ",locationLink:"https://www.google.com/maps/place/Khu+%C4%90i%E1%BB%87n+%E1%BA%A2nh+v%C3%A0+D%C3%A3+Ngo%E1%BA%A1i+%C4%90%C3%A0+N%E1%BA%B5ng,+Nguy%E1%BB%85n+H%E1%BB%AFu+An,+N%E1%BA%A1i+Hi%C3%AAn+%C4%90%C3%B4ng,+S%C6%A1n+Tr%C3%A0,+%C4%90%C3%A0+N%E1%BA%B5ng+550000,+Vi%E1%BB%87t+Nam/@16.1012417,108.2259294,14z/data=!3m1!4b1!4m5!3m4!1s0x31421805882d0b87:0xb5aab2cee6f31a56!8m2!3d16.101242!4d108.2259294?hl=vi-VN",locationName:"Nguy\u1ec5n H\u1eefu An, N\u1ea1i Hi\xean \u0110\xf4ng, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2259294",lat:"16.1012417"}},{id:"30373942220",title:"\u0110\xe8o H\u1ea3i V\xe2n",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/deo-hai-van.jpg",imageDesc:"\u0110\xe8o H\u1ea3i V\xe2n - \u0111i\u1ec3m check in n\u1ed5i ti\u1ebfng \u0110\xe0 N\u1eb5ng",description:"T\xedn \u0111\u1ed3 du l\u1ecbch ph\u01b0\u1ee3t \u0110\xe0 N\u1eb5ng th\xec kh\xf4ng th\u1ec3 b\u1ecf qua \u0111\xe8o H\u1ea3i V\xe2n \u0111\u01b0\u1ee3c v\xec \u0111\xe2y m\u1ec7nh danh l\xe0 \u0110\u1ec7 nh\u1ea5t H\xf9ng Quang v\u1edbi c\u1ea3nh quan tuy\u1ec7t \u0111\u1eb9p c\xf9ng \u0111\u01b0\u1eddng \u0111\xe8o hi\u1ec3m tr\u1edf nh\u1ea5t Vi\u1ec7t Nam. Mang l\u1ea1i cho b\u1ea1n c\u1ea3m gi\xe1c \u0111\u1ea7u ti\xean l\xe0 h\xe0o h\u1ee9ng t\xf2 m\xf2 khi xu\u1ea5t ph\xe1t t\u1eeb ch\xe2n \u0111\xe8o, \u0111\u1ebfn \u0111o\u1ea1n gi\u1eefa \u0111\u1ec1u s\u1ebd l\xe0 s\u1ef1 h\u1ed3i h\u1ed9p v\xe0 lo l\u1eafng \u0111\u1ebfn ng\u1ed9p th\u1edf khi lu\u1ed3n l\xe1ch qua nh\u1eefng \u0111o\u1ea1n u\u1ed1n \xe9o cong queo. V\xe0 cu\u1ed1i c\xf9ng s\u1ebd l\xe0 c\u1ea3m gi\xe1c b\u1ea5t ng\u1edd tr\u01b0\u1edbc khung c\u1ea3nh thi\xean nhi\xean h\xf9ng v\u0129 tuy\u1ec7t \u0111\u1eb9p m\xe0 b\u1ea1n c\xf3 th\u1ec3 nh\xecn th\u1ea5y ngay tr\u01b0\u1edbc m\u1eaft nh\u01b0 th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng t\u1eeb xa V\u1ecbnh l\u0103ng c\xf4 tuy\u1ec7t \u0111\u1eb9p nh\u01b0 tranh.",locationLink:"https://www.google.com/maps/place/%C4%90%C3%A8o+H%E1%BA%A3i+V%C3%A2n/@16.1999997,108.133333,14z/data=!3m1!4b1!4m5!3m4!1s0x31422151a4984555:0x9a66217b26b3f759!8m2!3d16.2!4d108.133333?hl=vi-VN",locationName:"ranh gi\u1edbi gi\u1eefa t\u1ec9nh th\u1eeba Thi\xean Hu\u1ebf v\xe0 th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng ",location:{lng:"108.133333",lat:"16.1999997"}},{id:"62856526726",title:"C\xe2y \u0111a ng\xe0n tu\u1ed5i",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cay-da-ngan-tuoi-da-nang.jpg",imageDesc:"C\xe2y \u0111a ng\xe0n tu\u1ed5i \u0110\xe0 N\u1eb5ng",description:"<strong>\u0110\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng </strong>kh\xf4ng th\u1ec3 thi\u1ebfu trong h\xe0nh tr\xecnh kh\xe1m ph\xe1 th\xe0nh ph\u1ed1 \u0111\xe1ng s\u1ed1ng, ch\xednh l\xe0 c\xe2y \u0111a ng\xe0n n\u0103m tu\u1ed5i n\xe0y. \u0110\xe2y l\xe0 \u0111i\u1ec3m d\u1eebng ch\xe2n th\xfa v\u1ecb cho c\xe1c b\u1ea1n th\xedch kh\xe1m ph\xe1 thi\xean nhi\xean, n\xf3 n\u1eb1m \u1edf ph\xeda \u0111\xf4ng b\xe1n \u0111\u1ea3o S\u01a1n Tr\xe0 v\u1edbi m\u1ed9t b\xean l\xe0 n\xfai \u0111\xe1 c\xf2n m\u1ed9t b\xean l\xe0 bi\u1ec3n c\u1ea3.",locationLink:"https://www.google.com/maps/place/C%C3%A2y+%C4%90a+Ng%C3%A0n+N%C4%83m/@16.1225629,108.3317224,17z/data=!3m1!4b1!4m5!3m4!1s0x31423de2829a7adb:0x7b42afa6407a77f7!8m2!3d16.1225629!4d108.3317224?hl=vi-VN",locationName:"b\xe1n \u0111\u1ea3o S\u01a1n Tr\xe0, Th\u1ecd Quang, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",location:{lng:"108.3317224",lat:"16.1225629"}},{id:"49396497912",title:"Ng\xf4i nh\xe0 \xfap ng\u01b0\u1ee3c",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/ngoi-nha-up-nguoc-da-nang.jpg",imageDesc:"Ng\xf4i nh\xe0 \xfap ng\u01b0\u1ee3c - \u0111\u1ecba \u0111i\u1ec3m check in \u0110\xe0 N\u1eb5ng c\u1ef1c vui v\xe0 hot.",description:"\u0110\xe2y l\xe0 m\xf4 h\xecnh nh\xe0 \xfap ng\u01b0\u1ee3c \u0111\u1ea7u ti\xean c\u1ee7a th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng, m\u1ecdi th\u1ee9 \u1edf \u0111\xe2y \u0111\u01b0\u1ee3c ho\xe0n to\xe0n \u0111\u1ea3o ng\u01b0\u1ee3c t\u1eeb t\u1ee7 l\u1ea1nh, m\xe1y gi\u1eb7t, gi\u01b0\u1eddng ng\u1ee7, \u0111\u1ebfn c\u1ea3 sofa, t\u1ea5t c\u1ea3 \u0111\u1ec1u n\u1eb1m tr\xean tr\u1ea7n nh\xe0. T\u1ea1i \u0111\xe2y, c\xf3 10 c\u0103n ph\xf2ng kh\xe1c nhau, m\u1ed7i c\u0103n ph\xf2ng \u0111\u1ec1u c\xf3 nh\u1eefng chi ti\u1ebft trang tr\xed s\u1eafp x\u1ebfp v\xf4 c\xf9ng t\u1ec9 m\u1ec9 v\xe0 tinh t\u1ebf, du kh\xe1ch \u0111\u1ee9ng \u1edf g\xf3c n\xe0o c\u0169ng c\xf3 \u1ea3nh s\u1ed1ng \u1ea3o mang v\u1ec1. V\u1eady c\xf2n ch\u1ea7n ch\u1eeb g\xec n\u1eefa, h\xe3y \u0111\u1ebfn ngay v\u1edbi ng\xf4i nh\xe0 \xfap ng\u01b0\u1ee3c \u0111\u1ec3 ch\u1ee5p cho m\xecnh nh\u1eefng t\u1ea5m h\xecnh \u0111\u1ed9c l\u1ea1 n\xe0o.",locationLink:"https://www.google.com/maps/place/Ng%C3%B4i+Nh%C3%A0+%C4%90%E1%BA%A3o+Ng%C6%B0%E1%BB%A3c+%C4%90%C3%A0+N%E1%BA%B5ng/@16.03878,108.2448585,17z/data=!3m1!4b1!4m5!3m4!1s0x3142175df3cf64ed:0xd6c749b2672602cf!8m2!3d16.0387794!4d108.2448588?hl=vi-VN",locationName:"44 H\u1ed3 Xu\xe2n H\u01b0\u01a1ng, Khu\xea M\u1ef9, Ng\u0169 H\xe0nh S\u01a1n, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2448585",lat:"16.03878"}},{id:"92996158476",title:"C\u1ea7u Thu\u1eadn Ph\u01b0\u1edbc",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cau-thuan-phuoc-da-nang.jpg",imageDesc:"C\u1ea7u Thu\u1eadn Ph\u01b0\u1edbc",description:"C\u1ea7u Thu\u1eadn Ph\u01b0\u1edbc l\xe0 c\u0169ng l\xe0 m\u1ed9t trong nh\u1eefng \u0111i\u1ec3m check in h\u1ea5p d\u1eabn du kh\xe1ch. Kh\xe1c bi\u1ec7t so v\u1edbi nh\u1eefng c\xe2y c\u1ea7u kh\xe1c, c\u1ea7u Thu\u1eadn Ph\u01b0\u1edbc tuy kh\xf4ng n\u1ed5i ti\u1ebfng b\u1eb1ng nh\u01b0ng l\u1ea1i mang m\u1ed9t v\u1ebb \u0111\u1eb9p tr\u1ea7m l\u1eafng, tinh t\u1ebf khi\u1ebfn du kh\xe1ch ph\u01b0\u01a1ng xa ph\u1ea3i l\u01b0u luy\u1ebfn. C\xe2y c\u1ea7u \u0111\u01b0\u1ee3c xem l\xe0 m\u1ed9t trong nh\u1eefng c\xe2y c\u1ea7u treo v\xf5ng d\xe0i nh\u1ea5t Vi\u1ec7t Nam v\u1edbi t\u1ed5ng chi\u1ec1u d\xe0i g\u1ea7n 2 km. \u0110\u1ebfn \u0111\xe2y v\xe0o bu\u1ed5i t\u1ed1i, b\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c nh\xecn ng\u1eafm c\u1ea7u Thu\u1eadn Ph\u01b0\u1edbc v\xf4 c\xf9ng r\u1ef1c r\u1ee1 v\u1edbi v\xf4 s\u1ed1 nh\u1eefng \xe1nh \u0111\xe8n m\xe0u v\xe0 ng\u1eafm nh\xecn c\u1ea3nh th\xe0nh ph\u1ed1 hoa l\u1ec7 v\u1ec1 \u0111\xeam.",locationLink:"https://www.google.com/maps/place/C%E1%BA%A7u+Thu%E1%BA%ADn+Ph%C6%B0%E1%BB%9Bc/@16.0950642,108.2181178,17z/data=!4m5!3m4!1s0x314219c8c3eb6863:0x637a9991d9c6d3d5!8m2!3d16.0950591!4d108.2203065?hl=vi-VN",locationName:"C\u1ea7u Thu\u1eadn Ph\u01b0\u1edbc, Thu\u1eadn Ph\u01b0\u1edbc, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng 550000, Vi\u1ec7t Nam",location:{lng:"108.2181178",lat:"16.0950642"}},{id:"74172379705",title:"C\u1ea7u \u0111i b\u1ed9 Nguy\u1ec5n V\u0103n Tr\u1ed7i",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cau-nguyen-van-troi.jpg",imageDesc:"C\u1ea7u \u0111i b\u1ed9 Nguy\u1ec5n V\u0103n Tr\u1ed7i - \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0111\xe0 n\u1eb5ng",description:"\u0110\xe2y l\xe0 m\u1ed9t <strong>\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng </strong>kh\xf4ng c\xf2n xa l\u1ea1 \u0111\u1ed1i v\u1edbi c\xe1c b\u1ea1n tr\u1ebb. Kh\xe1c v\u1edbi nh\u1eefng c\xe2y c\u1ea7u kh\xe1c, c\u1ea7u Nguy\u1ec5n V\u0103n tr\u1ed7i l\xe0 c\u1ea7u \u0111i b\u1ed9  th\u01b0\u1eddng \u0111\u01b0\u1ee3c m\u1ecdi ng\u01b0\u1eddi l\u1ef1a ch\u1ecdn \u0111\u1ec3 t\u1ea3n b\u1ed9, ng\u1eafm c\u1ea3nh v\xe0 t\u1ee5 t\u1eadp \u0103n u\u1ed1ng r\u1ea5t th\xfa v\u1ecb v\xe0 \u0111ang d\u1ea7n tr\u1edf th\xe0nh \u0111\u1ecba \u0111i\u1ec3m ch\u1ee5p \u1ea3nh y\xeau th\xedch c\u1ee7a c\xe1c nhi\u1ebfp \u1ea3nh gia hay c\xe1c t\xedn \u0111\u1ed3 \u0111am m\xea s\u1ed1ng \u1ea3o.",locationLink:"https://www.google.com/maps/place/Nguy%E1%BB%85n+V%C4%83n+Tr%E1%BB%97i+Bridge,+%C4%90%C3%A0+N%E1%BA%B5ng+550000,+Vi%E1%BB%87t+Nam/@16.0502116,108.2299527,17z/data=!4m5!3m4!1s0x314219d9c23596bd:0x19d755779a2b23b7!8m2!3d16.0502116!4d108.2299527?hl=vi-VN",locationName:"Duy T\xe2n, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2299527",lat:"16.0502116"}},{id:"91164919481",title:"C\u1ea7u Tr\u1ea7n Th\u1ecb L\xfd",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/Cau-tran-thi-ly.jpeg",imageDesc:"C\u1ea7u Tr\u1ea7n Th\u1ecb L\xfd - \u0110\xe0 N\u1eb5ng",description:"N\u1ebfu \u0111\xe3 bi\u1ebft qua c\u1ea7u S\xf4ng H\xe0n v\xe0 c\u1ea7u R\u1ed3ng th\xec khi \u0111\u1ebfn vui ch\u01a1i t\u1ea1i \u0110\xe0 N\u1eb5ng du kh\xe1ch c\u0169ng \u0111\u1eebng b\u1ecf qua c\xe2y c\u1ea7u Tr\u1ea7n Th\u1ecb L\xfd. V\u1edbi chi\u1ec1u d\xe0i 700m n\u1ed1i li\u1ec1n hai b\u1edd s\xf4ng H\xe0n, mang thi\u1ebft k\u1ebf hi\u1ec7n \u0111\u1ea1i v\xe0 \u0111\u1ed9c \u0111\xe1o khi s\u1eed d\u1ee5ng h\u1ec7 th\u1ed1ng v\u0103ng d\xe2y 3 chi\u1ec1u, nh\xecn gi\u1ed1ng nh\u01b0 c\xe1nh bu\u1ed3m c\u0103ng gi\xf3 v\u01b0\u01a1n gi\u1eefa bi\u1ec3n kh\u01a1i. T\u1eeb \u0111\xe2y, b\u1ea1n c\xf3 th\u1ec3 ph\xf3ng t\u1ea7m m\u1eaft ng\u1eafm nh\xecn th\xe0nh ph\u1ed1 v\xe0 t\u1eadn h\u01b0\u1edfng l\xe0n gi\xf3 m\xe1t d\u1ecbu.",locationLink:"https://www.google.com/maps/place/C%E1%BA%A7u+Tr%E1%BA%A7n+Th%E1%BB%8B+L%C3%BD/@16.0502174,108.2289446,17z/data=!3m1!4b1!4m5!3m4!1s0x3142194116f58883:0x87dd93f9c20b9c30!8m2!3d16.0502174!4d108.2289446?hl=vi-VN",locationName:"H\xf2a C\u01b0\u1eddng, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2289446",lat:"16.0502174"}},{id:"77845794883",title:"T\u01b0\u1ee3ng C\xe1 ch\xe9p ho\xe1 r\u1ed3ng",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/Tuong-ca-chep-hoa-rong-da-nang.jpg",imageDesc:"T\u01b0\u1ee3ng C\xe1 Ch\xe9p H\xf3a R\u1ed3ng \u0110\xe0 N\u1eb5ng \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0111\xe0 n\u1eb5ng",description:"C\xe1 ch\xe9p h\xf3a r\u1ed3ng l\xe0 m\u1ed9t c\xe1i t\xean khi m\u1edbi nghe \u0111\u1ebfn s\u1ebd g\xe2y cho b\u1ea1n s\u1ef1 t\xf2 m\xf2 v\xe0 ch\xfa \xfd \u0111\xfang kh\xf4ng n\xe0o? \u0110\xe2y l\xe0 m\u1ed9t bi\u1ec3u t\u01b0\u1ee3ng m\u1edbi c\u1ee7a th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng, b\u1ea1n c\xf3 th\u1ec3 t\u1eadn m\u1eaft chi\xeam ng\u01b0\u1ee1ng b\u1ee9c t\u01b0\u1ee3ng phun n\u01b0\u1edbc t\u1eeb ph\xeda \u0111\u1ea7u r\u1ed3ng, v\u1eeba \u0111\u01b0\u1ee3c ng\u1eafm c\xe1 ch\xe9p h\xf3a r\u1ed3ng b\u1ed5 m\u1eaft qua s\u1ebd nh\xecn th\u1ea5y c\xe2y c\u1ea7u t\xecnh y\xeau, xa xa s\u1ebd l\xe0 c\u1ea7u R\u1ed3ng, ta n\xf3i ti\u1ec7n g\xec \u0111\xe2u \u1ea5y!",locationLink:"https://www.google.com/maps/place/T%C6%B0%E1%BB%A3ng+C%C3%A1+Ch%C3%A9p+h%C3%B3a+R%E1%BB%93ng/@16.0629429,108.2297821,17z/data=!3m1!4b1!4m5!3m4!1s0x3142198c825000e1:0x9b011fe03c346db3!8m2!3d16.0629429!4d108.2297821?hl=vi-VN",locationName:"Tr\u1ea7n H\u01b0ng \u0110\u1ea1o, qu\u1eadn S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2297821",lat:"16.0629429"}},{id:"32103782707",title:"H\u1ea3i \u0110\u0103ng Thu\u1eadn Ph\u01b0\u1edbc",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/hai-dang-thuan-phuoc-da-nang.jpg",imageDesc:"H\u1ea3i \u0111\u0103ng Thu\u1eadn Ph\u01b0\u1edbc \u0110\xe0 N\u1eb5ng.",description:"\u0110\xe2y c\u0169ng l\xe0 m\u1ed9t <strong>\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng </strong>\u0111\u01b0\u1ee3c c\xe1c b\u1ea1n tr\u1ebb \u0111\u1eb7c bi\u1ec7t y\xeau th\xedch. \u0110\u1ee9ng ng\u1eafm nh\xecn v\xe0o bu\u1ed5i chi\u1ec1u t\xe0 t\u1ea1i \u0111\xe2y, v\u1eeba h\xf3ng gi\xf3, v\u1eeba ng\u1eafm ho\xe0ng h\xf4n th\u1eadt l\xe0 chill chill \u0111\xfang kh\xf4ng n\xe0o?",locationLink:"L\xea V\u0103n Duy\u1ec7t, N\u1ea1i Hi\xean \u0110\xf4ng, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng ",locationName:"L\xea V\u0103n Duy\u1ec7t, N\u1ea1i Hi\xean \u0110\xf4ng, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.22539903057537",lat:"16.09357254172783"}},{id:"33670815980",title:"Gi\xe0n hoa gi\u1ea5y s\u1ed1ng \u1ea3o c\u1ef1c \u0111\u1eb9p \u1edf \u0110\xe0 N\u1eb5ng",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/gian-hoa-giay-song-ao-da-nang.jpg",imageDesc:"Gi\xe0n hoa gi\u1ea5y s\u1ed1ng \u1ea3o c\u1ef1c \u0111\u1eb9p \u1edf \u0110\xe0 N\u1eb5ng",description:"\u0110\xe2y l\xe0 m\u1ed9t \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng v\u1eeba \u0111\u1eb9p, v\u1eeba th\u01a1 m\u1ed9ng l\u1ea1i kh\xf4ng m\u1ea5t ti\u1ec1n tham quan th\xec d\u1ea1i g\xec m\xe0 kh\xf4ng tha h\u1ed3 l\xean l\xe0m v\xe0i t\u1ea5m h\xecnh s\u1ed1ng \u1ea3o ngay \u0111\xfang kh\xf4ng? Nh\u1eefng c\xe2y hoa gi\u1ea5y to \u0111\xf9ng r\u1ee7 m\xecnh b\xean l\u1ec1 \u0111\u01b0\u1eddng khoe ra nh\u1eefng t\xe1n hoa r\u1ef1c r\u1ee1, tuy\u1ec7t \u0111\u1eb9p ph\u1ea3i kh\xf4ng n\xe0o?",locationLink:"https://www.google.com/maps/place/B%C3%A1n+%C4%91%E1%BA%A3o+S%C6%A1n+Tr%C3%A0/@16.1266563,108.2756956,12z/data=!3m1!4b1!4m5!3m4!1s0x31423d72d1be522d:0x1e7339a6534e4e7!8m2!3d16.1159837!4d108.273341?hl=vi-VN",locationName:"b\xe1n \u0111\u1ea3o S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2756956",lat:"16.1266563"}},{id:"63929804028",title:"\u0110\u01b0\u1eddng B\xedch H\u1ecda",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/lang-bich-hoa-da-nang-the-gioi-song-ao-dep.png",imageDesc:"L\xe0ng B\xedch H\u1ecda - \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng m\u1edbi l\u1ea1",description:"Con \u0111\u01b0\u1eddng n\xe0y \u0111\xe3 t\u1eebng \u0111\xe2u l\xe0 \u0111i\u1ec3m \u0111\u1ebfn thu h\xfat nhi\u1ec1u kh\xe1ch tham quan v\u1edbi nh\u1eefng b\u1ee9c t\u01b0\u1eddng nhi\u1ec1u m\xe0u s\u1eafc, c\xf9ng nh\u1eefng h\xecnh \u1ea3nh s\u1ed1ng \u0111\u1ed9ng r\u1ef1c r\u1ee1 mu\xf4n m\xe0u. Con h\u1ebbm \u0111\u01b0\u1eddng Nguy\u1ec5n V\u0103n Linh l\xe0 n\u01a1i \u0111\u01b0\u1ee3c nhi\u1ec1u ng\u01b0\u1eddi bi\u1ebft \u0111\u1ebfn v\u1edbi nh\u1eefng b\u1ee9c tranh v\u1ec1 c\xe1c ch\u1ee7 \u0111\u1ec1 thi\xean v\u0103n, v\u0103n h\xf3a, con ng\u01b0\u1eddi \u0110\xe0 N\u1eb5ng,\u2026",locationLink:"https://www.google.com/maps/place/La%CC%80ng+Bi%CC%81ch+ho%CC%A3a+%C4%90a%CC%80+N%C4%83%CC%83ng-+Da+Nang+Fresco+Village/@16.0607217,108.2200138,17z/data=!3m1!4b1!4m5!3m4!1s0x314219cc7844ab91:0x436db6a820a059c!8m2!3d16.0607217!4d108.2200154?hl=vi-VN",locationName:"h\u1ebbm 75 Nguy\u1ec5n V\u0103n Linh, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2200138",lat:"16.0607217"}},{id:"52909641848",title:"\u0110\u1ec9nh B\xe0n C\u1edd",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/dinh-ban-co-da-nang-1.jpg",imageDesc:"\u0110\u1ec9nh B\xe0n C\u1edd \u0110\xe0 N\u1eb5ng",description:"L\xe0 m\u1ed9t \u0111\u1ecba \u0111i\u1ec3m c\xf3 s\u1ee9c h\xfat m\xe3nh li\u1ec7t \u0111\u1ed1i v\u1edbi d\xe2n ph\u01b0\u1ee3t v\xe0 \u0111\u01b0\u1ee3c \u0111\xe1nh gi\xe1 l\xe0 m\u1ed9t d\u1ed1c \u0111\u1ee9ng kh\xe1 hi\u1ec3m tr\u1edf v\u1edbi n\xfai non tr\xf9ng tr\xf9ng. Khi l\xean \u0111\u1ebfn \u0111\u1ec9nh B\xe0n C\u1edd, b\u1ea1n s\u1ebd nh\xecn th\u1ea5y bao qu\xe1t to\xe0n th\xe0nh ph\u1ed1 v\xe0 th\u1ea3 m\xecnh v\u1edbi m\xe2y tr\u1eddi.",locationLink:"https://www.google.com/maps/place/%C4%91%E1%BB%89nh+B%C3%A0n+C%E1%BB%9D/@16.1199859,108.2759459,14z/data=!3m1!4b1!4m5!3m4!1s0x31423d71a211a64f:0xb65a8033e2183c23!8m2!3d16.1199862!4d108.2759459?hl=vi-VN",locationName:"b\xe1n \u0111\u1ea3o S\u01a1n Tr\xe0, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2759459",lat:"16.1199859"}},{id:"72077233920",title:"Nh\xe0 th\u1edd Ch\xednh T\xf2a",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/nha-tho-chinh-toa-da-nang.jpg",imageDesc:"Nh\xe0 th\u1edd Ch\xednh T\xf2a \u0110\xe0 N\u1eb5ng",description:"Hay c\xf2n g\u1ecdi l\xe0 nh\xe0 th\u1edd Con G\xe0, m\u1ed9t \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i kh\xe1 n\u1ed5i ti\u1ebfng t\u1ea1i \u0110\xe0 N\u1eb5ng, g\xe2y \u1ea5n t\u01b0\u1ee3ng cho du kh\xe1ch b\u1edfi ki\u1ebfn tr\xfac \u0111\u1ed9c \u0111\xe1o v\xe0 mang gi\xe1 tr\u1ecb s\u1eed cao. Nh\xe0 th\u1edd \u0111\u01b0\u1ee3c x\xe2y theo phong c\xe1ch c\xe1ch Ch\xe2u \xc2u, b\u1ea1n c\xf3 th\u1ec3 tho\u1ea3i m\xe1i tham quan v\xe0 ch\u1ee5p \u1ea3nh khi \u0111\u1ebfn \u0111\xe2y ",locationLink:"https://www.google.com/maps/place/Gi%C3%A1o+x%E1%BB%A9+Ch%C3%ADnh+t%C3%B2a+%C4%90%C3%A0+N%E1%BA%B5ng/@16.0666851,108.2230073,17z/data=!3m1!4b1!4m5!3m4!1s0x31421832547c341d:0xf5a1cee35303f175!8m2!3d16.0666851!4d108.2230073?hl=vi-VN",locationName:"s\u1ed1 156 \u0111\u01b0\u1eddng Tr\u1ea7n Ph\xfa, H\u1ea3i Ch\xe2u 1, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2230073",lat:"16.0666851"}},{id:"68274266330",title:"Con \u0111\u01b0\u1eddng m\xf9a \u0111\xf4ng H\xe0n Qu\u1ed1c",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/con-duong-han-quoc-da-nang.jpg",imageDesc:"Con \u0111\u01b0\u1eddng H\xe0n Qu\u1ed1c - \u0111\u1ecba \u0111i\u1ec3m check in n\u1ed5i ti\u1ebfng \u0110\xe0 N\u1eb5ng",description:"Nh\u1eafc \u0111\u1ebfn nh\u1eefng <strong>\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng </strong>l\xe3ng m\u1ea1n kh\xf4ng th\u1ec3 kh\xf4ng nh\u1eafc \u0111\u1ebfn con \u0111\u01b0\u1eddng th\u01a1 m\u1ed9ng n\xe0y. C\xe1c t\xedn \u0111\u1ed3 y\xeau th\xedch ch\u1ee5p \u1ea3nh kh\xf4ng th\u1ec3 n\xe0o b\u1ecf qua \u0111\u01b0\u1ee3c \u201ccon \u0111\u01b0\u1eddng H\xe0n Qu\u1ed1c\u201d g\xe2y s\u1ed1t t\u1ea1i \u0110\xe0 N\u1eb5ng n\xe0y, v\u1edbi khung c\u1ea3nh \u0111\u01b0\u1ee3c v\xed von nh\u01b0 m\xf9a \u0111\xf4ng H\xe0n Qu\u1ed1c.",locationLink:"https://www.google.com/maps/place/V%C3%B5+Nguy%C3%AAn+Gi%C3%A1p,+S%C6%A1n+Tr%C3%A0,+%C4%90%C3%A0+N%E1%BA%B5ng,+Vi%E1%BB%87t+Nam/@16.0691374,108.2453792,17z/data=!3m1!4b1!4m5!3m4!1s0x31421768e629e9bd:0x59de3646b3fb52eb!8m2!3d16.0691374!4d108.2453792?hl=vi-VN",locationName:"\u0111\u01b0\u1eddng V\xf5 Nguy\xean Gi\xe1p, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2453792",lat:"16.0691374"}},{id:"6380486772",title:"C\xf4ng vi\xean Bi\u1ec3n \u0110\xf4ng",typeLocation:"checking",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cong-vien-bien-dong.jpg",imageDesc:"\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0111\xe0 n\u1eb5ng C\xf4ng vi\xean bi\u1ec3n \u0110\xf4ng",description:"C\xf4ng vi\xean Bi\u1ec3n \u0110\xf4ng l\xe0 m\u1ed9t \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i r\u1ea5t \u0111\u01b0\u1ee3c y\xeau th\xedch kh\xf4ng ri\xeang g\xec ng\u01b0\u1eddi d\xe2n th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng, m\xe0 c\xf2n c\xf3 c\u1ea3 kh\xe1ch du l\u1ecbch. H\xecnh \u1ea3nh c\u1ee7a h\xe0ng ng\xe0n con chim b\u1ed3 c\xe2u tr\u1eafng bay r\u1ee3p tr\u1eddi, ch\xednh l\xe0 \u0111i\u1ec3m \u0111\u1eb7c bi\u1ec7t thu h\xfat kh\xe1ch t\u1edbi c\xf4ng vi\xean n\xe0y. T\u1edbi \u0111\xe2y b\u1ea1n c\xf3 th\u1ec3 d\u1ea1o bi\u1ec3n, ng\u1eafm c\u1ea3nh c\xf9ng b\u1ea1n b\xe8, ng\u01b0\u1eddi th\xe2n.",locationLink:"https://www.google.com/maps/place/C%C3%B4ng+vi%C3%AAn+Bi%E1%BB%83n+%C4%90%C3%B4ng/@16.0703173,108.2458368,17z/data=!3m1!4b1!4m5!3m4!1s0x3142171781bc61df:0x88236faf8a5f84f8!8m2!3d16.0703173!4d108.2458368?hl=vi-VN",locationName:"Ph\u01b0\u1edbc M\u1ef9, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2458368",lat:"16.0703173"}},{id:"25718736615",title:"Khu du l\u1ecbch B\xe0 N\xe0 Hills",typeLocation:"center",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/khu-du-lich-ba-na-hills-dia-diem-vui-choi-da-nang-dep-nhat.jpg",imageDesc:"Khu du l\u1ecbch B\xe0 N\xe0 Hills - \u0110\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng \u0110\u1eb9p Nh\u1ea5t",description:"Ch\u1eafc h\u1eb3n m\u1ecdi ng\u01b0\u1eddi \u0111\xe3 kh\xf4ng c\xf2n xa l\u1ea1 v\u1edbi <strong>\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng - B\xe0 N\xe0 Hills</strong>. B\xe0 N\xe0 Hill l\xe0 m\u1ed9t trong \u0111\u1ecba \u0111i\u1ec3m check in n\u1ed5i ti\u1ebfng \u0110\xe0 N\u1eb5ng. \u0110\xe2y l\xe0 qu\u1ea7n th\u1ec3 du l\u1ecbch ngh\u1ec9 d\u01b0\u1ee1ng vui ch\u01a1i gi\u1ea3i tr\xed \u0111\u1eb3ng c\u1ea5p nh\u1ea5t Vi\u1ec7t Nam hi\u1ec7n nay. \u0110\u01b0\u1ee3c xem l\xe0 \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i gi\u1ea3i tr\xed h\xfat kh\xe1ch nh\u1ea5t Th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng.\n    <br/>\n    N\u1ebfu b\u1ea1n mu\u1ed1n c\u1ea3m nh\u1eadn r\xf5 4 m\xf9a th\xec B\xe0 N\xe0 Hills s\u1ebd l\xe0 s\u1ef1 l\u1ef1a ch\u1ecdn \u0111\xfang \u0111\u1eafn v\xec ch\u1ec9 trong m\u1ed9t ng\xe0y b\u1ea1n s\u1ebd c\u1ea3m nh\u1eadn \u0111\u01b0\u1ee3c 4 ki\u1ec3u th\u1eddi ti\u1ebft g\u1ed3m Xu\xe2n, H\u1ea1, Thu, \u0110\xf4ng. H\xe3y \u0111\u1ebfn ngay B\xe0 N\xe0 Hills \u0111\u1ec3 c\xf3 th\u1ec3 t\u1eadn m\u1eaft ch\u1ee9ng ki\u1ebfn c\u1ea3nh n\xfai non h\xf9ng v\u0129 c\u1ee7a c\u1ea3 th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng t\u1eeb xa, tham quan nh\u1eefng c\xf4ng tr\xecnh \u0111\u1ed9c \u0111\xe1o c\xf3 1 kh\xf4ng 2 v\xe0 tham gia v\xe0o nh\u1eefng ho\u1ea1t \u0111\u1ed9ng h\u1ea5p d\u1eabn nh\u01b0 tr\u1ea3i nghi\u1ec7m c\xe1c tr\xf2 ch\u01a1i c\u1ea3m gi\xe1c m\u1ea1nh, \u0111i c\xe1p treo,\u2026",locationLink:"https://www.google.com/maps/place/Sun+World+B%C3%A0+N%C3%A0+Hills+%C4%90%C3%A0+N%E1%BA%B5ng/@15.9977042,107.9880665,17z/data=!3m1!4b1!4m5!3m4!1s0x3141f6e330b36787:0xb63945f77e1096b4!8m2!3d15.9977042!4d107.9880665?hl=vi-VN",locationName:"Ho\xe0 Ph\xfa, Ho\xe0 Vang, TP \u0110\xe0 N\u1eb5ng",location:{lng:"107.9880665",lat:"15.9977042"}},{id:"56159745076",title:"C\xf4ng vi\xean n\u01b0\u1edbc Mikazuki",typeLocation:"center",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cong-vien-nuoc-mikazuki.jpg",imageDesc:"C\xf4ng vi\xean n\u01b0\u1edbc Mikazuki",description:"\u0110\xe2y l\xe0 c\xf4ng vi\xean n\u01b0\u1edbc trong nh\xe0 \u0111\u1ea7u ti\xean t\u1ea1i Vi\u1ec7t Nam, \u0111\u01b0\u1ee3c xem l\xe0<strong> \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng</strong> cho tr\u1ebb em ho\xe0n to\xe0n m\u1edbi l\u1ea1. \u1ede t\u1ea7ng 1 c\u1ee7a Mikazuki l\xe0 khu t\u1ed5ng h\u1ee3p \u0111\u1eb3ng c\u1ea5p: vui ch\u01a1i, l\xe0m \u0111\u1eb9p, ch\u0103m s\xf3c s\u1ee9c kh\u1ecfe. Du kh\xe1ch c\xf3 th\u1ec3 l\u1ef1a ch\u1ecdn th\u01b0\u1edfng th\u1ee9c \u1ea9m th\u1ef1c t\u1ea1i t\u1ea7ng 2 ho\u1eb7c ngay t\u1ea7ng 1. Ngo\xe0i ra, t\u1ea7ng 3 v\xe0 t\u1ea7ng 4 c\xf3 khu spa v\xe0 Osen mang phong c\xe1ch Nh\u1eadt B\u1ea3n, mang l\u1ea1i tr\u1ea3i nghi\u1ec7m cho b\u1ea1n v\xe0 gia \u0111\xecnh.",locationLink:"https://www.google.com/maps/place/Mikazuki+Water+Park+365/@16.0920725,105.9030161,7z/data=!4m9!1m2!2m1!1zY8O0bmcgdmnDqm4gbsaw4bubYyBNaWthenVraQ!3m5!1s0x31421991a401ca65:0xae18cd4b35f842b5!8m2!3d16.0921137!4d108.1442614!15sChxjw7RuZyB2acOqbiBuxrDhu5tjIE1pa2F6dWtpWh4iHGPDtG5nIHZpw6puIG7GsOG7m2MgbWlrYXp1a2mSARJ0b3VyaXN0X2F0dHJhY3Rpb26aASRDaGREU1VoTk1HOW5TMFZKUTBGblNVUjVNWFpwZVRkM1JSQUI?hl=vi-VN",locationName:"khu du l\u1ecbch Xu\xe2n Thi\u1ec1u, H\xf2a Kh\xe1nh B\u1eafc, Li\xean Chi\u1ec3u, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.1441705467678",lat:"16.092214307108208"}},{id:"39768501178",title:"C\xf4ng vi\xean Ch\xe2u \xc1 \u0110\xe0 N\u1eb5ng - Asia Park",typeLocation:"center",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cong-vien-chau-a-da-nang-asia-park.jpg",imageDesc:"\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0111\xe0 n\u1eb5ng C\xf4ng vi\xean Ch\xe2u \xc1 \u0110\xe0 N\u1eb5ng - Asia Park",description:"C\xf4ng vi\xean ch\xe2u \xc1 Asia Park \u0111ang l\xe0 m\u1ed9t trong nh\u1eefng c\xf4ng vi\xean gi\u1ea3i tr\xed v\u01b0\u01a1n t\u1ea7m qu\u1ed1c t\u1ebf. N\u01a1i n\xe0y c\xf3 v\u1ecb tr\xed l\xfd t\u01b0\u1edfng n\u1eb1m ngay b\xean b\u1edd T\xe2y song h\xe0nh v\u1edbi di\u1ec7n t\xedch l\xean t\u1edbi 868.694 m\xe9t vu\xf4ng v\xe0 \u0111\u01b0\u1ee3c chia th\xe0nh 3 khu v\u1ef1c ch\xednh: khu c\xf4ng tr\xecnh ki\u1ebfn tr\xfac thu nh\u1ecf bi\u1ec3u t\u01b0\u1ee3ng cho h\xecnh \u1ea3nh m\u1ed9t qu\u1ed1c gia ch\xe2u \xe1, khu gi\u1ea3i tr\xed v\u1edbi h\xe0ng ng\xe0n c\xe1c tr\xf2 ch\u01a1i hi\u1ec7n \u0111\u1ea1i xu\u1ea5t hi\u1ec7n l\u1ea7n \u0111\u1ea7u t\u1ea1i Vi\u1ec7t Nam, cu\u1ed1i c\xf9ng l\xe0 khu v\xf2ng quay Sun Wheel n\u1ed5i ti\u1ebfng \u0111\u1ea3m b\u1ea3o \u0111\xe1p \u1ee9ng m\u1ecdi nhu c\u1ea7u c\u1ee7a du kh\xe1ch.",locationLink:"https://www.google.com/maps/place/Asia+Park+-+C%C3%B4ng+vi%C3%AAn+Ch%C3%A2u+%C3%81/@16.1266563,108.2756956,12z/data=!4m5!3m4!1s0x314219e7a191cc17:0xe60f91d4055e3074!8m2!3d16.0383924!4d108.2266751?hl=vi-VN",locationName:"S\u1ed1 1 Phan \u0110\u0103ng L\u01b0u, H\xf2a C\u01b0\u1eddng H\u1eafc, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2756956",lat:"16.1266563"}},{id:"35940643680",title:"C\xf4ng vi\xean k\u1ef3 quan th\u1ebf gi\u1edbi",typeLocation:"center",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cong-vien-ky-quan-the-gioi-1.jpg",imageDesc:"C\xf4ng vi\xean k\u1ef3 quan th\u1ebf gi\u1edbi",description:"N\u1ebfu kh\xf4ng th\u1ec3 tham quan h\u1ebft nh\u1eefng k\u1ef3 quan n\u1ed5i ti\u1ebfng tr\xean th\u1ebf gi\u1edbi nh\u01b0 th\xe1p Eiffel, t\u01b0\u1ee3ng N\u1eef Th\u1ea7n T\u1ef1 Do, v\u1ea1n L\xfd Tr\u01b0\u1eddng Th\xe0nh,\u2026th\xec b\u1ea1n c\xf3 th\u1ec3 \u0111\u1ebfn ngay v\u1edbi c\xf4ng vi\xean k\u1ef3 quan th\u1ebf gi\u1edbi v\xe0 \u0111\u01b0\u1ee3c t\u1eadn m\u1eaft chi\xeam ng\u01b0\u1ee1ng th\u1ecfa s\u1ee9c s\u1ed1ng \u1ea3o c\xf9ng nh\u1eefng c\xf4ng tr\xecnh n\xe0y. C\xf4ng vi\xean l\xe0 m\u1ed9t th\u1ebf gi\u1edbi thu nh\u1ecf c\xe1c k\u1ef3 quan n\u1ed5i ti\u1ebfng tr\xean th\u1ebf gi\u1edbi do b\xe0n tay t\xe0i hoa c\u1ee7a c\xe1c ngh\u1ec7 nh\xe2n t\xe1i hi\u1ec7n, ch\u1eafc ch\u1eafn s\u1ebd kh\xf4ng l\xe0m b\u1ea1n th\u1ea5t v\u1ecdng.",locationLink:"https://www.google.com/maps/place/C%C3%B4ng+vi%C3%AAn+K%E1%BB%B3+Quan/@16.0988164,108.2243972,17z/data=!3m1!4b1!4m5!3m4!1s0x3142198d74e5a281:0x24e8ff134e9f0079!8m2!3d16.0988164!4d108.2243972?hl=vi-VN",locationName:"s\u1ed1 1 L\xea V\u0103n Duy\u1ec7t, N\u1ea1i Hi\xean \u0110\xf4ng, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2243972",lat:"16.0988164"}},{id:"65039952066",title:"Cocobay \u0110\xe0 N\u1eb5ng",typeLocation:"center",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cocobay-da-nang.jpg",imageDesc:"Coco bay \u0110\xe0 N\u1eb5ng",description:"Cocobay l\xe0 t\u1ed5 h\u1ee3p du l\u1ecbch c\xf9ng v\u1edbi c\xe1c d\u1ecbch v\u1ee5 gi\u1ea3i tr\xed tham quan v\xe0 \u0103n u\u1ed1ng \u0111\u01b0\u1ee3c xem l\xe0 \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng h\xe0ng \u0111\u1ea7u m\xe0 b\u1ea1n kh\xf4ng th\u1ec3 b\u1ecf l\u1ee1. B\xean c\u1ea1nh c\xe1c khu ngh\u1ec9 d\u01b0\u1ee1ng kh\xe1ch s\u1ea1n sang tr\u1ecdng \u0111\u1ea1t chu\u1ea9n qu\u1ed1c t\u1ebf, du kh\xe1ch c\xf2n c\xf3 th\u1ec3 th\u1ecfa s\u1ee9c vui ch\u01a1i v\u1edbi nhi\u1ec1u tr\xf2 ch\u01a1i kh\xe1c nhau, tr\u1ea3i nghi\u1ec7m xe bu\xfdt hai t\u1ea7ng du h\xed kh\u1eafp th\xe0nh ph\u1ed1 v\xe0 t\u1eadn h\u01b0\u1edfng n\xe9t \u1ea9m th\u1ef1c \u0111\u1eb7c tr\u01b0ng t\u1eeb T\xe2y sang \u0110\xf4ng, c\xf9ng l\u1ec5 h\u1ed9i \xe2m nh\u1ea1c h\xe0ng \u0111\u1ea7u Vi\u1ec7t Nam.",locationLink:"https://www.google.com/maps/place/Cocobay+Danang/@16.0497241,108.2122817,13z/data=!4m9!1m2!2m1!1zY29jb2JheSDEkcOgIG7hurVuZw!3m5!1s0x31421765255ded5b:0xb8c06c5cbdd76281!8m2!3d16.0497241!4d108.2473006!15sChNjb2NvYmF5IMSRw6AgbuG6tW5nkgEQYW11c2VtZW50X2NlbnRlcg?hl=vi-VN",locationName:"\u0111\u01b0\u1eddng Tr\u01b0\u1eddng Sa, H\xf2a H\u1ea3i, Ng\u0169 H\xe0nh S\u01a1n, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2122817",lat:"16.0497241"}},{id:"78376569698",title:"C\xf4ng vi\xean su\u1ed1i kho\xe1ng n\xf3ng n\xfai Th\u1ea7n T\xe0i",typeLocation:"center",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cong-vien-suoi-khoang-nong-nui-than-tai.jpg",imageDesc:"C\xf4ng vi\xean su\u1ed1i kho\xe1ng n\xf3ng n\xfai Th\u1ea7n T\xe0i",description:"N\u1eb1m trong danh s\xe1ch \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng hot nh\u1ea5t b\u1edfi n\u01a1i \u0111\xe2y l\xe0 khu ngh\u1ec9 d\u01b0\u1ee1ng cao c\u1ea5p, spa, nh\xe0 h\xe0ng th\xedch h\u1ee3p cho m\u1ecdi nhu c\u1ea7u c\u1ee7a du kh\xe1ch. Bao quanh l\xe0 n\xfai n\u1eb1m trong khu b\u1ea3o t\u1ed3n thi\xean nhi\xean n\xfai Ch\xfaa, n\xean kh\xf4ng kh\xed \u1edf \u0111\xe2y lu\xf4n m\xe1t m\u1ebb, d\u1ec5 ch\u1ecbu. ",locationLink:"https://www.google.com/maps/place/C%C3%B4ng+vi%C3%AAn+Su%E1%BB%91i+kho%C3%A1ng+n%C3%B3ng+N%C3%BAi+Th%E1%BA%A7n+T%C3%A0i,+QL14G,+Ho%C3%A0+Ph%C3%BA,+H%C3%B2a+Vang,+%C4%90%C3%A0+N%E1%BA%B5ng,+Vi%E1%BB%87t+Nam/@15.9678479,108.0198634,14z/data=!3m1!4b1!4m5!3m4!1s0x3141f7958d4a911b:0x7aa95bb7a598e3eb!8m2!3d15.9678482!4d108.0198634?hl=vi-VN",locationName:"QL14G, H\xf2a Ph\xfa, H\xf2a Vang, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.0198634",lat:"15.9678479"}},{id:"72012196038",title:"C\u1ea7u quay s\xf4ng H\xe0n",typeLocation:"night",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cau-quay-song-han.jpg",imageDesc:"S\u1ebd th\u1eadt s\u1ef1 thi\u1ebfu s\xf3t khi nh\u1eafc t\u1edbi \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng m\xe0 kh\xf4ng k\u1ec3 t\xean c\u1ea7u s\xf4ng H\xe0n",description:"H\xe0n - c\xe2y c\u1ea7u quay \u0111\u1ea7u ti\xean t\u1ea1i Vi\u1ec7t Nam. \u0110\xe2y c\u0169ng l\xe0 bi\u1ec3u t\u01b0\u1ee3ng c\u1ee7a th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng v\xe0 l\xe0 ni\u1ec1m t\u1ef1 h\xe0o c\u1ee7a ng\u01b0\u1eddi d\xe2n \u0111\u1ecba n\u01a1i \u0111\xe2y. \u0110\u1ebfn n\u01a1i \u0111\xe2y b\u1ea1n s\u1ebd tho\u1ea3 s\u1ee9c check in v\u1edbi c\u1ea7u S\xf4ng H\xe0n, chi\xeam ng\u01b0\u1ee1ng c\u1ea3nh s\u1eafc lung linh c\u1ee7a nh\u1eefng \xe1nh \u0111\xe8n \u0111\u1ee7 s\u1eafc m\xe0u ph\u1ea3n chi\u1ebfu xu\u1ed1ng m\u1eb7t n\u01b0\u1edbc v\xe0 c\xf3 c\u01a1 h\u1ed9i chi\xeam ng\u01b0\u1ee1ng c\xe2y c\u1ea7u quay g\xf3c 90 \u0111\u1ed9 l\xfac 1 gi\u1edd \u0111\xeam, ch\u1eafc h\u1eb3n khi th\u1ef1c s\u1ef1 ch\u1ee9ng ki\u1ebfn b\u1ea1n s\u1ebd c\xf3 m\u1ed9t tr\u1ea3i nghi\u1ec7m kh\xf3 qu\xean.",locationLink:"https://www.google.com/maps/place/C%E1%BA%A7u+quay+S%C3%B4ng+H%C3%A0n/@16.0721459,108.226776,17z/data=!3m1!4b1!4m5!3m4!1s0x314219e1d456be17:0x8607b75e5f786cf9!8m2!3d16.0721459!4d108.226776?hl=vi-VN",locationName:"H\u1ea3i Ch\xe2u 1, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.226776",lat:"16.0721459"}},{id:"40203810766",title:"C\u1ea7u r\u1ed3ng",typeLocation:"night",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cau-rong-phun-lua-phun-nuoc.jpg",imageDesc:"C\u1ea7u R\u1ed3ng l\xe0 \u0111\u1ecba \u0111i\u1ec3m check in \u0110\xe0 N\u1eb5ng n\u1ed5i ti\u1ebfng nh\u1ea5t.",description:"Th\xe0nh ph\u1ed1 \u0110\xe0 N\u1eb5ng \u0111\u01b0\u1ee3c m\u1ec7nh danh l\xe0 th\xe0nh ph\u1ed1 c\u1ee7a nh\u1eefng c\xe2y c\u1ea7u, n\xean n\u01a1i \u0111\xe2y s\u1edf h\u1eefu nh\u1eefng c\xe2y c\u1ea7u mang n\xe9t \u0111\u1eb9p \u0111\u1ed9c \u0111\xe1o. Ngo\xe0i c\u1ea7u S\xf4ng H\xe0n v\u1edbi kh\u1ea3 n\u0103ng quay 90 \u0111\u1ed9 th\xec c\u1ea7u R\u1ed3ng, c\u0169ng l\xe0 m\u1ed9t c\xe2y c\u1ea7u c\u1ef1c k\u1ef3 n\u1ed5i ti\u1ebfng m\xe0 du kh\xe1ch kh\xe1ch kh\xf4ng th\u1ec3 b\u1ecf qua khi t\u1edbi vui ch\u01a1i t\u1ea1i \u0110\xe0 N\u1eb5ng.\n    <br/>\n    C\xe2y c\u1ea7u \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf v\u1edbi bi\u1ec3u t\u01b0\u1ee3ng l\xe0 con r\u1ed3ng m\xe0u v\xe0ng v\u01b0\u01a1ng m\xecnh h\u01b0\u1edbng ra bi\u1ec3n \u0110\xf4ng, th\u1ec3 hi\u1ec7n kh\xe1t v\u1ecdng v\xe0 th\u1ecbnh v\u01b0\u1ee3ng c\u1ee7a th\xe0nh ph\u1ed1. Ngo\xe0i ra, n\xf3 khi\u1ebfn m\u1ecdi ng\u01b0\u1eddi ph\u1ea3i kinh ng\u1ea1c, b\u1edfi c\xf3 th\u1ec3 phun l\u1eeda v\xe0 n\u01b0\u1edbc. V\xe0o 21h t\u1ed1i th\u1ee9 7 v\xe0 ch\u1ee7 nh\u1eadt b\u1ea1n s\u1ebd chi\xeam ng\u01b0\u1ee1ng \u0111\u01b0\u1ee3c kho\u1ea3nh kh\u1eafc tuy\u1ec7t \u0111\u1eb9p v\xe0 \u0111\u1eb7c bi\u1ec7t n\xe0y. Ngo\xe0i ra, xung quanh s\xf4ng H\xe0n c\xf2n c\xf3 r\u1ea5t nhi\u1ec1u qu\xe1n cafe check in \u0111\u1eb9p \u1edf \u0110\xe0 N\u1eb5ng du kh\xe1ch c\xf3 th\u1ec3 \u0111\u1ebfn v\xe0 t\u1eadn h\u01b0\u1edfng view \u0111\u1eb9p nh\xecn ra s\xf4ng H\xe0n.",locationLink:"https://www.google.com/maps/place/Dragon+Bridge/@16.0545235,108.2203505,14z/data=!4m9!1m2!2m1!1zQ-G6p3UgcuG7k25n!3m5!1s0x3142193c6144de8f:0x360f8a363a203fa7!8m2!3d16.0611454!4d108.2278087!15sCgxD4bqndSBy4buTbmdaDiIMY-G6p3UgcuG7k25nkgEGYnJpZGdlmgEkQ2hkRFNVaE5NRzluUzBWSlEwRm5TVU0yZW5BdFZuWlJSUkFC?hl=vi-VN",locationName:"b\u1edd s\xf4ng H\xe0n, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2203505",lat:"16.0545235"}},{id:"2801249623",title:"C\u1ea7u t\xecnh y\xeau",typeLocation:"night",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cau-tinh-yeu-da-nang.jpg",imageDesc:"C\u1ea7u t\xecnh y\xeau \u0110\xe0 N\u1eb5ng",description:"C\u1ea7u t\xecnh y\xeau n\u1eb1m b\xean b\u1edd s\xf4ng H\xe0n th\u01a1 m\u1ed9ng thu\u1ed9c ph\xeda \u0111\xf4ng \u0111\u01b0\u1eddng Tr\u1ea7n H\u01b0ng \u0110\u1ea1o. C\xe2y c\u1ea7u \u0111\u1eb7c bi\u1ec7t v\u1edbi s\u1ef1 xu\u1ea5t hi\u1ec7n c\u1ee7a nh\u1eefng \u1ed5 kh\xf3a t\xecnh y\xeau kh\u1eafc t\xean hai ng\u01b0\u1eddi treo tr\xean \u0111\xf3, mang \xfd ngh\u0129a th\u1ec3 hi\u1ec7n cho t\xecnh y\xeau b\u1ec1n ch\u1eb7t kh\xf4ng r\u1eddi. \u0110\u1ecba \u0111i\u1ec3m l\xe3ng m\u1ea1n n\xe0y tr\u1edf th\xe0nh m\u1ed9t \u0111\u1ecba \u0111i\u1ec3m h\u1eb9n h\xf2 l\xfd t\u01b0\u1edfng v\xe0o bu\u1ed5i t\u1ed1i c\u1ee7a c\xe1c c\u1eb7p \u0111\xf4i.",locationLink:"https://www.google.com/maps/place/C%E1%BA%A7u+T%C3%ACnh+Y%C3%AAu+%C4%90%C3%A0+N%E1%BA%B5ng/@16.0632799,108.2296041,17z/data=!3m1!4b1!4m5!3m4!1s0x314219619542c5dd:0x7d43b6210f4a07fe!8m2!3d16.0632799!4d108.2296041?hl=vi-VN",locationName:"481 \u0111\u01b0\u1eddng Tr\u1ea7n H\u01b0ng \u0110\u1ea1o, An H\u1ea3i Trung, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2296041",lat:"16.0632799"}},{id:"36361148806",title:"Ph\u1ed1 \u0111i b\u1ed9 B\u1ea1ch \u0110\u1eb1ng",typeLocation:"night",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/pho-di-bo-bach-dang-.jpg",imageDesc:"Ph\u1ed1 \u0111i b\u1ed9 B\u1ea1ch \u0110\u1eb1ng ",description:"\u0110\xe2y c\u0169ng \u0111\u01b0\u1ee3c xem l\xe0 m\u1ed9t \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i t\u1ea1i \u0110\xe0 N\u1eb5ng th\xfa v\u1ecb. Ch\u1ea1y d\u1ecdc theo b\u1edd T\xe2y s\xf4ng H\xe0n, m\u1ed7i bu\u1ed5i t\u1ed1i thu h\xfat r\u1ea5t nhi\u1ec1u du kh\xe1ch v\xe0 ng\u01b0\u1eddi d\xe2n n\u01a1i \u0111\xe2y lui t\u1edbi v\xec kh\xf4ng kh\xed \u1edf \u0111\xe2y r\u1ea5t tho\xe1ng m\xe1t, d\u1ec5 ch\u1ecbu, \u0111\u01b0\u1ee3c th\u1ecfa s\u1ee9c ng\u1eafm nh\xecn nh\u1eefng chi\u1ebfc du thuy\u1ec1n \u0111\u1ea7y m\xe0u s\u1eafc, c\u1ea3nh v\u1ec1 \u0111\xeam c\u1ee7a th\xe0nh ph\u1ed1.",locationLink:"https://www.google.com/maps/place/Cafe+BB+Ph%E1%BB%91+%C4%91i+b%E1%BB%99+-+Ch%E1%BB%A3+%C4%91%C3%AAm+B%E1%BA%A1ch+%C4%90%E1%BA%B1ng/@10.983709,106.6484097,17z/data=!3m1!4b1!4m5!3m4!1s0x3174d146aebdc557:0xbe76ddcc6780bc53!8m2!3d10.9837005!4d106.6484128?hl=vi-VN",locationName:"d\u1ecdc b\u1edd s\xf4ng H\xe0n t\u1eeb c\u1ea7u Tr\u1ea7n Th\u1ecb L\xfd \u0111i xu\u1ed1ng",location:{lng:"108.22414639837552",lat:"16.061476983446415"}},{id:"9692457454",title:"Bar Sky36",typeLocation:"night",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bar-sky36-da-nang.jpg",imageDesc:"Bar Sky 36 \u0110\xe0 N\u1eb5ng",description:"Sau m\u1ed9t ng\xe0y kh\xe1m ph\xe1 c\xe1c \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng, v\xe0o ban \u0111\xeam du kh\xe1ch c\xf3 th\u1ec3 \u0111\u1ebfn Bar Sky36 \u0111\u1ec3 gi\u1ea3i tr\xed. Bar Sky36 \u0111ang \u1edf t\u1ea7ng 35 v\xe0 36 c\u1ee7a kh\xe1ch s\u1ea1n Novotel \u2013 kh\xe1ch s\u1ea1n ngh\u1ec9 d\u01b0\u1ee1ng \u0111\u1eb3ng c\u1ea5p.",locationLink:"https://www.google.com/maps/place/Sky36+Bar/@16.077401,108.2237974,17z/data=!3m1!4b1!4m5!3m4!1s0x3142183ae54d6015:0xa61168c6e58166a2!8m2!3d16.077402!4d108.2238068?hl=vi-VN",locationName:"t\u1ea7ng 35 - 36 kh\xe1ch s\u1ea1n Novotel, s\u1ed1 36 B\u1ea1ch \u0111\u1eb1ng, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2237974",lat:"16.077401"}},{id:"19213324269",title:"Du thuy\u1ec1n S\xf4ng H\xe0n",typeLocation:"night",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/du-thuyen-song-han.jpg",imageDesc:"Du thuy\u1ec1n s\xf4ng H\xe0n \u0110\xe0 N\u1eb5ng",description:"\u0110\xe2y l\xe0 m\u1ed9t \u0111\u1ecba \u0111i\u1ec3m l\xe3ng m\u1ea1n v\xe0 c\xe1c c\u1eb7p \u0111\xf4i kh\xf4ng th\u1ec3 b\u1ecf qua, t\u1ea1i \u0111\xe2y, b\u1ea1n s\u1ebd \u0111\u01b0\u1ee3c \u0111i tr\xean du thuy\u1ec1n c\xf9ng ng\u01b0\u1eddi m\xecnh y\xeau ng\u1eafm c\u1ea3nh th\xe0nh ph\u1ed1 v\u1ec1 \u0111\xeam, chi\xeam ng\u01b0\u1ee1ng nh\u1eefng c\xe2y c\u1ea7u lung linh v\xe0 c\u1ea3nh v\u1eadt hai b\xean s\xf4ng th\u1eadt l\xe3ng m\u1ea1n v\xe0 \xeam \u0111\u1ec1m.",locationLink:"https://www.google.com/maps/place/Du+Thuy%E1%BB%81n+S%C3%B4ng+H%C3%A0n/@16.0778638,108.2238246,17z/data=!3m1!4b1!4m5!3m4!1s0x31421921068f310d:0xfaa27019db3d4fba!8m2!3d16.0778638!4d108.2238246?hl=vi-VN",locationName:"24 B\u1ea1ch \u0110\u1eb1ng, H\u1ea3i Ch\xe2u 1, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2238246",lat:"16.0778638"}},{id:"50087877073",title:"Ch\u1ee3 \u0111\xeam Helio",typeLocation:"night",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cho-dem-helio-da-nang.jpg",imageDesc:"Ch\u1ee3 \u0111\xeam Helio \u0110\xe0 N\u1eb5ng",description:"Ch\u1ee3 \u0111\xeam helio \u0110\xe0 N\u1eb5ng v\u1edbi g\u1ea7n 100 h\xe0ng mua s\u1eafm, h\u01a1n 150 gian h\xe0ng \u1ea9m th\u1ef1c kh\xe1c nhau, n\xean du kh\xe1ch khi \u0111i \u0111\u1ebfn <strong>\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng</strong> n\xe0y c\xf3 th\u1ec3 th\u1ecfa s\u1ee9c l\u1ef1a ch\u1ecdn. Ngo\xe0i ra, b\u1ea1n c\xf2n \u0111\u01b0\u1ee3c th\u01b0\u1edfng th\u1ee9c nh\u1eefng m\xe0n tr\xecnh di\u1ec5n s\xf4i \u0111\u1ed9ng t\u1ea1i khu l\u1ec5 h\u1ed9i.",locationLink:"https://www.google.com/maps/place/Ch%E1%BB%A3+%C4%91%C3%AAm+Helio+(Khu+%E1%BA%A8m+th%E1%BB%B1c+%C4%91%C3%AAm+Helio%EF%BC%89/@16.0372462,108.2244753,17z/data=!3m1!4b1!4m5!3m4!1s0x314219e891faca05:0x7fd538a95a570da!8m2!3d16.0372462!4d108.2244753?hl=vi-VN",locationName:"\u0111\u01b0\u1eddng 2 th\xe1ng 9, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2244753",lat:"16.0372462"}},{id:"99319986222",title:"Ch\u1ee3 \u0111\xeam S\u01a1n Tr\xe0",typeLocation:"night",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cho-dem-son-tra-da-nang.jpg",imageDesc:"Ch\u1ee3 \u0111\xeam S\u01a1n Tr\xe0 - \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0111\xe0 n\u1eb5ng",description:"\u0110\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng n\xe0y, n\u1eb1m ngay trung t\xe2m th\xe0nh ph\u1ed1 n\xean r\u1ea5t thu\u1eadn l\u1ee3i cho vi\u1ec7c t\xecm ki\u1ebfm c\u0169ng nh\u01b0 di chuy\u1ec3n c\u1ee7a du kh\xe1ch. Khi gh\xe9 th\u0103m ch\u1ee3 \u0111\xeam S\u01a1n Tr\xe0, b\u1ea1n c\xf3 th\u1ec3 tho\u1ea3i m\xe1i mua s\u1eafm c\xe1c m\u1eb7t h\xe0ng th\u1eddi trang, \u0111\u1ed3 l\u01b0u ni\u1ec7m, \u0111\u1eb7c s\u1ea3n v\xe0 \u0103n u\u1ed1ng ngay t\u1ea1i khu \u1ea9m th\u1ef1c v\u1edbi nh\u1eefng m\xf3n \u0103n \u0111\u1eb7c s\u1ea3n h\u1ea5p d\u1eabn m\xe0 gi\xe1 l\u1ea1i \u201ch\u1ea1t d\u1ebb\u201d \u0111\xf3 nh\xe1!",locationLink:"https://www.google.com/maps/place/Ch%E1%BB%A3+%C4%90%C3%AAm+S%C6%A1n+Tr%C3%A0/@16.0615978,108.2319855,17z/data=!3m1!4b1!4m5!3m4!1s0x3142195a335892bd:0x8f53976f3c0fe60!8m2!3d16.0615978!4d108.2319855?hl=vi-VN",locationName:"Mai H\u1eafc \u0110\u1ebf, An H\u1ea3i Trung, S\u01a1n Tr\xe0, \u0110\xe0 N\u1eb5ng ",location:{lng:"108.2319855",lat:"16.0615978"}},{id:"34476186624",title:"Ch\u1ee3 \u0111\xeam H\xf2a Kh\xe1nh",typeLocation:"night",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/cho-dem-da-nang-hoa-khanh.jpg",imageDesc:"Ch\u1ee3 \u0111\xeam H\xf2a Kh\xe1nh - \u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0111\xe0 n\u1eb5ng",description:"M\u1ed9t trong nh\u1eefng <strong>\u0111\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng</strong> c\u1ef1c h\u1ea5p d\u1eabn \u0111\u01b0\u01a1ng nhi\xean kh\xf4ng th\u1ec3 b\u1ecf qua Ch\u1ee3 \u0111\xeam H\xf2a Kh\xe1nh. C\u1ee9 \u0111\u1ebfn chi\u1ec1u t\u1ed1i, ch\u1ee3 \u0111\xeam H\xf2a Kh\xe1nh l\u1ea1i tr\u1edf n\xean t\u1ea5p n\u1eadp v\xe0 \u0111\xf4ng vui b\u1edfi h\xe0ng ng\xe0n c\xe1c qu\xe1n x\xe1 v\xe0 d\xf2ng ng\u01b0\u1eddi qua l\u1ea1i. T\u1ea1i ch\u1ee3, c\xf3 b\xe1n \u0111\u1ee7 c\xe1c m\u1eb7t h\xe0ng t\u1eeb th\u1eddi trang, gi\xe0y d\xe9p, t\xfai x\xe1ch, m\u1ef9 ph\u1ea9m \u0111\u1ebfn c\xe1c lo\u1ea1i th\u1ee9c \u0103n n\u01b0\u1edbc u\u1ed1ng m\xe0 gi\xe1 l\u1ea1i c\u1ef1c k\u1ef3 r\u1ebb.",locationLink:"\xc2u C\u01a1, H\xf2a Kh\xe1nh B\u1eafc, Li\xean Chi\u1ec3u, \u0110\xe0 N\u1eb5ng",locationName:"\xc2u C\u01a1, H\xf2a Kh\xe1nh B\u1eafc, Li\xean Chi\u1ec3u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.14908929141899",lat:"16.070357348036083"}},{id:"35163044743",title:"Oq Lounge Pub",typeLocation:"night",image:"https://gotadi.com/tour/wp-content/uploads/2021/10/bar-qq-dia-chi-vui-choi-da-nang.jpg",imageDesc:"Oq Lounge Pub - \u0110\u1ecba \u0111i\u1ec3m vui ch\u01a1i \u0110\xe0 N\u1eb5ng c\u1ee7a gi\u1edbi tr\u1ebb",description:"Qu\xe1n Oq Lounge Pub n\u1eb1m tr\xean con \u0111\u01b0\u1eddng B\u1ea1ch \u0110\u1eb1ng n\u1ed5i ti\u1ebfng v\u1edbi kh\xf4ng gian r\u1ed9ng r\xe3i v\xe0 \u0111\u01b0\u1ee3c x\xe2y d\u1ef1ng theo ki\u1ebfn tr\xfac \u0111\u1eb7c bi\u1ec7t \u0111\u1ed9c \u0111\xe1o v\xe0 tinh t\u1ebf t\u1ea1o c\u1ea3m gi\xe1c c\u1ef1c k\u1ef3 tho\u1ea3i m\xe1i khi b\u01b0\u1edbc ch\xe2n v\xe0o.\n    <br/>\n    B\u1ed1i c\u1ea3nh c\u1ee7a qu\xe1n v\xf4 c\xf9ng huy\u1ec1n b\xed v\u1edbi h\u1ec7 th\u1ed1ng \u0111\xe8n m\xe0u chuy\u1ec3n \u0111\u1ed5i li\xean t\u1ee5c theo \u0111i\u1ec7u nh\u1ea1c. N\u1ebfu b\u1ea1n l\u1ef1a ch\u1ecdn Oq Lounge Pub, h\xe3y \u0111i c\xf9ng ng\u01b0\u1eddi th\xe2n, b\u1ea1n b\xe8 \u0111\u1ec3 c\xf3 th\u1ec3 phi\xeau theo \u0111i\u1ec7u nh\u1ea1c v\xe0 th\u01b0\u1edfng th\u1ee9c c\xe1c lo\u1ea1i \u0111\u1ed3 u\u1ed1ng th\u01a1m ngon. Kh\xf4ng nh\u1eefng th\u1ebf, \u1edf \u0111\xe2y th\u01b0\u1eddng xuy\xean t\u1ed5 ch\u1ee9c c\xe1c bu\u1ed5i liveshow v\u1edbi s\u1ef1 c\xf3 m\u1eb7t c\u1ee7a nhi\u1ec1u ca s\u0129 n\u1ed5i ti\u1ebfng nh\u01b0 M\u1ef9 T\xe2m, \u0110\xe0m V\u0129nh H\u01b0ng,\u2026 c\xf9ng d\xe0n DJ c\u1ef1c ch\u1ea5t cho b\u1ea1n th\u1ecfa s\u1ee9c bung l\u1ee5a.",locationLink:"https://www.google.com/maps/place/Oq+Lounge+Pub/@16.0794866,108.2236767,17z/data=!3m1!4b1!4m5!3m4!1s0x31421946747f0e01:0x391b7d6f4ec32617!8m2!3d16.0794838!4d108.22365?hl=vi-VN",locationName:"s\u1ed1 18 - 20 B\u1ea1ch \u0110\u1eb1ng, Th\u1ea1ch Thang, H\u1ea3i Ch\xe2u, \u0110\xe0 N\u1eb5ng",location:{lng:"108.2236767",lat:"16.0794866"}}],Qs=function(){var t=(0,e.useState)([]),n=(0,o.Z)(t,2),r=n[0],i=n[1];return(0,e.useEffect)((function(){var e=function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Js;case 2:t=e.sent,[],n=t.map((function(e){return{id:e.id,title:e.title,typeLocation:e.typeLocation,image:e.image,imageDesc:e.imageDesc,description:e.description,locationLink:e.locationLink,locationName:e.locationName,location:{lng:e.location.lng,lat:e.location.lat}}})),i(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),r},$s=(0,Ae.ZP)("div")((function(e){var t=e.theme;return a({display:"flex",alignItems:"center",justifyContent:"space-between",padding:t.spacing(0,1)},t.mixins.toolbar)})),el=function(){var t=Qs(),n=le((function(e){return e.form.sidebarTravel})),r=n.isShowSidebar,i=n.idTravelLocation,a=(0,e.useState)(!1),s=(0,o.Z)(a,2),l=s[0],u=s[1],c=(0,e.useState)({}),h=(0,o.Z)(c,2),d=h[0],f=h[1];(0,e.useEffect)((function(){var e=t.filter((function(e){return e.id===i}))[0];f(e),u(r)}),[i,t,r]);var p=_e(),m=(0,e.useState)(""),v=(0,o.Z)(m,2),g=v[0],y=v[1];return(0,e.useEffect)((function(){var e="";switch(null===d||void 0===d?void 0:d.typeLocation){case"discover":e="\u0110\u1ecba \u0111i\u1ec3m <strong>kh\xe1m ph\xe1</strong>";break;case"cultural":e="\u0110\u1ecba \u0111i\u1ec3m <strong>v\u0103n h\xf3a</strong>";break;case"checking":e="\u0110\u1ecba \u0111i\u1ec3m <strong>ch\u1ee5p \u1ea3nh \u0111\u1eb9p</strong>";break;case"center":e="Trung t\xe2m <strong>vui ch\u01a1i - gi\u1ea3i tr\xed</strong>";break;case"night":e="\u0110\u1ecba \u0111i\u1ec3m <strong>vui ch\u01a1i v\xe0o ban \u0111\xeam</strong>";break;default:e="\u0110\u1ecba \u0111i\u1ec3m <strong>vui ch\u01a1i - gi\u1ea3i tr\xed</strong>"}y(e)}),[d]),(0,Ee.jsx)("div",{className:"sidebar-travel",children:(0,Ee.jsxs)(sn,{variant:"persistent",anchor:"right",hideBackdrop:!0,open:l,children:[(0,Ee.jsxs)($s,{sx:{position:"relative",backgroundColor:"#3597E4"},children:[(0,Ee.jsx)(gn,{style:{fontWeight:"600",color:"#fff",marginLeft:"10px"},children:null===d||void 0===d?void 0:d.title}),(0,Ee.jsx)(ur,{children:(0,Ee.jsx)(ci,{fontSize:"medium",sx:{color:"#fff"},onClick:function(){return p(Ua({isShowSidebar:!1,idTravelLocation:""}))}})})]}),(0,Ee.jsxs)(mr,{sx:{width:400,height:"100%",pt:1,overflow:"hidden"},children:[(0,Ee.jsx)("img",{style:{width:400,height:320,objectFit:"cover",backgroundPosition:"center"},src:null===d||void 0===d?void 0:d.image,alt:null===d||void 0===d?void 0:d.imageDesc}),(0,Ee.jsxs)("div",{className:"info-travel",children:[(0,Ee.jsx)("h1",{className:"header-info",children:"Th\xf4ng tin \u0111\u1ecba \u0111i\u1ec3m:"}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"Lo\u1ea1i h\xecnh du l\u1ecbch: "}),(0,Ee.jsx)("span",{children:g&&Eo(g)})]}),(0,Ee.jsx)("hr",{style:{margin:"5px",border:"1px solid #000"}}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"Gi\u1edbi thi\u1ec7u chung:"}),(0,Ee.jsx)("span",{children:(null===d||void 0===d?void 0:d.description)&&Eo(null===d||void 0===d?void 0:d.description)})]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"\u0110\u1ecba ch\u1ec9: "}),(0,Ee.jsx)("span",{children:null===d||void 0===d?void 0:d.locationName})]}),(0,Ee.jsxs)("div",{className:"info",children:[(0,Ee.jsx)("label",{children:"T\u1ecda \u0111\u1ed9 tr\xean GoogleMap: "}),(0,Ee.jsx)("a",{href:null===d||void 0===d?void 0:d.locationLink,children:"T\u1ea1i \u0111\xe2y"})]})]})]})]})})},tl=function(){var t=Qs(),n=(0,e.useState)(""),r=(0,o.Z)(n,2),i=r[0],a=r[1],s=(0,e.useState)([]),l=(0,o.Z)(s,2),u=l[0],c=l[1];(0,e.useEffect)((function(){a(i);var e=t.filter((function(e){return e.title}));if(""!==i){var n=e.filter((function(e){return Object.values(e).join("").toLowerCase().includes(i.toLowerCase())}));c(n)}else c(e)}),[i,t]);var h=_e(),d=(0,e.useState)(""),f=(0,o.Z)(d,2),p=f[0],m=f[1],v=function(e){var t=e.currentTarget.id;m(t)};return(0,e.useEffect)((function(){h(jo(p)),h(Ua({isShowSidebar:!0,idTravelLocation:p}))}),[p]),(0,Ee.jsxs)("div",{className:"all-information-travel",children:[(0,Ee.jsx)(Yt,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:350,border:"none",borderRadius:"15px",boxShadow:"0px 0px 7px 2px rgb(0 0 0 / 15%)",backgroundColor:"#ffffff",height:"3em",fontSize:"1rem",marginBottom:"20px"},children:(0,Ee.jsx)(Bs,{onChange:function(e){a(e)},placeholder:"Nh\u1eadp t\xean \u0111\u1ecba \u0111i\u1ec3m b\u1ea1n th\xedch..."})}),(0,Ee.jsx)(Ds,{sx:{width:350,maxHeight:800,cursor:"pointer"},cols:1,children:u.map((function(e){return(0,Ee.jsxs)(Zs,{id:e.id,onClick:v,children:[(0,Ee.jsx)("img",{style:{minWidth:330,maxHeight:260,paddingTop:"10px",borderRadius:"30px"},src:e.image,srcSet:e.image,alt:e.imageDesc,loading:"lazy"}),(0,Ee.jsx)(Ys,{style:{fontSize:"18px",minWidth:330,borderBottomLeftRadius:"30px",borderBottomRightRadius:"30px"},title:e.title,subtitle:Eo(e.description)})]},e.id)}))}),p&&(0,Ee.jsx)(el,{})]})},nl=(0,Ae.ZP)("div")((function(e){var t=e.theme;return a({display:"flex",alignItems:"center",justifyContent:"space-between",padding:t.spacing(0,1)},t.mixins.toolbar)})),rl=function(){var t=(0,e.useState)(!1),n=(0,o.Z)(t,2),r=n[0],i=n[1],a=(0,e.useState)(!1),s=(0,o.Z)(a,2),l=s[0],u=s[1],c=_e();return(0,e.useEffect)((function(){c(No(r))}),[r]),(0,Ee.jsxs)("div",{className:"travel-location",children:[(0,Ee.jsxs)("div",{className:"row align-items-center h-100",children:[(0,Ee.jsx)("div",{className:"small-3",children:(0,Ee.jsx)("div",{className:"route-no text-center",children:(0,Ee.jsx)("span",{children:"Travel"})})}),(0,Ee.jsxs)("div",{className:"small-7",children:[(0,Ee.jsx)("p",{className:"code-route",children:"Tourist Destinations"}),(0,Ee.jsx)("p",{className:"code-desc",style:{fontSize:"14px"},children:"Nh\u1eefng \u0111\u1ecba \u0111i\u1ec3m du l\u1ecbch n\u1ed5i ti\u1ebfng t\u1ea1i \u0110\xe0 N\u1eb5ng"})]}),(0,Ee.jsx)("div",{className:"small-2",children:(0,Ee.jsx)("div",{className:"text-center",children:(0,Ee.jsx)(hs,{checked:r,onChange:function(){i(!r),u(!0!==r)},sx:{"& .MuiSvgIcon-root":{fontSize:30}}})})}),(0,Ee.jsx)("hr",{style:{marginTop:"10px",border:"1px solid #2247c7"}})]}),(r||l)&&(0,Ee.jsx)("div",{className:"sidebar-travel-location",children:(0,Ee.jsxs)(sn,{variant:"persistent",anchor:"right",hideBackdrop:!0,open:l,children:[(0,Ee.jsxs)(nl,{sx:{position:"relative",backgroundColor:"#3597E4"},children:[(0,Ee.jsx)(gn,{style:{fontWeight:"600",color:"#fff",marginLeft:"10px"},children:"Danh s\xe1ch \u0111\u1ecba \u0111i\u1ec3m du l\u1ecbch t\u1ea1i \u0110\xe0 N\u1eb5ng"}),(0,Ee.jsx)(ur,{onClick:function(){u(!l)},children:(0,Ee.jsx)(ci,{fontSize:"medium",sx:{color:"#fff"}})})]}),(0,Ee.jsx)(mr,{sx:{width:400,height:"100%",p:3,overflow:"hidden"},children:(0,Ee.jsx)(tl,{})})]})})]})},il=n(5146);var al=n(1694),ol=n.n(al),sl=["as","disabled"];function ll(e){var t=e.tagName,n=e.disabled,r=e.href,i=e.target,a=e.rel,o=e.role,s=e.onClick,l=e.tabIndex,u=void 0===l?0:l,c=e.type;t||(t=null!=r||null!=i||null!=a?"a":"button");var h={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},h];var d=function(e){(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==s||s(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=o?o:"button",disabled:void 0,tabIndex:n?void 0:u,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?a:void 0,onClick:d,onKeyDown:function(e){" "===e.key&&(e.preventDefault(),d(e))}},h]}var ul=e.forwardRef((function(e,t){var n=e.as,r=e.disabled,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,sl),a=ll(Object.assign({tagName:n,disabled:r},i)),s=(0,o.Z)(a,2),l=s[0],u=s[1].tagName;return(0,Ee.jsx)(u,Object.assign({},i,l,{ref:t}))}));ul.displayName="Button";var cl=["xxl","xl","lg","md","sm","xs"],hl=e.createContext({prefixes:{},breakpoints:cl,minBreakpoint:"xs"});hl.Consumer,hl.Provider;function dl(t,n){var r=(0,e.useContext)(hl).prefixes;return t||r[n]||n}var fl=["as","bsPrefix","variant","size","active","className"],pl=e.forwardRef((function(e,t){var n=e.as,r=e.bsPrefix,i=e.variant,s=e.size,l=e.active,u=e.className,c=function(e,t){if(null==e)return{};var n,r,i=(0,Re.Z)(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,fl),h=dl(r,"btn"),d=ll(a({tagName:n},c)),f=(0,o.Z)(d,2),p=f[0],m=f[1].tagName;return(0,Ee.jsx)(m,a(a(a({},p),c),{},{ref:t,className:ol()(u,h,l&&"active",i&&"".concat(h,"-").concat(i),s&&"".concat(h,"-").concat(s),c.href&&c.disabled&&"disabled")}))}));pl.displayName="Button",pl.defaultProps={variant:"primary",active:!1,disabled:!1};var ml=pl,vl=function(){var t=Bo(),n=(0,e.useState)([]),r=(0,o.Z)(n,2),i=r[0],s=r[1],l=(0,e.useState)(""),u=(0,o.Z)(l,2),c=u[0],h=u[1];(0,e.useEffect)((function(){h(c);var e=t.filter((function(e){return"turn"===e.directionRoute}));if(""!==c){var n=e.filter((function(e){return Object.values(e).join("").toLowerCase().includes(c.toLowerCase())}));s(n)}else s(e)}),[c,t]);var d=_e();(0,e.useEffect)((function(){var e,t=null===(e=i.filter((function(e){return e.isChecked})))||void 0===e?void 0:e.map((function(e){return e.codeBusRoute}));d(Oo(t))}),[i]);var f=(0,e.useState)(!1),p=(0,o.Z)(f,2),m=p[0],v=p[1],g=(0,e.useState)(""),y=(0,o.Z)(g,2),_=y[0],x=y[1],b=function(e){x(e.currentTarget.id),v(!m),d(Ga({isShowSidebar:!0}))},w=(0,e.useState)(""),k=(0,o.Z)(w,2),T=k[0],S=k[1],E=(0,e.useState)(""),C=(0,o.Z)(E,2),A=C[0],R=C[1];(0,e.useEffect)((function(){var e,n,r=null===(e=t.filter((function(e){return e.id===_}))[0])||void 0===e?void 0:e.nameRoute;S(r);var i=null===(n=t.filter((function(e){return e.id===_}))[0])||void 0===n?void 0:n.codeBusRoute;R(i)}),[_,t]);var M=(0,e.useState)(!1),B=(0,o.Z)(M,2),P=B[0],I=B[1],z=function(e){var t={};if(i.filter((function(e){return e.isChecked})).length<1){var n=e.target,r=n.value,o=n.checked;t=i.map((function(e){return e.codeBusRoute===r?a(a({},e),{},{isChecked:o}):e}))}else{var l=e.target,u=l.value;l.checked;t=i.map((function(e){return e.codeBusRoute===u?a(a({},e),{},{isChecked:!1}):e})),I(!0)}s(t)};return(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("div",{className:"filter-router",children:[(0,Ee.jsx)(Yt,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:320,border:"none",borderRadius:"15px",boxShadow:"0px 0px 7px 2px rgb(0 0 0 / 15%)",backgroundColor:"#ffffff",height:"3em",fontSize:"1rem"},children:(0,Ee.jsx)(Bs,{onChange:function(e){h(e)},placeholder:"Nh\u1eadp t\xean tuy\u1ebfn..."})}),(0,Ee.jsxs)("div",{className:"scroll-content",children:[(0,Ee.jsx)(rl,{}),i.map((function(e){return(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("div",{className:"filters-routes-column",children:[(0,Ee.jsxs)("div",{style:{cursor:"pointer"},id:e.id,className:"text-filters row align-items-center h-100",onClick:b,children:[(0,Ee.jsx)("div",{className:"small-3",children:(0,Ee.jsx)("div",{className:"route-no text-center",style:{background:"".concat(e.colorRoute)},children:(0,Ee.jsx)("span",{children:e.codeBusRoute})})}),(0,Ee.jsxs)("div",{className:"small-7",children:[(0,Ee.jsx)("p",{className:"code-route",children:e.codeBusRoute}),(0,Ee.jsx)("p",{className:"code-desc",children:e.nameRoute})]})]}),(0,Ee.jsx)("div",{className:"small-2",children:(0,Ee.jsx)("div",{className:"text-center",children:(0,Ee.jsx)(hs,{id:e.id,value:e.codeBusRoute,onChange:z,checked:(null===e||void 0===e?void 0:e.isChecked)||!1,sx:{"& .MuiSvgIcon-root":{fontSize:30}}})})})]}),(0,Ee.jsx)("hr",{style:{marginTop:"5px"}})]},e.id)})),m&&(0,Ee.jsx)(Wa,{show:!0,name:T,tabLeft:"Xem l\u01b0\u1ee3t \u0111i",tabRight:"Xem l\u01b0\u1ee3t v\u1ec1",compLeft:(0,Ee.jsx)(Uo,{nameCodeRoute:A,turnRoute:"turn"}),compRight:(0,Ee.jsx)(Uo,{nameCodeRoute:A,turnRoute:"return"})})]})]}),(0,Ee.jsx)(Ft,{open:P,onClose:function(){return I(!1)},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,Ee.jsxs)(mr,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,backgroundColor:"#fff",borderRadius:"5px",boxShadow:24,padding:"25px",marginBottom:"10px",textAlign:"center"},children:[(0,Ee.jsx)(il.Z,{style:{color:"orange",fontSize:"80px",marginBottom:"20px"}}),(0,Ee.jsx)(gn,{id:"modal-modal-title",variant:"h6",style:{marginBottom:"10px",fontSize:"24px",fontWeight:"600"},children:"Th\xf4ng b\xe1o"}),(0,Ee.jsx)(gn,{id:"modal-modal-description",style:{marginBottom:"10px"},children:"Ch\u1ec9 ch\u1ecdn t\u1ed1i \u0111a \u0111\u01b0\u1ee3c 1 tuy\u1ebfn"}),(0,Ee.jsx)(ml,{onClick:function(){return I(!1)},style:{margin:"20px 0px 0px 260px"},children:"\u0110\xf3ng"})]})})]})},gl=function(){var t=Ka(),n=(0,e.useState)(""),r=(0,o.Z)(n,2),i=r[0],a=r[1],s=(0,e.useState)([]),l=(0,o.Z)(s,2),u=l[0],c=l[1];(0,e.useEffect)((function(){if(""!==i){var e=t.filter((function(e){return Object.values(e.nameBusStop).join("").toLowerCase("").includes(i.toLowerCase())}));c(e)}else c(t)}),[i,t]);var h=(0,e.useState)(!1),d=(0,o.Z)(h,2),f=d[0],p=d[1],m=(0,e.useState)(""),v=(0,o.Z)(m,2),g=v[0],y=v[1],_=function(e){y(e.currentTarget.id),p(!f)},x=_e();(0,e.useEffect)((function(){x(Fo(g))}),[g]);var b=(0,e.useState)(""),w=(0,o.Z)(b,2),k=w[0],T=w[1],S=(0,e.useState)({}),E=(0,o.Z)(S,2),C=E[0],A=E[1];return(0,e.useEffect)((function(){var e,t,n=null===(e=u.filter((function(e){return e.id===g}))[0])||void 0===e?void 0:e.nameBusStop;T(n);var r=null===(t=u.filter((function(e){return e.id===g}))[0])||void 0===t?void 0:t.location;A(r)}),[u,g]),(0,Ee.jsxs)("div",{className:"all-bus-stop",children:[(0,Ee.jsx)(Yt,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:320,border:"none",borderRadius:"15px",boxShadow:"0px 0px 7px 2px rgb(0 0 0 / 15%)",backgroundColor:"#ffffff",height:"3em",fontSize:"1rem"},children:(0,Ee.jsx)(Bs,{onChange:function(e){a(e)},placeholder:"Nh\u1eadp t\xean tr\u1ea1m d\u1eebng..."})}),(0,Ee.jsxs)("div",{className:"scroll-content",children:[u.map((function(e,t){return(0,Ee.jsxs)("div",{className:"row align-items-center h-100",style:{cursor:"pointer"},onClick:_,id:e.id,children:[(0,Ee.jsx)("div",{className:"small-3 mt-10",children:(0,Ee.jsx)("div",{className:"route-no text-center",children:(0,Ee.jsx)("span",{style:{fontWeight:600},children:t+1})})}),(0,Ee.jsx)("div",{className:"small-7",children:(0,Ee.jsx)("p",{style:{color:"#000",fontSize:"16px",fontWeight:600,margin:"5px"},children:e.nameBusStop})}),(0,Ee.jsx)("hr",{})]},e.id)})),f&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(Wa,{show:f,name:k,tabLeft:"Xe s\u1eafp t\u1edbi tr\u1ea1m",tabRight:"Tuy\u1ebfn \u0111i qua",compLeft:(0,Ee.jsx)(vo,{idBusStop:g}),compRight:(0,Ee.jsx)(Go,{idBusStop:g})}),C&&(0,Ee.jsx)(Ho,{nameBusStop:k,locationBusStop:C})]})]})]})},yl=function(){var t=(0,e.useState)("1"),n=(0,o.Z)(t,2),r=n[0],i=n[1];return(0,Ee.jsx)("div",{className:"sidebar-busroute",children:(0,Ee.jsxs)(wr,{value:r,children:[(0,Ee.jsx)(mr,{children:(0,Ee.jsxs)(ai,{onChange:function(e,t){i(t)},"aria-label":"lab",children:[(0,Ee.jsx)(xr,{style:{width:"50%",textTransform:"none"},label:"Tuy\u1ebfn",value:"1"}),(0,Ee.jsx)(xr,{style:{width:"50%",textTransform:"none"},label:"Tr\u1ea1m d\u1eebng",value:"2"})]})}),(0,Ee.jsxs)(mr,{children:[(0,Ee.jsx)(ui,{style:{padding:"12px 0px 10px 0px"},value:"1",children:(0,Ee.jsx)(vl,{})}),(0,Ee.jsx)(ui,{style:{padding:"12px 0px 10px 0px"},value:"2",children:(0,Ee.jsx)(gl,{})})]})]})})},_l=n(7441),xl=n(9613),bl=n.n(xl);var wl=function(e){function t(e,r,l,u,d){for(var f,p,m,v,x,w=0,k=0,T=0,S=0,E=0,P=0,z=m=f=0,D=0,O=0,N=0,F=0,j=l.length,V=j-1,Z="",U="",G="",H="";D<j;){if(p=l.charCodeAt(D),D===V&&0!==k+S+T+w&&(0!==k&&(p=47===k?10:47),S=T=w=0,j++,V++),0===k+S+T+w){if(D===V&&(0<O&&(Z=Z.replace(h,"")),0<Z.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:Z+=l.charAt(D)}p=59}switch(p){case 123:for(f=(Z=Z.trim()).charCodeAt(0),m=1,F=++D;D<j;){switch(p=l.charCodeAt(D)){case 123:m++;break;case 125:m--;break;case 47:switch(p=l.charCodeAt(D+1)){case 42:case 47:e:{for(z=D+1;z<V;++z)switch(l.charCodeAt(z)){case 47:if(42===p&&42===l.charCodeAt(z-1)&&D+2!==z){D=z+1;break e}break;case 10:if(47===p){D=z+1;break e}}D=z}}break;case 91:p++;case 40:p++;case 34:case 39:for(;D++<V&&l.charCodeAt(D)!==p;);}if(0===m)break;D++}if(m=l.substring(F,D),0===f&&(f=(Z=Z.replace(c,"").trim()).charCodeAt(0)),64===f){switch(0<O&&(Z=Z.replace(h,"")),p=Z.charCodeAt(1)){case 100:case 109:case 115:case 45:O=r;break;default:O=B}if(F=(m=t(r,O,m,p,d+1)).length,0<I&&(x=s(3,m,O=n(B,Z,N),r,A,C,F,p,d,u),Z=O.join(""),void 0!==x&&0===(F=(m=x.trim()).length)&&(p=0,m="")),0<F)switch(p){case 115:Z=Z.replace(b,o);case 100:case 109:case 45:m=Z+"{"+m+"}";break;case 107:m=(Z=Z.replace(g,"$1 $2"))+"{"+m+"}",m=1===M||2===M&&a("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=Z+m,112===u&&(U+=m,m="")}else m=""}else m=t(r,n(r,Z,N),m,u,d+1);G+=m,m=N=O=z=f=0,Z="",p=l.charCodeAt(++D);break;case 125:case 59:if(1<(F=(Z=(0<O?Z.replace(h,""):Z).trim()).length))switch(0===z&&(f=Z.charCodeAt(0),45===f||96<f&&123>f)&&(F=(Z=Z.replace(" ",":")).length),0<I&&void 0!==(x=s(1,Z,r,e,A,C,U.length,u,d,u))&&0===(F=(Z=x.trim()).length)&&(Z="\0\0"),f=Z.charCodeAt(0),p=Z.charCodeAt(1),f){case 0:break;case 64:if(105===p||99===p){H+=Z+l.charAt(D);break}default:58!==Z.charCodeAt(F-1)&&(U+=i(Z,f,p,Z.charCodeAt(2)))}N=O=z=f=0,Z="",p=l.charCodeAt(++D)}}switch(p){case 13:case 10:47===k?k=0:0===1+f&&107!==u&&0<Z.length&&(O=1,Z+="\0"),0<I*L&&s(0,Z,r,e,A,C,U.length,u,d,u),C=1,A++;break;case 59:case 125:if(0===k+S+T+w){C++;break}default:switch(C++,v=l.charAt(D),p){case 9:case 32:if(0===S+w+k)switch(E){case 44:case 58:case 9:case 32:v="";break;default:32!==p&&(v=" ")}break;case 0:v="\\0";break;case 12:v="\\f";break;case 11:v="\\v";break;case 38:0===S+k+w&&(O=N=1,v="\f"+v);break;case 108:if(0===S+k+w+R&&0<z)switch(D-z){case 2:112===E&&58===l.charCodeAt(D-3)&&(R=E);case 8:111===P&&(R=P)}break;case 58:0===S+k+w&&(z=D);break;case 44:0===k+T+S+w&&(O=1,v+="\r");break;case 34:case 39:0===k&&(S=S===p?0:0===S?p:S);break;case 91:0===S+k+T&&w++;break;case 93:0===S+k+T&&w--;break;case 41:0===S+k+w&&T--;break;case 40:if(0===S+k+w){if(0===f)if(2*E+3*P===533);else f=1;T++}break;case 64:0===k+T+S+w+z+m&&(m=1);break;case 42:case 47:if(!(0<S+w+T))switch(k){case 0:switch(2*p+3*l.charCodeAt(D+1)){case 235:k=47;break;case 220:F=D,k=42}break;case 42:47===p&&42===E&&F+2!==D&&(33===l.charCodeAt(F+2)&&(U+=l.substring(F,D+1)),v="",k=0)}}0===k&&(Z+=v)}P=E,E=p,D++}if(0<(F=U.length)){if(O=r,0<I&&(void 0!==(x=s(2,U,O,e,A,C,F,u,d,u))&&0===(U=x).length))return H+U+G;if(U=O.join(",")+"{"+U+"}",0!==M*R){switch(2!==M||a(U,2)||(R=0),R){case 111:U=U.replace(_,":-moz-$1")+U;break;case 112:U=U.replace(y,"::-webkit-input-$1")+U.replace(y,"::-moz-$1")+U.replace(y,":-ms-input-$1")+U}R=0}}return H+U+G}function n(e,t,n){var i=t.trim().split(m);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<a;++s)t[s]=r(e,t[s],n).trim();break;default:var l=s=0;for(t=[];s<a;++s)for(var u=0;u<o;++u)t[l++]=r(e[u]+" ",i[s],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(v,"$1"+e.trim());case 58:return e.trim()+t.replace(v,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(v,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",s=2*t+3*n+4*r;if(944===s){e=o.indexOf(":",9)+1;var l=o.substring(e,o.length-1).trim();return l=o.substring(0,e).trim()+l+";",1===M||2===M&&a(l,1)?"-webkit-"+l+l:l}if(0===M||2===M&&!a(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(E,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(l=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+l+o;case 1005:return f.test(o)?o.replace(d,":-webkit-")+o.replace(d,":-moz-")+o:o;case 1e3:switch(t=(l=o.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=o.replace(x,"tb");break;case 232:l=o.replace(x,"tb-rl");break;case 220:l=o.replace(x,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+l+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(l=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:o=o.replace(l,"-webkit-"+l)+";"+o;break;case 207:case 102:o=o.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(l,"-webkit-"+l)+";"+o.replace(l,"-ms-"+l+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return l=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+l+"-ms-flex-"+l+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(k,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(k,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===S.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(l,"-webkit-"+l)+o.replace(l,"-moz-"+l.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),z(2!==t?r:r.replace(T,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(w," or ($1)").substring(4):"("+t+")"}function s(e,t,n,r,i,a,o,s,l,c){for(var h,d=0,f=t;d<I;++d)switch(h=P[d].call(u,e,f,n,r,i,a,o,s,l,c)){case void 0:case!1:case!0:case null:break;default:f=h}if(f!==t)return f}function l(e){return void 0!==(e=e.prefix)&&(z=null,e?"function"!==typeof e?M=1:(M=2,z=e):M=0),l}function u(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<I){var i=s(-1,n,r,r,A,C,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(B,r,n,0,0);return 0<I&&(void 0!==(i=s(-2,a,r,r,A,C,a.length,0,0,0))&&(a=i)),"",R=0,C=A=1,a}var c=/^\0+/g,h=/[\0\r\f]/g,d=/: */g,f=/zoo|gra/,p=/([,: ])(transform)/g,m=/,\r+?/g,v=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,_=/:(read-only)/g,x=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,k=/-self|flex-/g,T=/[^]*?(:[rp][el]a[\w-]+)[^]*/,S=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,C=1,A=1,R=0,M=1,B=[],P=[],I=0,z=null,L=0;return u.use=function e(t){switch(t){case void 0:case null:I=P.length=0;break;default:if("function"===typeof t)P[I++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},u.set=l,void 0!==e&&l(e),u},kl={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tl=n(9791);function Sl(){return(Sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var El=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},Cl=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,_l.typeOf)(e)},Al=Object.freeze([]),Rl=Object.freeze({});function Ml(e){return"function"==typeof e}function Bl(e){return e.displayName||e.name||"Component"}function Pl(e){return e&&"string"==typeof e.styledComponentId}var Il="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.SC_ATTR)||"data-styled",zl="undefined"!=typeof window&&"HTMLElement"in window,Ll=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/city-bus-tracking",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_MAPBOX_KEY:"pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA"}.SC_DISABLE_SPEEDY));function Dl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var Ol=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&Dl(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),s=0,l=t.length;s<l;s++)this.tag.insertRule(o,t[s])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),Nl=new Map,Fl=new Map,jl=1,Vl=function(e){if(Nl.has(e))return Nl.get(e);for(;Fl.has(jl);)jl++;var t=jl++;return Nl.set(e,t),Fl.set(t,e),t},Zl=function(e){return Fl.get(e)},Ul=function(e,t){t>=jl&&(jl=t+1),Nl.set(e,t),Fl.set(t,e)},Gl="style["+Il+'][data-styled-version="5.3.6"]',Hl=new RegExp("^"+Il+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),ql=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},Wl=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var s=o.match(Hl);if(s){var l=0|parseInt(s[1],10),u=s[2];0!==l&&(Ul(u,l),ql(e,u,s[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(o)}}},Xl=function(){return n.nc},Kl=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(Il))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(Il,"active"),r.setAttribute("data-styled-version","5.3.6");var o=Xl();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},Yl=function(){function e(e){var t=this.element=Kl(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}Dl(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),Jl=function(){function e(e){var t=this.element=Kl(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Ql=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),$l=zl,eu={isServer:!zl,useCSSOMInjection:!Ll},tu=function(){function e(e,t,n){void 0===e&&(e=Rl),void 0===t&&(t={}),this.options=Sl({},eu,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&zl&&$l&&($l=!1,function(e){for(var t=document.querySelectorAll(Gl),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(Il)&&(Wl(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return Vl(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(Sl({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new Ql(i):r?new Yl(i):new Jl(i),new Ol(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(Vl(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(Vl(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(Vl(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=Zl(i);if(void 0!==a){var o=e.names.get(a),s=t.getGroup(i);if(o&&s&&o.size){var l=Il+".g"+i+'[id="'+a+'"]',u="";void 0!==o&&o.forEach((function(e){e.length>0&&(u+=e+",")})),r+=""+s+l+'{content:"'+u+'"}/*!sc*/\n'}}}return r}(this)},e}(),nu=/(a)(d)/gi,ru=function(e){return String.fromCharCode(e+(e>25?39:97))};function iu(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=ru(t%52)+n;return(ru(t%52)+n).replace(nu,"$1-$2")}var au=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},ou=function(e){return au(5381,e)};function su(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Ml(n)&&!Pl(n))return!1}return!0}var lu=ou("5.3.6"),uu=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&su(e),this.componentId=t,this.baseHash=au(lu,t),this.baseStyle=n,tu.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=Cu(this.rules,e,t,n).join(""),o=iu(au(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var s=n(a,"."+o,void 0,r);t.insertRules(r,o,s)}i.push(o),this.staticRulesId=o}else{for(var l=this.rules.length,u=au(this.baseHash,n.hash),c="",h=0;h<l;h++){var d=this.rules[h];if("string"==typeof d)c+=d;else if(d){var f=Cu(d,e,t,n),p=Array.isArray(f)?f.join(""):f;u=au(u,p+h),c+=p}}if(c){var m=iu(u>>>0);if(!t.hasNameForId(r,m)){var v=n(c,"."+m,void 0,r);t.insertRules(r,m,v)}i.push(m)}}return i.join(" ")},e}(),cu=/^\s*\/\/.*$/gm,hu=[":","[",".","#"];function du(e){var t,n,r,i,a=void 0===e?Rl:e,o=a.options,s=void 0===o?Rl:o,l=a.plugins,u=void 0===l?Al:l,c=new wl(s),h=[],d=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,s,l,u,c,h){switch(n){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),f=function(e,r,a){return 0===r&&-1!==hu.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,s){void 0===s&&(s="&");var l=e.replace(cu,""),u=a&&o?o+" "+a+" { "+l+" }":l;return t=s,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),c(o||!a?"":a,u)}return c.use([].concat(u,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,f))},d,function(e){if(-2===e){var t=h;return h=[],t}}])),p.hash=u.length?u.reduce((function(e,t){return t.name||Dl(15),au(e,t.name)}),5381).toString():"",p}var fu=e.createContext(),pu=(fu.Consumer,e.createContext()),mu=(pu.Consumer,new tu),vu=du();function gu(){return(0,e.useContext)(fu)||mu}function yu(){return(0,e.useContext)(pu)||vu}function _u(t){var n=(0,e.useState)(t.stylisPlugins),r=n[0],i=n[1],a=gu(),o=(0,e.useMemo)((function(){var e=a;return t.sheet?e=t.sheet:t.target&&(e=e.reconstructWithOptions({target:t.target},!1)),t.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[t.disableCSSOMInjection,t.sheet,t.target]),s=(0,e.useMemo)((function(){return du({options:{prefix:!t.disableVendorPrefixes},plugins:r})}),[t.disableVendorPrefixes,r]);return(0,e.useEffect)((function(){bl()(r,t.stylisPlugins)||i(t.stylisPlugins)}),[t.stylisPlugins]),e.createElement(fu.Provider,{value:o},e.createElement(pu.Provider,{value:s},t.children))}var xu=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=vu);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return Dl(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=vu),this.name+e.hash},e}(),bu=/([A-Z])/,wu=/([A-Z])/g,ku=/^ms-/,Tu=function(e){return"-"+e.toLowerCase()};function Su(e){return bu.test(e)?e.replace(wu,Tu).replace(ku,"-ms-"):e}var Eu=function(e){return null==e||!1===e||""===e};function Cu(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,s=e.length;o<s;o+=1)""!==(i=Cu(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return Eu(e)?"":Pl(e)?"."+e.styledComponentId:Ml(e)?"function"!=typeof(l=e)||l.prototype&&l.prototype.isReactComponent||!t?e:Cu(e(t),t,n,r):e instanceof xu?n?(e.inject(n,r),e.getName(r)):e:Cl(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!Eu(t[o])&&(Array.isArray(t[o])&&t[o].isCss||Ml(t[o])?a.push(Su(o)+":",t[o],";"):Cl(t[o])?a.push.apply(a,e(t[o],o)):a.push(Su(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in kl?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var l}var Au=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function Ru(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ml(e)||Cl(e)?Au(Cu(El(Al,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:Au(Cu(El(e,n)))}new Set;var Mu=function(e,t,n){return void 0===n&&(n=Rl),e.theme!==n.theme&&e.theme||t||n.theme},Bu=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Pu=/(^-|-$)/g;function Iu(e){return e.replace(Bu,"-").replace(Pu,"")}var zu=function(e){return iu(ou(e)>>>0)};function Lu(e){return"string"==typeof e&&!0}var Du=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Ou=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Nu(e,t,n){var r=e[n];Du(t)&&Du(r)?Fu(r,t):e[n]=t}function Fu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if(Du(o))for(var s in o)Ou(s)&&Nu(e,o[s],s)}return e}var ju=e.createContext();ju.Consumer;var Vu={};function Zu(t,n,r){var i=Pl(t),a=!Lu(t),o=n.attrs,s=void 0===o?Al:o,l=n.componentId,u=void 0===l?function(e,t){var n="string"!=typeof e?"sc":Iu(e);Vu[n]=(Vu[n]||0)+1;var r=n+"-"+zu("5.3.6"+n+Vu[n]);return t?t+"-"+r:r}(n.displayName,n.parentComponentId):l,c=n.displayName,h=void 0===c?function(e){return Lu(e)?"styled."+e:"Styled("+Bl(e)+")"}(t):c,d=n.displayName&&n.componentId?Iu(n.displayName)+"-"+n.componentId:n.componentId||u,f=i&&t.attrs?Array.prototype.concat(t.attrs,s).filter(Boolean):s,p=n.shouldForwardProp;i&&t.shouldForwardProp&&(p=n.shouldForwardProp?function(e,r,i){return t.shouldForwardProp(e,r,i)&&n.shouldForwardProp(e,r,i)}:t.shouldForwardProp);var m,v=new uu(r,d,i?t.componentStyle:void 0),g=v.isStatic&&0===s.length,y=function(t,n){return function(t,n,r,i){var a=t.attrs,o=t.componentStyle,s=t.defaultProps,l=t.foldedComponentIds,u=t.shouldForwardProp,c=t.styledComponentId,h=t.target,d=function(e,t,n){void 0===e&&(e=Rl);var r=Sl({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in Ml(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(Mu(n,(0,e.useContext)(ju),s)||Rl,n,a),f=d[0],p=d[1],m=function(e,t,n,r){var i=gu(),a=yu();return t?e.generateAndInjectStyles(Rl,i,a):e.generateAndInjectStyles(n,i,a)}(o,i,f),v=r,g=p.$as||n.$as||p.as||n.as||h,y=Lu(g),_=p!==n?Sl({},n,{},p):n,x={};for(var b in _)"$"!==b[0]&&"as"!==b&&("forwardedAs"===b?x.as=_[b]:(u?u(b,Tl.Z,g):!y||(0,Tl.Z)(b))&&(x[b]=_[b]));return n.style&&p.style!==n.style&&(x.style=Sl({},n.style,{},p.style)),x.className=Array.prototype.concat(l,c,m!==c?m:null,n.className,p.className).filter(Boolean).join(" "),x.ref=v,(0,e.createElement)(g,x)}(m,t,n,g)};return y.displayName=h,(m=e.forwardRef(y)).attrs=f,m.componentStyle=v,m.displayName=h,m.shouldForwardProp=p,m.foldedComponentIds=i?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):Al,m.styledComponentId=d,m.target=i?t.target:t,m.withComponent=function(e){var t=n.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["componentId"]),a=t&&t+"-"+(Lu(e)?e:Iu(Bl(e)));return Zu(e,Sl({},i,{attrs:f,componentId:a}),r)},Object.defineProperty(m,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=i?Fu({},t.defaultProps,e):e}}),m.toString=function(){return"."+m.styledComponentId},a&&ce()(m,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),m}var Uu=function(e){return function e(t,n,r){if(void 0===r&&(r=Rl),!(0,_l.isValidElementType)(n))return Dl(1,String(n));var i=function(){return t(n,r,Ru.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,Sl({},r,{},i))},i.attrs=function(i){return e(t,n,Sl({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(Zu,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Uu[e]=Uu(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=su(e),tu.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(Cu(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&tu.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function t(){var t=this;this._emitSheetCSS=function(){var e=t.instance.toString();if(!e)return"";var n=Xl();return"<style "+[n&&'nonce="'+n+'"',Il+'="true"','data-styled-version="5.3.6"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return t.sealed?Dl(2):t._emitSheetCSS()},this.getStyleElement=function(){var n;if(t.sealed)return Dl(2);var r=((n={})[Il]="",n["data-styled-version"]="5.3.6",n.dangerouslySetInnerHTML={__html:t.instance.toString()},n),i=Xl();return i&&(r.nonce=i),[e.createElement("style",Sl({},r,{key:"sc-0-0"}))]},this.seal=function(){t.sealed=!0},this.instance=new tu({isServer:!0}),this.sealed=!1}var n=t.prototype;n.collectStyles=function(t){return this.sealed?Dl(2):e.createElement(_u,{sheet:this.instance},t)},n.interleaveWithNodeStream=function(e){return Dl(3)}}();var Gu,Hu,qu=Uu,Wu=n(4569),Xu=n.n(Wu),Ku="pk.eyJ1IjoidGhhaXJ5byIsImEiOiJjbDdjb2ZnY3QxM2F6M3FtaW9zMDFpNWkzIn0.tPFJvhG-HJ0TdmJGolVjHA",Yu=function(){function e(){c(this,e)}return d(e,[{key:"searchLocation",value:function(){var e=ke(be().mark((function e(t){var n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xu().get("https://api.mapbox.com/geocoding/v5/mapbox.places/Da%20Nang%20".concat(t,".json?access_token=").concat(Ku,"&autocomplete=true&country=vn"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDirection",value:function(){var e=ke(be().mark((function e(t,n){var r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xu().get("https://api.mapbox.com/directions/v5/mapbox/walking/".concat(t[0],",").concat(t[1],";").concat(n[0],",").concat(n[1],"?steps=true&geometries=geojson&access_token=").concat(Ku,"&language=vi"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Ju=new Yu,Qu=function(t){var n=t.idInput,r=t.placeholder,i=function(){var t=(0,e.useState)(""),n=(0,o.Z)(t,2),r=n[0],i=n[1],a=(0,e.useState)([]),s=(0,o.Z)(a,2),l=s[0],u=s[1],c=function(){var e=ke(be().mark((function e(t){var n,r;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(t.target.value),e.next=3,Ju.searchLocation(t.target.value);case 3:n=e.sent,r=n.features.map((function(e){return{name:e.place_name,coordinates:e.center}})),u(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{value:r,setValue:i,onChange:c,suggestions:l,setSuggestions:u}}(),s=(i.value,i.handleChange,(0,e.useState)([])),l=(0,o.Z)(s,2),u=l[0],c=l[1],h=_e(),d=(0,e.useState)(!1),f=(0,o.Z)(d,2),p=f[0],m=f[1],v=(0,e.useRef)();(0,e.useEffect)((function(){var e=function(e){v.current.contains(e.target)||m(!1)};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}));var g=(0,e.useState)(""),y=(0,o.Z)(g,2),_=y[0],x=y[1];return(0,e.useEffect)((function(){h(Vo({id:_,location:u}))}),[_,u]),(0,Ee.jsxs)("div",{ref:v,children:[(0,Ee.jsx)(Ms,a(a({placeholder:r},i),{},{sx:{ml:1,flex:1},autoComplete:"off",onClick:function(e){return function(e){m(!p),x(e.target.id)}(e)},id:n})),(null===i||void 0===i?void 0:i.suggestions.length)>0&&p&&(0,Ee.jsx)($u,{children:i.suggestions.map((function(e,t){return(0,Ee.jsx)(ec,{onClick:function(){i.setValue(e.name),i.setSuggestions([]),c(e.coordinates)},children:e.name},t)}))})]})},$u=qu.div(Gu||(Gu=xn(["\n  background: #fff;\n  position: absolute;\n  border-radius: '15px';\n  box-shadow: 0px 0px 7px 2px rgb(0 0 0 / 15%);\n  left: 0px;\n  max-width: 320px;\n  padding: 10px 20px;\n  border-radius: 0px 0px 10px 10px;\n  z-index: 1000;\n"]))),ec=qu.p(Hu||(Hu=xn(["\n  cursor: pointer;\n  max-width: 300px;\n  min-width: 300px;\n  font-size: 14.5px;\n  display: block;\n  text-overflow: ellipsis;\n"]))),tc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAhZJREFUeNq8V71Ow0AMdhm6dAkTKiyIFaGG7qh9hPAG6QsUeALKE/TnCTqx0oWxpIgHSBhgJF1QBUJKFhYYgn25pGkTNXdpDktOfI4df2f7LpcKFKXRQsOrzkcOdOt+kddUCgQ28XqRCA4xCIAhAhmrARDO+A65nWM5Qz4XzciOBFhLIDhwG0v0pTuCs+9lpHwT6dynpBKMFh5etXj8g/yE/MHHe8hnyNUVLx/LsLt9BkaL9kpwomkiOHB5mvLUuO/WJThcGXmc14l0nzm+pQD4lVq0pQCYrSV2vdYhVVOFSvsWBDBPBWpmWDUzgc3LWgV2ahl+I79x+Qi5lvKi7fm0rI1omNJQwBPONUGfLbdiW2IzEpq97FZ8pcJWHEC3Th09ELAccFsoOwNENzmdPec2oAZA+IntbLDoyB5MZDMQlSLr0DGWSX1xAMtSiOgUAejWAV4flr1AMun+CUBf0zT3cn8Rf2hIJh09A8XU13U9cF03INJvvxgTkY6eqQRBM46De54XGIN7xiRHIMhG5DNchHqmacbBMeUBHBwzJjkCQTZkq6IHGq1WiwmTyQR8H5f7+wtjkklHxG0aKgD4LGi+kbJV8IzEBMMwABtueQZHmXTciG6PyprQtu0gIsuyGEdEz1Q2IVvy1HBJEMngrDHRRu3PaRjgGlOuRWVwHIea0OfngLFqANHZ2Eycg30eWPoX/U+AAQBy/wic8Ed5wwAAAABJRU5ErkJggg==",nc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAkZJREFUeNq0V71OwzAQdik/FZVQGGABoZQFiSkdGJgA8QIMLGzlCQgSrKh9gpaNLY/AyoLSjYEhrEyJEBMMCUitgLYKd8YpTgiNkzgnnXI527kff3d2SiQjvexv7cJDZa/O8u19N8t3SimNKvDQgU+AlciwB3wJ3AFnPOkOgHENHgawljD1AfgYnHiQ5gCL3BQwzjuxJ5KJKcEP6nHGX997lGNIY2ukZcDl99zrfZC7xyfS+xzQ9+rcDNneWCNKtRLCBGRgMXcGGNpDgOONI6GMuggpbG3uLdCiaeeN807EbIcmCwOF0ZQgon/zOl8hM9PlP5NQt7RQnbhWigNoaGdTDTkR6JLW5qkC7AEhQA2GI+L1PyZlpQtVsCcLA63/Uo4ctyVxazI7wA6aNIdNV/RwSlMFx+zASSKPzSVSHYCIHMG0tthc+cfxf4BMC7y8jeg045gcB9g5H7cVHdE7gIxW3IkA0hMtOxl0AGyfr6/4gAfKKKOOjRWaAbxkXONl9KY/HCuZrLIxvajIEfkYqa/ruo/0dnFGGQl1wfiEKslFJm/csiz/6uiQMsoRJ8wi+gB+mNi2TV/q9TpZHX1R+bk8S8AJKtdqtcw9JjH9qqrSSNvtNp9uyqhDwjlptkEUhLS1et5P5YGRPxMCneM4oTUyCW/GvmmaNNJGozGOHmUkHGM6twgQNoNtcF2XGgQ8jAGIOi79zSIcUFiz8RVF8Q3DoA4go4w6ZtyO+W+URnjNtqIA5NhK8fuWKxN60Be4utezRP4twADGKDeo7E0gKgAAAABJRU5ErkJggg==",rc=n(8096),ic=n(6822),ac=n(1990),oc=n(79),sc=function(e){var t=null;switch(e.arrow){case"left":t=(0,Ee.jsx)(rc.Z,{});break;case"right":t=(0,Ee.jsx)(ac.Z,{});break;case"here":t=(0,Ee.jsx)(oc.Z,{});break;default:t=(0,Ee.jsx)(ic.Z,{})}return(0,Ee.jsx)(Ee.Fragment,{children:t})},lc=function(){var t=function(){var t=le((function(e){return e.routes.direction})),n=(0,e.useState)([]),r=(0,o.Z)(n,2),i=r[0],a=r[1],s=(0,e.useState)([]),l=(0,o.Z)(s,2),u=l[0],c=l[1];(0,e.useEffect)((function(){var e,n=[];"begin"===t.id&&(e=t.location,a(e)),"end"===t.id&&(n=t.location,c(n))}),[t]);var h=(0,e.useState)({}),d=(0,o.Z)(h,2),f=d[0],p=d[1];return(0,e.useEffect)((function(){var e=function(){var e=ke(be().mark((function e(){var t,n;return be().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ju.getDirection(i,u);case 2:t=e.sent,(n={}).beginCords=i,n.endCords=u,n.distance=t.routes[0].distance,n.duration=t.routes[0].duration,n.map={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.routes[0].geometry.coordinates}},n.steps=t.routes[0].legs[0].steps.map((function(e){return{name:e.maneuver.instruction,guide:e.maneuver.modifier||"here",distance:e.distance,duration:e.duration}})),p(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();0!==i.length&&0!==u.length&&e()}),[i,u]),f}();return(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("div",{className:"sidebar-findrouter",children:[(0,Ee.jsxs)(Yt,{component:"form",sx:{p:"2px 4px",alignItems:"center",width:"90%",border:"none",borderRadius:"15px",boxShadow:"0px 0px 7px 2px rgb(0 0 0 / 15%)",backgroundColor:"#ffffff",padding:"10px 0px",position:"relative",margin:"1rem",transition:"all 2s ease"},children:[(0,Ee.jsxs)("div",{className:"input-box pos-relative",children:[(0,Ee.jsx)("img",{src:nc,alt:"marker-red"}),(0,Ee.jsx)(Qu,{idInput:"begin",placeholder:"Nh\u1eadp \u0111\u1ecba \u0111i\u1ec3m b\u1eaft \u0111\u1ea7u"})]}),(0,Ee.jsx)("div",{className:"line"}),(0,Ee.jsxs)("div",{className:"input-box pos-relative",children:[(0,Ee.jsx)("img",{src:tc,alt:"marker-blue"}),(0,Ee.jsx)(Qu,{idInput:"end",placeholder:"Nh\u1eadp \u0111\u1ecba \u0111i\u1ec3m k\u1ebft th\xfac"})]})]}),(0,Ee.jsx)(gn,{style:{fontSize:"20px"},children:"D\u1eabn \u0111\u01b0\u1eddng:"}),(0,Ee.jsxs)(mr,{style:{paddingLeft:"0",maxHeight:"70vh",overflowY:"scroll"},children:[(0,Ee.jsxs)(mr,{children:[(null===t||void 0===t?void 0:t.beginCords)&&(0,Ee.jsxs)(gn,{style:{color:"#000"},children:["T\u1eeb ",null===t||void 0===t?void 0:t.beginCords[0],", ",null===t||void 0===t?void 0:t.beginCords[1]," \u0111\u1ebfn"," ",null===t||void 0===t?void 0:t.endCords[0],",",null===t||void 0===t?void 0:t.endCords[1]]}),0!==Object.keys(t).length&&(0,Ee.jsxs)(gn,{style:{color:"#000"},children:["T\u1ed5ng th\u1eddi gian: ",Math.floor((null===t||void 0===t?void 0:t.duration)/60)," ph\xfat"," ","(",Math.floor((null===t||void 0===t?void 0:t.distance)/1e3)," km",")"]})]}),(0,Ee.jsx)("hr",{}),(0,Ee.jsx)(mr,{style:{display:"flex",flexDirection:"column",marginTop:"10px"},children:(null===t||void 0===t?void 0:t.steps)&&(null===t||void 0===t?void 0:t.steps.map((function(e){return(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(sc,{arrow:null===e||void 0===e?void 0:e.guide}),(0,Ee.jsxs)(gn,{style:{textAlign:"left",justifyContent:"left",lineHeight:"30px"},children:[e.name,(0,Ee.jsxs)(gn,{style:{color:"#000"},children:["kho\u1ea3ng"," ",(null===e||void 0===e?void 0:e.distance)>1e3?"".concat(Math.floor((null===e||void 0===e?void 0:e.distance)/1e3)," km"):"".concat(Math.floor(null===e||void 0===e?void 0:e.distance)," m")," (",(null===e||void 0===e?void 0:e.duration)>60?"".concat(Math.floor((null===e||void 0===e?void 0:e.duration)/60)," ph\xfat"):"".concat(Math.floor(null===e||void 0===e?void 0:e.duration)," gi\xe2y"),")",(0,Ee.jsx)("hr",{})]})]})]})})))})]})]}),(null===t||void 0===t?void 0:t.map)&&(0,Ee.jsx)(X,{id:"polylineLayer",type:"geojson",data:null===t||void 0===t?void 0:t.map,children:(0,Ee.jsx)(Y,{id:"lineLayer",type:"line",source:"my-data",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#00b0ff","line-width":5}})}),(null===t||void 0===t?void 0:t.beginCords)&&(null===t||void 0===t?void 0:t.endCords)&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(O,{latitude:null===t||void 0===t?void 0:t.beginCords[1],longitude:null===t||void 0===t?void 0:t.beginCords[0],anchor:"bottom",children:(0,Ee.jsx)("img",{style:{height:30,width:30,cursor:"pointer"},src:nc,alt:"marker"})}),(0,Ee.jsx)(O,{latitude:null===t||void 0===t?void 0:t.endCords[1],longitude:null===t||void 0===t?void 0:t.endCords[0],anchor:"bottom",children:(0,Ee.jsx)("img",{style:{height:30,width:30,cursor:"pointer"},src:tc,alt:"marker"})})]})]})},uc=n(4823),cc=n(6049),hc=(0,Ae.ZP)("div")((function(e){var t=e.theme;return a({display:"flex",alignItems:"center",justifyContent:"space-between",padding:t.spacing(0,1)},t.mixins.toolbar)})),dc=function(){var t=(0,e.useState)(!0),n=(0,o.Z)(t,2),r=n[0],i=n[1],a=(0,e.useState)("1"),s=(0,o.Z)(a,2),l=s[0],u=s[1],c=function(e){return function(){i(e)}};return(0,Ee.jsxs)("div",{className:"home-sidebar",children:[(0,Ee.jsx)(mr,{sx:{backgroundColor:"#3597e4",width:"3rem",height:"3.5rem",position:"absolute",boxShadow:"0.19rem 0 0.375rem 0 rgb(0 0 0 / 16%)",borderTopRightRadius:"0.3rem",borderBottomRightRadius:"0.3rem"},children:(0,Ee.jsx)(ur,{onClick:c(!0),children:(0,Ee.jsx)(cc.Z,{fontSize:"large",sx:{color:"#fff"}})})}),(0,Ee.jsxs)(sn,{variant:"persistent",hideBackdrop:!0,open:r,children:[(0,Ee.jsxs)(hc,{sx:{position:"relative",backgroundColor:"#3597E4"},children:[(0,Ee.jsx)(gn,{style:{fontWeight:"600",color:"#fff"},children:"H\u1ec7 th\u1ed1ng xe bu\xfdt \u0110\xe0 N\u1eb5ng"}),(0,Ee.jsx)(ur,{onClick:c(!1),children:(0,Ee.jsx)(uc.Z,{fontSize:"large",sx:{color:"#fff"}})})]}),(0,Ee.jsx)(mr,{sx:{width:400,height:"100%",p:3,overflow:"hidden"},children:(0,Ee.jsx)(mr,{style:{width:"100%",color:"#3597E4",backgroundColor:"inherit",fontSize:"1.5rem"},children:(0,Ee.jsxs)(wr,{value:l,children:[(0,Ee.jsx)(mr,{children:(0,Ee.jsxs)(ai,{onChange:function(e,t){u(t)},"aria-label":"lab",children:[(0,Ee.jsx)(xr,{style:{width:"50%",textTransform:"none"},label:"Tra c\u1ee9u",value:"1"}),(0,Ee.jsx)(xr,{style:{width:"50%",textTransform:"none"},label:"T\xecm tuy\u1ebfn",value:"2"})]})}),(0,Ee.jsxs)(mr,{children:[(0,Ee.jsx)(ui,{style:{padding:"12px 0px 10px 0px"},value:"1",children:(0,Ee.jsx)(yl,{})}),(0,Ee.jsx)(ui,{style:{padding:"12px 0px 10px 0px"},value:"2",children:(0,Ee.jsx)(lc,{})})]})]})})})]})]})},fc=n.p+"static/media/icon_center.4a25810714d4c49050ba.png",pc=n.p+"static/media/icon_checking.3db9cf15aec07ceac06d.png",mc=n.p+"static/media/icon_cultural.2718389171f449bafeed.png",vc=n.p+"static/media/icon_discover.0f755ea81d71a10c8d16.png",gc=n.p+"static/media/icon_night.e49ab34eaf40f8c3247d.png",yc=function(e){var t=e.id,n=e.typeLocation,r=e.mouseEnter,i=e.mouseLeave,a=e.onClick,o=null;switch(n){case"center":o=fc;break;case"checkin":o=pc;break;case"cultural":o=mc;break;case"discover":o=vc;break;default:o=gc}return(0,Ee.jsx)("img",{style:{height:30,width:30,cursor:"pointer"},src:o,alt:"marker",onMouseEnter:r,onMouseLeave:i,onClick:a,id:t})},_c=function(t){var n=t.id,r=t.location,i=t.name,a=t.image,s=t.imageDesc,l=t.typeLocation,u=(0,e.useState)(!1),c=(0,o.Z)(u,2),h=c[0],d=c[1],f=(0,e.useState)(""),p=(0,o.Z)(f,2),m=p[0],v=p[1],g=_e();return(0,e.useEffect)((function(){g(Ua({isShowSidebar:!0,idTravelLocation:m}))}),[m]),console.log(m),(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)(O,{latitude:null===r||void 0===r?void 0:r.lat,longitude:null===r||void 0===r?void 0:r.lng,anchor:"bottom",children:[(0,Ee.jsx)(yc,{id:n,mouseEnter:function(e){e.preventDefault(),d(!0)},mouseLeave:function(e){e.preventDefault(),d(!1)},typeLocation:l,onClick:function(e){v(e.target.id)}}),h&&(0,Ee.jsx)(F,{className:"popup-form",latitude:null===r||void 0===r?void 0:r.lat,longitude:null===r||void 0===r?void 0:r.lng,anchor:"top",closeOnClick:!1,closeButton:!1,style:{maxWidth:240,maxHeight:200,padding:0,margin:0},children:(0,Ee.jsxs)("div",{className:"popup-content-custom",children:[(0,Ee.jsx)("img",{style:{width:236,height:100,borderRadius:"5px",objectFit:"cover",backgroundPosition:"center"},src:a,alt:s}),(0,Ee.jsxs)("span",{style:{fontSize:"11px",fontWeight:700},children:["\u0110\u1ecba \u0111i\u1ec3m: ",i]})]})})]}),m&&(0,Ee.jsx)(el,{})]})},xc=function(){var e=Qs(),t=le((function(e){return e.routes.checkboxTravel}));return(0,Ee.jsx)(Ee.Fragment,{children:t&&e.map((function(e,t){return(0,Ee.jsx)("div",{className:"marker-travel",children:(0,Ee.jsx)(_c,{id:e.id,name:e.title,typeLocation:e.typeLocation,image:e.image,imageDesc:e.imageDesc,location:e.location})},t)}))})},bc=n(4829),wc=n.n(bc),kc=n(5483);function Tc(){var t=(0,e.useState)({latitude:16.06045710530602,longitude:108.2097851153426,zoom:14,customAttribution:"buisonthai"}),n=(0,o.Z)(t,2),r=n[0],i=n[1],s=Ka(),l=Qs(),u=le((function(e){return e.routes.idBusStop}));(0,e.useEffect)((function(){var e=s.filter((function(e){return e.id===u})).map((function(e){return{latitude:e.location.lat,longitude:e.location.lng,zoom:16}}))[0];i(e)}),[u,s]);var c=le((function(e){return e.routes.idTravel}));(0,e.useEffect)((function(){var e=l.filter((function(e){return e.id===c})).map((function(e){return{latitude:e.location.lat,longitude:e.location.lng,zoom:16}}))[0];i(e)}),[c,l]);var h=le((function(e){return e.routes.direction}));(0,e.useEffect)((function(){null!==h&&void 0!==h&&h.location[0]&&d.current.flyTo({center:[h.location[0],h.location[1]]})}),[h]);var d=(0,e.useRef)(null),f=(0,e.useCallback)((function(e){if(null!==e){d.current=e;var t=e,n=new(wc());t.addControl(n)}}),[]);return(0,Ee.jsxs)(P,a(a({},r),{},{style:{width:"100vw",height:"100vh"},mapStyle:"mapbox://styles/mapbox/streets-v11",onMove:function(e){return i(e.viewport)},mapboxAccessToken:Ku,ref:f,children:[(0,Ee.jsx)(dc,{}),(0,Ee.jsx)(Ce,{}),(0,Ee.jsx)(qo,{}),(0,Ee.jsx)(xc,{}),(0,Ee.jsx)(G,{position:"bottom-right"}),(0,Ee.jsx)(V,{position:"bottom-right"}),(0,Ee.jsx)(U,{data:{positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0},onGeolocate:function(e){return console.log(e.target._map._markers[0]._lngLat)},position:"bottom-right"})]}))}n.n(kc)().workerClass=n(9437).Z;var Sc=function(){return(0,Ee.jsx)("div",{className:"App",children:(0,Ee.jsx)(Tc,{})})},Ec=function(e){var t,n=Da(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,s=void 0===o?n():o,l=r.devTools,u=void 0===l||l,c=r.preloadedState,h=void 0===c?void 0:c,d=r.enhancers,f=void 0===d?void 0:d;if("function"===typeof a)t=a;else{if(!Ia(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=ya(a)}var p=s;"function"===typeof p&&(p=p(n));var m=xa.apply(void 0,p),v=_a;u&&(v=Pa(Ba({trace:!1},"object"===typeof u&&u)));var g=[m];return Array.isArray(f)?g=Sa([m],f):"function"===typeof f&&(g=f(g)),ga(t,h,v.apply(void 0,g))}({reducer:{routes:Zo,form:Ha}}),Cc=Ec;t.createRoot(document.getElementById("root")).render((0,Ee.jsx)(e.StrictMode,{children:(0,Ee.jsx)(pe,{store:Cc,children:(0,Ee.jsx)(Sc,{})})}))}()}();
//# sourceMappingURL=main.56f9ec34.js.map